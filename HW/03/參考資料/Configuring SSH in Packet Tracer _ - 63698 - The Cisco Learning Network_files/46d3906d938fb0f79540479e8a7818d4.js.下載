// This file was automatically generated from prevent.soy.
// Please don't edit this file by hand.

goog.provide('cln.premium.prevent.doubleclick');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.resourceInlineJs');


cln.premium.prevent.doubleclick = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t');
  jive.shared.soy.resourceInlineJs({code: 'var preloadspinner = new Image(); preloadspinner.src = "/themes/cln/images/spinner.gif"; $j(\'.start-trial\') .click(function(event) {var $wrapper = $j(document.createElement(\'div\')); var modalHtml = \'<div class="jive-modal-ciscovideomacro" style="padding: 20px; width: 470px"> \\<h2 style="font-size: 3em; margin-bottom: 10px">One moment <img style="float: right" src="/themes/cln/images/spinner.gif" width="64" height="64"></h2> \\<p style="font-size: 2em">Activating your Premium Trial</p> \\</div>\'; $wrapper.html(modalHtml); $wrapper.lightbox_me({closeSelector: ".dummy", closeClick: false, closeEsc: false, hijackScrolling: false, centered: true, overlayCSS: {background: \'black\', opacity: .3, width: $j(document).width()}});});'}, output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from followup.soy.
// Please don't edit this file by hand.

goog.provide('cisco.user.survey.followup.learning.inbox');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


cisco.user.survey.followup.learning.inbox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<link rel="stylesheet" href="/plugins/cln-sso-plugin/resources/styles/followup.css" type="text/css" /><div class="learning-entry"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="600" border="0" cellspacing="0" cellpadding="0" align="center" class="main_table"><tr><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr></tr><tr><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td class="hide">&nbsp;</td><td align="right" width="100" valign="top"><table width="100" border="0" cellspacing="0" cellpadding="0" align="right"><tr><td height="26">&nbsp;</td></tr><tr></tr></table></td></tr></table></td></tr><tr><td height="1" style="font-size:1px; line-height:1px;" bgcolor="#cbcbcb"></td></tr><tr><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="1" style="font-size:0px; line-height:0px;" bgcolor="#cbcbcb"><img src="http://msp.elateral.com/Studio/HTMLEmailImages/border-gray.gif" width="1" border="0" style="display:block;"></td><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td><img src="https://learningcontent.cisco.com/cln_storage/static/CLN_EmailBanner_01b.jpg" width="100%" alt="CISCO" border="0" style="display:block;"/></td></tr><tr><td height="30" class="spc" style="font-size:0px; line-height:0px;">&nbsp;</td></tr><tr><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td width="30" class="aside">&nbsp;</td><td><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:14px; color:#58585b;">Dear ', (opt_data.data.firstName || opt_data.data.lastName) ? soy.$$escapeHtml(opt_data.data.firstName) + ' ' + soy.$$escapeHtml(opt_data.data.lastName) : (opt_data.data.recipient && opt_data.data.recipient.displayName) ? soy.$$escapeHtml(opt_data.data.recipient.displayName) : 'user', ',</td></tr><tr><td height="4" style="font-size:0px; line-height:0px;" class="spc">&nbsp;</td></tr><tr><td height="4" style="font-size:0px; line-height:0px;" class="spc">&nbsp;</td></tr><tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:17px; color:#58585b;">', (opt_data.data.welcome) ? soy.$$filterNoAutoescape(opt_data.data.welcome) : 'Welcome to the Cisco Learning Network. The Cisco Learning Network is a social learning community focused on IT networking technologies. Our mission is to provide learning tools, IT training resources, and industry guidance to anyone interested in building an IT career through Cisco certifications and lifelong learning.', '</td></tr><tr><td height="15" style="font-size:0px;">&nbsp;</td></tr><tr><td height="15" style="font-size:0px;" class="spc">&nbsp;</td></tr>', (opt_data.data.relevantContent1) ? '<tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:18px; line-height:17px; color:#58585b;">' + soy.$$filterNoAutoescape(opt_data.data.relevantContent1) + '</td></tr>' : '<tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:17px; color:#58585b;">The Cisco Learning Network is a powerful resource for helping you achieve your IT career goals. Please visit our Getting Started Guide and unlock your learning today.</td></tr><tr><td height="15">&nbsp;</td><tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:17px;"><a href="https://learningnetwork.cisco.com/community/help/getting_started_guide">Getting Started Guide</a></td></tr><tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:17px;"><a href="https://learningnetwork.cisco.com/content?filterID=all~objecttype~objecttype%5Bthread%5D">Join or start a new discussion</a></td></tr><tr><td height="15">&nbsp;</td><tr>', '<tr><td height="3" style="font-size:0px; line-height:0px;">&nbsp;</td></tr><tr><td height="3" style="font-size:0px; line-height:0px;">&nbsp;</td></tr>', (opt_data.data.relevantContent2) ? '<tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:18px; line-height:17px; color:#58585b;">' + soy.$$filterNoAutoescape(opt_data.data.relevantContent2) + '</td></tr>' : '', '<tr><td height="3" style="font-size:0px; line-height:0px;">&nbsp;</td></tr>', (opt_data.data.footer) ? soy.$$filterNoAutoescape(opt_data.data.footer) : '<tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:18px; color:#58585b;">We hope you find the site useful for your Cisco certification and lifelong learning goals.</td></tr><tr><td height="30" class="spc">&nbsp;</td></tr><tr><td style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:18px; color:#58585b;">Sincerely,<br/>Cisco Learning Network Team</td></tr><tr><td height="20" style="font-size:0px; line-height:0px;" class="spc">&nbsp;</td></tr>', '<tr><td align="center" style="font-family:Arial, Helvetica, sans-serif; font-size:14px; line-height:28px; color:#58585b;">Follow Cisco Learning Network and Join the Conversation</td></tr><tr><td><table width="120" border="0" cellspacing="0" cellpadding="0" align="center"><tr><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="http://www.linkedin.com/company/cisco" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/linkedin-16x16.png" width="16" height="16"  alt="LinkedIn" border="0" style="display:block;"/></a></td><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="https://www.facebook.com/Cisco" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/facebook-16x16.png" width="16" height="16"  alt="Facebook" border="0" style="display:block;"/></a></td><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="https://twitter.com/cisco" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/twitter-16x16.png" width="16" height="16"  alt="Twitter" border="0" style="display:block;"/></a></td><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="http://www.youtube.com/user/Cisco/welcome" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/youtube-16x16.png" width="16" height="16"  alt="YouTube" border="0" style="display:block;"/></a></td><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="https://plus.google.com/+CiscoSystems/" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/google-16x16.png" width="16" height="16"  alt="Google+" border="0" style="display:block;"/></a></td><td width="20" align="left" valign="middle" style="font-size:0px; line-height:0px;"><a href="http://www.pinterest.com/ciscosystems/" target="_blank"><img src="http://www.cisco.com/assets/responsive_templates/newsletter/version_5/pinterest-16x16.png" width="16" height="16"  alt="Pinterest" border="0" style="display:block;"/></a></td></tr></table></td></tr><tr><td height="18" style="font-size:0px; line-height:0px;" class="spc">&nbsp;</td></tr></table></td><td width="30" class="aside">&nbsp;</td></tr></table></td></tr></table></td><td width="1" style="font-size:0px; line-height:0px;" bgcolor="#cbcbcb"><img src="http://msp.elateral.com/Studio/HTMLEmailImages/border-gray.gif" width="1" border="0" style="display:block;"></td></tr></table></td></tr><tr><td height="1" style="font-size:1px; line-height:1px;" bgcolor="#cbcbcb"></td></tr></table></td></tr><tr><td height="10" style="font-size:0px; line-height:0px;">&nbsp;</td></tr><tr><td><table width="575" border="0" cellspacing="0" cellpadding="0" align="center" class="wrapper"><tr><td><table width="250" border="0" cellspacing="0" cellpadding="0" align="left" class="wrapper"><tr><td class="text" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#58585b;"><span class="number2" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#58585b;">Â© 2017 Cisco  and/or its affiliates.</span></td></tr></table><table width="220" border="0" cellspacing="0" cellpadding="0" align="right" class="wrapper"><tr><td><table width="220" border="0" cellspacing="0" cellpadding="0" align="center"><tr><td class="padding_top" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#049fd9; "><div align="right"><a href="http://www.cisco.com" target="_blank" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#049fd9; text-decoration:none;">Cisco.com</a> | <a href="http://www.cisco.com/en/US/swassets/sw293/privacy_statement.html" target="_blank" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#049fd9; text-decoration:none;">Privacy Statement</a> | <a href="http://www.cisco.com/en/US/swassets/sw293/trademark_statement.html" target="_blank" style="font-family:Arial, Helvetica, sans-serif; font-size:10px; line-height:14px; color:#049fd9; text-decoration:none;">Trademarks</a></div></td></tr></table></td></tr></table></td></tr></table></td></tr><tr><td height="15" style="font-size:0px; line-height:0px;">&nbsp;</td></tr></table></td></tr></table></td></tr></table></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from attendance.soy.
// Please don't edit this file by hand.

goog.provide('jive.event.attendance.allAttendees');
goog.provide('jive.event.attendance.attendee');
goog.provide('jive.event.attendance.attendees');
goog.provide('jive.event.attendance.attendeesList');
goog.provide('jive.event.attendance.attendeesSmall');
goog.provide('jive.event.attendance.display');
goog.provide('jive.event.attendance.displaySmall');
goog.provide('jive.event.attendance.displayUserRow');
goog.provide('jive.event.attendance.renderUserRows');
goog.provide('jive.event.attendance.renderUserTable');
goog.provide('jive.event.attendance.rsvpButton');
goog.provide('jive.event.attendance.userLink');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.event.attendance.display = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="event-rsvp">');
  jive.event.attendance.rsvpButton(opt_data.event.attendance, output);
  jive.event.attendance.attendees(soy.$$augmentMap(opt_data.event.attendance, {maxAttendees: opt_data.event.maxAttendees, currentUserID: opt_data.currentUserID}), output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.displaySmall = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.event.attendance.rsvpButton(opt_data.event.attendance, output);
  jive.event.attendance.attendeesSmall(soy.$$augmentMap(opt_data.event.attendance, {maxAttendees: opt_data.event.maxAttendees}), output);
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.rsvpButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-event-rsvp">', (! opt_data.ended) ? (opt_data.canAttend || opt_data.response == opt_data.yesStatus) ? (opt_data.response == 0) ? '<a class="j-btn-global' + ((! opt_data.canAttend || opt_data.ended) ? ' j-btn-global-disabled' : '') + '" id="event-rsvp-link" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.response.text'),[])) + '</a>' : '<span class="jive-event-rsvp-status">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.response.' + opt_data.response + '.text'),[])) + ' <a id="event-rsvp-link" class="event-rsvp-change-link" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.change.link'),[])) + '</a></span>' : '<div id="jive-event-norsvp" ' + ((opt_data.rsvpRejected) ? 'class="jive-event-rsvp-error"' : '') + '>' + ((opt_data.anonymous) ? '<p><a href="login.jspa">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendance.logged_out.text'),[])) + '</a></p>' : (opt_data.containerAllowsAttendance == false) ? (opt_data.canJoinGroupToContribute) ? '<p><a class="jive-link-joinSocialGroup" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendance.join.text'),[])) + '</a></p>' : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendance.readonly.text'),[])) + '</p>' : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.cannotAttendReason),[])) + '</p><p id="jive-event-norsvp-reason">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendance.cannotattend.text'),[])) + '</p>') + '</div>' : '<div id="jive-event-norsvp"><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendance.ended.text'),[])) + '</p></div>', '</div><div class="jive-event-rsvp-choices" id="event-rsvp-choices" style="display:none"><ul><li class="jive-event-rsvp', (opt_data.response == opt_data.yesStatus) ? '-selected' : '', '">', (opt_data.response == opt_data.yesStatus) ? '<span class="jive-icon-med jive-icon-check"></span>' : '', ' <a id="event-rsvp-yes" class="jive-event-rsvp-choice" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendee.status.yes.label'),[])), '</a></li><li class="jive-event-rsvp', (opt_data.response == opt_data.noStatus) ? '-selected' : '', '">', (opt_data.response == opt_data.noStatus) ? '<span class="jive-icon-med jive-icon-check"></span>' : '', ' <a id="event-rsvp-no" class="jive-event-rsvp-choice" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendee.status.no.label'),[])), '</a></li><li class="jive-event-rsvp', (opt_data.response == opt_data.maybeStatus) ? '-selected' : '', '">', (opt_data.response == opt_data.maybeStatus) ? '<span class="jive-icon-med jive-icon-check"></span>' : '', ' <a id="event-rsvp-maybe" class="jive-event-rsvp-choice" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendee.status.maybe.label'),[])), '</a></li></ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.attendeesSmall = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-event-attendees-summary"><ul class="jive-event-values"><li><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendees.attending.title'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</h4><span>', soy.$$escapeHtml(opt_data.yesAttendees.count), (opt_data.capped) ? ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.of'),[])) + ' ' + soy.$$escapeHtml(opt_data.maxAttendees) : '', '</span></li></ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.attendees = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jive-event-attendees-container" class="jive-event-attendees">');
  jive.event.attendance.attendeesList(soy.$$augmentMap(opt_data.yesAttendees, {type: 'attending', currentUserID: opt_data.currentUserID, displayCap: opt_data.capped, maxAttendees: opt_data.maxAttendees, status: opt_data.yesStatus}), output);
  jive.event.attendance.attendeesList(soy.$$augmentMap(opt_data.noAttendees, {type: 'notattending', currentUserID: opt_data.currentUserID, displayCap: false, status: opt_data.noStatus}), output);
  jive.event.attendance.attendeesList(soy.$$augmentMap(opt_data.maybeAttendees, {type: 'tentative', currentUserID: opt_data.currentUserID, displayCap: false, status: opt_data.maybeStatus}), output);
  if (opt_data.canAttend) {
    jive.event.attendance.attendeesList(soy.$$augmentMap(opt_data.unansweredInvitees, {type: 'awaiting', currentUserID: opt_data.currentUserID, displayCap: false, status: 0}), output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.attendeesList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-event-attendee-list-container" id="event-attendees-', soy.$$escapeHtml(opt_data.type), '"><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendees.' + opt_data.type + '.title'),[])), ' ', (opt_data.displayCap) ? '(' + soy.$$escapeHtml(opt_data.count) + ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.of'),[])) + ' ' + soy.$$escapeHtml(opt_data.maxAttendees) + ')' : (opt_data.count > 0) ? '(' + soy.$$escapeHtml(opt_data.count) + ')' : '', ' ', (opt_data.moreAvailable) ? '<a class="see-all-' + soy.$$escapeHtml(opt_data.type) + '-attendees-link" data_type="' + soy.$$escapeHtml(opt_data.type) + '" data_status="' + soy.$$escapeHtml(opt_data.status) + '" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendees.see_all.link'),[])) + '</a>' : '', '</h2><ul class="jive-event-attendee-list', (opt_data.count == 0) ? '-empty' : '', ' j-rc4 clearfix">');
  if (opt_data.count > 0) {
    var userList176 = opt_data.users;
    var userListLen176 = userList176.length;
    for (var userIndex176 = 0; userIndex176 < userListLen176; userIndex176++) {
      var userData176 = userList176[userIndex176];
      jive.event.attendance.attendee({user: userData176, currentUserID: opt_data.currentUserID}, output);
    }
  } else {
    output.append('<li class="jive-event-attendee-none">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendees.' + opt_data.type + '.none.text'),[])), '</li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.attendee = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="jive-event-attendee clearfix"><div>');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user, {size: 26, visible: opt_data.user.jive.visible, anonymous: false, hideLink: false, enabled: opt_data.user.jive.enabled, username: opt_data.user.jive.username}), output);
  jive.event.attendance.userLink(opt_data, output);
  output.append('</div></li>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.allAttendees = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-people-list-modal" id="jive-event-attendees-modal" data-you-id="', soy.$$escapeHtml(opt_data.youID), '"><header><h2 class="jive-modal-title">', soy.$$escapeHtml(opt_data.attendees.totalResults), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.attendees.' + opt_data.status + '.title'),[])), '</h2></header><a class="j-modal-close-top jive-close close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem"></span></a><section id="modal-attendees-container" class="jive-modal-content clearfix">');
  jive.event.attendance.renderUserTable(soy.$$augmentMap(opt_data, {currentUserID: opt_data.youID, users: opt_data.attendees}), output);
  output.append('</section></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.renderUserTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table id="modal-attendees" class="attendees-list"><tbody>');
  jive.event.attendance.renderUserRows(opt_data, output);
  output.append('</tbody></table>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.renderUserRows = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var userList216 = opt_data.users.list;
  var userListLen216 = userList216.length;
  for (var userIndex216 = 0; userIndex216 < userListLen216; userIndex216++) {
    var userData216 = userList216[userIndex216];
    jive.event.attendance.displayUserRow({user: userData216, currentUserID: opt_data.currentUserID}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.displayUserRow = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr><td class="j-td-avatar">');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user, {size: 35, visible: opt_data.user.jive.visible, anonymous: false, hideLink: false, enabled: opt_data.user.jive.enabled, username: opt_data.user.jive.username}), output);
  output.append('</td><td class="j-td-name">');
  jive.event.attendance.userLink(opt_data, output);
  output.append('</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.event.attendance.userLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.currentUserID == opt_data.user.id) {
    output.append('<a class="jive-username-link" href="', soy.$$escapeHtml(opt_data.user.resources.html.ref), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.atendee.you'),[])), '</a>');
  } else {
    jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.user, {visible: true, username: opt_data.user.jive.username, anonymous: false, displayName: opt_data.user.displayName}), output);
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from event-calendar.soy.
// Please don't edit this file by hand.

goog.provide('jive.event.calendar.display');
goog.provide('jive.event.calendar.large');
goog.provide('jive.event.calendar.main');
goog.provide('jive.event.calendar.moveConfirmation');
goog.provide('jive.event.calendar.place');
goog.provide('jive.event.calendar.profile');
goog.provide('jive.event.calendar.profileCalendarLink');
goog.provide('jive.event.calendar.resizeConfirmation');
goog.provide('jive.event.calendar.small');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.people.profile.decorator');
goog.require('jive.people.profile.header');
goog.require('jive.place.head');
goog.require('jive.place.header');
goog.require('jive.shared.soy.resourceInlineJs');


jive.event.calendar.display = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.size == 'LARGE') {
    jive.event.calendar.large(opt_data, output);
  } else {
    jive.event.calendar.small(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.profile = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.event.calendar.large({userID: opt_data.userID, recursive: false, monthDayFormat: opt_data.monthDayFormat, canCreateEvents: opt_data.canCreateEvents, display24hrClock: opt_data.display24hrClock, monthYearFormat: opt_data.monthYearFormat}, output);
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.small = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: '$j(document).ready(function() {$j.ajax({url: \'get-monthly-events-list.jspa\', data: {container: \'' + soy.$$escapeHtml(opt_data.containerID) + '\', containerType: \'' + soy.$$escapeHtml(opt_data.containerType) + '\', recursive: \'' + soy.$$escapeHtml(opt_data.recursive) + '\'}, success: function(data) {$j(\'#event-list-' + soy.$$escapeHtml(opt_data.widgetID) + '\').html(data);}});});'}, output);
  output.append('<div id="event-list-', soy.$$escapeHtml(opt_data.widgetID), '"></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.large = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<link rel="stylesheet" type="text/css" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','plugins/event-type-plugin/resources/styles/fullcalendar.css')), '" />');
  jive.shared.soy.resourceInlineJs({code: '$j(document).ready(function() {var calendar = new jive.EventCalendarApp.Main({' + ((opt_data.userID) ? 'userID: ' + soy.$$escapeHtml(opt_data.userID) + ',' : 'containerID: ' + soy.$$escapeHtml(opt_data.containerID) + ', containerType: ' + soy.$$escapeHtml(opt_data.containerType) + ',') + 'recursive: ' + soy.$$escapeHtml(opt_data.recursive) + ', monthDayFormat: \'' + soy.$$escapeHtml(opt_data.monthDayFormat) + '\', canCreateEvents: ' + soy.$$escapeHtml(opt_data.canCreateEvents) + ', display24hrClock: ' + soy.$$escapeHtml(opt_data.display24hrClock) + ', monthYearFormat : \'' + soy.$$escapeHtml(opt_data.monthYearFormat) + '\', i18n: {buttons: {today: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.buttons.today.text'),[])) + '\', month: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.buttons.month.text'),[])) + '\', week: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.buttons.week.text'),[])) + '\', day: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.buttons.day.text'),[])) + '\'}, months: {january: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.january.text'),[])) + '\', february: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.february.text'),[])) + '\', march: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.march.text'),[])) + '\', april: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.april.text'),[])) + '\', may: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.may.text'),[])) + '\', june: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.june.text'),[])) + '\', july: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.july.text'),[])) + '\', august: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.august.text'),[])) + '\', september: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.september.text'),[])) + '\', october: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.october.text'),[])) + '\', november: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.november.text'),[])) + '\', december: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.december.text'),[])) + '\'}, monthsShort: {january: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.january.text'),[])) + '\', february: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.february.text'),[])) + '\', march: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.march.text'),[])) + '\', april: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.april.text'),[])) + '\', may: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.may.text'),[])) + '\', june: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.june.text'),[])) + '\', july: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.july.text'),[])) + '\', august: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.august.text'),[])) + '\', september: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.september.text'),[])) + '\', october: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.october.text'),[])) + '\', november: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.november.text'),[])) + '\', december: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.months.short.december.text'),[])) + '\'}, days: {sunday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.sunday.text'),[])) + '\', monday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.monday.text'),[])) + '\', tuesday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.tuesday.text'),[])) + '\', wednesday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.wednesday.text'),[])) + '\', thursday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.thursday.text'),[])) + '\', friday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.friday.text'),[])) + '\', saturday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.saturday.text'),[])) + '\'}, daysShort: {sunday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.sunday.text'),[])) + '\', monday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.monday.text'),[])) + '\', tuesday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.tuesday.text'),[])) + '\', wednesday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.wednesday.text'),[])) + '\', thursday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.thursday.text'),[])) + '\', friday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.friday.text'),[])) + '\', saturday: \'' + soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.days.short.saturday.text'),[])) + '\'}}});});'}, output);
  output.append('<div id="event-calendar"></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.moveConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal" id="event-calendar-confirm"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_reschedule.title'),[])), '</h2></header><section class="jive-modal-content clearfix"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_reschedule.text'),[])), '<p><ul><li><a id="event-calendar-confirm-fullday" class="close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_reschedule.fullday.link'),[])), '</a></li><li><a id="event-calendar-confirm-asis" class="close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_reschedule.asis.link'),[])), '</a></li><li><a id="event-calendar-confirm-cancel" class="close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '</a></li></ul></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.resizeConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal" id="event-calendar-confirm"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_resize.title'),[])), '</h2></header><section class="jive-modal-content clearfix"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.calendar.confirm_resize.text'),[])), '<p><ul><li><a id="event-calendar-confirm-continue" class="close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.yes'),[])), '</a></li><li><a id="event-calendar-confirm-cancel" class="close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.no'),[])), '</a></li></ul></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.place = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<head>');
  jive.place.head(soy.$$augmentMap(opt_data, {initEditLink: false}), output);
  output.append('</head><body class="j-body-place calendar">');
  jive.place.header(opt_data, output);
  output.append('<div class="j-layout j-layout-l j-contained j-contained-tabs j-contained-tabs-place j-rc4 clearfix"><div class="j-column-wrap-l"><div class="j-column j-column-l">');
  jive.event.calendar.large(opt_data, output);
  output.append('</div></div></div></body>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.profileCalendarLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/profile-calendar.jspa')), '?userID=', soy.$$escapeHtml(opt_data.userID), '" id="navCalendar" class="j-refind-btn" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.tab.calendar'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.tab.calendar'),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.event.calendar.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param241 = new soy.StringBuilder();
  jive.people.profile.header(opt_data, param241);
  jive.event.calendar.profile(opt_data.calendarViewBean, param241);
  jive.people.profile.decorator(soy.$$augmentMap(opt_data, {bodyClass: '', bodyContent: param241.toString()}), output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from invite.soy.
// Please don't edit this file by hand.

goog.provide('jive.invite.create');
goog.provide('jive.invite.error');
goog.provide('jive.invite.errors');
goog.provide('jive.invite.jsInit');
goog.provide('jive.invite.maxInvitationsError');
goog.provide('jive.invite.requiredRecipientsError');
goog.provide('jive.invite.status');
goog.provide('jive.invite.success');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.UserPicker.soy.inputPlaceholder');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.resourceInlineJs');


jive.invite.create = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal jive-modal-invite j-pop" id="jive-modal-invite"><header><h2>');
  if (opt_data.container.type == 'socialgroup' || opt_data.container.type == 'project') {
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.systemInvite && opt_data.trial) ? 'send.invite.system.trial.text' : 'send.invite.text', arg0: soy.$$escapeHtml(opt_data.container.name), noAutoEscape: true}, output);
  } else {
    output.append((opt_data.systemInvite && opt_data.trial) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.trial.intro.text'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.friends.intro.text'),[])));
  }
  output.append('</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-invite-modal j-pop-main clearfix"><form action="" method="post" name="invitation" id="jive-invite-form" class="j-form"><input type="hidden" name="container.type" value="', soy.$$escapeHtmlAttribute(opt_data.container.type), '" /><input type="hidden" name="container.id" value="', soy.$$escapeHtmlAttribute(opt_data.container.id), '" /><!-- BEGIN invitee list display --><div class="j-form-row j-invitees js-invitees"><label for="invitees">', (opt_data.inviteUsers) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.users.noimport.label'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.nonusers.noimport.label'),[])), '<strong class="required" style="display:none;"> ', (opt_data.inviteEmail && ! opt_data.inviteUsers) ? '(' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.nonusers.required'),[])) + ')' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</strong></label><div class="ie-zindex-fix j-form-exp font-color-meta-light"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.examples'),[])), ' </strong>');
  jive.UserPicker.soy.inputPlaceholder({emailAllowed: opt_data.inviteEmail, userAllowed: opt_data.inviteUsers, domains: opt_data.domains, multiple: true}, output);
  output.append('</div><div class="j-user-input-typeahead js-user-typeahead"><label for="invitees" class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.examples'),[])), '</label><input type="text" id="invitees" name="invitees" class="invitees j-user-autocomplete j-autocomplete-input j-ui-elem" role="combobox" /></div><div class="ie-zindex-fix j-form-exp j-noimport">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.nonusers.noimport.explanation'),[])), '</div></div><!-- END invitee list --><!--BEGIN include a message + unmodifiable messages --><div class="j-form-row"><label for="jive-invite-message-content">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.note.text'),[])), '</label><div id="message-errors"></div><textarea name="message" rows="6" id="jive-invite-message-content" class="jive-form-textarea font-color-normal">', soy.$$filterNoAutoescape(opt_data.message), '</textarea></div><!--END include a message + unmodifiable messages --><div class="j-pop-row j-last"><input type="submit" name="method:execute" id="jive-invite-button" class="jive-form-button jive-form-button-submit j-btn-callout" onclick="isCancel = false;" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.send.button'),[])), '"/><input type="submit" name="method:cancel" class="close jive-form-button jive-form-button-cancel" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '"/></div></form></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.invite.error = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.error.users'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.invite.requiredRecipientsError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.invitees.missing'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.invite.maxInvitationsError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.maxInviteCount > 0 && opt_data.invitePeriodHours > 0) ? '<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-warn jive-icon-sml"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.limitations.text'),[opt_data.maxInviteCount,opt_data.invitePeriodHours])) + '</div></div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.invite.success = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', (opt_data.memberCount == 0) ? (opt_data.existingCount > 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.existing.plural.message'),[opt_data.existingCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.existing.only.message'),[])) : ((opt_data.memberCount > 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.plural.message'),[opt_data.containerName,opt_data.memberCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.singular.message'),[opt_data.containerName]))) + ((opt_data.existingCount > 0) ? ' ' + ((opt_data.existingCount > 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.existing.plural.message'),[opt_data.existingCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.success.existing.singular.message'),[]))) : ''), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.invite.status = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-invitee-status jive-icon-sml" style="display:none;"></span>');
  return opt_sb ? '' : output.toString();
};


jive.invite.errors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-invitee-errors" style="display:none;"></div>');
  return opt_sb ? '' : output.toString();
};


jive.invite.jsInit = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: 'require([\'apps/invitation/main\'], function(InviteMain) {var inviteApp = new InviteMain(' + soy.$$filterNoAutoescape(JSON.stringify((function() { var map = {}; var pairs = [['id', '' + opt_data.container_id], ['name', opt_data.container_name], ['type', '' + opt_data.container_type]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', \'' + soy.$$escapeJsString(opt_data.company) + '\',' + ((opt_data.domains != 'null') ? soy.$$filterNoAutoescape(opt_data.domains) : '[]') + ',' + soy.$$escapeHtml(opt_data.allowEmail) + ',' + soy.$$escapeHtml(opt_data.allowUsers) + ',' + soy.$$escapeHtml(opt_data.canInvitePartners) + ',' + soy.$$escapeHtml(opt_data.canInviteJustPartners) + ',' + soy.$$escapeHtml(opt_data.canInvitePreprovisioned) + ',' + soy.$$escapeHtml(opt_data.invitePreprovisionedDomainRestricted) + ',' + soy.$$escapeHtml(opt_data.maxInvite) + ',' + soy.$$escapeHtml(opt_data.invitePeriod) + ',' + ((opt_data.showNow) ? soy.$$escapeHtml(opt_data.showNow) : 'false') + ', \'' + soy.$$escapeJsString(opt_data.message) + '\',' + soy.$$escapeHtml(opt_data.trial) + ',' + ((opt_data.skillsEnabled) ? soy.$$escapeHtml(opt_data.skillsEnabled) : 'false') + ', \'' + soy.$$escapeJsString(opt_data.trigger) + '\', \'' + soy.$$escapeJsString(opt_data.trackingID) + '\' );});'}, output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from error.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.error.errors');
goog.provide('jive.shared.error.fieldError');
goog.provide('jive.shared.error.keyedFieldError');
goog.provide('jive.shared.error.localizedFieldError');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.error.errors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-form-field-errors"><ul>');
  var errorList4 = opt_data.errors;
  var errorListLen4 = errorList4.length;
  for (var errorIndex4 = 0; errorIndex4 < errorListLen4; errorIndex4++) {
    var errorData4 = errorList4[errorIndex4];
    if (errorData4.message) {
      output.append('<li>');
      jive.shared.error.localizedFieldError(errorData4, output);
      output.append('</li>');
    } else if (errorData4.textKey) {
      output.append('<li>');
      jive.shared.error.keyedFieldError(errorData4, output);
      output.append('</li>');
    }
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.shared.error.localizedFieldError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="jive-error-message">', soy.$$filterNoAutoescape(opt_data.message), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.shared.error.keyedFieldError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="jive-error-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.textKey),[opt_data.args])), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.shared.error.fieldError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-form-field-errors" style="display:none" data-field-name="', soy.$$escapeHtml(opt_data.name), '"></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("invite");jive.invite.InviteeView=jive.AbstractView.extend(function(a){this.init=function(c){this.content=$j(c);if(!this.$status){this.$status=$j(jive.invite.status());var b=this.content.find(".j-invitee-status");if(b.length){b.replaceWith(this.$status)}else{this.prepend(this.$status)}}if(!this.$errors){this.$errors=$j(jive.invite.errors())}};this.markSuccess=function(){this.$status.addClass("jive-glyph-check").append("Success");this.$status.show()};this.markError=function(){var b=this;var c=this.getContent();this.$status.addClass("jive-icon-redalert").append("Error");this.$status.show();this.addClass("list-item-error");this.$status.click(function(){if(!b.popover){var d=$j(this);b.$errors.popover({context:$j(this),putBack:true,returnPopover:true,destroyOnClose:false,container:c.closest(".j-modal"),onClose:function(){b.popover=false}});b.popover=true}})};this.addErrorMessage=function(b){this.$errors.append($j(jive.shared.error.localizedFieldError({message:b})))};this.reset=function(){this.$errors.empty();this.$status.empty();this.$status.removeClass("jive-glyph-check jive-icon-redalert").html("");this.removeClass("list-item-error")}});define("apps/invitation/views/invitee_view",function(){return jive.invite.InviteeView});
;
jive.namespace("invite");jive.invite.InviteView=jive.AbstractView.extend(function(b){this.init=function(k,d,g,s,r,t,p,q,o,n,l,f,h,e,m,j,c){this.invitees={};this.inviteeLists={};var i=this;this.params={message:a(h),container:k,inviteEmail:s,inviteUsers:r,canInvitePartners:t,canInviteJustPartners:p,canInvitePreprovisioned:q,invitePreprovisionedDomainRestricted:o,domains:g,companyName:d,maxInviteCount:n,invitePeriodHours:l,skillsEnabled:j,trial:e,systemInvite:(k==null||(k.id==1&&k.type=="community"))};this.onLoad=c;this.$trigger=$j(m||"#j-invite-button");this.$trigger.click(function(u){i.open();u.preventDefault()});if(f){this.$trigger.click()}};b.getSoyTemplate=jive.invite.create;this.open=function(){jive.locationState.pushState({invite:undefined});this.initialize();this.$template.lightbox_me({destroyOnClose:true,centered:true,closeFocusSelector:this.$trigger,onLoad:(this.onLoad?this.onLoad:$j.noop)})};this.close=function(){this.$template.trigger("close")};this.clearErrors=function(){for(var d in this.invitees){this.invitees[d].reset()}for(var c in this.inviteeLists){this.inviteeLists[c].reset()}};this.addErrorMessage=function(d,c,f){var e=this.getInviteeView(c,f);e.addErrorMessage(d)};this.reportComplete=function(d,c,f){var e=this.getInviteeView(d,f);if(c){e.markError()}else{e.markSuccess()}};this.startProgress=function(){this.showSpinner({inline:true,showLabel:false,context:this.getContent().find(".j-form-buttons")})};this.setProgress=function(c){if(c>=100){this.hideSpinner()}};b.getInviteeView=function(c,d){if(d){return this.inviteeLists[c]}else{return this.invitees[c]}};b.initialize=function(){this.invitees={};this.inviteeLists={};this.content=this.$template=$j(this.getSoyTemplate(this.params));var c=this;this.$form=this.$template.find("#jive-invite-form");this.autocomplete=new jive.UserPicker.Main({emailAllowed:this.params.inviteEmail,userAllowed:this.params.inviteUsers,valueIsUsername:this.params.inviteUsers,listAllowed:this.params.inviteUsers,canInvitePartners:this.params.canInvitePartners,canInviteJustPartners:this.params.canInviteJustPartners,canInvitePreprovisioned:this.params.canInvitePreprovisioned,invitePreprovisionedDomainRestricted:this.params.invitePreprovisionedDomainRestricted,domains:this.params.domains,multiple:true,trial:this.params.trial,maxSelectedCount:this.params.maxInviteCount,maxSelectedMessage:$j(jive.invite.maxInvitationsError(this.params)),selectionCallbacks:[this.updateInvitees],skillsEnabled:this.params.skillsEnabled,$input:this.$template.find("#invitees"),placeholder:" "});this.autocomplete.addListener("selectedUsersChanged",function(){c.$template.trigger("resize")});this.$form.submit(function(d){d.preventDefault();c.submit(this)})};b.submit=function(e){var d=this.autocomplete.getSelectedUsersAndLists();this.updateInvitees(this.$template,d.users,d.userlists);var f=this.getUsers();var c=this.getLists();if(f.length>0||this.listsHasUsers(c)){this.emit("submit",$j(e).find('textarea[name="message"]').val(),f,c)}else{$j(jive.invite.requiredRecipientsError()).message({style:"error"})}};b.listsHasUsers=function(d){var c=false;if(d.length>0){d.forEach(function(f,e){if(f.users.length>0){c=true}})}return c};b.getUsers=function(){var f=[];for(var d in this.invitees){var c={};c.identifier=d;var e=this.invitees[c.identifier].getContent();c.id=e.data("user-id");c.userName=e.attr("data-user-name");c.external=!!e.find("span.jive-icon-partner").length;f.push(c)}return f};b.getLists=function(){var c=[];for(var e in this.inviteeLists){var f={};f.identifier=e;var d=this.inviteeLists[f.identifier].getContent();f.users=[];d.find("a.jive-username-link").each(function(h,j){var i=$j(j);var g={};g.userName=i.attr("data-username");g.id=i.data("userid");f.users.push(g)});c.push(f)}return c};b.updateInvitees=function(e,f,c){var d=this;this.invitees={};this.inviteeLists={};f.forEach(function(g,h){var i=e.find('[data-user-name="'+g.username+'"]');d.invitees[g.username]=new jive.invite.InviteeView(i)});c.forEach(function(h,g){var i=e.find('[data-list-id="'+h.id+'"]');d.inviteeLists[h.id]=new jive.invite.InviteeView(i)})};function a(c){return c.replace(/\\n/g,"\r\n")}});define("apps/invitation/views/invite_view",function(){return jive.invite.InviteView});
;
jive.namespace("invite");define("apps/invitation/models/invite_source",["apps/shared/models/rest_service"],function(a){jive.invite.InviteSource=a.extend(function(b,c){b.resourceType="invite";this.init=function(d){c.init.call(this,d);this.fromQ=d.fromQ;this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v2/"+this.pluralizedResourceType+(d.trackingID?"?sr="+d.trackingID:"");this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT};this.showGenericSaveError=function(){this.displayError(this.errorSaving())};this.saveUrl=function(f){var d=c.saveUrl.call(this,f);var e=this.fromQ||$j.deparam.querystring().fromQ;if(e){return $j.param.querystring(d,{fromQuest:e})}else{return d}}});return jive.invite.InviteSource});
;
jive.namespace("invite");define("apps/invitation/main",["jquery"],function(a){return jive.oo.Class.extend(function(b){var c=jive.invite;this.init=function(m,f,j,v,u,w,s,t,r,q,n,i,k,h,l,o,x,p,e){var g=this;this.container=m;this.canInvitePartners=w;this.canInviteJustPartners=s;this.canInvitePreprovisioned=t;this.invitePreprovisionedDomainRestricted=r;this.source=new c.InviteSource({trackingID:x||null,fromQ:p||null});this.view=new c.InviteView(m,f,j,v,u,w,s,t,r,q,n,i,k,h,o,l,e);this.view.addListener("submit",function(z,A,y){g.processInvites(z,A,y)});this.hasErrors=false};b.processInvites=function(m,f,k){var h=this;var j=this.view;this.resetErrors();j.startProgress();var l=[];var i=f.length+k.length;var g=0;var e=0;f.forEach(function(p,r){if(-1==$j.inArray(p.userName,l)){l.push(p.userName);var n=false;var s=false;var q=p.identifier;var t=p.external;var o=d(h.container,m,_jive_effective_user_id,p);h.source.save(o).addErrback(function(w,v,u){if(v==4004){s=true}else{n=true;if(u!=400){h.source.showGenericSaveError()}h.addError(q,w,v)}}).always(function(){if(s){e++}else{g++}i--;h.completeTask(q,n);if(i==0){h.complete(g,e)}}).addCallback(function(){o.user.external=t;jive.switchboard.emit("invitation.create",o)})}else{i--}});k.forEach(function(q,p){var n=q.users.length;var r=false;var o=q.identifier;q.users.forEach(function(t,u){if(-1==$j.inArray(t.userName,l)){l.push(t.userName);var v=false;var s=d(h.container,m,_jive_effective_user_id,t);h.source.save(s).addErrback(function(y,x,w){if(x==4004){v=true}else{r=true;if(w!=400){h.source.showGenericSaveError()}h.addError(o,y,x,true)}}).always(function(){if(v){e++}else{g++}n--;if(n==0){i--;h.completeTask(o,r,true)}if(i==0){h.complete(g,e)}}).addCallback(function(){jive.switchboard.emit("invitation.create",s)})}else{n--;if(n==0){i--}}})})};function d(g,h,f,i){var e={};e.body=h;e.inviter={};e.inviter.id=f;e.user={};if(i.id>0){e.user.username=i.userName}else{e.email=i.userName}e.object={};e.object.objectType=g.type;e.object.id=g.id;return e}b.complete=function(e,f){this.view.setProgress(100);if(this.hasErrors){$j(jive.invite.error()).message({style:"error"})}else{$j(jive.invite.success({containerName:this.container.name,memberCount:e,existingCount:f})).message({style:"success"});this.view.close()}};b.resetErrors=function(){this.hasErrors=false;this.view.clearErrors()};b.addError=function(h,f,e,g){this.hasErrors=true;this.view.addErrorMessage(f,h,g)};b.completeTask=function(g,e,f){this.view.reportComplete(g,e,f)}})});
;
// This file was automatically generated from header.soy.
// Please don't edit this file by hand.

goog.provide('jive.integration.backgroundImage');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.integration.backgroundImage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<style class="headerStyle js-headerStyle">.j-body-place #jive-body .j-page-header {', (opt_data.bgType && opt_data.bgType != 'custom') ? 'background-image: url("' + soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','',opt_data.bgPresetImageUrl)) + '");' + ((opt_data.bgColor) ? 'background-color: ' + ((opt_data.bgColor == 'transparent') ? ' transparent ' : ' ' + ((opt_data.bgColor.indexOf('#') != -1) ? ' ' + soy.$$escapeHtml(opt_data.bgColor) + ' ' : ' #' + soy.$$escapeHtml(opt_data.bgColor) + ' ') + '  ') + ';' : '') : ((opt_data.bgCustomImageUrl) ? 'background-image : url("' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.bgCustomImageUrl)) + '");' : 'background-image: none;') + 'background-color: ' + ((opt_data.bgColor && opt_data.bgColor != 'null' && opt_data.bgColor != 'transparent') ? '  ' + ((opt_data.bgColor.indexOf('#') != -1) ? ' ' + soy.$$escapeHtml(opt_data.bgColor) + ' ' : ' #' + soy.$$escapeHtml(opt_data.bgColor) + ' ') + ' ' : ' transparent') + ';', (opt_data.bgRepeat != 'cover' && opt_data.bgRepeat != 'null') ? 'background-repeat: ' + soy.$$escapeHtml(opt_data.bgRepeat) + '; background-size: auto;' : 'background-size:cover;', (opt_data.bgPosition != 'null') ? 'background-position: ' + soy.$$escapeHtml(opt_data.bgPosition) + ';' : '', '}', (opt_data.textColor != null) ? '.j-placeHeaderInner, .j-placeTitle a.j-placeName {color: ' + ((opt_data.textColor.indexOf('#') != -1) ? ' ' + soy.$$escapeHtml(opt_data.textColor) + ' ' : ' #' + soy.$$escapeHtml(opt_data.textColor)) + ';}' : '.j-placeHeaderInner, .j-placeTitle a.j-placeName {color: #fff;}', '</style>');
  return opt_sb ? '' : output.toString();
};

;
function toggleVCardActionButtons(){var a=$j(":checkbox[name ='vCardObjectTypes'][checked]");if(a.length>0){$j("#vcard-download-button").prop("disabled",false);$j("#vcard-email-button").prop("disabled",false)}else{$j("#vcard-download-button").prop("disabled",true);$j("#vcard-email-button").prop("disabled",true)}}function downloadVCard(b){var a=constructVCardURL(b);if(a&&a.length>0){document.location.href=a}else{alert("You must select at least one content type.");return false}return false}function emailSingleVCard(a,b){$j(":checkbox[name ='vCardObjectTypes'][checked]").prop("checked",false);a.prop("checked",true);emailVCard(b);return false}function emailVCard(c){var a=constructVCardURL(c);if(a&&a.length>0){try{$j("#vcard-modal-results").load(a,null,function(){$j("#vcard-modal-prompt").hide();$j("#vcard-modal-results").show()})}catch(b){$j("#vcard-modal-prompt").hide();$j("#vcard-modal-results").html("There was an unexpected error.<br><br>"+b);$j("#vcard-modal-results").show()}}else{alert("You must select at least one content type.")}return false}function constructVCardURL(b){var d=$j(":checkbox[name ='vCardObjectTypes'][checked]");if(d.length>0){var a=b;for(var c=0;c<d.length;c++){a=a+((a.indexOf("?")>-1)?"&":"?")+"objectTypes="+d[c].value}return a}else{return""}};
;
jive.MenuView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(e,f,d){var c=this;this.template=typeof e=="function"?e:function(){return e};this.$control=b(f);this.$control.click(function(i){var h,g=b(this);if(g.data("menu")){g.data("menu").trigger("close")}else{h=c.template();h.popover(b.extend({context:g,onClose:function(){g.removeData("menu");c.emit("close")}},d||{}));g.data("menu",h);c.emit("open")}i.preventDefault()})};this.close=function(){this.$control.each(function(){var c=b(this);if(c.data("menu")){c.data("menu").trigger("close")}})}});define("apps/shared/views/menu_view",function(){return jive.MenuView});
;
// This file was automatically generated from autocomplete.soy.
// Please don't edit this file by hand.

goog.provide('jive.tags.autocomplete.completions');
goog.provide('jive.tags.autocomplete.popoverContent');
goog.provide('jive.tags.autocomplete.popularTags');
goog.provide('jive.tags.autocomplete.tagBadge');
goog.provide('jive.tags.autocomplete.tagCloud');
goog.provide('jive.tags.autocomplete.tagInput');
goog.provide('jive.tags.autocomplete.tagList');
goog.provide('jive.tags.autocomplete.tagListItem');
goog.provide('jive.tags.autocomplete.tags');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.tags.autocomplete.tags = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="', (opt_data.identifier) ? soy.$$escapeHtml(opt_data.identifier) : '', ' jive-compose-tags-form" class="j-tag-form"><label for="js-tag-input', (opt_data.identifier) ? ' ' + soy.$$escapeHtml(opt_data.identifier) : '', 'j">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('publishbar.tags.title'),[])), ' <span class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('publishbar.tags.desc'),[])), '</span></label>');
  jive.tags.autocomplete.tagInput(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.tagInput = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-tags"><ul><li class="j-tag-icon j-tag-input j-ui-elem" role="presentation"></li><li class="js-tag-entry j-tag-entry"><input type="text" data-is-not-create-field="', (opt_data.isNotCreateField) ? soy.$$escapeHtml(opt_data.isNotCreateField) : 'false', '" data-hide-prepopulated-tags="', (opt_data.hidePrepopulatedTags) ? soy.$$escapeHtml(opt_data.hidePrepopulatedTags) : 'false', '" data-hide-suggestions-on-init="', (opt_data.hideSuggestionsOnInit) ? soy.$$escapeHtml(opt_data.hideSuggestionsOnInit) : 'false', '" data-is-skill="', (opt_data.isSkill) ? soy.$$escapeHtml(opt_data.isSkill) : 'false', '" data-focus-on-load="', (opt_data.focusOnLoad) ? soy.$$escapeHtml(opt_data.focusOnLoad) : 'false', '" placeholder="', (opt_data.placeholder) ? soy.$$escapeHtml(opt_data.placeholder) : '', '" class=" js-tag-input', (opt_data.identifier) ? ' ' + soy.$$escapeHtml(opt_data.identifier) : '', '" value="" autocomplete="off" role="combobox" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tags.aria.label'),[])), '"/></li></ul></div><input type="hidden" class="js-hidden-tag-input" name="tags" value="', soy.$$filterNoAutoescape(opt_data.tags ? (opt_data.tags).replace(new RegExp('"', 'g'), '&quot;') : ''), '"/>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.tagBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class=\'js-tag j-tag j-btn-global\'><span class=\'js-tag-text j-tag-text\' >', soy.$$filterNoAutoescape(opt_data.tag), '</span><span class=\'remove\' role="presentation" aria-hidden="true">X</span></li>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.popoverContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.loading'),[])), '</p></div>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.popularTags = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-tags-suggestions j-tags-suggestions j-menu"><p class="j-actions font-color-meta">', (opt_data.skill) ? soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.typeahead.skills'),[])) : soy.$$filterNoAutoescape(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.typeahead'),[])), '</p><div class="j-autocomplete-nav clearfix"><span id="popular-tags-tab" data-tab-id=\'popular-tags\' class="', (! opt_data.active || opt_data.active == 'popular-tags') ? 'j-active' : '', ' js-tab"><a href="#">', (opt_data.skill) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.popular_skills'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.popular_tags'),[])), '</a></span>', (opt_data.yourTags && opt_data.yourTags.length > 0) ? '<span id="your-tags-tab" data-tab-id=\'your-tags\' class="' + ((opt_data.active == 'your-tags') ? 'j-active' : '') + ' js-tab"><a href="#">' + ((opt_data.skill) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.your_skills'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.your_tags'),[]))) + '</a></span>' : '', '</div>');
  jive.tags.autocomplete.tagList({tags: opt_data.popularTags, id: 'popular-tags', hidden: opt_data.active && opt_data.active != 'popular-tags', skill: opt_data.skill}, output);
  if (opt_data.yourTags && opt_data.yourTags.length > 0) {
    jive.tags.autocomplete.tagList({tags: opt_data.yourTags, id: 'your-tags', hidden: opt_data.active != 'your-tags', skill: opt_data.skill}, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.completions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-tags-completions j-tags-suggestions j-menu">');
  jive.tags.autocomplete.tagList(soy.$$augmentMap(opt_data, {id: 'tag-completions'}), output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.tagList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="js-suggestions j-autocomplete-results" ', (opt_data.id) ? 'id="' + opt_data.id + '"' : '', ' ', (opt_data.hidden) ? 'style="display:none"' : '', ' role="listbox">');
  if (opt_data.query) {
    jive.tags.autocomplete.tagListItem({tag: opt_data.query, create: true}, output);
  }
  var tagList144 = opt_data.tags;
  var tagListLen144 = tagList144.length;
  if (tagListLen144 > 0) {
    for (var tagIndex144 = 0; tagIndex144 < tagListLen144; tagIndex144++) {
      var tagData144 = tagList144[tagIndex144];
      jive.tags.autocomplete.tagListItem({tag: tagData144}, output);
    }
  } else {
    output.append((! opt_data.query) ? '<li class="font-color-meta" role="alert"><p class="j-empty">' + ((opt_data.skill) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('skills.search.empty'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tags.search.empty'),[]))) + '</p></li>' : '');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.tagListItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="js-suggestion" role="option"><a href="#" data-value="', soy.$$escapeHtml(opt_data.tag), '" class="quick">', (opt_data.create) ? '<span class="font-color-normal">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.create'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])) + ' </span>' : '', '<span class="jive-icon-tag jive-icon-med"></span>', soy.$$escapeHtml(opt_data.tag), '</a></li>');
  return opt_sb ? '' : output.toString();
};


jive.tags.autocomplete.tagCloud = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal jive-modal-medium"><header><h2>', (opt_data.placeName) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tags.top_tags_in'),[opt_data.maxCount,opt_data.placeName])) : (opt_data.skillList) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.top_skills_in_this_place'),[opt_data.maxCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.top_tags_in_this_place'),[opt_data.maxCount])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-modal-content-text clearfix">');
  if (opt_data.availableTags.length > 0) {
    output.append('<p>', (opt_data.skillList) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.skills_cloud_tip'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.cloud_tip'),[])), '</p><ul class="jive-tagcloud-list">');
    var tagList197 = opt_data.availableTags;
    var tagListLen197 = tagList197.length;
    for (var tagIndex197 = 0; tagIndex197 < tagListLen197; tagIndex197++) {
      var tagData197 = tagList197[tagIndex197];
      output.append('<li class="js-tag jive-tagset-popularity', soy.$$escapeHtml(tagData197.bucket), (opt_data.selectedTags.indexOf(tagData197.renderedTag) > -1) ? ' js-selected' : '', '" data-value="', soy.$$escapeHtml(tagData197.renderedTag), '"><a href="#" title="', (tagData197.count != 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tags.used_n_times.tooltip'),[tagData197.count])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tags.used_1_time.tooltip'),[])), '">', soy.$$escapeHtml(tagData197.renderedTag), '</a></li> ');
    }
    output.append('</ul><button class="close j-btn-callout">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.done'),[])), '</button>');
  } else {
    output.append('<p>', (opt_data.skillList) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.no_skills'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.filter.tag.no_popular_tags'),[])), '</p>');
  }
  output.append('</section></div>');
  return opt_sb ? '' : output.toString();
};

;
define("jive/fresh_action_queue",["jquery"],function(a){return function b(h){var d=[],i=[],c=[];if(typeof h==="undefined"){h=500}function f(o,n){var l=new a.Deferred();var m=g(d.length,n);d.push(o);i.push(new Date());c.push(n);function k(){if(e(o,n)){o.then(function(){l.resolve.apply(l,arguments)},function(){l.reject.apply(l,arguments)})}}o.then(k,k,function(){l.notify.apply(l,arguments)});if(h&&m){j(m.promise,m.time,m.group)}return l.promise()}function j(o,n,m){var l=new Date();var k=l-n;setTimeout(e.bind(null,o,m),Math.max(h-k,0))}function e(o,n){var p=d.lastIndexOf(o);var l=g(p,n);var k=d.length;var m;if(p>-1){if(l){d=d.slice(l.index+1);i=i.slice(l.index+1);c=c.slice(l.index+1)}m=k-d.length;d.splice(p-m,1);i.splice(p-m,1);c.splice(p-m,1);return o}}function g(m,l){for(var k=m-1;k>=0;k-=1){if(typeof l==="undefined"||c[k]!==l){return{index:k,promise:d[k],time:i[k],group:c[k]}}}}return{push:f}}});
;
(function(d){var f={typeAheadOptions:{keystrokeWait:400},popoverOptions:{focusPopover:false,onClose:d.noop,addClass:"j-autocomplete",setRole:"listbox"},processResults:h,parseSearchString:h,displayResults:l,displayEmptySearch:false,closeOnBlur:true,minChars:2,clearButton:d()};function h(m){return m}function l(n,m){d(n).popover(m);return m}function c(n,m){var o=this;n=d.extend(true,{},f,n);n.input=m;n.popoverOptions.context=m;var q=n.popoverOptions.onClose;n.popoverOptions.onClose=function(){m.trigger("closed");return q()};n.popoverOptions.returnPopover=true;if(!n.queryFunc){if(!n.querySource||!n.querySource.get){console.log("Error: missing querySource.get in options, and no queryFunc supplied",n)}n.queryFunc=function p(){return n.querySource.get.call(n.querySource,arguments)}}if(!n.template){console.log("Error: missing template in options",n)}this.options=n;m.prop("autocomplete","off").attr("aria-autocomplete","list").attr("aria-haspopup","true");if(!m.is("[role=combobox]")){console.log("Warning: adding combobox role to input",m.parent().get(0));m.attr("role","combobox")}this.lastSearchString=null;this.currentPopover=null;this.queue=new g();n.input.typeAhead(n.typeAheadOptions).on("keystroke.suggestBox",function(){o.showPopover();o.updateClearButton()}).on("focusWaitFinished.suggestBox",function(){o.showPopover()}).on("close.suggestBox",d.proxy(o.destroyPopover,o)).on("tabChanged.suggestBox",function(){o.currentPopover.reposition()}).on("otherClick.suggestBox",function(){jive.conc.nextTick(function(){o.currentPopover.reposition()})});if(n.closeOnBlur){n.input.on("blurWaitFinished.suggestBox",function(r){n.input.trigger("close")})}if(n.clearButton.length){d(n.clearButton).on("click.suggestBox",function(){n.input.val("");n.input.trigger("keystroke")});this.updateClearButton()}}c.prototype.updateClearButton=function k(){if(this.options.clearButton.length){if(this.options.input.val()){this.options.clearButton.show()}else{this.options.clearButton.hide()}}};c.prototype.displaySuggestions=function a(q){var n=d.extend({},this.options.popoverOptions);this.destroyPopover();if(!this.options.input.is(":visible")){return}n=this.options.displayResults(q,n,this.currentPopover);this.currentPopover=n;var p=this.currentPopover.popOver;if(!p.is("[role=listbox]")&&p.find("[role=listbox]").length===0){console.log("Warning: adding role 'listbox' to results container");p.attr("role","listbox")}var o=this.options.input.data("typeAhead");var m=o.getSelectable();if(m.length>0&&m.select("option, [role=option]").length===0&&m.parent("[role=option]").length===0){console.log("Warning: selectable elements are not options");m.attr("role","option")}o.setSuggestElement(p)};c.prototype.showPopover=function e(){var o=this,n=this.options;var m=n.parseSearchString(n.input.val());if(m==null||m.length<n.minChars){m="";if(!n.displayEmptySearch){return}}if(this.lastSearchString!=null&&this.lastSearchString==m){if(this.isPopoverShowing()){return}}this.lastSearchString=m;this.queue.push(n.queryFunc(m)).then(function(r){if(r&&r.trim){r=r.trim()}var s=n.processResults(r,n.input.data("typeAhead"),m);if(!s){o.destroyPopover()}else{var q=n.template(s);if(q&&q.length){o.displaySuggestions(q)}else{o.destroyPopover();console.log("suggestion html empty for results",r,s)}}},function p(){console.log("failed suggestBox query for '"+m+"'",arguments)})};c.prototype.destroyPopover=function j(m){if(this.currentPopover&&this.currentPopover.closeFunc){this.currentPopover.closeFunc()}this.currentPopover=null;if(m&&m.type==="close"){m.stopPropagation()}};c.prototype.isPopoverShowing=function b(){return this.currentPopover!=null};c.prototype.teardown=function i(){var m=this.options.input;this.destroyPopover();m.data("typeAhead").teardown();m.off(".suggestBox");m.removeData("suggestBox");this.options.clearButton.off(".suggestBox")};d.fn.suggestBox=function(m){return this.each(function(){var n=d(this);if(!n.data("suggestBox")){n.data("suggestBox",new c(m,n))}})};var g;require(["jive/fresh_action_queue"],function(m){g=m})})(jQuery);
;
jive.namespace("Tags");define("apps/tags/tags_controller",["jquery","underscore","apps/shared/views/tab_view","apps/tags/model/tag_input_model","apps/tags/model/tag_service","apps/tags/model/tag_suggestions","apps/tags/view/tag_cloud","apps/tags/view/tag_badges","soy!jive.tags.autocomplete.completions","soy!jive.tags.autocomplete.popularTags"],function(h,m,n,f,c,i,b,k,g,d){var a=",",l=55,e=100,j=/[^,]+$/;jive.Tags.Controller=jive.oo.Class.extend(function(q){jive.conc.observable(this);q.init=function(w,v){v=h.extend({},v);var u=this,y={max:10,containerType:v.containerType||17,containerID:v.containerID||1};v=v||{};if(v.objectTypes&&v.objectTypes.length>0){y.taggableTypes=v.objectTypes}if(v.addClass&&v.addClass.length>0){u.element.addClass(v.addClass)}u.element=h(w);u.singleTagInput=v.singleTagInput;u.hiddenElement=u.element.closest(".j-form").find(".js-hidden-tag-input");u.initialTags=u.hiddenElement.val().split(a);u.isSkills=u.element.data("isSkill");u.badgeElement=u.element.closest(".j-form").find(".j-tags");u.isNotCreateField=u.element.data("isNotCreateField");u.hidePrepopulatedTags=u.element.data("hidePrepopulatedTags");u.hideSuggestionsOnInit=u.element.data("hideSuggestionsOnInit");u.focusOnLoad=u.element.data("focusOnLoad");u.suggestions=new i();u.tagService=new c(y);u.tagBadges=new k(u.badgeElement);u.tagModel=new f({element:u.hiddenElement});u.tagCloud=new b(w,(this.element.closest(".j-browse-people").length>0));u.tagService.suppressGenericErrorMessages();u.userID=_jive_current_user.ID||"-1";if(this.userID!="-1"){this.yourTagParams={filterUserID:u.userID}}function x(A){function B(E){if(E){return E.map(function(F){return F.renderedTag})}return[]}function C(E){return m.chain(E).filter(function(F){return F.found}).pluck("name").value()}function z(E,H){var F=m.find(E,function(I){return !I.found}),G=m.isUndefined(F)&&m.some(E,function(I){return I.name==H});u.currentQueryIsProfane=false;if(G){return undefined}else{if(!m.isUndefined(F)){u.currentQueryIsProfane=F;return F.name}else{return H}}}if(typeof A=="string"&&A.trim().length){return u.suggestions.get(A.trim()).then(function(E){if(m.isUndefined(E)||m.isUndefined(E.tagSearchResult)){return{tags:[],query:A}}else{return{tags:C(E.tagSearchResult),query:z(E.tagSearchResult,A)}}})}var D={popularTags:u.tagService.findAll()};if(u.yourTagParams){D.yourTags=u.tagService.findAll(u.yourTagParams)}if(A&&A.length){D.yourTags=u.tagService.findAll({tags:A})}return jive.conc.synchronize(D).then(function(E){return{popularTags:B(E.popularTags),yourTags:B(E.yourTags)}})}u.element.suggestBox({displayEmptySearch:true,queryFunc:x,template:this.templateSwitcher,processResults:function(A,z,B){if(A.tags){if(u.isNotCreateField){A.query=undefined}A.tags=A.tags.unique()}else{var C=z.getActiveTab();if(C.length>0){A.active=C.data("tabId")}}if(u.isSkills){A.skill=true}return A},displayResults:function(A,z){if(u.element.val()!=""&&(!u.hideSuggestionsOnInit||u.startedTyping)&&!(u.isNotCreateField&&h(A).find(".j-empty").length>0)){m.extend(z,{context:u.element,container:h("#j-expertise-modal"),addClass:"j-tag-autocomplete j-autocomplete",align:"left",arrowOffset:15});var B=h(A).popover(z);new n(B,{activeClass:"j-active",tabSelector:".js-tab"});return z}}}).on("selectionChosen",this.onTagSelected.bind(u)).on("keydown",this.onKeydown.bind(u)).on("keyup",this.onKeyup.bind(u)).on("paste",function(){jive.conc.nextTick(o.bind(u,u.element));h(this).one("change",u.onChange.bind(u))}).focus(this.controllerHasFocus.bind(u,true,u)).on("blur blurWaitFinished",this.controllerHasFocus.bind(u,false,u)).on("tags.resizeInput",u.resizeInput.bind(u,u.element)).click(function(z){z.stopPropagation()});if(v.focusOnLoad){u.element.focus()}if(jive.onLoadEventComplete){this.createInitialTags()}else{h(window).on("load",this.createInitialTags.bind(u))}h(window).on("resize",u.resizeInput.bind(u,u.element));this.hiddenElement.on("change",this.createInitialTags.bind(u));this.element.parents(".j-tags").on("click",".remove",this.onClickRemoveBadge.bind(this)).on("click",function(){w.focus()});this.tagCloud.addListener("cloud",function(){var z=u.tagModel.getTags(),B={max:200},A=u.tagService.findAll(B);u.tagCloud.show(A,z,200).addCallback(function(C){if(z.join(a)!=C.join(a)){u.insertTags(C.join(a))}})});this.tagModel.addListener("tags.duplicate",function(z){var A=u.tagBadges.findExistingBadge(z);if(!A){u.emit("tags.duplicate",z)}});this.tagService.findAll();this.tagService.findAll(this.yourTagParams)};this.getElement=function(){return this.element};this.populate=function(){this.createInitialTags()};this.getTagsFromBadges=function(){return this.tagBadges.getTagsFromBadges()};this.getInputVal=function(){return this.element.val()};this.clear=function(){this.tagBadges.clear();this.clearInput(this.element)};this.insertTags=function(w,x){var u=this,v=m.isArray(w)?w:String(w).split(a);$j.each(v,function(A,y){var z=u.sanitizeTag(y);if(z.length==0){return}u.tagBadges.addBadge(z,u.tagModel.getTags(),x);if(u.tagModel.addTag(z)&&x){u.emitTagChange("add",z)}});this.resizeInput(this.element);if(u.singleTagInput){this.element.hide()}};this.teardown=function(){var u=this.element.data("suggestBox");this.element.off("selectionChosen").off("keydown").off("keyup").off("paste").off("focus").off("click").off("blur").off("blurWaitFinish");this.element.parents(".j-tags").off("click");this.tagModel.removeListener("tags.duplicate");this.hiddenElement.off("change");if(u){u.teardown()}};q.createInitialTags=function(){var u;if(this.hiddenElement.length!=0){this.resizeInput(this.element);if(!this.hidePrepopulatedTags){u=this.tagModel.getTags();if(!u||0==u.length){return}this.insertTags(u,false)}}};q.controllerHasFocus=function(v,u){var w=h(".j-tags");u.focused=v;w.addClass(v?"focus":"blur");w.removeClass(v?"blur":"focus");if(!v){u.tagBadges.blurBadge()}};q.clearInput=function(u){u.val("");u.trigger("close.suggestBox")};q.resizeInput=function(z){var u=7,v=this.element.closest("form").find(".j-tags").width(),y=m.reduce(this.element.closest("form").find(".j-tags li"),function(B,A){var E=h(A),C=h(A).outerWidth(true);if(E.hasClass("js-tag-entry")){return B}else{var D=B+C;if(D+e+u>=v){return 0}else{return B+C}}},0),x=Math.floor((v-y)-u),w=x<e?e:x;z.hide();z.width(w);z.show()};q.sanitizeTag=function(u){if(this.currentQueryIsProfane){u=this.currentQueryIsProfane.name}return u.trim().replace(/\s+/g," ").replace(/\//g,"").toLowerCase()};q.removeTagByBadge=function(v){var u=v.find(".js-tag-text").text();this.tagBadges.removeBadge(v);this.tagModel.deleteTag(u);this.emitTagChange("remove",u);if(this.singleTagInput){this.element.show();this.element.focus()}};q.emitTagChange=function(v,u){this.emit("tags.change",this.tagModel.getTags());this.emit("tags."+v,u)};q.onKeyup=function(v){var u=this.element.val();if(u.length>1&&u[u.length-1]===","){this.clearInput(this.element);this.insertTags(u,true)}};q.onKeydown=function(w){var u=this.element.val(),v=this;v.startedTyping=true;if(w.which&&s(w)&&u.length>0){this.clearInput(this.element);this.insertTags(u,true);if(!h.keyIs("tab",w.which)){w.preventDefault();jive.conc.nextTick(function(){v.element.focus()})}}else{if(w.which&&r(w,u)){var x=h(".js-tag.selected");if(x.length!=0){this.removeTagByBadge(x);this.element.focus()}else{this.tagBadges.focusBadge()}w.preventDefault();this.clearInput(this.element)}else{if(w.which&&t(w,u)){w.preventDefault()}else{if(p(w)){w.preventDefault()}else{this.tagBadges.blurBadge()}}}}};q.onChange=function(){var u=this.element.val();this.insertTags(u,true)};q.onClickRemoveBadge=function(v){var u=h(v.target).parent();this.removeTagByBadge(u)};q.onTagSelected=function(x,v,w){var u=w.find("a").data("value");this.insertTags(u,true);this.clearInput(this.element)};q.templateSwitcher=function(u){if(u.tags){return g(u)}return d(u)};function t(v,u){return(u.length>=l&&!(h.keyIs("backspace",v.which)||v.metaKey))}function s(u){return(h.keyIs("enter",u.which)||h.keyIs("tab",u.which))}function r(v,u){return(h.keyIs("backspace",v.which)&&u=="")}function p(u){return h.keyIs("forward_slash",u.which)}function o(v){var u=v.val().replace(/\//g,"");if(u.length>=l){v.val(u.substring(0,l))}}});return jive.Tags.Controller});
;
// This file was automatically generated from placepicker.soy.
// Please don't edit this file by hand.

goog.provide('jive.placepicker.browseContainers');
goog.provide('jive.placepicker.containerLink');
goog.provide('jive.placepicker.containerList');
goog.provide('jive.placepicker.containerListEntry');
goog.provide('jive.placepicker.containers');
goog.provide('jive.placepicker.moreContainers');
goog.provide('jive.placepicker.recentPlaces');
goog.provide('jive.placepicker.searchResults');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.i18nHelper');


jive.placepicker.containers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<nav class="j-nav-back"><p class="font-color-meta"><strong><span class="', (opt_data.upload && opt_data.selectedContentType.uploadLink) ? soy.$$escapeHtmlAttribute(opt_data.selectedContentType.uploadLink.iconCss) : soy.$$escapeHtmlAttribute(opt_data.selectedContentType.iconCss), ' jive-icon-med"></span>', (opt_data.upload && opt_data.selectedContentType.uploadLink) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.headingKey),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.headingKey),[])), '</strong>(<a href="#" class="back">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.select_different_type'),[])), '</a>)</p></nav><div role="search"><h4 class="font-color-meta">', (opt_data.upload && opt_data.selectedContentType.uploadLink) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.searchPlaceholderKey),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.searchPlaceholderKey),[])), '</h4><label for="container-filter-id" class="j-508-label">', (opt_data.upload && opt_data.selectedContentType.uploadLink) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.searchPlaceholderKey),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.searchPlaceholderKey),[])), '</label><input type="search" name="container-filter" id="container-filter-id" class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="j-places-list">');
  jive.placepicker.recentPlaces(opt_data, output);
  output.append('</div><a href="#" class="j-menu-quick-bottomlink">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.browse_places'),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.placepicker.recentPlaces = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.suggestCreatePersonalBlog) {
    output.append('<div class="j-places-list-personal">');
    jive.shared.soy.i18nHelper({i18nKey: 'blogs.picker.create.new.text', arg0: '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('blogs-create-blog!input.jspa'))) + '">', arg1: '</a>', noAutoEscape: true}, output);
    output.append('</div>');
  } else if (opt_data.userContainerType && opt_data.userContainerID && ! opt_data.hideUserContainer) {
    output.append('<div class="j-places-list-personal">');
    jive.placepicker.containerLink({subject: opt_data.upload && opt_data.selectedContentType.uploadLink ? jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.personalContainerTitleKey),[]) : jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerTitleKey),[]), type: opt_data.userContainerType, id: opt_data.userContainerID, contentType: opt_data.selectedContentType.id, iconCss: 'jive-icon-profile', iconSize: 'sml', caption: opt_data.upload && opt_data.selectedContentType.uploadLink ? jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.personalContainerCaptionKey),[]) : jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerCaptionKey),[]), writableByUser: true, upload: opt_data.upload}, output);
    output.append('</div>');
  } else if (opt_data.personalBlogType && opt_data.personalBlogID) {
    output.append('<div class="j-places-list-personal">');
    jive.placepicker.containerLink({subject: opt_data.personalBlogName, type: opt_data.personalBlogType, id: opt_data.personalBlogID, contentType: opt_data.selectedContentType.id, iconCss: 'jive-icon-blog', iconSize: 'sml', caption: opt_data.upload && opt_data.selectedContentType.uploadLink ? jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.uploadLink.personalContainerCaptionKey),[]) : jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerCaptionKey),[]), writableByUser: true}, output);
    output.append('</div>');
  }
  if (opt_data.containers && opt_data.containers.length > 0) {
    output.append('<h4 class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.recent'),[])), '</h4>');
    jive.placepicker.containerList(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.placepicker.searchResults = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h4 class="j-place-search-results font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.search.results'),[])), ' <em>(<a href="#" class="j-clear-search">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.clear.results'),[])), '</a>)</em></h4>');
  jive.placepicker.containerList(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.placepicker.containerList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.containerName) ? '<div class="j-container-selected-space"><a href="#" class="js-parent-container j-subspace-back-link"><span class="jive-icon-sml ui-icon-triangle-1-w"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('community.list.spaces.navigate.back_to'),[])) + ' ' + soy.$$escapeHtml(opt_data.containerName) + '</a></div>' : '', '<ul class="j-icon-list wide">');
  var containerList96 = opt_data.containers;
  var containerListLen96 = containerList96.length;
  if (containerListLen96 > 0) {
    for (var containerIndex96 = 0; containerIndex96 < containerListLen96; containerIndex96++) {
      var containerData96 = containerList96[containerIndex96];
      jive.placepicker.containerListEntry({container: containerData96, contentType: opt_data.contentType, containerType: opt_data.containerType, containerID: opt_data.containerID, upload: opt_data.upload, showSubspaces: opt_data.showSubspaces}, output);
    }
  } else {
    output.append('<li>', (opt_data.emptyKey) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.emptyKey),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.noresults'),[])), '</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.placepicker.containerListEntry = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li ', (opt_data.container.type == opt_data.containerType && opt_data.container.id == opt_data.containerID) ? 'class="current"' : '', '>');
  jive.placepicker.containerLink(soy.$$augmentMap(opt_data.container, {contentType: opt_data.contentType, iconSize: 'sml', upload: opt_data.upload, writableByUser: opt_data.container.prop && opt_data.container.prop.perms && opt_data.container.prop.perms.allowedToContribute && opt_data.container.prop.perms.allowedToMove, props: opt_data.container.prop}), output);
  output.append((opt_data.container.type == opt_data.containerType && opt_data.container.id == opt_data.containerID) ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.current_place'),[])) + '</em>' : '', (opt_data.showSubspaces) ? (opt_data.container.prop && opt_data.container.prop.childInfo && opt_data.container.prop.childInfo.hasChildren) ? '<a href="#" class="js-child-spaces j-subspace-view-link font-color-meta" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.container.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.container.id) + '"' + ((opt_data.container.prop.parentInfo) ? 'data-parent-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.container.prop.parentInfo.type) + '" data-parent-objectid="' + soy.$$escapeHtmlAttribute(opt_data.container.prop.parentInfo.id) + '"' : '') + ' title="' + ((opt_data.container.prop.childInfo.numChildren == 1) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.singular'),[1])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.plural'),[opt_data.container.prop.childInfo.numChildren]))) + '">' + ((opt_data.container.prop.childInfo.numChildren == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.singular'),[1])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.plural'),[opt_data.container.prop.childInfo.numChildren]))) + '<span class="jive-icon-sml ui-icon-triangle-1-e"></span></a>' : '' : '', '</li>');
  return opt_sb ? '' : output.toString();
};


jive.placepicker.containerLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.writableByUser) ? (opt_data.contentType == 14) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/edit-place.jspa',{'parentObjectID':opt_data.id,'parentObjectType':opt_data.type,'containerType':opt_data.contentType}))) + '" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" class="js-target-container">' : '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/choose-container.jspa',{'contentType':opt_data.contentType,'containerType':opt_data.type,'container':opt_data.id,'upload':opt_data.upload ? 'true' : 'false'}))) + '" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" class="js-target-container">' : '', '<span   ', (opt_data.writableByUser) ? (opt_data.type == 600) ? 'title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.project'),[])) + '\'' : (opt_data.type == 700) ? 'title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.group'),[])) + '\'' : (opt_data.type == 14) ? 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.space'),[])) + '"' : '' : 'title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.placeunavailable'),[])) + '\'', ' class="', (opt_data.writableByUser) ? soy.$$escapeHtmlAttribute(opt_data.iconCss) + ' jive-icon-' + ((opt_data.iconSize) ? soy.$$escapeHtmlAttribute(opt_data.iconSize) : 'med') : 'jive-icon-sml jive-icon-place-unavailable', '" role="img"></span><span class="', (! opt_data.writableByUser) ? 'jive-container-unavailable-text' : '', ' js-container-title" ', (! opt_data.writableByUser) ? 'title="' + ((opt_data.type == 2020) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.usercontainer.unavailable'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.unavailable'),[]))) + '"' : '', '>', soy.$$escapeHtml(opt_data.subject), '</span>', (opt_data.props && opt_data.props.isVisibleToPartner) ? '<span class="jive-icon-med jive-icon-partner" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '"></span>' : '', (opt_data.writableByUser) ? '</a>' : '', (opt_data.caption) ? ' <span class="j-container-caption font-color-meta">' + soy.$$escapeHtml(opt_data.caption) + '</span>' : '');
  return opt_sb ? '' : output.toString();
};


jive.placepicker.browseContainers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-container-browse jive-modal"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.picker.choose'),[])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><div><input type="search" name="container-filter" ', (opt_data.selectedContentType.searchPlaceholderKey) ? 'placeholder="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.searchPlaceholderKey),[])) + '"' : '', ' class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="js-place-picker-content"><div class="j-container-browse-personal">');
  if (opt_data.suggestCreatePersonalBlog) {
    jive.shared.soy.i18nHelper({i18nKey: 'blogs.picker.create.new.text', arg0: '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('blogs-create-blog!input.jspa'))) + '">', arg1: '</a>', noAutoEscape: true}, output);
  } else if (opt_data.userContainer && ! opt_data.hideUserContainer) {
    if (opt_data.selectedContentType.id == 38) {
      jive.placepicker.containerLink({subject: opt_data.userContainer.subject, type: opt_data.userContainer.type, id: opt_data.userContainer.id, contentType: opt_data.selectedContentType.id, iconCss: 'jive-icon-blog', iconSize: 'sml', caption: jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerCaptionKey),[]), writableByUser: opt_data.userContainer.prop && opt_data.userContainer.prop.perms && opt_data.userContainer.prop.perms.allowedToContribute && opt_data.userContainer.prop.perms.allowedToMove, props: opt_data.userContainer.prop}, output);
    } else {
      jive.placepicker.containerLink({subject: jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerTitleKey),[]), type: opt_data.userContainer.type, id: opt_data.userContainer.id, contentType: opt_data.selectedContentType.id, iconCss: 'jive-icon-profile', iconSize: 'sml', caption: jive.i18n.i18nText(jive.i18n.getMsg(opt_data.selectedContentType.personalContainerCaptionKey),[]), writableByUser: opt_data.userContainer.prop && opt_data.userContainer.prop.perms && opt_data.userContainer.prop.perms.allowedToContribute && opt_data.userContainer.prop.perms.allowedToMove, upload: opt_data.upload, props: opt_data.userContainer.prop}, output);
    }
  }
  output.append('</div><section class="j-accordion-container">');
  var filterList301 = opt_data.filterGroupBean.filters;
  var filterListLen301 = filterList301.length;
  for (var filterIndex301 = 0; filterIndex301 < filterListLen301; filterIndex301++) {
    var filterData301 = filterList301[filterIndex301];
    output.append('<h4 class="j-accordion-toggle selected"><a href="#" class="js-accordion-link" data-placefilter="', soy.$$escapeHtmlAttribute(filterData301.id), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(filterData301.description),[])), '</a></h4><div class="j-places-list" style="display:none"></div>');
  }
  output.append('</section></div></section><div>');
  return opt_sb ? '' : output.toString();
};


jive.placepicker.moreContainers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var containerList310 = opt_data.containers;
  var containerListLen310 = containerList310.length;
  for (var containerIndex310 = 0; containerIndex310 < containerListLen310; containerIndex310++) {
    var containerData310 = containerList310[containerIndex310];
    jive.placepicker.containerListEntry({container: containerData310, contentType: opt_data.contentType, containerType: opt_data.containerType, containerID: opt_data.containerID, upload: opt_data.upload, showSubspaces: opt_data.showSubspaces}, output);
  }
  return opt_sb ? '' : output.toString();
};

;
jive.TypeaheadInput=jive.oo.Class.extend(function(b){var c=jQuery;jive.conc.observable(this);b.init=function(g,f){var d=this;f=f||{};this.element=c(g);this.minLength=f.minLength||2;this.delay=f.delay||333;this.suppressEnterKey=f.suppressEnterKey;var h=this.processKey.bind(this);if(c.browser.mozilla){this.element.keypress(function(i){h(i)})}else{this.element.keydown(function(i){h(i)})}this.element.bind("search change",h);this.element.focus(function(){d.focused=true;d.startWatch(h)});this.element.blur(function(){d.focused=false;d.stopWatch(h)});if(!("placeholder" in c("<input>")[0])){this.placeholder=this.element.attr("placeholder");this.placeheldClass=((this.element.data("placeHeld")||{}).options||{}).className}var e=this.delay;this.getDelay=c.isFunction(e)?this.delay:function(){return e};this.isClear=a(this.minLength,this.element.val())};this.val=function(d){if(this.focused&&typeof d!="undefined"){}else{if(d===""&&this.placeholder){this.element.val(this.placeholder);this.element.addClass(this.placeheldClass)}else{return this.element.val.apply(this.element,arguments)}}};b.processKey=function(g){var f=this.element.val(),d=this;if(g&&g.which=="13"&&d.suppressEnterKey){g.preventDefault()}if(f!==this.prevValue){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(function(){d.emitChange(d.element.val())},this.getDelay(f));this.prevValue=f}};b.emitChange=function(d){if(!this.isClear&&a(this.minLength,d)){this.emit("clear");this.isClear=true}else{if(d.length>=this.minLength&&!this.placeheld()){this.emit("change",d);this.isClear=false}}};function a(d,e){return c.trim(e)===""||e.length<d}b.placeheld=function(){if(this.placeholder&&this.placeheldClass){return this.element.val()===this.placeholder&&this.element.hasClass(this.placeheldClass)}else{return false}};b.startWatch=function(e){var d=this;this.stopWatch(e);this.watchTimeout=setTimeout(function(){e();d.startWatch(e)},333)};b.stopWatch=function(){clearTimeout(this.watchTimeout)}});define("apps/shared/views/typeahead_input",function(){return jive.TypeaheadInput});
;
jive.namespace("Placepicker");jive.Placepicker.ContainerSearchView=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);this.init=function(d,f,e){var c=this;this.target=b(f);this.prevContent=this.target.children();this.visibleContent=this.prevContent.filter(":visible");b(d).each(function(){var g=new jive.TypeaheadInput(this);g.addListener("change",function(h){c.emitP("search",h).addCallback(function(i){if(c.searchResults){c.searchResults.remove()}c.searchResults=b(jive.placepicker.searchResults(i));c.flatFind(c.searchResults,".j-clear-search").click(function(j){c.restoreContent();g.val("");j.preventDefault()});if(c.visibleContent.size()==0){c.visibleContent=c.prevContent.filter(":visible")}c.visibleContent.hide();f.append(c.searchResults);c.resizePopover()})});g.addListener("clear",c.restoreContent.bind(c))})};this.update=function(){};a.restoreContent=function(){if(this.searchResults){this.searchResults.remove()}this.visibleContent.show();this.resizePopover()};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.resizePopover=function(){this.target.parents(".js-pop *").trigger("triggerPopoverReposition",[{fade:false}]);jive.localexchange.emit("containerChooserUpdated")}});define("apps/placepicker/views/container_search_view",function(){return jive.Placepicker.ContainerSearchView});
;
(function(a){a.fn.endlessScroll=function(c){var f={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var c=a.extend(f,c);var d=true;var e=false;var b=0;if(c.ceaseFire.apply(this)===true){d=false}if(d===true){a(this).scroll(function(){var h=a(".endless_scroll_inner_wrap",this);if(h.length==0){var i=a("*:focus");a(this).wrapInner('<div class="endless_scroll_inner_wrap" />');i.focus()}if(h.length>0&&(h.height()-a(this).height()<=a(this).scrollTop()+c.bottomPixels)){if((c.fireOnce==false||(c.fireOnce==true&&e!=true))){if(c.resetCounter.apply(this)===true){b=0}e=true;b++;a(c.insertAfter).after('<div id="endless_scroll_loader">'+c.loader+"</div>");if(typeof c.data=="function"){data=c.data.apply(this)}else{data=c.data}if(data!==false){a("div#endless_scroll_loader").remove();a(c.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");var g=new Array();g[0]=b;c.callback.apply(this,g);if(c.fireDelay!==false||c.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(c.fireDelay,1,function(){a(this).remove();e=false})}else{e=false}}}}})}}})(jQuery);
;
jive.namespace("Placepicker");jive.Placepicker.ContainerBrowseView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(c){this.containerStack=new Array();c=c||{};this.filterGroup=c.filterGroup||"placePicker";this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.hideUserContainer=c.hideUserContainer||false};this.render=function(e){var f=new jive.conc.Promise(),c=this;c.rootCommunity=e.rootCommunity;c.showRootCommunity=e.showRootCommunity;c.contentType=e.contentType;c.modal=b(jive.placepicker.browseContainers(e));c.modal.delegate(".js-target-container","click",function(j){var h=b(this).data("objecttype");var i=b(this).data("objectid");var g=$j(this).find(".js-container-title").text();c.emit("container",{targetContainerType:h,targetContainerID:i,targetContainerName:g});if(c.closeOnSelect){c.modal.trigger("close")}if(!c.followLinks){j.preventDefault()}});var d=function(){c.setupSubspaceHandlers(c.modal);var g=c.serviceArgs("following");c.showSpinner();c.emitP("browseLoad",g).addCallback(function(i){var j=b(jive.placepicker.containerList(jQuery.extend({emptyKey:"browse.places.empty.message"},i)));c.addListToAccordionSection(c.modal.find(".j-places-list").first(),j,true);var h=c.modal.find(".j-accordion-container").accordion({create:function(l,m){b(this).find("h4 a.js-accordion-link").attr("tabindex","-1")},changestart:function(n,o){if(o.newContent.find("li").length==0){var m=o.newHeader.find(".js-accordion-link");var l=c.serviceArgs(m.data("placefilter"));c.setupAccordionSection(o.newHeader.next(),l,true)}}});var k=new jive.Placepicker.ContainerSearchView(c.modal.find("input[name=container-filter]"),c.modal.find(".js-place-picker-content"));c.proxyListener(k,"search")}).always(function(){c.hideSpinner()})};c.modal.lightbox_me({closeSelector:".close",destroyOnClose:true,onLoad:d,showOverlay:true,closeFocusSelector:"#js-publishbar-place-browse",parentLightbox:b(c.parent).closest(".jive-modal:visible")});return f};this.close=function(){if(this.modal){this.modal.trigger("close")}};a.setupAccordionSection=function(d,g,i){var c=this;var f=c.isSpacesSection(g.filterID);var e=c.isFollowingSection(g.filterID);if(f){g=c.setupSpaceArgs(g);d.data("containerType",g.containerType);d.data("containerID",g.containerID);if(c.isRootCommunity(g)){var h=c.rootCommunityList();return c.addListToAccordionSection(d,h,i)}}var j=null;if(e){j="browse.places.empty.message"}c.showSpinner(d);c.emitP("browseLoad",g).addCallback(function(l){c.hideSpinner(d);if(f){if(c.isRootCommunityChildren(g)&&!c.showRootCommunity){l.containerName=null}}var k=b(jive.placepicker.containerList(jQuery.extend({showSubspaces:f,emptyKey:j},l)));return c.addListToAccordionSection(d,k,i)})};a.addScroller=function(d){var c=this;d.endlessScroll({fireDelay:false,callback:function(){var i=b(this).find("li").size();if(i%20==0){var g=b(this).prev().find("a");var f=g.data("placefilter");var h=c.serviceArgs(f,i);var e=b(this).data("containerID");var j=b(this).data("containerType");if(e>-1){h=b.extend({containerType:j,containerID:e},h)}c.emitP("browseLoad",h).addCallback(function(l){var k=b(jive.placepicker.moreContainers(b.extend({showSubspaces:c.isSpacesSection(f)},l)));d.find("ul").append(k)})}}})};a.setupSubspaceHandlers=function(d){var c=this;c.containerStack.push({containerType:c.rootCommunity.type,containerID:-1});d.delegate(".js-child-spaces","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var f=b.extend({containerType:b(this).data("objecttype"),containerID:b(this).data("objectid")},c.serviceArgs(e));c.containerStack.push({containerType:b(this).data("parent-objecttype"),containerID:b(this).data("parent-objectid")});c.setupAccordionSection(b(this).closest(".j-places-list"),f,false);h.preventDefault()});d.delegate(".js-parent-container","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var j=c.containerStack.pop();if(c.isRootCommunity(j)){var i=c.rootCommunityList();c.addListToAccordionSection(b(this).closest(".j-places-list"),i,false)}else{var f=b.extend({containerType:j.containerType,containerID:j.containerID},c.serviceArgs(e));c.setupAccordionSection(b(this).closest(".j-places-list"),f,false)}h.preventDefault()})};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.isSpacesSection=function(c){return c=="space"};a.isFollowingSection=function(c){return c=="following"};a.isRootCommunityChildren=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==c.rootCommunity.id};a.isRootCommunity=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==-1};a.setupSpaceArgs=function(d){var c=this;if(!d.containerType&&!d.containerID){if(c.showRootCommunity){d.containerType=c.rootCommunity.type;d.containerID=-1}else{d.containerType=c.rootCommunity.type;d.containerID=c.rootCommunity.id}}return d};a.addListToAccordionSection=function(d,e,f){var c=this;d.html(e);d.show();if(f){c.addScroller(d)}jive.localexchange.emit("containerChooserUpdated")};a.serviceArgs=function(d,f){var c=this;var e=c.isSpacesSection(d)?"spaceOrder":"subject";return{filterGroupID:c.filterGroup,filterID:d,start:f?f:0,sortKey:e,numResults:20}};a.rootCommunityList=function(){var c=this;return b(jive.placepicker.containerList({showSubspaces:true,containers:[c.rootCommunity],contentType:c.contentType,containerType:-1,containerID:-1}))};a.createSpinner=function(c){this.$spinner=b(jive.shared.soy.loading());if(c){c.append(this.$spinner)}};a.destroySpinner=function(c){if(this.$spinner){this.$spinner.remove()}}});define("apps/placepicker/views/container_browse_view",function(){return jive.Placepicker.ContainerBrowseView});
;
jive.namespace("Placepicker");define("apps/placepicker/models/browse_containers_source",["apps/shared/models/rest_service"],function(a){jive.Placepicker.BrowseContainersSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){c.init.call(this,d);this.RESOURCE_ENDPOINT=jive.rest.url("/containers")}});return jive.Placepicker.BrowseContainersSource});
;
jive.namespace("Placepicker");define("apps/placepicker/models/search_containers_source",["apps/shared/models/rest_service"],function(a){jive.Placepicker.SearchContainersSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){c.init.call(this,d);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")}});return jive.Placepicker.SearchContainersSource});
;
jive.namespace("Placepicker");define("apps/placepicker/models/place_picker_source",["apps/shared/models/rest_service"],function(a){jive.Placepicker.PlacePickerSource=a.extend(function(b,c){b.resourceType="placepicker";b.init=function(e,d){d=d||{};c.init.call(this,d);$j.extend(this.defaultParams,{containerType:d.containerType,containerID:d.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/placepicker/"+e)}});return jive.Placepicker.PlacePickerSource});
;
jive.namespace("Placepicker");jive.Placepicker.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(c){var b=this;this.allowedContainerIds=c.allowedContainerIds;this.pickerContext=c.pickerContext||"create";this.objectType=c.objectType;this.objectID=c.objectID||-1;this.upload=c.upload;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.filterGroup=c.filterGroup;this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.filterByContainer=c.filterByContainer||false;this.hideUserContainer=c.hideUserContainer||false;this.fromQuest=c.fromQuest;this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource(this.pickerContext,{containerType:this.containerType,containerID:this.containerID});this.containerBrowseView=new jive.Placepicker.ContainerBrowseView({filterGroup:this.filterGroup,parent:this.parent,followLinks:this.followLinks,closeOnSelect:this.closeOnSelect,hideUserContainer:this.hideUserContainer});this.containerBrowseView.addListener("browseLoad",function(d,f){var e=jQuery.extend({contentType:b.objectType,contentID:b.objectID},d);if(b.filterByContainer){e=jQuery.extend({},{containerType:b.containerType,containerID:b.containerID},e)}b.browseContainers.findAll(e).addCallback(function(g){f.emitSuccess({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload,containers:g.items,containerName:g.containerName,parentName:g.parentName})})});this.containerBrowseView.addListener("search",function(d,e){b.containers.findAll({query:d,contentType:b.objectType,contentID:b.objectID}).addCallback(function(f){e.emitSuccess(jQuery.extend({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload},f))})});this.containerBrowseView.addListener("container",function(d){b.emit("container",d)})};this.showPicker=function(){var b=this;b.placePicker.findAll({contentType:b.objectType,contentID:b.objectID}).addCallback(function(c){b.containerBrowseView.render(jQuery.extend({contentID:b.contentID,contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,hideUserContainer:b.hideUserContainer,selectedContentType:{id:b.objectType,personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey}},c))})}});define("apps/placepicker/main",function(){return jive.Placepicker.Main});
;
// This file was automatically generated from membership.soy.
// Please don't edit this file by hand.

goog.provide('jive.socialgroups.soy.joinConfirmation');
goog.provide('jive.socialgroups.soy.leaveConfirmation');
goog.provide('jive.socialgroups.soy.leaveGroup');
goog.provide('jive.socialgroups.soy.renderError');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.error.rest.soy.errorFinding');


jive.socialgroups.soy.leaveGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal jive-modal-medium" id="jive-modal-leave-group"><header>', (opt_data.pendingApproval) ? '<h2 class="jive-modal-title jive-modal-title-leave-group">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.join.cancel'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])) + ' ' + soy.$$escapeHtml(opt_data.groupName) + '</h2>' : '<h2 class="jive-modal-title jive-modal-title-leave-group">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.title'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])) + ' ' + soy.$$escapeHtml(opt_data.groupName) + '</h2>', '</header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon  j-ui-elem"></span></a><!-- Manage categories listing --><section class="jive-modal-content j-modal-content-text jive-modal-leave-group clearfix">', (opt_data.canLeaveSocialGroup) ? ((opt_data.pendingApproval) ? '<h3>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.canceljoin'),[opt_data.groupName])) + '</h3>' + ((opt_data.requiresApproval) ? '<p>' + soy.$$escapeHtml(opt_data.leaveI18n) + '</p>' : '') : '<h3>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.confirm'),[opt_data.groupName])) + '</h3>' + ((opt_data.requiresApproval) ? '<p>' + soy.$$escapeHtml(opt_data.leaveI18n) + '</p>' : '') + '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.follow.remove'),[])) + '</p>') + '<div class="jive-form-buttons"><button type="button" class="j-btn-callout" id="group-leave-submit">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.accept'),[])) + '</button><button type="button" class="jive-modal-close close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])) + '</button></div>' : (opt_data.onlyOneOwner) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.onlyowner'),[])) + '</p><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.onlyowner.info'),[])) + '</p><div class="jive-form-buttons"><button type="button" class="jive-modal-close close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])) + '</button></div>' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.already.gone'),[])), '</section></div>');
  return opt_sb ? '' : output.toString();
};


jive.socialgroups.soy.joinConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.pendingApproval) ? '<div>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.join.apprvl.info'),[])) + '</div>' : (opt_data.banned) ? '<div>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.banned_member.msg'),[])) + '</div>' : '<div>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.join.confirm'),[])) + '</div>');
  return opt_sb ? '' : output.toString();
};


jive.socialgroups.soy.leaveConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.pendingApproval) ? '<div>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.cancel.message'),[])) + '</div>' : '<div>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.message'),[])) + '</div>');
  return opt_sb ? '' : output.toString();
};


jive.socialgroups.soy.renderError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.code) {
    case 4026:
      output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.join.notallowed'),[])), '</p>');
      break;
    case 4008:
      output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.not.found'),[])), '</p>');
      break;
    default:
      if (opt_data.message) {
        output.append('<p>', soy.$$escapeHtml(opt_data.message), '</p>');
      } else {
        jive.error.rest.soy.errorFinding(opt_data, output);
      }
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from colorInput.soy.
// Please don't edit this file by hand.

goog.provide('jive.theme.widget.colorInput');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.theme.widget.colorInput = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-color-widget j-js-housing', (opt_data.inline) ? ' inline' : '', '">', (opt_data.labelText) ? '<label for="' + soy.$$escapeHtml(opt_data.id) + '" class="j-basic-label">' + soy.$$escapeHtml(opt_data.labelText) + '</label>' : '', '<span class="j-field-spec">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.menu.hex'),[])), '</span><input id="', soy.$$escapeHtml(opt_data.id), '" class="j-color-input j-js-color-input" name="', (opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id), '" type="text" size="6" maxlength="6" autocomplete="off"', (opt_data.value) ? ' value="' + soy.$$escapeHtml(opt_data.value) + '"' : '', 'data-widget-type="color" data-can-be-transparent="', (opt_data.canBeTransparent) ? 'true' : 'false', '"><span class="j-color-display j-js-color-display" data-for="', (opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id), '"', (opt_data.value) ? ' style="background-color: #' + soy.$$escapeHtml(opt_data.value) + ';"' : '', '></span>', (! opt_data.ignoreColorInfo) ? '<span class="j-color-info j-js-color-info j-supplemental"></span>' : '', '</span>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from fileUpload.soy.
// Please don't edit this file by hand.

goog.provide('jive.theme.widget.file');
goog.provide('jive.theme.widget.fileComplete');
goog.provide('jive.theme.widget.fileDefault');
goog.provide('jive.theme.widget.fileForm');
goog.provide('jive.theme.widget.fileUpload');
goog.provide('jive.theme.widget.fileUploading');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.theme.widget.fileUpload = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var name__soy3 = opt_data.css[opt_data.imageName] ? opt_data.css[opt_data.imageName] : '';
  var url__soy4 = opt_data.css[opt_data.imageName + 'Url'] ? opt_data.css[opt_data.imageName + 'Name'] : '';
  output.append('<form action="', soy.$$escapeHtml(jive.soy.func.buildUrl('/skin-image-upload.jspa')), '" method="post" enctype="multipart/form-data">');
  jive.theme.widget.file({accept: 'image/*', filename: name__soy3, name: 'image'}, output);
  output.append('<input type="hidden" name="propertyKey" value="', soy.$$escapeHtml(opt_data.imageName), '" />', (opt_data.paletteID) ? '<input type="hidden" name="paletteID" value="' + soy.$$escapeHtml(opt_data.paletteID) + '" />' : '', '</form>');
  return opt_sb ? '' : output.toString();
};


jive.theme.widget.file = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-file-upload js-file-upload clearfix', (opt_data.filename) ? ' j-complete' : ' j-default', '">');
  jive.theme.widget.fileDefault(opt_data, output);
  jive.theme.widget.fileUploading(null, output);
  jive.theme.widget.fileComplete(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.theme.widget.fileDefault = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-default js-default"><input type="file" name="', soy.$$escapeHtml(opt_data.name), '"', (opt_data.accept) ? ' accept="' + soy.$$escapeHtml(opt_data.accept) + '"' : '', '><p class="j-supplemental"><span class="jive-icon-med jive-icon-warn"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('staticFiles.upload.warning.text'),[])), '</p></div>');
  return opt_sb ? '' : output.toString();
};


jive.theme.widget.fileUploading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-uploading"><span class="jive-icon-med jive-icon-doctype-image"></span><img class="j-uploading js-uploading" src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/j-loader-large-wht.gif')), '" height="15" width="60" alt="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.file.uploading'),[])), '"></div>');
  return opt_sb ? '' : output.toString();
};


jive.theme.widget.fileComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-complete"><span class="jive-icon-med jive-icon-doctype-image"></span><span class="filename js-filename">', soy.$$escapeHtml(opt_data.filename), '</span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.file.change'),['changeImage'])), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.theme.widget.fileForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form style="display: none;" action="', soy.$$escapeHtml(jive.soy.func.buildUrl('/api/core/v3/places/' + opt_data.placeId + '/statics')), '" method="post" enctype="multipart/form-data"><input type="hidden" name="jive.token.name" value="jive.static.files.token"><input type="hidden" name="jive.static.files.token" value=""></form>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from backgroundRepeatWidget.soy.
// Please don't edit this file by hand.

goog.provide('jive.theme.widget.backgroundRepeatWidget');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.theme.widget.backgroundRepeatWidget = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h5 class="j-basic-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_repeat'),[])), '</h5><ul class="button-list clearfix">');
  var defaulted__soy6 = ['repeat-x', 'repeat-y', 'no-repeat'].indexOf(opt_data.value) == -1;
  output.append('<li class="button-list-item first"><label for="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeat"', (defaulted__soy6) ? ' class="checked"' : '', (opt_data.attachKeyValue) ? ' data-key="' + soy.$$escapeHtml(opt_data.name) + '" data-value="repeat"' : '', '><span class="repeat"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_repeat.repeat'),[])), '<input id="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeat" class="j-508-label" type="radio" name="', soy.$$escapeHtml(opt_data.name), 'BgRepeat" value="repeat"', (defaulted__soy6) ? ' checked' : '', ' /></label></li><li class="button-list-item"><label for="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeatX"', (opt_data.value == 'repeat-x') ? ' class="checked"' : '', (opt_data.attachKeyValue) ? ' data-key="' + soy.$$escapeHtml(opt_data.name) + '" data-value="repeat-x"' : '', '><span class="repeat-x"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_repeat.repeat_x'),[])), '<input id="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeatX" class="j-508-label" type="radio" name="', soy.$$escapeHtml(opt_data.name), 'BgRepeat" value="repeat-x"', (opt_data.value == 'repeat-x') ? ' checked' : '', ' /></label></li><li class="button-list-item"><label for="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeatY"', (opt_data.value == 'repeat-y') ? ' class="checked"' : '', (opt_data.attachKeyValue) ? ' data-key="' + soy.$$escapeHtml(opt_data.name) + '" data-value="repeat-y"' : '', '><span class="repeat-y"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_repeat.repeat_y'),[])), '<input id="', soy.$$escapeHtml(opt_data.name), 'BgRepeatRepeatY" class="j-508-label" type="radio" name="', soy.$$escapeHtml(opt_data.name), 'BgRepeat" value="repeat-y"', (opt_data.value == 'repeat-y') ? ' checked' : '', ' /></label></li><li class="button-list-item last"><label for="', soy.$$escapeHtml(opt_data.name), 'BgRepeatNoRepeat"', (opt_data.value == 'no-repeat') ? ' class="checked"' : '', (opt_data.attachKeyValue) ? ' data-key="' + soy.$$escapeHtml(opt_data.name) + '" data-value="no-repeat"' : '', '><span class="no-repeat"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_repeat.no_repeat'),[])), '<input id="', soy.$$escapeHtml(opt_data.name), 'BgRepeatNoRepeat" class="j-508-label" type="radio" name="', soy.$$escapeHtml(opt_data.name), 'BgRepeat" value="no-repeat"', (opt_data.value == 'no-repeat') ? ' checked' : '', ' /></label></li></ul>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from placeheader.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.bgheader.backgroundMenu');
goog.provide('jive.place.bgheader.customBackgrounds');
goog.provide('jive.place.bgheader.presetBackgrounds');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.theme.widget.backgroundRepeatWidget');
goog.require('jive.theme.widget.colorInput');
goog.require('jive.theme.widget.file');


jive.place.bgheader.backgroundMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-quick-menu j-background-submenu"><div class="j-pop-desc">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.select'),[])), '</div><div><nav class="j-tab-nav"><ul class="j-tabbar"><li', (opt_data.bgType == 'custom') ? '  class="active"' : '', '><a class="userpicker-page-link j-ui-elem" href="#" data-toggle="tab" data-target="#j-custom-header-background" data-key="bgType" data-value="custom">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.custom'),[])), '</a></li><li', (opt_data.bgType != 'custom') ? '  class="active"' : '', '><a class="userpicker-page-link" href="#" data-toggle="tab" data-target="#j-preset-header-background" data-key="bgType" data-value="preset">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.preset'),[])), '</a></li></ul></nav><div class="j-submenu-body"><section id="j-custom-header-background" class="j-tab-body', (opt_data.bgType == 'custom') ? ' active' : '', '">');
  jive.place.bgheader.customBackgrounds(opt_data, output);
  output.append('</section><section id="j-preset-header-background" class="j-tab-body j-preset', (opt_data.bgType != 'custom') ? ' active' : '', '">');
  jive.place.bgheader.presetBackgrounds(opt_data, output);
  output.append('</section></div></div><div class="j-themeClose j-rc4 j-rc-none-top"><button class="j-btn-callout j-done-theming close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.editbg.popup.close.button.label'),[])), '</button></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.place.bgheader.customBackgrounds = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-row">');
  jive.theme.widget.colorInput({id: 'bannerBgColor', name: 'bgColor', canBeTransparent: true, inline: true, labelText: jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.bg_color_label'),[]), value: opt_data.bgColor}, output);
  jive.theme.widget.colorInput({id: 'bannerTextColor', name: 'textColor', inline: true, labelText: jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.text_color_label'),[]), value: opt_data.textColor}, output);
  output.append('<p class="j-supplemental">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.accepts_hex'),[])), '</p></div><form class="j-row" action="" method="post" enctype="multipart/form-data"><h5 class="j-basic-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('theming.widget.background_image'),[])), '</h5>');
  jive.theme.widget.file({accept: 'image/*', filename: opt_data.bgCustomImageName, name: 'j-static-file-upload'}, output);
  output.append('</form><div class="j-row"><div class="backgroundRepeat">');
  jive.theme.widget.backgroundRepeatWidget({name: 'bgRepeat', value: opt_data.bgRepeat, attachKeyValue: true}, output);
  output.append('</div></div><a class="js-reset" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.reset'),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.place.bgheader.presetBackgrounds = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul>');
  var imageList67 = opt_data.availableDefaultBannerImages;
  var imageListLen67 = imageList67.length;
  if (imageListLen67 > 0) {
    for (var imageIndex67 = 0; imageIndex67 < imageListLen67; imageIndex67++) {
      var imageData67 = imageList67[imageIndex67];
      output.append('<li><a href="#" label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.editbg.popup.image.label'),[])), '" ', (imageData67.location) ? 'data-key="bgPresetImageUrl" data-value="' + soy.$$escapeHtml(imageData67.location) + '"' : '', 'data-header-settings=\'{"bgPresetImageUrl":"', soy.$$escapeHtml(imageData67.location), '", "bgRepeat":"', soy.$$escapeHtml(imageData67.bgRepeat), '", "textColor":"', soy.$$escapeHtml(imageData67.textColor), '", "bgColor":"', soy.$$escapeHtml(imageData67.bgColor), '", "bgPosition":"', soy.$$escapeHtml(imageData67.bgPosition), '"}\' style="', (imageData67.bgColor) ? 'background-color:' + soy.$$escapeHtml(imageData67.bgColor) + ';' : '', ' ', (imageData67.location) ? 'background-image: url(\'' + soy.$$escapeHtml(jive.soy.func.buildUrl(imageData67.location)) + '\');' : '', (imageData67.bgRepeat) ? 'background-repeat:' + soy.$$escapeHtml(imageData67.bgRepeat) + ';' : '', (imageData67.bgPosition) ? 'background-position: ' + soy.$$escapeHtml(imageData67.bgPosition) + ';' : '', ' ', (imageData67.textColor) ? 'color: ' + soy.$$escapeHtml(imageData67.textColor) : '', '">', (imageData67.thumbnailLocation) ? '<img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl(imageData67.thumbnailLocation)) + '" alt="' + soy.$$escapeHtml(imageData67.ID) + '" class="jive-place-background-image js-preset-bg-image"> ' : '', '</a></li>');
    }
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.banner.no.presets'),[])));
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from manage_category.soy.
// Please don't edit this file by hand.

goog.provide('jive.tags.soy.buildCategoryDisplay');
goog.provide('jive.tags.soy.confirmDeletion');
goog.provide('jive.tags.soy.globalErrorMessage');
goog.provide('jive.tags.soy.introTextAdd');
goog.provide('jive.tags.soy.introTextEdit');
goog.provide('jive.tags.soy.remainingMessage');
goog.provide('jive.tags.soy.renderCategory');
goog.provide('jive.tags.soy.renderPopulateTagsetListItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.tags.soy.renderCategory = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr><td class="name">', soy.$$escapeHtml(opt_data.category.name), '</td><td class="items">', soy.$$escapeHtml(opt_data.category.count), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.items'),[])), '</td><td class="date">', soy.$$escapeHtml(opt_data.category.date), '</td><td class="actions">(<a href="#" data-event="editTagSetById" data-id="', soy.$$escapeHtml(opt_data.category.ID), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.edit'),[])), '</a> | <a href="#" data-event="removeCategoryById" data-id="', soy.$$escapeHtml(opt_data.category.ID), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.remove'),[])), '</a>) </td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.buildCategoryDisplay = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table><tbody>');
  var categoryList22 = opt_data.categories;
  var categoryListLen22 = categoryList22.length;
  if (categoryListLen22 > 0) {
    for (var categoryIndex22 = 0; categoryIndex22 < categoryListLen22; categoryIndex22++) {
      var categoryData22 = categoryList22[categoryIndex22];
      jive.tags.soy.renderCategory({category: categoryData22}, output);
    }
  } else {
    output.append('<tr><td colspan="4">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.no-categories.text'),[])), '</td><tr>');
  }
  output.append('</tbody></table>');
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.renderPopulateTagsetListItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li><a class="jive-tagname-', soy.$$escapeHtml(opt_data.name), ' jive-tag-unselected" href="#" onclick="swapTag(this);return false;">', soy.$$escapeHtml(opt_data.text), '</a></li>');
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.introTextAdd = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.add.intro.text'),[])));
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.introTextEdit = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.edit.intro.text'),[opt_data.count])), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.globalErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.error'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), ' ', soy.$$escapeHtml(opt_data.message));
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.remainingMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.remaining.label'),[opt_data.count])));
  return opt_sb ? '' : output.toString();
};


jive.tags.soy.confirmDeletion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.confirm.deletion'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from moderated_document.soy.
// Please don't edit this file by hand.

goog.provide('jive.tags.soy.displayDocModeration');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.tags.soy.displayDocModeration = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jive-wiki-state-message"><h3>', soy.$$escapeHtml(opt_data.i18n.docViewerNeedsApproval), '</h3></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from modal.soy.
// Please don't edit this file by hand.

goog.provide('jive.places.modal.modalLoading');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.places.modal.modalLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="font-color-meta-light"><img src="', soy.$$escapeHtml(jive.soy.func.buildUrl('/images/jive-image-loading.gif')), '" alt="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('customize.loading'),[])), '" />', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('customize.loading'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("places.Manage");jive.places.Manage.AbstractControls=jive.AbstractView.extend(function(a){var b=jQuery;a.modalContent=jive.oo._abstract;a.modal=jive.oo._abstract;a.activationLink=jive.oo._abstract;a.reloadOnClose=true;a.init=function(){var c=this;b(document).ready(function(){var d=b(c.modalContent),e=b(c.modal);b(c.activationLink).click(function(f){var g=b(this).data("object-id");c.activate(g,this,f);f.preventDefault()})})};a.activate=function(i,g,h){var c=this,d=b(c.modalContent),f=b(c.modal);this.onActivate(h,b(g));this.showSpinner();this.emitP("load",i,null).addCallback(function(l){var k=c.separateScripts(l),j=k[0],e=k[1];d.html(c.shiv(j));f.trigger("resize");e();c.hideSpinner();c.emit("load.after",{$modal:f})});f.lightbox_me({onClose:function(){if(c.reloadOnClose){window.location.reload()}return false}});b("#j-place-manage-container").trigger("close")};a.onActivate=function(d,c){};a.createSpinner=function(){b(this.modalContent).html(jive.places.modal.modalLoading())};a.destroySpinner=function(){}});define("apps/places/manage/views/abstract_controls",function(){return jive.places.Manage.AbstractControls});
;
jive.namespace("places.Manage");jive.places.Manage.CategoryControls=jive.places.Manage.AbstractControls.extend(function(a,b){a.modalContent="#categories-modal";a.modal="#jive-modal-categories";a.activationLink="#jive-link-manageCategories";a.init=function(){var d=this,i=["cancelTagSet","editTagSet","editTagSetById","removeCategoryById"],f,g=[],e;var c=function(){return{ID:f.containerId,objectType:f.containerType}},h=function(k){$j("#category-message").html(k||"")};function j(k){alert(jive.tags.soy.globalErrorMessage({message:k||""}))}b.init.call(this);this.addListener("load.after",function(k){e=k.$modal;f=jive.util.extractDataAttributes(e.find(".jive-modal-content-categories")[0]);d.attachEvents();d.cancelTagSet();d.loadTagSets();d.loadPopularTags()});this.attachEvents=function(){e.delegate("[data-event]","click",function(l){l.preventDefault();var k=jive.util.extractDataAttributes(this);i.indexOf(k.event)>-1&&d[k.event].call(d,k)});$j("#jive-category-form").unbind("submit").submit(function(k){k.preventDefault();d.saveTagSet($j("#jive-modal-categories"))})};this.cancelTagSet=function(){e.find(".jive-modal-title-add-category, .jive-modal-add-category, .jive-modal-title-edit-category, .jive-modal-edit-category").hide();e.find(".jive-modal-title-manage-categories, .jive-modal-categories-listing").show()};this.loadPopularTags=function(){ManageTagSet.popularTags(c(),{errorHandler:j,timeout:5000,callback:function(l){var k=$j("<div />"),m=jive.namespace.call(window,"Community.feed");g=l.map(function(n,o){m[o]=1;return{name:k.text(n).html(),text:n}})}})};this.loadTagSets=function(){ManageTagSet.list(c(),{errorHandler:j,timeout:5000,callback:d.populateTagSets})};this.populateTagSet=function(k){h(k.usageMessage);$j("#categoryID").val(k.ID);$j("#categoryName").val(k.name);this.setTags(k.tags.join(","));var l=$j("<ul />");$j.each(g,function(){l.append(jive.tags.soy.renderPopulateTagsetListItem(this))});$j("#jive-category-recommendedtags-container ul").replaceWith(l)};this.populateTagSets=function(m){var k=f.maxTagSetCount,l=m.length;e.find(".jive-modal-category-list").html(jive.tags.soy.buildCategoryDisplay({categories:m})).end().find(".add").toggle(l<k).end().find(".overflow").toggle(!(l<k));if(l<k){$j(".jive-category-remaining").text(jive.tags.soy.remainingMessage({count:l}))}else{$j(".jive-category-overflow").text(l-k);$j(".jive-category-max").text(k)}};this.setTags=function(l){$j(".js-tag").remove();$j(".js-tag-input").val("");var k=$j(".js-hidden-tag-input");k.val(l).change()};this.removeCategoryById=function(l){var k={ID:l.id,containerID:c().ID,containerType:c().objectType};confirm(jive.tags.soy.confirmDeletion())&&ManageTagSet.remove(k,{errorHandler:j,timeout:5000,callback:d.populateTagSets})};this.saveTagSet=function(l){var k={ID:$j("#categoryID").val(),name:$j("#categoryName").val(),tags:($j(".js-hidden-tag-input").val()||"").split(",").filter(function(m){return m!==""}),autoCategorize:!!$j("#autoCategorize").prop("checked"),containerID:c().ID,containerType:c().objectType};ManageTagSet.add(k,{errorHandler:j,timeout:5000,callback:d.populateTagSets});l=l.length?l:e;l.find(".jive-modal-title-add-category, .jive-modal-add-category, .jive-modal-title-edit-category, .jive-modal-edit-category").hide();l.find(".jive-modal-title-manage-categories, .jive-modal-categories-listing").show()};this.editTagSet=function(k){e.find(".jive-modal-title-manage-categories, .jive-modal-categories-listing").hide();$j("#autoCategorize-container, .jive-modal-add-category, .jive-modal-title-add-category").show();h(jive.tags.soy.introTextAdd());this.populateTagSet({ID:"-1",name:"",tags:[],autoCategorize:$j("#autoCategorize").prop("checked"),containerID:k.id,containerType:k.objectType})};this.editTagSetById=function(k){ManageTagSet.tagSet(k.id,{errorHandler:j,timeout:5000,callback:function(l){d.populateTagSet(l);h(jive.tags.soy.introTextEdit({count:l.count}))}});$j("#autoCategorize-container, .jive-modal-title-manage-categories, .jive-modal-categories-listing").hide();$j(".jive-modal-title-edit-category, .jive-modal-add-category").show()}}});define("apps/places/manage/views/category_controls",function(){return jive.places.Manage.CategoryControls});
;
jive.namespace("places.Manage");jive.places.Manage.ArchiveControls=jive.places.Manage.AbstractControls.extend(function(a){var b=jQuery;a.modalContent="#archive-modal";a.modal="#jive-modal-archive-project";a.activationLink="#jive-link-unarchiveProject, #jive-link-archiveProject";a.reloadOnClose=false;a.onActivate=function(d,c){b(".jive-modal-title-archive-project").toggle(c.is("#jive-link-archiveProject"));b(".jive-modal-title-unarchive-project").toggle(c.is("#jive-link-unarchiveProject"))}});define("apps/places/manage/views/archive_controls",function(){return jive.places.Manage.ArchiveControls});
;
jive.namespace("places.Manage");jive.places.Manage.AuthorByEmailControls=jive.places.Manage.AbstractControls.extend(function(a,b){var c=jQuery;a.modalContent="#vcard-modal";a.modal="#jive-author-by-email-modal";a.activationLink="#jive-link-author-by-email a";a.reloadOnClose=false;a.init=function(){var d=this;b.init.apply(this,arguments);c(document).ready(function(){c(d.modalContent).delegate(":checkbox[name=vCardObjectTypes]","click",function(){toggleVCardActionButtons()});d.activate()})}});define("apps/places/manage/views/author_by_email_controls",function(){return jive.places.Manage.AuthorByEmailControls});
;
// This file was automatically generated from createmenu.soy.
// Please don't edit this file by hand.

goog.provide('jive.nav.menu.create.appActionLink');
goog.provide('jive.nav.menu.create.contentTypeHref');
goog.provide('jive.nav.menu.create.contentTypeLink');
goog.provide('jive.nav.menu.create.contentTypeLinkItem');
goog.provide('jive.nav.menu.create.contentTypes');
goog.provide('jive.nav.menu.create.quick');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.a11yBoundary');


jive.nav.menu.create.contentTypes = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop-desc">', (opt_data.smallView) ? '<a href="#" class="toggle j-menu-quick-toplink js-use-large-menu font-color-meta" role="presentation">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.use_large_link'),[])) + '</a>' : '<a href="#" class="toggle j-menu-quick-toplink js-use-small-menu font-color-meta" role="presentation">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.use_small_link'),[])) + '</a>', '<h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.create.link'),[])), '</h2></div><div class="j-nav-menu-scrollable js-nav-menu-scrollable">');
  var sectionList16 = opt_data.sections;
  var sectionListLen16 = sectionList16.length;
  for (var sectionIndex16 = 0; sectionIndex16 < sectionListLen16; sectionIndex16++) {
    var sectionData16 = sectionList16[sectionIndex16];
    if (sectionData16.visible) {
      output.append('<strong class="j-menu-quick-sectionlabel font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(sectionData16.name),[])), '</strong><ul id="create-list-', soy.$$escapeHtml(sectionIndex16), '" class="j-icon-list js-create-list">');
      var itemList24 = sectionData16.items;
      var itemListLen24 = itemList24.length;
      for (var itemIndex24 = 0; itemIndex24 < itemListLen24; itemIndex24++) {
        var itemData24 = itemList24[itemIndex24];
        if (itemData24.visible && ! (itemData24.nameKey.indexOf('video') != -1)) {
          if (itemData24.appAction) {
            jive.nav.menu.create.appActionLink(soy.$$augmentMap(itemData24, {smallView: opt_data.smallView}), output);
          } else {
            jive.nav.menu.create.contentTypeLinkItem(soy.$$augmentMap(itemData24, {smallView: opt_data.smallView}), output);
          }
        }
      }
      output.append('</ul>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.create.contentTypeLinkItem = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.uploadable) {
    output.append('<li>');
    jive.nav.menu.create.contentTypeLink(soy.$$augmentMap(opt_data.uploadLink, {upload: true, smallView: opt_data.smallView}), output);
    output.append('</li>');
  }
  output.append('<li>');
  jive.nav.menu.create.contentTypeLink(opt_data, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.create.contentTypeLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.iconCss) {
    output.append('<a href="');
    jive.nav.menu.create.contentTypeHref(soy.$$augmentMap(opt_data, {legacy: ((opt_data.linkCss).match(new RegExp('js-legacy-create', '')) || []).length > 0}), output);
    output.append('" class="', soy.$$escapeHtml(opt_data.linkCss), '"', (opt_data.urlParams && opt_data.urlParams.contentType) ? ' data-content-type="' + soy.$$escapeHtml(opt_data.urlParams.contentType) + '"' : '', (opt_data.upload) ? ' data-upload="true"' : '');
    if (((opt_data.linkCss).match(new RegExp('quick', '')) || []).length > 0) {
      output.append(' data-quick-create-url="');
      jive.nav.menu.create.contentTypeHref(soy.$$augmentMap(opt_data, {legacy: true}), output);
      output.append('"');
    }
    output.append('><span class="', soy.$$escapeHtml(opt_data.iconCss), ' jive-icon-', (opt_data.iconSize) ? soy.$$escapeHtml(opt_data.iconSize) : (opt_data.smallView) ? 'med' : 'big', '"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.smallView && opt_data.smallNameKey ? opt_data.smallNameKey : opt_data.nameKey),[])), '</a>');
  }
  output.append((! opt_data.smallView && opt_data.descriptionKey) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.descriptionKey),[])) + '</p>' : '');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.create.contentTypeHref = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.legacy) ? (opt_data.urlParams) ? soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.url,jQuery.extend({}, (function() { var map = {}; var pairs = [['sr', 'cmenu']]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), opt_data.urlParams))) : soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.url,(function() { var map = {}; var pairs = [['sr', 'cmenu']]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })())) : 'javascript:void(0)');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.create.quick = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal jive-modal-quickcreate">');
  jive.shared.displayutil.a11yBoundary({type: 'dialog'}, output);
  output.append('<header class="j-modal-header"><h2 class="js-title">', soy.$$escapeHtml(opt_data.title), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content">', soy.$$filterNoAutoescape(opt_data.body), '</section>');
  jive.shared.displayutil.a11yBoundary({type: 'dialog', isEnd: true}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.create.appActionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li>');
  if (opt_data.windowSpec || ! opt_data.actionUrl) {
    output.append('<a href="#" rel="nofollow" class="app-action" data-action-id="', soy.$$escapeHtml(opt_data.id), '" data-app-url="', soy.$$escapeHtml(opt_data.appURL), '" data-app-uuid="', soy.$$escapeHtml(opt_data.appUUID), '" data-app-instance-uuid="', soy.$$escapeHtml(opt_data.appInstanceUUID), '" data-name="os-action-link" data-selection-type="', soy.$$escapeHtml(opt_data.coreAPIType), '" data-label="', soy.$$escapeHtml(opt_data.label), '" data-selection-id="', (opt_data.contextObject) ? soy.$$escapeHtml(opt_data.contextObject.id) : '', '" data-view="', (opt_data.view) ? soy.$$escapeHtml(opt_data.view) : '', '"', (opt_data.tooltip) ? 'title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '>');
    switch (opt_data.icon) {
      case 'edit':
        output.append('<span class="jive-icon-med jive-icon-edit"></span>');
        break;
      case 'manage':
        output.append('<span class="jive-icon-med jive-icon-gear"></span>');
        break;
      case 'move':
        output.append('<span class="jive-icon-med jive-icon-move"></span>');
        break;
      case 'add':
        output.append('<span class="jive-icon-med jive-icon-plus"></span>');
        break;
      case 'delete':
        output.append('<span class="jive-icon-med jive-icon-delete"></span>');
        break;
      case 'download':
        output.append('<span class="jive-icon-med jive-icon-appmarket"></span>');
        break;
      case 'flag':
        output.append('<span class="jive-icon-med jive-icon-checkpoint"></span>');
        break;
      case 'graph':
        output.append('<span class="jive-icon-med jive-icon-poll"></span>');
        break;
      case 'link':
        output.append('<span class="jive-icon-med jive-icon-link"></span>');
        break;
      case 'create':
        output.append('<span class="jive-icon-med jive-icon-add"></span>');
        break;
      default:
        output.append((opt_data.smallView) ? '<span class="jive-icon-med jive-icon-blank"><img src="' + soy.$$escapeHtml(opt_data.icon) + '" height="16" width="16" /></span>' : '<span class="jive-icon-big jive-icon-blank"><img src="' + soy.$$escapeHtml(opt_data.icon) + '" height="24" width="24" /></span>');
    }
    output.append(soy.$$escapeHtml(opt_data.label), '</a>');
  } else {
    output.append('<a href="', soy.$$escapeHtml(opt_data.actionUrl), '" rel="nofollow" data-action-id="', soy.$$escapeHtml(opt_data.id), '" data-app-url="', soy.$$escapeHtml(opt_data.appURL), '" data-app-uuid="', soy.$$escapeHtml(opt_data.appUUID), '" data-app-instance-uuid="', soy.$$escapeHtml(opt_data.appInstanceUUID), '" data-name="os-action-link" data-selection-type="', soy.$$escapeHtml(opt_data.coreAPIType), '" data-label="', soy.$$escapeHtml(opt_data.label), '" data-selection-id="', (opt_data.contextObject) ? soy.$$escapeHtml(opt_data.contextObject.id) : '', '" data-view="', (opt_data.view) ? soy.$$escapeHtml(opt_data.view) : '', '" data-action="', (opt_data.actionUrl) ? soy.$$escapeHtml(opt_data.actionUrl) : '', '"', (opt_data.tooltip) ? 'title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '>');
    switch (opt_data.icon) {
      case 'edit':
        output.append('<span class="jive-icon-med jive-icon-edit"></span>');
        break;
      case 'manage':
        output.append('<span class="jive-icon-med jive-icon-gear"></span>');
        break;
      case 'move':
        output.append('<span class="jive-icon-med jive-icon-move"></span>');
        break;
      case 'add':
        output.append('<span class="jive-icon-med jive-icon-plus"></span>');
        break;
      case 'delete':
        output.append('<span class="jive-icon-med jive-icon-delete"></span>');
        break;
      case 'download':
        output.append('<span class="jive-icon-med jive-icon-appmarket"></span>');
        break;
      case 'flag':
        output.append('<span class="jive-icon-med jive-icon-checkpoint"></span>');
        break;
      case 'graph':
        output.append('<span class="jive-icon-med jive-icon-poll"></span>');
        break;
      case 'link':
        output.append('<span class="jive-icon-med jive-icon-link"></span>');
        break;
      case 'create':
        output.append('<span class="jive-icon-med jive-icon-add"></span>');
        break;
      default:
        output.append((opt_data.smallView) ? '<span class="jive-icon-med jive-icon-blank"><img src="' + soy.$$escapeHtml(opt_data.icon) + '" height="16" width="16" /></span>' : '<span class="jive-icon-big jive-icon-blank"><img src="' + soy.$$escapeHtml(opt_data.icon) + '" height="24" width="24" /></span>');
    }
    output.append('<span class="lnk">', soy.$$escapeHtml(opt_data.label), '</span></a>');
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("places.Manage");jive.places.Manage.CustomControls=jive.places.Manage.AbstractControls.extend(function(a){var b=jQuery;a.modalContent="";a.modal="";a.activationLink=".jive-link-manage-custom";a.reloadOnClose=false;a.init=function(){var c=this;b(document).ready(function(){b(c.activationLink).click(function(f){var g=null;var d=b(this).attr("href");if(d!=null&&d.indexOf("http")!=0&&d.indexOf("/")!=0){d="/"+d}c.onActivate(f,b(this));c.showSpinner();c.emitP("load",g,d).addCallback(function(k){var i=c.separateScripts(k),h=i[0],e=i[1],l=(h.match(/data-title\s*=\s*['"]([^'"]+)['"]/)||[])[1]||"";var j=jive.nav.menu.create.quick({title:l,body:h});b(j).lightbox_me({destroyOnClose:true,onClose:function(){if(c.reloadOnClose){window.location.reload()}return false}});e();c.hideSpinner()});b("#j-place-manage-container").trigger("close");f.preventDefault()})})}});define("apps/places/manage/views/custom_controls",function(){return jive.places.Manage.CustomControls});
;
define("apps/static_files/static_file_controller",["jquery","apps/shared/models/core_deferred"],function(b,a){if(!jive.staticFileController||!jive.staticFileController.singleton){var c=jive.oo.Class.extend(function(d){this.init=function(){var e=this;b(document).on("click",".js-static-file-control",function(h){h.preventDefault();var g=b(this),i=g.data("containertype")||(jive.global&&jive.global.containerType),f=g.data("containerid")||(jive.global&&jive.global.containerID);e.createModal(i,f)})};this.createModal=function(h,f){var e=this;var g=function(i){return i.jive.corev3.places.get({entityDescriptor:[h,f]})};a.runQuery(g).then(function(j){if(j.list){e.placeObj=j.list[0]}else{e.placeObj=j[0]}var i=new jive.conc.Promise();i.addCallback(function(k){e.files=k;e.parseFileExtensions();require(["apps/static_files/static_file_modal"],function(l){e.modalView=new l({placeObj:e.placeObj,staticFiles:e.files,containerType:h});e.addModalListeners()})});e.getFileList(e.placeObj,i)})};this.getFileList=function(f,g){var e=this,h=f.getStatics();h.execute(function(i){if(i.error){g.emitError()}else{e.files=i.list;e.parseFileExtensions();g.emitSuccess(e.files)}})};this.addModalListeners=function(){var e=this;e.modalView.addListener("getList",function(f){e.getFileList(e.placeObj,f)}).addListener("deleteFile",function(f,g){b.each(e.files,function(h,k){if(k.id==f){var j=k.destroy();j.execute(function(m){if(m.error){var l=m.error.code;var i=m.error.message}else{e.getFileList(e.placeObj,g)}});return false}})})};this.parseFileExtensions=function(){var e=this;b.each(e.files,function(g,h){var f=h.filename;h.fileExtension=f.split(".").pop().toLowerCase();h.iconClass=jive.shared.file.fileTypeIconClass({extension:h.fileExtension,size:"med"})})}});jive.staticFileController={};jive.staticFileController.singleton=new c()}});
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipView=jive.oo.Class.extend(function(a){var b="browse",d="landing";jive.conc.observable(this);this.init=function(g,i,f){var e=this;this.joinContainer=g;this.leaveContainer=i;this.options=f||{};var h="objectID" in f?d:b;this.isPage=function(j){return h===j};$j(document).ready(function(){if(e.isPage(d)){$j(document).delegate(e.joinContainer,"click",function(j){e.joinGroup($j(this));j.preventDefault()});$j(document).delegate(e.leaveContainer,"click",function(j){e.displayLeaveGroupModal($j(this));j.preventDefault()})}else{$j("body").on("click",".sgroup-join, .sgroup-leave",function(k){k.preventDefault();var j=$j(this);if(j.is(".sgroup-join")){e.joinGroup(j)}else{e.displayLeaveGroupModal(j)}})}})};this.joinGroup=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("join",g).addCallback(function(h){var i=$j.noop;if(e.isPage(d)){if(!h.banned){$j(e.leaveContainer).show();$j(e.joinContainer).hide()}i=function(){if(window.location.href.match(/\?(.*&)?qstep=(\d+)/)&&h.memberToContribute){window.location=c(1)}else{if(e.options.redirectOnJoin){window.location=e.options.redirectOnJoin}else{window.location.reload()}}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-leave").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.joinConfirmation(h),i);$j("#jive-link-socialgroup-startFollowing").hide();$j("#jive-link-socialgroup-following").show()}).addErrback(function(i,h){console.log("got error message: "+i+" code: "+h);e.displayError(i,h)})};this.displayLeaveGroupModal=function(f){var e=this;var g=e.determineObjectID(f);e.emitP("prepareLeave",g).addCallback(function(j){var h=$j(jive.socialgroups.soy.leaveGroup(j));$j("body").append(h);var i=$j("body").find("#jive-modal-leave-group");i.lightbox_me({closeSelector:".jive-modal-close, .close",destroyOnClose:true});i.find("#group-leave-submit").click(function(){e.leaveGroup(f,j);i.trigger("close")})}).addErrback(function(i,h){e.displayError(i,h)})};this.leaveGroup=function(f,g){var e=this;var h=e.determineObjectID(f);e.emitP("leave",h).addCallback(function(){var i=$j.noop;if(e.isPage(d)){$j(e.joinContainer).show();$j(e.leaveContainer).hide();$j("#jive-link-socialgroup-following").hide();$j("#jive-link-socialgroup-startFollowing").show();i=function(){if(!g.visibleAfterLeaving){window.location=jive.app.url({path:"/groups"})}else{if(g.memberToContribute){window.location=c(-1)}}}}else{$j(f).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-join").show();$j(f).hide()}e.displayMessage(jive.socialgroups.soy.leaveConfirmation(g),i)}).addErrback(function(j,i){e.displayError(j,i)})};this.displayMessage=function(e,f){$j("<p />").html(e).message({style:"success",dismissCallback:f||$j.noop})};this.displayError=function(g,f){var e=jive.socialgroups.soy.renderError({message:g,code:f,href:window.location.href});$j(e).message({style:"error",showClose:true})};this.determineObjectID=function(e){var f=this.options.objectID||e.attr("data-objectid")||0;return parseInt(f,10)};function c(e){return window.location.href.replace(/\?(.*&)?qstep=(\d+)/,function(h,f,i){var g=parseInt(i)+e;return"?"+f+"qstep="+g})}this.tearDown=function(){var e=this;if(e.isPage(d)){$j(e.joinContainer).off("click");$j(e.leaveContainer).off("click")}else{$j(".sgroup-join").off("click");$j(".sgroup-leave").off("click")}}});define("apps/socialgroup/membership/views/membership_view",function(){return jive.MembershipApp.MembershipView});
;
jive.namespace("MembershipApp");define("apps/socialgroup/membership/models/membership_source",["apps/shared/models/rest_service"],function(a){jive.MembershipApp.MembershipSource=a.extend(function(b){b.resourceType="socialgroup";this.save=function(e){var f=new jive.conc.Promise(),d=this;var c=$j.deparam.querystring().fromQ;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+e.objectID+"/members",dataType:"json",data:c,contentType:"application/json; charset=utf-8",success:function(g,i,h){f.emitSuccess(g)},error:function(i,k,j){try{var h=$j.parseJSON(i.responseText);if(h&&h.error&&h.error.message){f.emitError(h.error.message,h.error.code)}}catch(g){f.emitError(null,i&&i.status)}}});return f};this.get=function(e){var f=new jive.conc.Promise(),d=this;var c={};c[this.resourceType]=e;$j.ajax({type:"GET",url:this.RESOURCE_ENDPOINT+"/"+e.objectID+"/memberInfo",dataType:"json",success:function(g,i,h){f.emitSuccess(g)},error:function(i,k,j){try{var h=$j.parseJSON(i.responseText);if(h&&h.error&&h.error.message){f.emitError(h.error.message,h.error.code)}}catch(g){f.emitError(null,i&&i.status)}}});return f};this.destroy=function(c){var d=new jive.conc.Promise();$j.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+c.objectID+"/members",success:function(){d.emitSuccess()},error:function(g){try{var f=$j.parseJSON(g.responseText);if(f&&f.error&&f.error.message){d.emitError(f.error.message,f.error.code)}}catch(e){d.emitError(null,g&&g.status)}}});return d}});return jive.MembershipApp.MembershipSource});
;
jive.namespace("MembershipApp");define("apps/socialgroup/membership/main",function(){jive.MembershipApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.membershipSource=new jive.MembershipApp.MembershipSource(c);this.membershipView=new jive.MembershipApp.MembershipView("#jive-link-joinSocialGroup,.jive-link-joinSocialGroup","#jive-link-leaveSocialGroup,.jive-link-leaveSocialGroup",c);this.membershipView.addListener("join",function(e,d){b.membershipSource.save({objectID:e}).addCallback(function(f){d.emitSuccess(f);jive.switchboard.emit("sgroup.member.join",f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("leave",function(e,d){b.membershipSource.destroy({objectID:e}).addCallback(function(){jive.switchboard.emit("sgroup.member.leave",e);d.emitSuccess()}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("prepareLeave",function(e,d){b.membershipSource.get({objectID:e}).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})})};this.tearDown=function(){this.membershipView.removeListener("join").removeListener("leave").removeListener("prepareLeave").tearDown()}});return jive.MembershipApp.Main});
;
if(!jive.share){jive.share=(function(){var a;jive.dispatcher.listen("share",function(b){require(["apps/share/main"],function(c){a=a||new c();a.showModal(b.objectId,b.objectType)})});return{}})()};
;
jive.model.ProjectController=function(c,a){var b=this;this.projectObjectType=a;this.archiveURL=jive.rest.url("/project/archive");this.unarchiveURL=jive.rest.url("/project/unarchive");this.locatorURL=jive.rest.url("/objectType/url/findURL");this.statusURL=jive.rest.url("/project/status");this.doArchive=function(d,e){$j.post(this.archiveURL+"/"+d,e)};this.doUnarchive=function(d,e){$j.post(this.unarchiveURL+"/"+d,e)};this.doStatus=function(f,e,d,g){$j.post(this.statusURL+"/"+d+"/"+e,{text:f},g)};this.doLocate=function(d,e){$j.getJSON(this.locatorURL+"/"+a+"/"+d,e)}};
;
define("apps/shared/models/nested_rest_service",["apps/shared/models/rest_service"],function(a){jive.NestedRestService=a.extend(function(b,c){b.init=function(d){c.init.call(this,d);this.parentType=d.parentType;this.parentID=d.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});return jive.NestedRestService});
;
jive.namespace("Browse.Content");define("apps/browse/content/model/content_source",["apps/shared/models/rest_service"],function(a){jive.Browse.Content.ItemSource=a.extend(function(b){b.resourceType="content";b.pluralizedResourceType=b.resourceType;b.putOnUpdate=true});return jive.Browse.Content.ItemSource});
;
jive.namespace("Move.Content");jive.Move.Content.MoveContentItemSource=jive.Browse.Content.ItemSource.extend(function(a,b){a.suppressGenericErrorMessages();a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){if(g){try{$j("<p>"+g+"</p>").message({style:"error"})}catch(j){if(console&&console.log){console.log(j)}}}else{a.displayError(c())}e.emitError.apply(e,[g,f])}}}});define("apps/movecontent/models/move_content_item_source",function(){return jive.Move.Content.MoveContentItemSource});
;
jive.namespace("Browse.Container");define("apps/browse/container/model/container_source",["apps/shared/models/rest_service"],function(a){jive.Browse.Container.ItemSource=a.extend(function(b){b.resourceType="container";this.getContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.setContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d.propValue})};this.removeContainerProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:c})};this.getSpaceChildren=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerID+"/children";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.getBreadcrumbBean=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.containerType+"/"+d.containerID+"/breadcrumbs";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})}});return jive.Browse.Container.ItemSource});
;
// This file was automatically generated from movecontent.soy.
// Please don't edit this file by hand.

goog.provide('jive.movecontent.confirm');
goog.provide('jive.movecontent.imports');
goog.provide('jive.movecontent.successMessage');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.containerDisplayNameLink');
goog.require('jive.shared.soy.i18nHelper');


jive.movecontent.imports = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  return opt_sb ? '' : output.toString();
};


jive.movecontent.successMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-success-box" aria-live="polite" aria-atomic="true"><div><span class="jive-icon-med jive-icon-check"></span>');
  var param9 = new soy.StringBuilder();
  jive.shared.displayutil.containerDisplayNameLink({container: opt_data.prevContainer}, param9);
  var param12 = new soy.StringBuilder();
  jive.shared.displayutil.containerDisplayNameLink(opt_data, param12);
  jive.shared.soy.i18nHelper({i18nKey: 'content.mv.success', arg0: soy.$$escapeHtml(opt_data.contentTypeName), arg1: param9.toString(), arg2: param12.toString(), noAutoEscape: 'true'}, output);
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.movecontent.confirm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-move-confirm-section"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.confirm.title'),[])), '</h2></header><a class="j-modal-close-top close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content jive-modal-content-move clearfix"><h6>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.really_move_it.text'),[])), '</h6><p><img src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png')), '" alt="" class="', soy.$$escapeHtml(opt_data.content.iconCss), ' jive-icon-med" /> ', soy.$$filterNoAutoescape(opt_data.content.subject), '</p><h6>');
  if (opt_data.targetPersonalContainer) {
    jive.shared.soy.i18nHelper({i18nKey: 'content.mv.into_ctr.text', arg0: '<img src="' + soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png')) + '" alt="" class="' + soy.$$escapeHtml(opt_data.content.iconCss) + ' jive-icon-med" /> ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.personalContainerKey),[])), noAutoEscape: 'true'}, output);
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.into_this_ctr.text'),[])));
  }
  output.append('</h6>', (! opt_data.targetPersonalContainer) ? '<p><img src="' + soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png')) + '" alt="" class="' + soy.$$escapeHtml(opt_data.targetContainer.iconCss) + ' jive-icon-med" /> ' + soy.$$filterNoAutoescape(opt_data.targetContainer.subject) + '</p>' : '', (opt_data.docWithCollaborators) ? '<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.remove_collab.text'),[])) + '</span></p>' : '', (opt_data.restrictedSocialGroup) ? '<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.restricted_group.text'),[])) + '</span></p>' : '', (opt_data.sourceIsExStorage) ? '<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.external_storage_source.text'),[])) + '</span></p>' : (opt_data.targetIsExStorage) ? '<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.external_storage_target.text'),[])) + '</span></p>' : '', '<p class="j-move-notify-streams" ', (opt_data.content.archetype != 'content') ? 'style="display:none;"' : '', '><input type="checkbox" class="js-move-notify-streams" /> <strong class="j-move-notify-label js-move-notify-toggle">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.notify_streams.text'),[])), '</strong></p><div class="j-form-row"><button class="js-move-confirm j-btn-callout">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('content.mv.confirm.button'),[])), '</button><button class="js-move-confirm-cancel">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '</button></div></section></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Move.Content");jive.Move.Content.MoveView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Move.Content;a.init=function(){var d=this;c(document).ready(function(){c("#jive-link-move a, a#jive-link-move").click(function(e){d.emit("browse");e.preventDefault()})})};this.confirm=function(f){var d=this;var e=c(".jive-modal");var g=jive.movecontent.confirm(f);d.prevContent=e.children();d.visibleContent=d.prevContent.filter(":visible");d.visibleContent.hide();e.append(g).removeClass("j-container-browse").trigger("resize");e.find(".js-move-notify-toggle").click(function(){var h=e.find(".js-move-notify-streams");h.attr("checked",!h.is(":checked"))});e.find(".js-move-confirm").click(function(h){var i=c(this);i.attr("disabled","disabled");d.emit("moveConfirmed",{targetContainerType:f.targetContainer.type,targetContainerID:f.targetContainer.id,notifyStreams:e.find(".js-move-notify-streams").is(":checked"),failureCallback:function(){i.removeAttr("disabled")}});h.preventDefault()});e.find(".js-move-confirm-cancel").click(function(h){e.find(".js-move-confirm-section").remove();d.visibleContent.show();e.addClass("j-container-browse").trigger("resize");h.preventDefault()});e.find(".close").click(function(h){e.find(".js-move-confirm-section").remove();h.preventDefault()});c("body").find(".js_lb_overlay").click(function(h){e.find(".js-move-confirm-section").remove();h.preventDefault()})}});define("apps/movecontent/views/move_view",function(){return jive.Move.Content.MoveView});
;
jive.namespace("Move.Content");jive.Move.Content.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["content",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});define("apps/movecontent/models/move_content_source",function(){return jive.Move.Content.CapabilitiesSource});
;
jive.namespace("Move.Container");jive.Move.Container.CapabilitiesSource=jive.NestedRestService.extend(function(a,b){a.resourceType="capability";a.init=function(c){b.init.call(this,c);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["containers",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});define("apps/movecontent/models/move_container_source",function(){return jive.Move.Container.CapabilitiesSource});
;
jive.namespace("Move.Content");jive.Move.Content.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.containerType=c.containerType;this.containerID=c.containerID;this.isContainer=c.isContainer||false;this.contentCapabilitiesSource=new jive.Move.Content.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.containerCapabilitiesSource=new jive.Move.Container.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.contentSource=new jive.Move.Content.MoveContentItemSource();this.containerSource=new jive.Browse.Container.ItemSource();this.moveView=new jive.Move.Content.MoveView();this.placePicker=new jive.Placepicker.Main($j.extend({pickerContext:"move"},c));this.moveView.addListener("browse",function(d){b.placePicker.showPicker()});this.moveView.addListener("moveConfirmed",function(d){if(b.isContainer){b.handleConfirmation(b.containerSource,d)}else{b.handleConfirmation(b.contentSource,d)}});this.placePicker.addListener("container",function(d,e){if(b.isContainer){b.handleContainerSelected(b.containerCapabilitiesSource,d)}else{b.handleContainerSelected(b.contentCapabilitiesSource,d)}})};a.handleConfirmation=function(d,c){var b=this;d.save({id:b.objectType+"/"+b.objectID,objectType:c.targetContainerType,objectID:c.targetContainerID,notifyStreams:!!c.notifyStreams}).addCallback(function(e){window.location=jive.app.url({path:e.link+"?prevContainerType="+b.containerType+"&prevContainerID="+b.containerID})}).addErrback(function(e){c.failureCallback()})};a.handleContainerSelected=function(d,c){var b=this;d.findAll({containerType:c.targetContainerType,containerID:c.targetContainerID}).addCallback(function(e){b.moveView.confirm(e)})}});define("apps/movecontent/main",function(){return jive.Move.Content.Main});
;
// This file was automatically generated from main.soy.
// Please don't edit this file by hand.

goog.provide('jive.soy.email_notification.common');
goog.provide('jive.soy.email_notification.commonInSocialButton');
goog.provide('jive.soy.email_notification.message');
goog.provide('jive.soy.email_notification.start');
goog.provide('jive.soy.email_notification.stop');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.soy.email_notification.start = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.type) {
    case 'common':
      jive.soy.email_notification.common({message: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('thread.start_watch.link'),[]))}, output);
      break;
    case 'socialButton':
      jive.soy.email_notification.commonInSocialButton({message: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('thread.start_watch.link'),[]))}, output);
      break;
  }
  return opt_sb ? '' : output.toString();
};


jive.soy.email_notification.stop = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.type) {
    case 'common':
      jive.soy.email_notification.common({message: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('thread.stop_watch.link'),[]))}, output);
      break;
    case 'socialButton':
      jive.soy.email_notification.commonInSocialButton({message: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('thread.stop_watch.link'),[]))}, output);
      break;
  }
  return opt_sb ? '' : output.toString();
};


jive.soy.email_notification.message = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.type) {
    case 'watch':
      output.append((opt_data.isUser) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.watchuser.start'),[])) + '</p>' : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.watch.start'),[])) + '</p>');
      break;
    case 'unwatch':
      output.append((opt_data.isUser) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.watchuser.stop'),[])) + '</p>' : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.watch.stop'),[])) + '</p>');
      break;
  }
  return opt_sb ? '' : output.toString();
};


jive.soy.email_notification.common = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" rel="nofollow"><span class="jive-icon-med jive-icon-message-open"></span>', soy.$$escapeHtml(opt_data.message), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.soy.email_notification.commonInSocialButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-social-button j-rc5 j-button-toggle-email-notifications j-ui-elem"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-message-open"></span>', soy.$$escapeHtml(opt_data.message), '</span></a>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("EmailNotification");define("apps/email_notification/model/source",["apps/shared/models/rest_service"],function(a){jive.EmailNotification.Source=a.extend(function(b){b.resourceType="emailwatches";b.pluralizedResourceType=b.resourceType;b.resourceType="emailwatches";this.watch=function(e,c){var d=this.RESOURCE_ENDPOINT+"/watch/"+c+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d})};this.unwatch=function(e,c){var d=this.RESOURCE_ENDPOINT+"/unwatch/"+c+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d})}});return jive.EmailNotification.Source});
;
jive.namespace("EmailNotification");jive.EmailNotification.Main=function(e,d,b){var a=new jive.EmailNotification.Source(),c={watch:{newId:"jive-link-thread-unwatch",save:a.watch.bind(a),view:jive.soy.email_notification.stop},unwatch:{newId:"jive-link-thread-watch",save:a.unwatch.bind(a),view:jive.soy.email_notification.start}};$j("#jive-link-thread-watch, #jive-link-thread-unwatch").delegate("a","click",function(g){g.preventDefault();var h=$j(this).closest("#jive-link-thread-watch, #jive-link-thread-unwatch"),f=h.attr("id").split("-").pop();c[f].save(e,d).addCallback(function(){h.attr("id",c[f].newId).html(c[f].view({type:h.attr("data-type")||"common"}));$j(jive.soy.email_notification.message({type:f,isUser:!!b})).message({style:"success"})})})};define("apps/email_notification/main",function(){return jive.EmailNotification.Main});
;
jive.namespace("Modalizer");jive.Modalizer.ModalView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Modalizer;a.init=function(h){var e=this,f,g={};if(h.width&&h.width.match(/^(narrow|medium|wide)$/i)){f="jive-modal-"+h.width}else{if(h.width){g.width=h.width}else{f="jive-modal-medium"}}this.width=f;this.styles=g;this.opts=h;var d=function(j){var i=c(this).attr("href")||c(this).find("a:first").attr("href");if(i){e.modalize(i)}else{alert("No valid URL found to modalize")}j.preventDefault()};c(document).ready(function(){if(h.triggers){c.each(h.triggers,function(){c(""+this).click(d)})}if(h.liveTriggers){c.each(h.liveTriggers,function(){c(""+this).live("click",d)})}})};this.modalize=function(f,e){var d=this,g=this.width,i=this.styles,h=this.opts;d.emitP("launch",f).addCallback(function(o){var n=c("<div/>",{"class":"jive-modal j-modal"+(g?" "+g:""),id:"js-modalized"}).css(i);var m=d.separateScripts(o);var l=d.shiv(m[0]);var j=m[1];var k=!c.browser.msie||parseInt(c.browser.version,10)>8;k&&n.html(l);n.lightbox_me({destroyOnClose:true,closeFocusSelector:e?e:(h.triggers?h.triggers.join(", "):h.liveTriggers.join(", ")),onClose:h.onClose,onLoad:function(){if(!k){n.html(l);j()}}});if(k){j()}})}});define("apps/modalizer/views/modal_view",function(){return jive.Modalizer.ModalView});
;
jive.namespace("Modalizer");jive.Modalizer.ModalSource=jive.oo.Class.extend(function(a){a.init=function(b){this.method=b.method?b.method:"GET"};this.getConfirmation=function(b,d){var c=this;$j.ajax({url:b,type:c.method,dataType:"html",success:function(e){d(e)},error:function(e){require(["jquery","soy!jive.error.rest.soy.errorFinding"],function(g,f){g(f({href:window.location})).message({style:"error"})})}})}});define("apps/modalizer/models/modal_source",function(){return jive.Modalizer.ModalSource});
;
jive.namespace("Modalizer");jive.Modalizer.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.modalView=new jive.Modalizer.ModalView(c);this.modalSource=jive.Modalizer.ModalSource(c);this.modalView.addListener("launch",function(d,e){b.modalSource.getConfirmation(d,function(f){e.emitSuccess(f)})})};this.modalize=function(c,b){this.modalView.modalize(c,b)}});define("apps/modalizer/main",function(){return jive.Modalizer.Main});
;
define("apps/places/manage/main",["jquery","apps/places/manage/views/header_background"],function(b,a){return jive.oo.Class.extend(function(c){var d=jive.places.Manage;c.init=function(f,g){var e=this;this.objectType=f.objectType;this.objectID=f.id;this.membershipSupported=f.membershipSupported;this.canArchive=f.canArchive;this.placeI18nKeyPrefix=f.placeI18nKeyPrefix;this.objectURL=f.objectURL;this.parentID=f.parentID;this.parentType=f.parentType;this.placeName=f.name;this.canCreateByEmail=f.canCreateByEmail;this.canManageAnnouncements=g.canManageAnnouncements;this.canManageCategories=g.canManageCategories;this.canMoveContainer=g.canMoveContainer;this.canManageContainer=g.canManageContainer;this.i18n=g.i18n;this.availableDefaultBannerImages=g.availableDefaultBannerImages;if(this.canCreateByEmail){var h=this;window.launchAuthorByEmailModal=function(){var i=new d.AuthorByEmailControls();i.addListener("load",e.modalLoader("/author-by-email.jspa",{view:"place",containerType:h.objectType,container:h.objectID}))}}if(this.canManageCategories){this.categoryControls=new d.CategoryControls();this.categoryControls.addListener("load",this.modalLoader("/manage-category.jspa"))}if(this.canArchive){this.archiveControls=new d.ArchiveControls();this.archiveControls.addListener("load",this.modalLoader("/archive-project.jspa"))}if(this.canMoveContainer){this.jiveMoveContent=new jive.Move.Content.Main({objectType:this.objectType,objectID:this.objectID,objectUrl:this.objectURL,isContainer:true,containerID:this.parentID,containerType:this.parentType,searchPlaceholderKey:"place.picker.move.search.project"})}if(this.canManageContainer){this.deleteControls=new jive.Modalizer.Main({liveTriggers:["#jive-place-link-manage-delete"],width:"narrow"})}this.jiveFollow=new jive.FollowApp.Main({objectType:containerType,objectID:containerID,featureName:f.placeI18nKeyPrefix,i18n:this.i18n});if(this.membershipSupported){this.jiveMembership=new jive.MembershipApp.Main({objectID:containerID})}this.customControls=new d.CustomControls();this.customControls.addListener("load",this.modalLoader(""));jive.dispatcher.listen("showPlaceBackgroundMenu",function(){var j=new a(b(this),e.availableDefaultBannerImages);return;var l=this;var p=l.data("menuId"),o=!b("#j-controls").find(l[0]).length,k="below",m=jive.place.bgheader,i={placeName:e.placeName};var n=b(m[p](i));b(".js-pop > :eq(0)").trigger("close");n.popover({closeOtherPopovers:true,context:l,position:k});if(o){n.closest(".js-pop").offset(function(q,r){return{left:r.left-10,top:r.top-8}})}n.on("show hide",function(q){var r=b(q.target).attr("id");n.find('[data-target="#'+r+'"]').toggleClass("open",q.type==="show")})});b(function(){var i=new jive.MenuView(function(){return b("#j-place-manage-container")},"#jive-place-link-manage",{darkPopover:true,destroyOnClose:false,hoverSelection:true});e.menuView=i;b("#j-place-manage-container").click(function(j){e.menuView.close()}).on("close",function(){b(this).find(".j-selected").removeClass("j-selected")});new jive.EmailNotification.Main(f.id,f.objectType)})};c.modalLoader=function(f,g){var e=this;return function(k,h,j){var i=b.extend({containerType:e.objectType,container:e.objectID},g);if(typeof j=="undefined"){j=k;k=null}if(k){i.editID=k}if(!f&&h){f=h}b.get(jive.app.url({path:f}),i,function(l){j.emitSuccess(l)})}}})});
;
// This file was automatically generated from head.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.head');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.integration.backgroundImage');
goog.require('jive.invite.jsInit');
goog.require('jive.shared.soy.resourceInlineJs');


jive.place.head = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var availableDefaultBannerImages__soy3 = opt_data.editPlaceForm.availableDefaultBannerImages;
  jive.shared.soy.resourceInlineJs({code: 'require([\'apps/places/actions/main\', \'apps/places/manage/main\', \'apps/modalizer/main\'], function(Actions, Manage, Modalizer) {var manage = new Manage(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.place).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', {canManageAnnouncements: ' + ((opt_data.canManageAnnouncements) ? 'true' : 'false') + ', canCreateByEmail: ' + ((opt_data.canCreateByEmail) ? 'true' : 'false') + ', canManageCategories: ' + ((opt_data.canManageCategories) ? 'true' : 'false') + ', canMoveContainer: ' + ((opt_data.canMoveContainer) ? 'true' : 'false') + ', canManageContainer: ' + ((opt_data.canManageContainer) ? 'true' : 'false') + ', i18n: ' + soy.$$filterNoAutoescape(JSON.stringify((function() { var map = {}; var pairs = [['startFollowing', jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix + '.startFollow.desc'),[])], ['stopFollowing', jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix + '.stopFollow.desc'),[])], ['followError', jive.i18n.i18nText(jive.i18n.getMsg('global.follow.error'),[])]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', availableDefaultBannerImages: ' + soy.$$filterNoAutoescape(JSON.stringify(availableDefaultBannerImages__soy3).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '}); new Actions(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.place).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '); new Modalizer({liveTriggers:[\'#jive-place-link-about\'], width: \'wide\'});});'}, output);
  jive.invite.jsInit({container_id: opt_data.place.id, container_name: opt_data.place.name, container_type: opt_data.place.placeI18nKeyPrefix, company: opt_data.invitationLink.companyName, domains: opt_data.invitationLink.domainsAsJSON, allowEmail: opt_data.invitationLink.enabled, allowUsers: true, canInvitePartners: opt_data.place.visibleToPartner && opt_data.invitationLink.canInvitePartners, canInviteJustPartners: opt_data.invitationLink.canInviteJustPartners, canInvitePreprovisioned: opt_data.invitationLink.canInvitePreprovisioned, invitePreprovisionedDomainRestricted: opt_data.invitationLink.invitePreprovisionedDomainRestricted, maxInvite: opt_data.invitationLink.maxInvitationCount, invitePeriod: opt_data.invitationLink.invitationPeriodInHours, showNow: opt_data.showInviter, message: opt_data.defaultInviteMessage, trial: opt_data.invitationLink.trial, skillsEnabled: opt_data.invitationLink.skillsEnabled, trigger: '#jive-place-link-actions-invite', trackingID: ''}, output);
  output.append('<link rel="stylesheet" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-customization-controls.css')), '" type="text/css" media="all" /><link rel="stylesheet" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-places.css')), '" type="text/css" media="all" /><div id="place-background-image"', (opt_data.integrationTemplate.headerSettings != null) ? 'data-header-settings="' + soy.$$escapeHtml(JSON.stringify(opt_data.integrationTemplate.headerSettings).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '"' : '', '>');
  if (opt_data.integrationTemplate.headerSettings != null) {
    jive.integration.backgroundImage(opt_data.integrationTemplate.headerSettings, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from action_link.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.soy.actionLink');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.soy.actionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a ', (opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', ' href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.url,opt_data.urlParams)), '" class="', (opt_data.linkCss) ? soy.$$escapeHtml(opt_data.linkCss) : '', (opt_data.activeTab) ? ' j-ui-elem' : '', '"', (opt_data.urlParams && opt_data.urlParams.contentType) ? 'data-content-type="' + soy.$$escapeHtml(opt_data.urlParams.contentType) + '"' : '', (opt_data.urlParams && opt_data.urlParams.containerType) ? 'data-container-type="' + soy.$$escapeHtml(opt_data.urlParams.containerType) + '"' : '', '>', (! opt_data.hideIcon) ? '<span class="' + ((opt_data.iconCss) ? soy.$$escapeHtml(opt_data.iconCss) : '') + ' jive-icon-' + ((opt_data.iconSize) ? soy.$$escapeHtml(opt_data.iconSize) : 'med') + '">' + ((opt_data.icon) ? '<img src="' + soy.$$escapeHtml(opt_data.icon) + '"/>' : '') + '</span>' : '', (opt_data.label) ? soy.$$escapeHtml(opt_data.label) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.nameKey),[])), (opt_data.includeCounter) ? ' <span class="j-js-newCount j-rc5" style="display:none">' + ((opt_data.count) ? soy.$$escapeHtml(opt_data.count) : '0') + '</span>' : '', '</a>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from announcements.soy.
// Please don't edit this file by hand.

goog.provide('jive.announcements.announcementCard');
goog.provide('jive.announcements.buildEditLinkByIds');
goog.provide('jive.announcements.buildIconByType');
goog.provide('jive.announcements.confirmDelete');
goog.provide('jive.announcements.confirmExpire');
goog.provide('jive.announcements.list');
goog.provide('jive.announcements.manageRow');
goog.provide('jive.announcements.noResults');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.resourceInlineJs');


jive.announcements.list = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.announcements.length > 0) {
    output.append('<div id="jive-alert" role="marquee" class="clearfix ', (opt_data.announcements.length > 1) ? 'j-multi-announcements' : '', '">');
    jive.shared.soy.resourceInlineJs({code: '$j(document).ready( function() {var jiveAnnouncementsAction = new jive.AnnouncementsAction.Main();});'}, output);
    var annList13 = opt_data.announcements;
    var annListLen13 = annList13.length;
    for (var annIndex13 = 0; annIndex13 < annListLen13; annIndex13++) {
      var annData13 = annList13[annIndex13];
      output.append('<span id="j-announcement-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '" class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.announcement.gtitle'),[])), ' ', soy.$$escapeHtml(annIndex13 + 1), ' ', soy.$$filterNoAutoescape(annData13.subject), '</span><div class="jive-alert-type jive-alert-announcement" id="jive-alert-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '" aria-labelledby="j-announcement-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '" tabindex="0"', (! (annIndex13 == 0)) ? 'style="display: none;"' : '', '><div class="jive-alert-header"><h5 class="jive-alert-title"><span class="jive-alert-label jive-alert-announcement-label"><span class="jive-icon-med jive-icon-announcement"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.announcement.gtitle'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</span><span class="jive-alert-title-text">', (annData13.subjectURI) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(annData13.subjectURI)) + '">' : '', soy.$$filterNoAutoescape(annData13.subject), (annData13.subjectURI) ? '</a>' : '', '</span></h5><ul><li class="jive-alert-details-show" id="jive-alert-details-show-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '"><a href="#" onclick="showAlertContent(); return false;">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.show_details'),[])), '</a></li><li class="jive-alert-details-hide" id="jive-alert-details-hide-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '" style="display: none;"><a href="#" onclick="hideAlertContent(); return false;">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.hide_details'),[])), '</a></li></ul></div><div class="jive-alert-content" id="jive-alert-content-', soy.$$escapeHtmlAttribute(annIndex13 + 1), '" style="display: none;"><div id="jive-announcements-links-', soy.$$escapeHtmlAttribute(annData13.id), '" class="jive-alert-details font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('jivemacro.by.label'),[])), ' ', soy.$$escapeHtml(annData13.user.displayName), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])), soy.$$escapeHtml((annData13.publishDate ? _jive_moment((parseFloat(annData13.publishDate) ? parseFloat(annData13.publishDate) : annData13.publishDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LL') : '')), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])), '<span>');
      if (annData13.canEdit) {
        jive.announcements.buildEditLinkByIds(soy.$$augmentMap(opt_data, {announcementId: annData13.id, announcementSubject: annData13.subject}), output);
        output.append((! annData13.expired) ? '<a href="#" onclick="$j(\'#jive-body-announcements-expire-' + soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)) + '\').show(); $j(\'#jive-body-announcements-delete-' + soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)) + '\').hide(); $j(\'#jive-body-announcements-dismiss-' + soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)) + '\').hide(); return false;">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.expire'),[])) + '</a>' : '', '<a href="#" onclick="$j(\'#jive-body-announcements-delete-', soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)), '\').show(); $j(\'#jive-body-announcements-expire-', soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)), '\').hide(); $j(\'#jive-body-announcements-dismiss-', soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)), '\').hide(); return false;">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.delete'),[])), '</a>');
      }
      output.append('</span></div>', (annData13.image) ? '<img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(annData13.image)) + '" class="j-announcement-overview-image" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.overview.image.text'),[])) + '" alt="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.overview.image.text'),[])) + '" />' : '', soy.$$filterNoAutoescape(annData13.body), '<div class="jive-body-announcements-confirm" id="jive-body-announcements-expire-', soy.$$escapeHtmlAttribute(annData13.id), '" style="display: none;"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.confirm.expiration.text'),[])), '</p><form><input type="button" name="delete" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.expire_announcemt.button'),[])), '" class="announcement-expire" data-object-id="', soy.$$escapeHtmlAttribute(annData13.id), '"/><input type="button" name="cancel" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '" onclick="$j(\'#jive-body-announcements-expire-', soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)), '\').hide();return false;"/></form></div><div class="jive-body-announcements-confirm" id="jive-body-announcements-delete-', soy.$$escapeHtmlAttribute(annData13.id), '" style="display: none;"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('jivemacro.confirmDelAncmnt.text'),[])), '</p><form><input type="button" name="delete" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.del_announcement.button'),[])), '" class="announcement-remove" data-object-id="', soy.$$escapeHtmlAttribute(annData13.id), '"/><input type="button" name="cancel" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '" onclick="$j(\'#jive-body-announcements-delete-', soy.$$escapeHtmlAttribute(soy.$$escapeJsString(annData13.id)), '\').hide();return false;"/></form></div>', (opt_data.showDismiss) ? '<div class="jive-alert-userRemove clearfix"><div class="jive-alert-userRemove-message"><a href="#" class="announcement-dismiss" data-object-id="' + soy.$$escapeHtmlAttribute(annData13.id) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.dismiss_announcemt.button'),[])) + '</a><span class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.dismiss_announcemt.text'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])) + '</span></div><div class="jive-body-announcements-confirm" id="jive-body-announcements-dismiss-' + soy.$$escapeHtmlAttribute(annData13.id) + '" style="display: none;"><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('jivemacro.confirmDismissAncmnt.msg'),[])) + '</p></div></div>' : '', '</div></div>');
    }
    if (opt_data.announcements.length > 1) {
      output.append('<span id="jive-alert-counter"><span id="j-anncmt-previous-label" class="j-508-label" aria-hidden="true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.previous.text'),[])), '</span><a href="#" id="j-anncmt-previous" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.previous.text'),[])), '" aria-labelledby="j-anncmt-previous-label"><span class="jive-icon-med jive-icon-arrow-left"></span></a><span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.count.text'),[])), '</span><span id="jive-alert-counter-display"></span><span id="j-anncmt-next-label" class="j-508-label" aria-hidden="true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.next.text'),[])), '</span><a href="#" id="j-anncmt-next" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('anncmt.next.text'),[])), '" aria-labelledby="j-anncmt-next-label"><span class="jive-icon-med jive-icon-arrow-right"></span></a></span>');
      jive.shared.soy.resourceInlineJs({code: 'var alertCycle = window.setInterval(cycleAlerts, 15000); var pauseCycle = false; var currentAlert = 1; var alertCount = ' + soy.$$escapeHtml(opt_data.announcements.length) + '; function shiftAlert(increment) {var newIndex = currentAlert+increment; if (newIndex>alertCount) {newIndex = 1;}else if (newIndex<1) {newIndex = alertCount;}showAlert(newIndex); $j(\'#jive-alert-\' + newIndex).focus();}function cycleAlerts() {if (!pauseCycle) {currentAlert++; if (currentAlert > alertCount) {currentAlert = 1;}showAlert(currentAlert);}}function showAlert(index) {$j(\'.jive-alert-type\').hide(); $j(\'#jive-alert-\' + index).show(); $j(\'.jive-alert-count\').removeClass(\'jive-alert-count-active\'); $j(\'#jive-alert-count-\' + index).addClass(\'jive-alert-count-active\'); currentAlert = index; $j("#jive-alert-counter-display").text(currentAlert+"/"+alertCount);}function chooseAlert(index) {clearInterval(alertCycle); showAlert(index);}function showAlertContent() {clearInterval(alertCycle); $j(\'.jive-alert-details-show\').hide(); $j(\'.jive-alert-details-hide\').show(); $j(\'.jive-alert-details-hide a\').focus(); $j(\'.jive-alert-content\').show();}function hideAlertContent() {clearInterval(alertCycle); $j(\'.jive-alert-details-hide\').hide(); $j(\'.jive-alert-details-show\').show(); $j(\'.jive-alert-details-show a\').focus(); $j(\'.jive-alert-content\').hide();}$j(function() {$j(\'#jive-alert\').mouseover(function(e) { pauseCycle = true; }); $j(\'#jive-alert\').mouseout(function(e) { pauseCycle = false; }); $j(\'#j-anncmt-previous\').click(function(e) { shiftAlert(-1); } ); $j(\'#j-anncmt-previous\').keyup(function(e) { if (e.keyCode == 13) shiftAlert(-1); } ); $j(\'#j-anncmt-next\').click(function(e) { shiftAlert(1); } ); $j(\'#j-anncmt-next\').keyup(function(e) { if (e.keyCode == 13) shiftAlert(1); } ); showAlert(1);});'}, output);
    } else {
      jive.shared.soy.resourceInlineJs({code: 'function showAlertContent() {$j(\'#jive-alert-details-show-1\').hide(); $j(\'#jive-alert-details-hide-1\').show(); $j(\'#jive-alert-details-hide-1 a\').focus(); $j(\'#jive-alert-content-1\').show();}function hideAlertContent() {$j(\'#jive-alert-details-hide-1\').hide(); $j(\'#jive-alert-details-show-1\').show(); $j(\'#jive-alert-details-show-1 a\').focus(); $j(\'#jive-alert-content-1\').hide();}'}, output);
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.announcements.manageRow = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="', soy.$$escapeHtmlAttribute(opt_data.statkey), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '" data-object-status="', soy.$$escapeHtmlAttribute(opt_data.statkey), '"><td class="name subject"><div>', soy.$$escapeHtml(opt_data.subject), '</div></td><td class="author">', soy.$$escapeHtml(opt_data.user), '</td><td class="date"><strong class="', (opt_data.statkey == 'active') ? 'font-color-normal' : (opt_data.statkey == 'upcoming') ? '\'font-color-new\'' : (opt_data.statkey == 'expired') ? '\'font-color-meta\'' : '', '">', soy.$$escapeHtml(opt_data.status), '</strong> - ', soy.$$escapeHtml(opt_data.days), '</td><td class="actions">', (opt_data.statkey == 'expired') ? '<a href="#" class="updateViewLink">(' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.edit'),[])) + '</a> | <a href="#" class="expireRemoveLink">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.delete'),[])) + ')</a>' : '<a href="#" class="updateViewLink">(' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.edit'),[])) + '</a> | <a href="#" class="expireRemoveLink">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.expire'),[])) + ')</a>', '</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.announcements.noResults = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr><td>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.no-announcements.text'),[])), '</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.announcements.confirmDelete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('jivemacro.confirmDelAncmnt.text'),[])));
  return opt_sb ? '' : output.toString();
};


jive.announcements.confirmExpire = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.confirm.expiration.text'),[])));
  return opt_sb ? '' : output.toString();
};


jive.announcements.announcementCard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-announcement j-rc5 js-announcement" ', (opt_data.announcement.resources) ? 'data-ref="' + soy.$$escapeHtmlAttribute(opt_data.announcement.resources.self.ref) + '"' : '', '><div class=\'j-announcement-header\'><div class="js-announcement-header-content">');
  if (opt_data.announcement.subjectURITargetType) {
    jive.announcements.buildIconByType(opt_data, output);
  } else if (opt_data.announcement.subjectURI) {
    output.append('<span role=\'img\' title=\'', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.externalUrl'),[])), '\' class="jive-icon-med jive-icon-external-site"></span>');
  } else {
    output.append('<span role=\'img\' title=\'', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])), '\' class="jive-icon-med jive-icon-announcement"></span>');
  }
  output.append((opt_data.announcement.subjectURI) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.announcement.subjectURI)) + '" class="js-announcement-subjectURI">' : '', '<span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])), '</span>', soy.$$escapeHtml(opt_data.announcement.subject), (opt_data.announcement.subjectURI) ? '</a>' : '', '</div></div><div class="j-announcement-body ', soy.$$escapeHtmlAttribute($j(opt_data.announcement.content.text).text().length < 1 ? 'j-announce-image-only' : 'j-announce-text'), ' clearfix">', (opt_data.announcement.image && $j(opt_data.announcement.content.text).text().length < 1) ? '<div class="j-announcement-image-wrapper"><img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.announcement.image)) + '" alt="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.announcement.image'),[])) + '" /></div>' : ((opt_data.announcement.image) ? '<img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.announcement.image)) + '" alt="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.announcement.image'),[])) + '" />' : '') + soy.$$filterNoAutoescape(opt_data.announcement.content.text), '</div><div class="j-announcement-more" style="display:none;"><a href=\'#\'>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.more'),[])), '</a></div><div class="j-author font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.createdOn.text'),[((opt_data.announcement.publishDate ? jive.model.DateUtil.parseISODateTime(opt_data.announcement.publishDate) : '') ? _jive_moment((parseFloat((opt_data.announcement.publishDate ? jive.model.DateUtil.parseISODateTime(opt_data.announcement.publishDate) : '')) ? parseFloat((opt_data.announcement.publishDate ? jive.model.DateUtil.parseISODateTime(opt_data.announcement.publishDate) : '')) : (opt_data.announcement.publishDate ? jive.model.DateUtil.parseISODateTime(opt_data.announcement.publishDate) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('LL') : '')])), '<br/>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.createdBy.text'),[opt_data.announcement.author.displayName ? opt_data.announcement.author.displayName : jive.i18n.i18nText(jive.i18n.getMsg('global.you'),[])])), '</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.announcements.buildIconByType = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.announcement.subjectURI && opt_data.announcement.subjectURITargetType) ? (opt_data.announcement.subjectURITargetType == 'message' || opt_data.announcement.subjectURITargetType == 'discussion') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.discussion'),[])) + '\' role=\'img\' class="jive-icon-discussion jive-icon-med"></span>' : (opt_data.announcement.subjectURITargetType == 'document' || opt_data.announcement.subjectURITargetType == 'file') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.document'),[])) + '\' role=\'img\' class="jive-icon-document jive-icon-med"></span>' : (opt_data.announcement.subjectURITargetType == 'post' || opt_data.announcement.subjectURITargetType == 'blog') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.blogPost'),[])) + '\' role=\'img\' class="jive-icon-blog jive-icon-med"></span>' : (opt_data.announcement.subjectURITargetType == 'update') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-status jive-icon-med"></span>' : (opt_data.announcement.subjectURITargetType == 'favorite') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-med jive-icon-external-site"></span>' : (opt_data.announcement.subjectURITargetType == 'poll') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.poll'),[])) + '\' role=\'img\' class="jive-icon-poll jive-icon-med"></span>' : (opt_data.announcement.subjectURITargetType == 'task') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.task'),[])) + '\' role=\'img\' class="jive-icon-med jive-icon-task"></span>' : (opt_data.announcement.subjectURITargetType == 'space' || opt_data.announcement.subjectURITargetType == 'project' || opt_data.announcement.subjectURITargetType == 'group') ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-' + soy.$$escapeHtmlAttribute(opt_data.announcement.subjectURITargetType) + ' jive-icon-med"></span>' : (opt_data.announcement.subjectURI) ? '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-med jive-icon-external-site"></span>' : '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-med jive-icon-announcement"></span>' : '<span title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) + '\' role=\'img\' class="jive-icon-med jive-icon-announcement"></span>');
  return opt_sb ? '' : output.toString();
};


jive.announcements.buildEditLinkByIds = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', (opt_data.containerType && opt_data.containerId) ? soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/edit-announcements.jspa?announcementId=' + opt_data.announcementId + '&containerType=' + opt_data.containerType + '&containerID=' + opt_data.containerId))) : soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/edit-announcements.jspa?announcementId=' + opt_data.announcementId))), '" class="js-editLink">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.edit.title'),[])), '<span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])), ' ', soy.$$filterNoAutoescape(opt_data.announcementSubject), '</span></a>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("AnnouncementsAction");jive.AnnouncementsAction.ActionView=jive.AbstractView.extend(function(a){var b=jQuery;this.init=function(d){var c=this;$j(".announcement-expire").bind("click",function(f){var g=$j(this).attr("data-object-id");c.emitP("expire",g).addCallback(function(e){window.location.reload()})});$j(".announcement-remove").bind("click",function(f){var g=$j(this).attr("data-object-id");c.emitP("remove",g).addCallback(function(e){window.location.reload()})});$j(".announcement-dismiss").bind("click",function(f){var g=$j(this).attr("data-object-id");$j("#jive-body-announcements-dismiss-"+g).fadeIn(3000,function(){c.emitP("dismiss",g).addCallback(function(e){window.location.reload()})});$j(".jive-alert-userRemove-message").hide();$j("#jive-body-announcements-expire-"+g).hide();$j("#jive-body-announcements-delete-"+g).hide()})}});define("apps/announcements/action/views/announcement_action_view",function(){return jive.AnnouncementsAction.ActionView});
;
jive.namespace("Announcements");define("apps/announcements/announcement_service",["apps/shared/models/rest_service"],function(a){jive.Announcements.Source=a.extend(function(b,c){b.resourceType="announcement";this.init=function(d){c.init.call(this);this.suppressGenericErrorMessages()};this.expire=function(d){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/expire/"+d})};this.dismiss=function(d){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/dismiss/"+d})};this.showGenericSaveError=function(){this.displayError(this.errorSaving())};this.findAll=function(d){return c.findAll.call(this,jQuery.extend({nonce:(new Date()).getTime()},d))}});return jive.Announcements.Source});
;
jive.namespace("AnnouncementsAction");jive.AnnouncementsAction.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;b.view=new jive.AnnouncementsAction.ActionView(c);b.source=new jive.Announcements.Source();b.view.addListener("expire",function(e,d){b.source.expire(e).addCallback(function(){d.emitSuccess()})});b.view.addListener("remove",function(e,d){b.source.destroy(e).addCallback(function(){d.emitSuccess()})});b.view.addListener("dismiss",function(e,d){b.source.dismiss(e).addCallback(function(){d.emitSuccess()})})}});define("apps/announcements/action/main",function(){return jive.AnnouncementsAction.Main});
;
// This file was automatically generated from breadcrumb.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.breadcrumb.contextMenu');
goog.provide('jive.shared.breadcrumb.contextPopover');
goog.provide('jive.shared.breadcrumb.legacyBreadcrumbs');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.breadcrumb.contextMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.place) {
    output.append('<a href="#" id="j-place-parents-link" class="j-context-more j-ui-elem" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.breadcrumb.button.label'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.breadcrumb.button.label'),[])), '</a>');
    jive.shared.breadcrumb.contextPopover(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.shared.breadcrumb.contextPopover = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-place-parents-container" class="j-menu j-breadcrumb-popover" style="display: none" xmlns:v="http://rdf.data-vocabulary.org/#"><ul><li typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/places'))), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.breadcrumb.place.link'),[])), '</a>');
  if (opt_data.parents.length > 0) {
    var parentList21 = opt_data.parents;
    var parentListLen21 = parentList21.length;
    for (var parentIndex21 = 0; parentIndex21 < parentListLen21; parentIndex21++) {
      var parentData21 = parentList21[parentIndex21];
      output.append('<ul><li typeof="v:Breadcrumb">', (parentData21.viewableByUser) ? '<a rel="v:url" property="v:title" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(parentData21.objectURL))) + '"><span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(parentData21.iconCssClass) + '"></span> ' + soy.$$escapeHtml(parentData21.name) + '</a>' : '<span><span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(parentData21.iconCssClass) + '"></span> ' + soy.$$escapeHtml(parentData21.name) + '</span>', '<span class="jive-icon-sml jive-icon-arrow-breadcrumb"></span>');
    }
  }
  output.append('<ul><li typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.place.objectURL))), '" class="last-child"><span class="jive-icon-med ', soy.$$escapeHtmlAttribute(opt_data.place.iconCssClass), '"></span> ', soy.$$escapeHtml(opt_data.place.name), '</a></li></ul>');
  if (opt_data.parents.length > 0) {
    var parentList49 = opt_data.parents;
    var parentListLen49 = parentList49.length;
    for (var parentIndex49 = 0; parentIndex49 < parentListLen49; parentIndex49++) {
      var parentData49 = parentList49[parentIndex49];
      output.append('</li></ul>');
    }
  }
  output.append('</li></ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.shared.breadcrumb.legacyBreadcrumbs = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jive-breadcrumb"><span>');
  if (opt_data.place) {
    output.append((opt_data.showHomeURL) ? ((opt_data.fullHomeURL) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.homeURL)) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.home'),[])) + '</a>' : '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/'))) + soy.$$escapeHtmlAttribute(opt_data.homeURL) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.home'),[])) + '</a>') + ((opt_data.separator) ? ' ' + soy.$$filterNoAutoescape(opt_data.separator) + ' ' : '') : '', (! opt_data.userContainer) ? '<a ' + ((! opt_data.link && opt_data.parents.length == 0) ? 'class="jive-breadcrumb-last"' : '') + 'href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/welcome'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.breadcrumb.place.link'),[])) + '</a>' : '<a ' + ((! opt_data.link && opt_data.parents.length == 0) ? 'class="jive-breadcrumb-last"' : '') + 'href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/people'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.breadcrumb.people.link'),[])) + '</a>', (opt_data.separator) ? ' ' + soy.$$filterNoAutoescape(opt_data.separator) + ' ' : '');
    if (opt_data.parents.length > 0) {
      var parentList108 = opt_data.parents;
      var parentListLen108 = parentList108.length;
      for (var parentIndex108 = 0; parentIndex108 < parentListLen108; parentIndex108++) {
        var parentData108 = parentList108[parentIndex108];
        output.append((parentData108.viewableByUser) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(parentData108.objectURL))) + '">' + soy.$$escapeHtml(parentData108.name) + '</a>' : '<span class=\'jive-breadcrumb-unauthorized' + ((! opt_data.link && parentIndex108 == parentListLen108 - 1) ? ' jive-breadcrumb-last' : '') + '\' title=\'' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('community.list.spaces.unauthorized.tooltip'),[])) + '\'>' + soy.$$escapeHtml(parentData108.name) + '</span>', (opt_data.separator) ? ' ' + soy.$$filterNoAutoescape(opt_data.separator) + ' ' : '');
      }
    }
    output.append('<a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.place.objectURL))), '">', soy.$$escapeHtml(opt_data.place.name), '</a>', (opt_data.link) ? ((opt_data.separator) ? ' ' + soy.$$filterNoAutoescape(opt_data.separator) + ' ' : '') + soy.$$filterNoAutoescape(opt_data.link) : '');
  }
  output.append('</span><script type="text/javascript">$j( \'#jive-breadcrumb > span a:last\' ).replaceWith( function( _, content ) { return \'<span>\' + content + \'</span>\'; } );<\/script></div>');
  return opt_sb ? '' : output.toString();
};

;
define("breadcrumb",["jquery"],function(a){a(function(){a("#j-place-parents-link").on("click",function(b){b.preventDefault();a("#j-place-parents-container").popover({context:a(this),darkPopover:true,destroyOnClose:false,hoverSelection:true})})})});
;
// This file was automatically generated from share.soy.
// Please don't edit this file by hand.

goog.provide('jive.soy.share.attachmentLinks');
goog.provide('jive.soy.share.control');
goog.provide('jive.soy.share.emailLinks');
goog.provide('jive.soy.share.listWithoutPermission');
goog.provide('jive.soy.share.secretGroupMessage');
goog.provide('jive.soy.share.send_private_msg');
goog.provide('jive.soy.share.share');
goog.provide('jive.soy.share.shareConfirmation');
goog.provide('jive.soy.share.userWithoutPermission');
goog.provide('jive.soy.share.usersNotRelated');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.UserPicker.soy.inputPlaceholder');


jive.soy.share.control = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="', (opt_data.type == 'text') ? 'share-link j-meta-control ' : (opt_data.type == 'largeButton') ? 'j-social-action ' : '', (opt_data.classes) ? soy.$$escapeHtmlAttribute(opt_data.classes) : '', '" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('share.link.title'),[])), '" data-command="share" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.objectType), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.objectId), '">', (opt_data.icon) ? '<span' + ((opt_data.type == 'smallButton') ? ' class="j-ui-elem"' : '') + '><span class="jive-icon-med jive-icon-share"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.link'),[])) + '</span>' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.link'),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.share = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal j-pop" id="jive-modal-share"><header><h2>');
  var shareKey__soy33 = new soy.StringBuilder('share.', soy.$$escapeHtml(opt_data.objectType));
  shareKey__soy33 = shareKey__soy33.toString();
  output.append((shareKey__soy33 == jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy33),[])) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.unknown'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(shareKey__soy33),[])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content j-pop-main j-invite-modal clearfix"><div id="share-error" class="jive-error-box" style="display:none" aria-live="polite" aria-atomic="true" ></div><form class="j-form">', (opt_data['private']) ? '<p class="j-info"><span class="j-info-icon j-ui-elem"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.private.access'),[])) + '</p>' : '', '<label for="share-users">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.people.label'),[])), ' (', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.nonusers.noimport.label'),[])), ')</label><div class="ie-zindex-fix j-form-exp font-color-meta-light"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.examples'),[])), ' </strong>');
  jive.UserPicker.soy.inputPlaceholder({userAllowed: true, emailAllowed: opt_data.externallyShareable, multiple: true}, output);
  output.append('</div><div class="j-user-input-typeahead"><input type="text" name="share-users" id="share-users" class="j-autocomplete-input j-user-autocomplete j-autocomplete-jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on" role="combobox"/></div><div class="ie-zindex-fix j-form-exp j-noimport">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.invite.nonusers.noimport.explanation'),[])), '</div><p><label for="jive-send-content-not-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.message.label'),[])), '</label><textarea name="message" class="jive-form-element-textarea font-color-normal" id="jive-send-content-not-message">', soy.$$filterNoAutoescape(opt_data.message), '</textarea></p><div class="j-pop-row j-last"><button type="submit" id="share-content-submit" name="share-content-submit" class="j-btn-callout">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.submit.button'),[])), '</button><button type="button" class="close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '</button></div></form></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.shareConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.confirm'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.secretGroupMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.secretgroup'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.send_private_msg = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('send.private.autoaccess'),[opt_data.objectName])));
  return opt_sb ? '' : output.toString();
};


jive.soy.share.userWithoutPermission = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-share-msg j-tips">');
  if (opt_data.user.anonymous || opt_data.user.external) {
    if (! opt_data.invitationsEnabled) {
      output.append((opt_data.attachmentAvailable) ? '<p class="j-warn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.guest.nopermission.attachment'),[])) + '<p>' : '<p class="j-warn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.guest.nopermission.noattachment'),[])) + '<p>');
    } else {
      if (opt_data['private'] && opt_data.editor) {
        output.append('<p class="j-warn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.guest.nopermission.invite.private'),[])), '<p>');
        jive.soy.share.attachmentLinks(opt_data.user, output);
      } else if (opt_data.attachmentAvailable) {
        output.append('<p class="j-warn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.guest.nopermission.invite.attachment'),[])), '<p>');
        jive.soy.share.attachmentLinks(opt_data.user, output);
      } else {
        output.append('<p class="j-warn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.guest.nopermission.invite.noattachment'),[])), '<p>');
        jive.soy.share.emailLinks(opt_data.user, output);
      }
    }
  } else {
    output.append((opt_data['private'] && opt_data.editor) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.user.nopermission.private'),[])) : (opt_data.attachmentAvailable) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.user.nopermission.attachment'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.user.nopermission.noattachment'),[])));
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.attachmentLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><a href="#" class="js-notify-user" data-user-identifier="', soy.$$escapeHtmlAttribute(opt_data.email), '" ', (opt_data.notified) ? 'style="display:none"' : '', ' >', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.attachment.send.link'),[])), '</a><a href="#" class="js-unnotify-user" data-user-identifier="', soy.$$escapeHtmlAttribute(opt_data.email), '" ', (! opt_data.notified) ? 'style="display:none"' : '', ' >', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.attachment.remove.link'),[])), '</a><p>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.emailLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><a href="#" class="js-notify-user" data-user-identifier="', soy.$$escapeHtmlAttribute(opt_data.email), '" ', (opt_data.notified) ? 'style="display:none"' : '', '>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.email.send.link'),[])), '</a><a href="#" class="js-unnotify-user" data-user-identifier="', soy.$$escapeHtmlAttribute(opt_data.email), '" ', (! opt_data.notified) ? 'style="display:none"' : '', '>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.email.remove.link'),[])), '</a><p>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.listWithoutPermission = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-share-msg j-tips">', (opt_data['private'] && opt_data.editor) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.list.nopermission.private'),[])) : (opt_data.attachmentAvailable) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.list.nopermission.attachment'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.list.nopermission.noattachment'),[])), '</div>');
  return opt_sb ? '' : output.toString();
};


jive.soy.share.usersNotRelated = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('share.notrelated'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from legacyBreadcrumbs.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.legacyBreadcrumbs');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.breadcrumb.legacyBreadcrumbs');


jive.place.legacyBreadcrumbs = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.legacyBreadcrumb) {
    jive.shared.breadcrumb.legacyBreadcrumbs(opt_data.breadcrumbBean, output);
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from actionsLink.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.actionsLink');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.place.actionsLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.placeActionsLink && opt_data.placeActionsLink.visible) ? (opt_data.suppressTabs) ? '<div id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '-tab"><a ' + ((opt_data.placeActionsLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeActionsLink.url,opt_data.placeActionsLink.urlParams))) + '" class="j-place-button j-ui-elem font-color-white"><span class="j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeActionsLink.nameKey),[])) + '<span class="j-nav-more j-ui-elem"></span></span></a></div>' : (opt_data.isButton) ? '<div id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '-tab"><a ' + ((opt_data.placeActionsLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeActionsLink.url,opt_data.placeActionsLink.urlParams))) + '" class="j-social-button j-rc5 j-button-join j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeActionsLink.nameKey),[])) + '<span class="j-nav-more j-ui-elem"></span></a></div>' : '<li id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '-tab"><a ' + ((opt_data.placeActionsLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeActionsLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeActionsLink.url,opt_data.placeActionsLink.urlParams))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeActionsLink.nameKey),[])) + '<span class="j-nav-more j-ui-elem"></span></a></li>' : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from manageLink.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.manageLink');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.place.manageLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.placeManageLink && opt_data.placeManageLink.visible) ? (opt_data.suppressTabs) ? '<div id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '-tab"><a ' + ((opt_data.placeManageLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeManageLink.url,opt_data.placeManageLink.urlParams))) + '" class="j-place-button j-ui-elem"><span class="j-ui-elem font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeManageLink.nameKey),[])) + '<span class="j-nav-more j-ui-elem"></span></span></a></div>' : (opt_data.isButton) ? '<div id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '-tab"><a ' + ((opt_data.placeManageLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeManageLink.url,opt_data.placeManageLink.urlParams))) + '" class="j-social-button j-rc5 j-button-join j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeManageLink.nameKey),[])) + '<span class="jive-icon-sml jive-glyph-admin-down"></span></a></div>' : '<li id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '-tab"><a ' + ((opt_data.placeManageLink.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.placeManageLink.id) + '"' : '') + ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.placeManageLink.url,opt_data.placeManageLink.urlParams))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.placeManageLink.nameKey),[])) + '<span class="jive-icon-sml jive-glyph-admin-down"></span></a></li>' : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from appActionLink.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.appActionLink');
goog.provide('jive.place.appProfileActionLink');
goog.provide('jive.place.appProfileActionLinks');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.place.appActionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li>');
  if (opt_data.windowSpec || ! opt_data.actionUrl) {
    output.append('<a href="#" rel="nofollow" class="app-action" data-action-id="', soy.$$escapeHtmlAttribute(opt_data.id), '" data-app-url="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.appURL)), '" data-app-uuid="', soy.$$escapeHtmlAttribute(opt_data.appUUID), '" data-app-instance-uuid="', soy.$$escapeHtmlAttribute(opt_data.appInstanceUUID), '" data-name="os-action-link" data-selection-type="', soy.$$escapeHtmlAttribute(opt_data.templateView.coreAPIType), '" data-label="', soy.$$escapeHtmlAttribute(opt_data.label), '" data-selection-id="', (opt_data.templateView.contextObject) ? soy.$$escapeHtmlAttribute(opt_data.templateView.contextObject.id) : '', '" data-action-url="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.actionUrl)), '" data-action-window-spec="', soy.$$escapeHtmlAttribute(opt_data.windowSpec), '" data-view="', (opt_data.view) ? soy.$$escapeHtmlAttribute(opt_data.view) : '', '"', (opt_data.tooltip) ? 'title="' + soy.$$escapeHtmlAttribute(opt_data.tooltip) + '"' : '', '>');
    switch (opt_data.icon) {
      case 'edit':
        output.append('<span class="jive-icon-med jive-icon-edit"></span>');
        break;
      case 'manage':
        output.append('<span class="jive-icon-med jive-icon-gear"></span>');
        break;
      case 'move':
        output.append('<span class="jive-icon-med jive-icon-move"></span>');
        break;
      case 'add':
        output.append('<span class="jive-icon-med jive-icon-plus"></span>');
        break;
      case 'delete':
        output.append('<span class="jive-icon-med jive-icon-delete"></span>');
        break;
      case 'download':
        output.append('<span class="jive-icon-med jive-icon-appmarket"></span>');
        break;
      case 'flag':
        output.append('<span class="jive-icon-med jive-icon-checkpoint"></span>');
        break;
      case 'graph':
        output.append('<span class="jive-icon-med jive-icon-poll"></span>');
        break;
      case 'link':
        output.append('<span class="jive-icon-med jive-icon-link"></span>');
        break;
      case 'create':
        output.append('<span class="jive-icon-med jive-icon-add"></span>');
        break;
      default:
        output.append('<span class="jive-icon-med jive-icon-blank"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.icon)), '" height="16" width="16" /></span>');
    }
    output.append('<span class="lnk">', soy.$$escapeHtml(opt_data.label), '</span></a>');
  } else {
    output.append('<a href="', soy.$$escapeHtml(opt_data.actionUrl), '" data-action-id="', soy.$$escapeHtmlAttribute(opt_data.id), '" data-app-url="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.appURL)), '" data-app-uuid="', soy.$$escapeHtmlAttribute(opt_data.appUUID), '" data-app-instance-uuid="', soy.$$escapeHtmlAttribute(opt_data.appInstanceUUID), '" data-name="os-action-link" data-selection-type="', soy.$$escapeHtmlAttribute(opt_data.templateView.coreAPIType), '" data-label="', soy.$$escapeHtmlAttribute(opt_data.label), '" data-selection-id="', (opt_data.templateView.contextObject) ? soy.$$escapeHtmlAttribute(opt_data.templateView.contextObject.id) : '', '" data-action-url="', soy.$$escapeHtml(opt_data.actionUrl), '"', (opt_data.tooltip) ? 'title="' + soy.$$escapeHtmlAttribute(opt_data.tooltip) + '"' : 'title="' + soy.$$escapeHtmlAttribute(opt_data.label) + '"', '><img class="jive-icon-med jive-ext-icon-16" src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.icon)), '"/><span class="lnk">', soy.$$escapeHtml(opt_data.label), '</span></a>');
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


jive.place.appProfileActionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.windowSpec || ! opt_data.actionUrl) ? '<a href="#" rel="nofollow" class="app-action j-addOn-button j-btn-global j-btn-xsmall" data-action-id="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" data-app-url="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.appURL)) + '" data-app-uuid="' + soy.$$escapeHtmlAttribute(opt_data.appUUID) + '" data-app-instance-uuid="' + soy.$$escapeHtmlAttribute(opt_data.appInstanceUUID) + '" data-name="os-action-link" data-selection-type="' + soy.$$escapeHtmlAttribute(opt_data.templateView.coreAPIType) + '" data-label="' + soy.$$escapeHtmlAttribute(opt_data.label) + '" data-selection-id="' + ((opt_data.templateView.contextObject) ? soy.$$escapeHtmlAttribute(opt_data.templateView.contextObject.id) : '') + '" data-action-url="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.actionUrl)) + '" data-action-window-spec="' + soy.$$escapeHtmlAttribute(opt_data.windowSpec) + '" data-view="' + ((opt_data.view) ? soy.$$escapeHtmlAttribute(opt_data.view) : '') + '" data-action-origin-enum="PROFILE"' + ((opt_data.tooltip) ? 'title="' + soy.$$escapeHtmlAttribute(opt_data.tooltip) + '"' : 'title="' + soy.$$escapeHtmlAttribute(opt_data.label) + '"') + '><img class="jive-icon-med jive-ext-icon-16" src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.icon)) + '"/><span class="j-508-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a>' : '<a href="' + soy.$$escapeHtml(opt_data.actionUrl) + '" class="j-addOn-button j-btn-global j-btn-xsmall" data-action-id="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" data-app-url="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.appURL)) + '" data-app-uuid="' + soy.$$escapeHtmlAttribute(opt_data.appUUID) + '" data-app-instance-uuid="' + soy.$$escapeHtmlAttribute(opt_data.appInstanceUUID) + '" data-name="os-action-link" data-selection-type="' + soy.$$escapeHtmlAttribute(opt_data.templateView.coreAPIType) + '" data-label="' + soy.$$escapeHtmlAttribute(opt_data.label) + '" data-selection-id="' + ((opt_data.templateView.contextObject) ? soy.$$escapeHtmlAttribute(opt_data.templateView.contextObject.id) : '') + '" data-action-url="' + soy.$$escapeHtml(opt_data.actionUrl) + '"' + ((opt_data.tooltip) ? 'title="' + soy.$$escapeHtmlAttribute(opt_data.tooltip) + '"' : 'title="' + soy.$$escapeHtmlAttribute(opt_data.label) + '"') + '><img class="jive-icon-med jive-ext-icon-16" src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.icon)) + '"/><span class="j-508-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a>');
  return opt_sb ? '' : output.toString();
};


jive.place.appProfileActionLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-', soy.$$escapeHtmlAttribute(opt_data.presencePrefix), '-presence-', soy.$$escapeHtmlAttribute(opt_data.targetUserID), '" class="j-profile-presence j-presence-offline" style="display:none"><span class="j-presence-indicator"></span><span class="j-presence-display">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.user.presence.default'),[])), '</span></div>');
  if (opt_data.appActionLinks.length > 0) {
    output.append('<div class="j-profile-addon-actions j-btn-group">');
    var appActionLinkList195 = opt_data.appActionLinks;
    var appActionLinkListLen195 = appActionLinkList195.length;
    for (var appActionLinkIndex195 = 0; appActionLinkIndex195 < appActionLinkListLen195; appActionLinkIndex195++) {
      var appActionLinkData195 = appActionLinkList195[appActionLinkIndex195];
      if (appActionLinkIndex195 < 4) {
        jive.place.appProfileActionLink(soy.$$augmentMap(appActionLinkData195, {id: appActionLinkData195.id, appURL: appActionLinkData195.appURL, appUUID: appActionLinkData195.appUUID, appInstanceUUID: appActionLinkData195.appInstanceUUID, templateView: opt_data.templateView, view: appActionLinkData195.view, tooltip: appActionLinkData195.tooltip, icon: appActionLinkData195.icon, label: appActionLinkData195.label, actionUrl: appActionLinkData195.actionUrl, windowSpec: appActionLinkData195.windowSpec}), output);
      }
    }
    if (opt_data.appActionLinks.length > 4) {
      var randomSuffix__soy213 = jive.soy.func.randomString();
      output.append('<a href="#" id="profile-app-action-', soy.$$escapeHtmlAttribute(randomSuffix__soy213), '-more"  aria-haspopup="true"><span class="j-ui-elem j-action-down-arrow"></span></a><div id="j-overflow-profile-app-action-', soy.$$escapeHtmlAttribute(randomSuffix__soy213), '-menu" class="j-pop-main j-menu j-quick-menu" style="display:none"><ul>');
      var appActionLinkList219 = opt_data.appActionLinks;
      var appActionLinkListLen219 = appActionLinkList219.length;
      for (var appActionLinkIndex219 = 0; appActionLinkIndex219 < appActionLinkListLen219; appActionLinkIndex219++) {
        var appActionLinkData219 = appActionLinkList219[appActionLinkIndex219];
        if (appActionLinkIndex219 > 3) {
          jive.place.appActionLink(soy.$$augmentMap(appActionLinkData219, {id: appActionLinkData219.id, appURL: appActionLinkData219.appURL, appUUID: appActionLinkData219.appUUID, appInstanceUUID: appActionLinkData219.appInstanceUUID, templateView: opt_data.templateView, view: appActionLinkData219.view, tooltip: appActionLinkData219.tooltip, icon: appActionLinkData219.icon, label: appActionLinkData219.label, actionUrl: appActionLinkData219.actionUrl, windowSpec: appActionLinkData219.windowSpec}), output);
        }
      }
      output.append('</ul></div><script>\n                    $j(function() {\n                        var randomSuffix = \'', soy.$$escapeJsString(randomSuffix__soy213), '\';\n\n                        var appMenuShowing = false;\n                        var appMenu = $j(\'#j-overflow-profile-app-action-\' + randomSuffix + \'-menu\');\n                        appMenu.on(\'click\', \'a[data-action-id]\', function() {\n                            appMenu.trigger(\'close\');\n                        });\n                        $j(\'#profile-app-action-\' + randomSuffix + \'-more\').click(function(e) {\n                            e.preventDefault();\n                            if (!appMenuShowing) {\n                                appMenu.popover({\n                                    context: $j(this),\n                                    additionalContainerSelector: \'#profile-app-action-\' + randomSuffix + \'-more\',\n                                    destroyOnClose: false,\n                                    putBack: true,\n                                    hoverSelection: true,\n                                    addClass: "j-follow-pop",\n                                    onClose: function() {\n                                        appMenuShowing = false;\n                                    }\n                                });\n                                appMenuShowing = true;\n                            }\n                            else {\n                                appMenu.trigger(\'close\');\n                            }\n                        });\n                    });\n                <\/script>');
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from placeMainNavMenuItem.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.placeMainNavMenuItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.actionLink');


jive.place.placeMainNavMenuItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.item.visible) {
    jive.shared.soy.actionLink(soy.$$augmentMap(opt_data.item, {hideIcon: true, activeTab: opt_data.item.id == opt_data.placeTab}), output);
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from placeMainNavMenuPopover.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.placeMainNavMenuPopover');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.place.placeMainNavMenuItem');


jive.place.placeMainNavMenuPopover = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="j-ppExtras-list">');
  var itemList4 = opt_data.menuItems;
  var itemListLen4 = itemList4.length;
  for (var itemIndex4 = 0; itemIndex4 < itemListLen4; itemIndex4++) {
    var itemData4 = itemList4[itemIndex4];
    output.append('<li ', (itemData4.id == opt_data.placeTab) ? 'class="j-tab-selected active"' : '', '>');
    jive.place.placeMainNavMenuItem({item: itemData4, placeTab: opt_data.placeTab}, output);
    output.append('<span class="jive-icon-sml jive-glyph-check-selected currentPage"></span></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("places.Nav");define("apps/places/nav/main",["jquery"],function(a){jive.places.Nav.Main=jive.oo.Class.extend(function(b){this.init=function(d){var c=this;c.menuData=d.menuData;c.placeTab=d.placeTab};this.postRender=function(){var c=this;c.$upMenu=a("#j-placeMainNav");c.$downMenu=a("#j-pp-main-nav-menu-pop");c.$menuItems=c.$upMenu.find("li");c.$moreBtn=a("#place-main-nav-more");c.$moreBtn.off().on("click",c.showDownMenu.bind(c));a(window).resize(c.handleResize.bind(c))};this.showDownMenu=function(j){var g=this,k=a(j.target),d=g.$upMenu.outerWidth(),m=0,l=[],f=[];j.preventDefault();g.$menuItems.each(function(){var e=a(this);m+=e.outerWidth();if(m>d){l.push(e.data("id"))}});for(var h=0,c=g.menuData.length;h<c;h++){if(a.inArray(g.menuData[h].id,l)!=-1){f.push(g.menuData[h])}}g.$downMenu.html(jive.place.placeMainNavMenuPopover({menuItems:f,placeTab:g.placeTab}));g.$downMenu.popover({context:k,destroyOnClose:false,putBack:true})};this.handleResize=function(){var c=this,e=c.$upMenu.outerWidth(true),d=0;c.$menuItems.each(function(){d+=a(this).outerWidth(true)});if(e>=d-1){c.$moreBtn.hide()}else{c.$moreBtn.show()}}});return jive.places.Nav.Main});
;
// This file was automatically generated from header.soy.
// Please don't edit this file by hand.

goog.provide('jive.place.header');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.announcements.list');
goog.require('jive.movecontent.successMessage');
goog.require('jive.people.profile.followingAssociatedStreamCount');
goog.require('jive.place.actionsLink');
goog.require('jive.place.appActionLink');
goog.require('jive.place.legacyBreadcrumbs');
goog.require('jive.place.manageLink');
goog.require('jive.shared.breadcrumb.contextMenu');
goog.require('jive.shared.soy.actionLink');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.resourceInlineJs');
goog.require('jive.soy.share.control');


jive.place.header = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.place.legacyBreadcrumbs(opt_data, output);
  output.append('<div style="display:none;" id="place-label" parent="', soy.$$escapeHtmlAttribute(opt_data.place.parentName), '" place="', soy.$$escapeHtmlAttribute(opt_data.place.name), '"');
  var propList9 = opt_data.place.props;
  var propListLen9 = propList9.length;
  for (var propIndex9 = 0; propIndex9 < propListLen9; propIndex9++) {
    var propData9 = propList9[propIndex9];
    output.append((propData9.name == 'home.community' && propData9.value == 'true') ? 'isHome="true"' : '');
  }
  output.append('></div><header class="j-page-header j-rc4"><div class="j-place-header-overlay j-rc4"></div>', (opt_data.canManageContainer) ? '<a href="#" class="j-place-editBg font-color-white j-rc4" data-command="showPlaceBackgroundMenu" data-menu-id="backgroundMenu" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.editbg.link'),[])) + '" data-orientation="below"><span class="jive-icon-big jive-icon-editPlaceBg"></span><span class="lnk">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.manage.editbg.link'),[])) + '</span></a>' : '', '<div class="header-wrap-inner"><div class="j-placeHdImg">', (opt_data.imageURL) ? '<img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.imageURL))) + '" alt="" border="0" class="placeImg">' : '', '</div>', (! opt_data.place.partner && opt_data.place.visibleToPartner) ? '<span class="j-browse-external-access"> <em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access.header'),[])) + '</em></span>' : '', '<div class="j-placeHeaderWrap"><div class="j-placeHeaderInner', (! opt_data.legacyBreadcrumb) ? (! opt_data.place.displayParent) ? ' noParent' : ' showParent' : '', '"><h1 class="j-placeTitle"><span class="font-color-white j-placeName">', (opt_data.place.archived) ? '<span class="font-color-white j-place-archived">[' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.archived'),[])) + ']</span> ' : '', soy.$$escapeHtml(opt_data.place.name), '</span>');
  if (! opt_data.legacyBreadcrumb) {
    if (opt_data.place.displayParent) {
      output.append('<span class="j-page-header-parent"><span class="font-color-white">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])), ' <a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.place.parentUrl))), '" class="j-parentPlaceName font-color-white">', soy.$$escapeHtml(opt_data.place.parentName), '</a></span>');
      jive.shared.breadcrumb.contextMenu(opt_data.breadcrumbBean, output);
      output.append('</span>');
    } else {
      jive.shared.breadcrumb.contextMenu(opt_data.breadcrumbBean, output);
    }
  }
  output.append('</h1><div id="j-place-header-actions" class="j-placeHdActions" data-ann="', soy.$$escapeHtmlAttribute(JSON.stringify(opt_data.announcements).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')), '">');
  if (! opt_data.place.guest) {
    output.append('<div class="j-js-follow-controls" data-location="content-page" data-streamsassoc="', soy.$$escapeHtmlAttribute(opt_data.place.streamsAssociatedCount), '" aria-live="polite" aria-atomic="true"><a href="#" class="j-place-button j-ui-elem font-color-white j-button-follow notlast" id="jive-link-', soy.$$escapeHtmlAttribute(opt_data.place.placeI18nKeyPrefix), '-startFollowing" ', (opt_data.place.followed) ? 'style="display: none;"' : '', '><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix + '.startFollow.link'),[])), ' <span class="jive-icon-med jive-icon-activity-pulse-white j-instreamicon"></span></span></a><a href="#" class="j-place-button j-ui-elem font-color-white j-button-following notlast" id="jive-link-', soy.$$escapeHtmlAttribute(opt_data.place.placeI18nKeyPrefix), '-following" ', (! opt_data.place.followed) ? 'style="display: none;"' : '', '><span class="j-ui-elem">');
    jive.people.profile.followingAssociatedStreamCount({count: opt_data.place.streamsAssociatedCount, renderLocation: 'content-page'}, output);
    output.append('</span></a></div>', (opt_data.place.membershipSupported) ? '<a href="#" class="j-place-button j-ui-elem font-color-white j-button-join" id="jive-link-joinSocialGroup" ' + ((! opt_data.place.canJoinPlace) ? 'style="display: none;"' : '') + '><span class="j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.join.link'),[])) + '</span></a><a href="#" class="j-place-button j-ui-elem font-color-white j-button-leave" id="jive-link-leaveSocialGroup" ' + ((! opt_data.place.canLeavePlace) ? 'style="display: none;"' : '') + '><span class="j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.leave.link'),[])) + '</span></a>' : '');
    if (opt_data.suppressTabs) {
      jive.place.actionsLink({suppressTabs: opt_data.suppressTabs, isButton: true, placeActionsLink: opt_data.placeActionsLink}, output);
      jive.place.manageLink({suppressTabs: opt_data.suppressTabs, isButton: true, placeManageLink: opt_data.placeManageLink}, output);
    }
  }
  output.append('</div></div></div></div><!-- BEGIN browse place tabs -->');
  if (! opt_data.suppressTabs) {
    jive.shared.soy.resourceInlineJs({code: '$j(function() {require([\'apps/places/nav/main\'], function(PlacesNavMain) {var placeNav = new PlacesNavMain({menuData: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.placeTabLinks).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', placeTab: \'' + soy.$$escapeHtml(opt_data.place.tab) + '\'}); placeNav.postRender();});}); if ($j(\'#j-placeNav\').height() == 0){$j(\'#j-placeNav\').hide();}'}, output);
    output.append('<nav id="j-placeNav" class="j-placeNav j-rc4 clearfix j-rc-none-top" role="navigation" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('place.subnav.label'),[])), '"><a href="#" id="place-main-nav-more" class="j-place-main-nav-more" style="display:none;"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.more'),[])), '</span><span class="j-nav-more j-ui-elem"></span></a><style type="text/css">');
    var propList132 = opt_data.place.props;
    var propListLen132 = propList132.length;
    for (var propIndex132 = 0; propIndex132 < propListLen132; propIndex132++) {
      var propData132 = propList132[propIndex132];
      output.append((propData132.name == 'hideOverviewTab' && propData132.value == 'true') ? '\r\n                        #j-placeMainNav #jive-place-link-overview-tab { display: none; }\r\n                        ' : '', (propData132.name == 'hideContentTab' && propData132.value == 'true') ? '\r\n                        #j-placeMainNav #jive-place-link-content-tab { display: none; }\r\n                        ' : '', (propData132.name == 'hidePeopleTab' && propData132.value == 'true') ? '\r\n                        #j-placeMainNav #jive-place-link-people-tab { display: none; }\r\n                        ' : '', (propData132.name == 'hidePlacesTab' && propData132.value == 'true') ? '\r\n                        #j-placeMainNav #jive-place-link-places-tab { display: none; }\r\n                        ' : '');
    }
    output.append('</style><ul id="j-placeMainNav" class="j-placeMainNav j-placeLinks">');
    var itemList147 = opt_data.placeTabLinks;
    var itemListLen147 = itemList147.length;
    for (var itemIndex147 = 0; itemIndex147 < itemListLen147; itemIndex147++) {
      var itemData147 = itemList147[itemIndex147];
      if (itemData147.visible) {
        output.append('<li id="', soy.$$escapeHtmlAttribute(itemData147.id), '-tab" data-id="', soy.$$escapeHtmlAttribute(itemData147.id), '"', (itemData147.id == opt_data.place.tab) ? ' class="j-tab-selected active j-ui-elem"' : '', '>');
        jive.shared.soy.actionLink(soy.$$augmentMap(itemData147, {hideIcon: true, activeTab: itemData147.id == opt_data.place.tab}), output);
        output.append('</li>');
      }
    }
    output.append('</ul><ul id="j-placeActions" class="j-placeActions j-placeLinks"><!--');
    jive.place.actionsLink({suppressTabs: false, isButton: false, placeActionsLink: opt_data.placeActionsLink}, output);
    output.append('<li><a id="jive-place-link-about" class="j-placeAboutLink" role="navigation" href="about-place.jspa?containerID=', soy.$$escapeHtmlRcdata(opt_data.place.id), '&containerType=', soy.$$escapeHtmlRcdata(opt_data.place.objectType), '">', soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg('place.about.link'),[])), '</a></li>');
    if (opt_data.sharingEnabled) {
      output.append('<li>');
      jive.soy.share.control({objectId: opt_data.place.id, objectType: opt_data.place.objectType, type: 'text', icon: true, classes: 'j-button-share'}, output);
      output.append('</li>');
    }
    output.append('-->');
    if (! opt_data.suppressTabs) {
      jive.place.manageLink({suppressTabs: false, isButton: false, placeManageLink: opt_data.placeManageLink}, output);
    }
    output.append('</ul></nav><div id="j-pp-main-nav-menu-pop" class="j-pop-main j-quick-menu" style="display:none;"></div><script>(function() {var $upMenu = $j(\'#j-placeMainNav\'), $menuItems = $upMenu.find(\'li\'), $moreBtn = $j(\'#place-main-nav-more\'), upMenuWidth = $upMenu.outerWidth(true), createMenuItemsTotalWidth = 0; $menuItems.each(function() {createMenuItemsTotalWidth += $j(this).outerWidth(true);}); if (upMenuWidth >= createMenuItemsTotalWidth - 1) {$moreBtn.hide();}})();<\/script>');
  }
  output.append('<script>$j(document).ready(function(){var $conTabs = $j( \'.cln-tab-content .conTabs\' ); $conTabs.conTabs(); $j( \'.accordion\' ).not( \'.multi\' ).accordion({collapsible: true, active: false, heightStyle: \'content\'}); $j( \'.accordion.multi\' ).accordion({collapsible: true, active: false, heightStyle: \'content\', beforeActivate: function( event, ui ) {if (ui.newHeader[0]) {var currHeader  = ui.newHeader; var currContent = currHeader.next(\'.ui-accordion-content\');} else {var currHeader  = ui.oldHeader; var currContent = currHeader.next(\'.ui-accordion-content\');}var isPanelSelected = currHeader.attr(\'aria-selected\') == \'true\'; currHeader.toggleClass(\'ui-corner-all\',isPanelSelected).toggleClass(\'accordion-header-active ui-state-active ui-corner-top\',!isPanelSelected).attr(\'aria-selected\',((!isPanelSelected).toString())); currHeader.children(\'.ui-icon\').toggleClass(\'ui-icon-triangle-1-e\',isPanelSelected).toggleClass(\'ui-icon-triangle-1-s\',!isPanelSelected); currContent.toggleClass(\'accordion-content-active\',!isPanelSelected); if (isPanelSelected) { currContent.slideUp(); }  else { currContent.slideDown(); }return false;}}); $j( \'.accordion\' ).not( \'.navigation\' ).accordion( \'option\', \'active\', 0 ); $multiAccordions = $j( \'.accordion.multi\' ).not( \'.navigation\' ); $multiAccordions .find( \'div\' ) .each( function( index ) {if ( $j( this ).hasClass( \'expanded\' ) ) { $multiAccordions.accordion( \'option\', \'active\', index ); }}); var maxHeight = 360; $j( \'.cln-tab-content\' ) .each(function(){var thisHeight = $j( this ).attr( \'data-height\' ); thisHeight = ( thisHeight ) ? thisHeight : maxHeight; $j( this ).css( { \'min-height\': thisHeight, \'height\': thisHeight } ); $j( this ) .find( \'.conTabsContent\' ) .css( { \'min-height\': thisHeight, \'height\': thisHeight } );}); $j( \'a[title!=""][title]\' ).tooltipster({arrow: false, maxWidth: 500, position: \'right\', theme: \'tooltipster-shadow\'});});<\/script></header>');
  jive.announcements.list({announcements: opt_data.announcements, showDismiss: false}, output);
  if (opt_data.moveData) {
    jive.movecontent.successMessage(opt_data.moveData, output);
  }
  output.append('<!-- Display guest tip if unauthenticated -->');
  if (opt_data.place.guest) {
    output.append('<div class="j-guest-tip jive-info-box j-rc5 ');
    var propList205 = opt_data.place.props;
    var propListLen205 = propList205.length;
    for (var propIndex205 = 0; propIndex205 < propListLen205; propIndex205++) {
      var propData205 = propList205[propIndex205];
      output.append((propData205.name == 'hideLoginBar' && propData205.value == 'true') ? 'hidden' : '');
    }
    output.append('">');
    if (opt_data.accountCreationEnabled) {
      jive.shared.soy.i18nHelper({i18nKey: 'browse.guesttip.place', arg0: '<a id="jive-guest-link-auth" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/login.jspa'))) + '" onClick="ga(\'send\',\'event\',\'CLN-login-link\', \'click\', \'Header-login-link\', 0);">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.guesttip.login'),[])) + '</a>', arg1: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix),[])), noAutoEscape: 'true'}, output);
      output.append('&nbsp;');
      if (opt_data.validationEnabled) {
        jive.shared.soy.i18nHelper({i18nKey: 'browse.guesttip.joinnow', arg0: '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/login.jspa?registerOnly=true'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.guesttip.join'),[])) + '</a>', noAutoEscape: 'true'}, output);
      } else {
        jive.shared.soy.i18nHelper({i18nKey: 'browse.guesttip.joinnow', arg0: '<a id="jive-guest-link-reg" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/create-account.jspa'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.guesttip.join'),[])) + '</a>', noAutoEscape: 'true'}, output);
      }
    } else {
      jive.shared.soy.i18nHelper({i18nKey: 'browse.guesttip.place', arg0: '<a id="jive-guest-link-auth" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/login.jspa'))) + '" onClick="ga(\'send\',\'event\',\'CLN-login-link\', \'click\', \'Header-login-link\', 0);">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.guesttip.login'),[])) + '</a>', arg1: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix),[])), noAutoEscape: 'true'}, output);
    }
    output.append('</div>');
  }
  output.append('<!-- END browse place tabs --><div id="j-place-actions-container" class="j-quick-menu j-choose-type j-small-view j-pop-main" style="display: none"><div class="j-pop-desc">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('place.actions.menu.title'),[])), '</div>');
  var sectionList270 = opt_data.placeActionsMenu.sections;
  var sectionListLen270 = sectionList270.length;
  for (var sectionIndex270 = 0; sectionIndex270 < sectionListLen270; sectionIndex270++) {
    var sectionData270 = sectionList270[sectionIndex270];
    if (sectionData270.visible) {
      output.append('<strong class="j-menu-quick-sectionlabel font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(sectionData270.headingI18nKey),[])), '</strong><ul class="j-place-actions-links j-icon-list">');
      var itemList276 = sectionData270.links;
      var itemListLen276 = itemList276.length;
      for (var itemIndex276 = 0; itemIndex276 < itemListLen276; itemIndex276++) {
        var itemData276 = itemList276[itemIndex276];
        if (itemData276.visible) {
          if (itemData276.appAction != true) {
            output.append('<li>');
            jive.shared.soy.actionLink(soy.$$augmentMap(itemData276, {iconSize: 'med'}), output);
            output.append('</li>');
          } else {
            jive.place.appActionLink(soy.$$augmentMap(itemData276, {templateView: opt_data.templateView}), output);
          }
        }
      }
      output.append('</ul>');
    }
  }
  output.append('</div><div id="j-place-manage-container" class="j-menu" style="display: none"><ul class="j-place-manage-links">');
  var itemList292 = opt_data.placeManageLinks;
  var itemListLen292 = itemList292.length;
  for (var itemIndex292 = 0; itemIndex292 < itemListLen292; itemIndex292++) {
    var itemData292 = itemList292[itemIndex292];
    if (itemData292.visible) {
      output.append('<li>');
      jive.shared.soy.actionLink(soy.$$augmentMap(itemData292, {hideIcon: true}), output);
      output.append('</li>');
    }
  }
  output.append('</ul></div>', (opt_data.place.canCreateByEmail) ? '<div class="jive-modal jive-modal-medium jive-author-by-email-modal" id="jive-author-by-email-modal"><header><h2>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('author.by.email.modal.title'),[])) + '</h2></header><a href="#" class="j-modal-close-top close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('author.by.email.modal.close'),[])) + ' <span class="j-close-icon j-ui-elem" role="img"></span></a><div class="jive-modal-content" id="vcard-modal"></div></div>' : '', (opt_data.canManageAnnouncements) ? '<div class="jive-modal" id="jive-modal-announcements"><header><h2 class="jive-modal-title jive-modal-title-manage-announcements">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-add-announcement" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.add.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-edit-announcement" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.edit.title'),[])) + '</h2></header><a href="#" class="j-modal-close-top close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])) + '  <span class="j-close-icon j-ui-elem" role="img"></span></a><div id="announcements-modal"></div></div>' : '', (opt_data.canManageCategories) ? '<div class="jive-modal" id="jive-modal-categories"><header><h2 class="jive-modal-title jive-modal-title-manage-categories">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-add-category" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.add.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-edit-category" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('category.manage.edit.title'),[])) + '</h2></header><a href="#" class="j-modal-close-top close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])) + '  <span class="j-close-icon j-ui-elem" role="img"></span></a><div id="categories-modal"></div></div>' : '', (opt_data.place.canArchive) ? '<!-- BEGIN archive panel --><div class="jive-modal" id="jive-modal-archive-project"><header><h2 class="jive-modal-title jive-modal-title-unarchive-project">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('project.unarchive.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-archive-project">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('project.archive.title'),[])) + '</h2></header><section id="archive-modal" class="jive-modal-content jive-modal-archive-project clearfix"></section></div><!-- END archive panel -->' : '');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace('EventCalendarApp');

jive.EventCalendarApp.CalendarSource = jive.RestService.extend(function(protect) {
    
    
    this.save = function(eventID, data) {
        var promise = new jive.conc.Promise(),
            source = this;
        
        $j.ajax({
            url: jive.rest.url('/calendar/' + eventID),
            type: 'PUT',
            dataType: 'json',
            data: data,
            success: function() {
                promise.emitSuccess();
            },
            error: source.errorCallback(promise),
            timeout: 30000
        });
        
        return promise;
    };
});
;
/*!

 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

/*
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 */
 
(function($, undefined) {


;;

var defaults = {

	// display
	defaultView: 'month',
	aspectRatio: 1.35,
	header: {
		left: 'title',
		center: '',
		right: 'today prev,next'
	},
	weekends: true,
	weekNumbers: false,
	weekNumberCalculation: 'iso',
	weekNumberTitle: 'W',
	
	// editing
	//editable: false,
	//disableDragging: false,
	//disableResizing: false,
	
	allDayDefault: true,
	ignoreTimezone: true,
	
	// event ajax
	lazyFetching: true,
	startParam: 'start',
	endParam: 'end',
	
	// time formats
	titleFormat: {
		month: 'MMMM yyyy',
		week: "MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",
		day: 'dddd, MMM d, yyyy'
	},
	columnFormat: {
		month: 'ddd',
		week: 'ddd M/d',
		day: 'dddd M/d'
	},
	timeFormat: { // for event elements
		'': 'h(:mm)tt' // default
	},
	
	// locale
	isRTL: false,
	firstDay: 0,
	monthNames: ['January','February','March','April','May','June','July','August','September','October','November','December'],
	monthNamesShort: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
	dayNames: ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],
	dayNamesShort: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],
	buttonText: {
		prev: "<span class='fc-text-arrow'>&lsaquo;</span>",
		next: "<span class='fc-text-arrow'>&rsaquo;</span>",
		prevYear: "<span class='fc-text-arrow'>&laquo;</span>",
		nextYear: "<span class='fc-text-arrow'>&raquo;</span>",
		today: 'today',
		month: 'month',
		week: 'week',
		day: 'day'
	},
	
	// jquery-ui theming
	theme: false,
	buttonIcons: {
		prev: 'circle-triangle-w',
		next: 'circle-triangle-e'
	},
	
	//selectable: false,
	unselectAuto: true,
	
	dropAccept: '*',
	
	handleWindowResize: true
	
};

// right-to-left defaults
var rtlDefaults = {
	header: {
		left: 'next,prev today',
		center: '',
		right: 'title'
	},
	buttonText: {
		prev: "<span class='fc-text-arrow'>&rsaquo;</span>",
		next: "<span class='fc-text-arrow'>&lsaquo;</span>",
		prevYear: "<span class='fc-text-arrow'>&raquo;</span>",
		nextYear: "<span class='fc-text-arrow'>&laquo;</span>"
	},
	buttonIcons: {
		prev: 'circle-triangle-e',
		next: 'circle-triangle-w'
	}
};



;;

var fc = $.fullCalendar = { version: "1.6.4" };
var fcViews = fc.views = {};


$.fn.fullCalendar = function(options) {


	// method calling
	if (typeof options == 'string') {
		var args = Array.prototype.slice.call(arguments, 1);
		var res;
		this.each(function() {
			var calendar = $.data(this, 'fullCalendar');
			if (calendar && $.isFunction(calendar[options])) {
				var r = calendar[options].apply(calendar, args);
				if (res === undefined) {
					res = r;
				}
				if (options == 'destroy') {
					$.removeData(this, 'fullCalendar');
				}
			}
		});
		if (res !== undefined) {
			return res;
		}
		return this;
	}

	options = options || {};
	
	// would like to have this logic in EventManager, but needs to happen before options are recursively extended
	var eventSources = options.eventSources || [];
	delete options.eventSources;
	if (options.events) {
		eventSources.push(options.events);
		delete options.events;
	}
	

	options = $.extend(true, {},
		defaults,
		(options.isRTL || options.isRTL===undefined && defaults.isRTL) ? rtlDefaults : {},
		options
	);
	
	
	this.each(function(i, _element) {
		var element = $(_element);
		var calendar = new Calendar(element, options, eventSources);
		element.data('fullCalendar', calendar); // TODO: look into memory leak implications
		calendar.render();
	});
	
	
	return this;
	
};


// function for adding/overriding defaults
function setDefaults(d) {
	$.extend(true, defaults, d);
}



;;

 
function Calendar(element, options, eventSources) {
	var t = this;
	
	
	// exports
	t.options = options;
	t.render = render;
	t.destroy = destroy;
	t.refetchEvents = refetchEvents;
	t.reportEvents = reportEvents;
	t.reportEventChange = reportEventChange;
	t.rerenderEvents = rerenderEvents;
	t.changeView = changeView;
	t.select = select;
	t.unselect = unselect;
	t.prev = prev;
	t.next = next;
	t.prevYear = prevYear;
	t.nextYear = nextYear;
	t.today = today;
	t.gotoDate = gotoDate;
	t.incrementDate = incrementDate;
	t.formatDate = function(format, date) { return formatDate(format, date, options) };
	t.formatDates = function(format, date1, date2) { return formatDates(format, date1, date2, options) };
	t.getDate = getDate;
	t.getView = getView;
	t.option = option;
	t.trigger = trigger;
	
	
	// imports
	EventManager.call(t, options, eventSources);
	var isFetchNeeded = t.isFetchNeeded;
	var fetchEvents = t.fetchEvents;
	
	
	// locals
	var _element = element[0];
	var header;
	var headerElement;
	var content;
	var tm; // for making theme classes
	var currentView;
	var elementOuterWidth;
	var suggestedViewHeight;
	var resizeUID = 0;
	var ignoreWindowResize = 0;
	var date = new Date();
	var events = [];
	var _dragElement;
	
	
	
	/* Main Rendering
	-----------------------------------------------------------------------------*/
	
	
	setYMD(date, options.year, options.month, options.date);
	
	
	function render(inc) {
		if (!content) {
			initialRender();
		}
		else if (elementVisible()) {
			// mainly for the public API
			calcSize();
			_renderView(inc);
		}
	}
	
	
	function initialRender() {
		tm = options.theme ? 'ui' : 'fc';
		element.addClass('fc');
		if (options.isRTL) {
			element.addClass('fc-rtl');
		}
		else {
			element.addClass('fc-ltr');
		}
		if (options.theme) {
			element.addClass('ui-widget');
		}

		content = $("<div class='fc-content' style='position:relative'/>")
			.prependTo(element);

		header = new Header(t, options);
		headerElement = header.render();
		if (headerElement) {
			element.prepend(headerElement);
		}

		changeView(options.defaultView);

		if (options.handleWindowResize) {
			$(window).resize(windowResize);
		}

		// needed for IE in a 0x0 iframe, b/c when it is resized, never triggers a windowResize
		if (!bodyVisible()) {
			lateRender();
		}
	}
	
	
	// called when we know the calendar couldn't be rendered when it was initialized,
	// but we think it's ready now
	function lateRender() {
		setTimeout(function() { // IE7 needs this so dimensions are calculated correctly
			if (!currentView.start && bodyVisible()) { // !currentView.start makes sure this never happens more than once
				renderView();
			}
		},0);
	}
	
	
	function destroy() {

		if (currentView) {
			trigger('viewDestroy', currentView, currentView, currentView.element);
			currentView.triggerEventDestroy();
		}

		$(window).unbind('resize', windowResize);

		header.destroy();
		content.remove();
		element.removeClass('fc fc-rtl ui-widget');
	}
	
	
	function elementVisible() {
		return element.is(':visible');
	}
	
	
	function bodyVisible() {
		return $('body').is(':visible');
	}
	
	
	
	/* View Rendering
	-----------------------------------------------------------------------------*/
	

	function changeView(newViewName) {
		if (!currentView || newViewName != currentView.name) {
			_changeView(newViewName);
		}
	}


	function _changeView(newViewName) {
		ignoreWindowResize++;

		if (currentView) {
			trigger('viewDestroy', currentView, currentView, currentView.element);
			unselect();
			currentView.triggerEventDestroy(); // trigger 'eventDestroy' for each event
			freezeContentHeight();
			currentView.element.remove();
			header.deactivateButton(currentView.name);
		}

		header.activateButton(newViewName);

		currentView = new fcViews[newViewName](
			$("<div class='fc-view fc-view-" + newViewName + "' style='position:relative'/>")
				.appendTo(content),
			t // the calendar object
		);

		renderView();
		unfreezeContentHeight();

		ignoreWindowResize--;
	}


	function renderView(inc) {
		if (
			!currentView.start || // never rendered before
			inc || date < currentView.start || date >= currentView.end // or new date range
		) {
			if (elementVisible()) {
				_renderView(inc);
			}
		}
	}


	function _renderView(inc) { // assumes elementVisible
		ignoreWindowResize++;

		if (currentView.start) { // already been rendered?
			trigger('viewDestroy', currentView, currentView, currentView.element);
			unselect();
			clearEvents();
		}

		freezeContentHeight();
		currentView.render(date, inc || 0); // the view's render method ONLY renders the skeleton, nothing else
		setSize();
		unfreezeContentHeight();
		(currentView.afterRender || noop)();

		updateTitle();
		updateTodayButton();

		trigger('viewRender', currentView, currentView, currentView.element);
		currentView.trigger('viewDisplay', _element); // deprecated

		ignoreWindowResize--;

		getAndRenderEvents();
	}
	
	

	/* Resizing
	-----------------------------------------------------------------------------*/
	
	
	function updateSize() {
		if (elementVisible()) {
			unselect();
			clearEvents();
			calcSize();
			setSize();
			renderEvents();
		}
	}
	
	
	function calcSize() { // assumes elementVisible
		if (options.contentHeight) {
			suggestedViewHeight = options.contentHeight;
		}
		else if (options.height) {
			suggestedViewHeight = options.height - (headerElement ? headerElement.height() : 0) - vsides(content);
		}
		else {
			suggestedViewHeight = Math.round(content.width() / Math.max(options.aspectRatio, .5));
		}
	}
	
	
	function setSize() { // assumes elementVisible

		if (suggestedViewHeight === undefined) {
			calcSize(); // for first time
				// NOTE: we don't want to recalculate on every renderView because
				// it could result in oscillating heights due to scrollbars.
		}

		ignoreWindowResize++;
		currentView.setHeight(suggestedViewHeight);
		currentView.setWidth(content.width());
		ignoreWindowResize--;

		elementOuterWidth = element.outerWidth();
	}
	
	
	function windowResize() {
		if (!ignoreWindowResize) {
			if (currentView.start) { // view has already been rendered
				var uid = ++resizeUID;
				setTimeout(function() { // add a delay
					if (uid == resizeUID && !ignoreWindowResize && elementVisible()) {
						if (elementOuterWidth != (elementOuterWidth = element.outerWidth())) {
							ignoreWindowResize++; // in case the windowResize callback changes the height
							updateSize();
							currentView.trigger('windowResize', _element);
							ignoreWindowResize--;
						}
					}
				}, 200);
			}else{
				// calendar must have been initialized in a 0x0 iframe that has just been resized
				lateRender();
			}
		}
	}
	
	
	
	/* Event Fetching/Rendering
	-----------------------------------------------------------------------------*/
	// TODO: going forward, most of this stuff should be directly handled by the view


	function refetchEvents() { // can be called as an API method
		clearEvents();
		fetchAndRenderEvents();
	}


	function rerenderEvents(modifiedEventID) { // can be called as an API method
		clearEvents();
		renderEvents(modifiedEventID);
	}


	function renderEvents(modifiedEventID) { // TODO: remove modifiedEventID hack
		if (elementVisible()) {
			currentView.setEventData(events); // for View.js, TODO: unify with renderEvents
			currentView.renderEvents(events, modifiedEventID); // actually render the DOM elements
			currentView.trigger('eventAfterAllRender');
		}
	}


	function clearEvents() {
		currentView.triggerEventDestroy(); // trigger 'eventDestroy' for each event
		currentView.clearEvents(); // actually remove the DOM elements
		currentView.clearEventData(); // for View.js, TODO: unify with clearEvents
	}
	

	function getAndRenderEvents() {
		if (!options.lazyFetching || isFetchNeeded(currentView.visStart, currentView.visEnd)) {
			fetchAndRenderEvents();
		}
		else {
			renderEvents();
		}
	}


	function fetchAndRenderEvents() {
		fetchEvents(currentView.visStart, currentView.visEnd);
			// ... will call reportEvents
			// ... which will call renderEvents
	}

	
	// called when event data arrives
	function reportEvents(_events) {
		events = _events;
		renderEvents();
	}


	// called when a single event's data has been changed
	function reportEventChange(eventID) {
		rerenderEvents(eventID);
	}



	/* Header Updating
	-----------------------------------------------------------------------------*/


	function updateTitle() {
		header.updateTitle(currentView.title);
	}


	function updateTodayButton() {
		var today = new Date();
		if (today >= currentView.start && today < currentView.end) {
			header.disableButton('today');
		}
		else {
			header.enableButton('today');
		}
	}
	


	/* Selection
	-----------------------------------------------------------------------------*/
	

	function select(start, end, allDay) {
		currentView.select(start, end, allDay===undefined ? true : allDay);
	}
	

	function unselect() { // safe to be called before renderView
		if (currentView) {
			currentView.unselect();
		}
	}
	
	
	
	/* Date
	-----------------------------------------------------------------------------*/
	
	
	function prev() {
		renderView(-1);
	}
	
	
	function next() {
		renderView(1);
	}
	
	
	function prevYear() {
		addYears(date, -1);
		renderView();
	}
	
	
	function nextYear() {
		addYears(date, 1);
		renderView();
	}
	
	
	function today() {
		date = new Date();
		renderView();
	}
	
	
	function gotoDate(year, month, dateOfMonth) {
		if (year instanceof Date) {
			date = cloneDate(year); // provided 1 argument, a Date
		}else{
			setYMD(date, year, month, dateOfMonth);
		}
		renderView();
	}
	
	
	function incrementDate(years, months, days) {
		if (years !== undefined) {
			addYears(date, years);
		}
		if (months !== undefined) {
			addMonths(date, months);
		}
		if (days !== undefined) {
			addDays(date, days);
		}
		renderView();
	}
	
	
	function getDate() {
		return cloneDate(date);
	}



	/* Height "Freezing"
	-----------------------------------------------------------------------------*/


	function freezeContentHeight() {
		content.css({
			width: '100%',
			height: content.height(),
			overflow: 'hidden'
		});
	}


	function unfreezeContentHeight() {
		content.css({
			width: '',
			height: '',
			overflow: ''
		});
	}
	
	
	
	/* Misc
	-----------------------------------------------------------------------------*/
	
	
	function getView() {
		return currentView;
	}
	
	
	function option(name, value) {
		if (value === undefined) {
			return options[name];
		}
		if (name == 'height' || name == 'contentHeight' || name == 'aspectRatio') {
			options[name] = value;
			updateSize();
		}
	}
	
	
	function trigger(name, thisObj) {
		if (options[name]) {
			return options[name].apply(
				thisObj || _element,
				Array.prototype.slice.call(arguments, 2)
			);
		}
	}
	
	
	
	/* External Dragging
	------------------------------------------------------------------------*/
	
	if (options.droppable) {
		$(document)
			.bind('dragstart', function(ev, ui) {
				var _e = ev.target;
				var e = $(_e);
				if (!e.parents('.fc').length) { // not already inside a calendar
					var accept = options.dropAccept;
					if ($.isFunction(accept) ? accept.call(_e, e) : e.is(accept)) {
						_dragElement = _e;
						currentView.dragStart(_dragElement, ev, ui);
					}
				}
			})
			.bind('dragstop', function(ev, ui) {
				if (_dragElement) {
					currentView.dragStop(_dragElement, ev, ui);
					_dragElement = null;
				}
			});
	}
	

}

;;

function Header(calendar, options) {
	var t = this;
	
	
	// exports
	t.render = render;
	t.destroy = destroy;
	t.updateTitle = updateTitle;
	t.activateButton = activateButton;
	t.deactivateButton = deactivateButton;
	t.disableButton = disableButton;
	t.enableButton = enableButton;
	
	
	// locals
	var element = $([]);
	var tm;
	


	function render() {
		tm = options.theme ? 'ui' : 'fc';
		var sections = options.header;
		if (sections) {
			element = $("<table class='fc-header' style='width:100%'/>")
				.append(
					$("<tr/>")
						.append(renderSection('left'))
						.append(renderSection('center'))
						.append(renderSection('right'))
				);
			return element;
		}
	}
	
	
	function destroy() {
		element.remove();
	}
	
	
	function renderSection(position) {
		var e = $("<td class='fc-header-" + position + "'/>");
		var buttonStr = options.header[position];
		if (buttonStr) {
			$.each(buttonStr.split(' '), function(i) {
				if (i > 0) {
					e.append("<span class='fc-header-space'/>");
				}
				var prevButton;
				$.each(this.split(','), function(j, buttonName) {
					if (buttonName == 'title') {
						e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>");
						if (prevButton) {
							prevButton.addClass(tm + '-corner-right');
						}
						prevButton = null;
					}else{
						var buttonClick;
						if (calendar[buttonName]) {
							buttonClick = calendar[buttonName]; // calendar method
						}
						else if (fcViews[buttonName]) {
							buttonClick = function() {
								button.removeClass(tm + '-state-hover'); // forget why
								calendar.changeView(buttonName);
							};
						}
						if (buttonClick) {
							var icon = options.theme ? smartProperty(options.buttonIcons, buttonName) : null; // why are we using smartProperty here?
							var text = smartProperty(options.buttonText, buttonName); // why are we using smartProperty here?
							var button = $(
								"<span class='fc-button fc-button-" + buttonName + " " + tm + "-state-default'>" +
									(icon ?
										"<span class='fc-icon-wrap'>" +
											"<span class='ui-icon ui-icon-" + icon + "'/>" +
										"</span>" :
										text
										) +
								"</span>"
								)
								.click(function() {
									if (!button.hasClass(tm + '-state-disabled')) {
										buttonClick();
									}
								})
								.mousedown(function() {
									button
										.not('.' + tm + '-state-active')
										.not('.' + tm + '-state-disabled')
										.addClass(tm + '-state-down');
								})
								.mouseup(function() {
									button.removeClass(tm + '-state-down');
								})
								.hover(
									function() {
										button
											.not('.' + tm + '-state-active')
											.not('.' + tm + '-state-disabled')
											.addClass(tm + '-state-hover');
									},
									function() {
										button
											.removeClass(tm + '-state-hover')
											.removeClass(tm + '-state-down');
									}
								)
								.appendTo(e);
							disableTextSelection(button);
							if (!prevButton) {
								button.addClass(tm + '-corner-left');
							}
							prevButton = button;
						}
					}
				});
				if (prevButton) {
					prevButton.addClass(tm + '-corner-right');
				}
			});
		}
		return e;
	}
	
	
	function updateTitle(html) {
		element.find('h2')
			.html(html);
	}
	
	
	function activateButton(buttonName) {
		element.find('span.fc-button-' + buttonName)
			.addClass(tm + '-state-active');
	}
	
	
	function deactivateButton(buttonName) {
		element.find('span.fc-button-' + buttonName)
			.removeClass(tm + '-state-active');
	}
	
	
	function disableButton(buttonName) {
		element.find('span.fc-button-' + buttonName)
			.addClass(tm + '-state-disabled');
	}
	
	
	function enableButton(buttonName) {
		element.find('span.fc-button-' + buttonName)
			.removeClass(tm + '-state-disabled');
	}


}

;;

fc.sourceNormalizers = [];
fc.sourceFetchers = [];

var ajaxDefaults = {
	dataType: 'json',
	cache: false
};

var eventGUID = 1;


function EventManager(options, _sources) {
	var t = this;
	
	
	// exports
	t.isFetchNeeded = isFetchNeeded;
	t.fetchEvents = fetchEvents;
	t.addEventSource = addEventSource;
	t.removeEventSource = removeEventSource;
	t.updateEvent = updateEvent;
	t.renderEvent = renderEvent;
	t.removeEvents = removeEvents;
	t.clientEvents = clientEvents;
	t.normalizeEvent = normalizeEvent;
	
	
	// imports
	var trigger = t.trigger;
	var getView = t.getView;
	var reportEvents = t.reportEvents;
	
	
	// locals
	var stickySource = { events: [] };
	var sources = [ stickySource ];
	var rangeStart, rangeEnd;
	var currentFetchID = 0;
	var pendingSourceCnt = 0;
	var loadingLevel = 0;
	var cache = [];
	
	
	for (var i=0; i<_sources.length; i++) {
		_addEventSource(_sources[i]);
	}
	
	
	
	/* Fetching
	-----------------------------------------------------------------------------*/
	
	
	function isFetchNeeded(start, end) {
		return !rangeStart || start < rangeStart || end > rangeEnd;
	}
	
	
	function fetchEvents(start, end) {
		rangeStart = start;
		rangeEnd = end;
		cache = [];
		var fetchID = ++currentFetchID;
		var len = sources.length;
		pendingSourceCnt = len;
		for (var i=0; i<len; i++) {
			fetchEventSource(sources[i], fetchID);
		}
	}
	
	
	function fetchEventSource(source, fetchID) {
		_fetchEventSource(source, function(events) {
			if (fetchID == currentFetchID) {
				if (events) {

					if (options.eventDataTransform) {
						events = $.map(events, options.eventDataTransform);
					}
					if (source.eventDataTransform) {
						events = $.map(events, source.eventDataTransform);
					}
					// TODO: this technique is not ideal for static array event sources.
					//  For arrays, we'll want to process all events right in the beginning, then never again.
				
					for (var i=0; i<events.length; i++) {
						events[i].source = source;
						normalizeEvent(events[i]);
					}
					cache = cache.concat(events);
				}
				pendingSourceCnt--;
				if (!pendingSourceCnt) {
					reportEvents(cache);
				}
			}
		});
	}
	
	
	function _fetchEventSource(source, callback) {
		var i;
		var fetchers = fc.sourceFetchers;
		var res;
		for (i=0; i<fetchers.length; i++) {
			res = fetchers[i](source, rangeStart, rangeEnd, callback);
			if (res === true) {
				// the fetcher is in charge. made its own async request
				return;
			}
			else if (typeof res == 'object') {
				// the fetcher returned a new source. process it
				_fetchEventSource(res, callback);
				return;
			}
		}
		var events = source.events;
		if (events) {
			if ($.isFunction(events)) {
				pushLoading();
				events(cloneDate(rangeStart), cloneDate(rangeEnd), function(events) {
					callback(events);
					popLoading();
				});
			}
			else if ($.isArray(events)) {
				callback(events);
			}
			else {
				callback();
			}
		}else{
			var url = source.url;
			if (url) {
				var success = source.success;
				var error = source.error;
				var complete = source.complete;

				// retrieve any outbound GET/POST $.ajax data from the options
				var customData;
				if ($.isFunction(source.data)) {
					// supplied as a function that returns a key/value object
					customData = source.data();
				}
				else {
					// supplied as a straight key/value object
					customData = source.data;
				}

				// use a copy of the custom data so we can modify the parameters
				// and not affect the passed-in object.
				var data = $.extend({}, customData || {});

				var startParam = firstDefined(source.startParam, options.startParam);
				var endParam = firstDefined(source.endParam, options.endParam);
				if (startParam) {
					data[startParam] = Math.round(+rangeStart / 1000);
				}
				if (endParam) {
					data[endParam] = Math.round(+rangeEnd / 1000);
				}

				pushLoading();
				$.ajax($.extend({}, ajaxDefaults, source, {
					data: data,
					success: function(events) {
						events = events || [];
						var res = applyAll(success, this, arguments);
						if ($.isArray(res)) {
							events = res;
						}
						callback(events);
					},
					error: function() {
						applyAll(error, this, arguments);
						callback();
					},
					complete: function() {
						applyAll(complete, this, arguments);
						popLoading();
					}
				}));
			}else{
				callback();
			}
		}
	}
	
	
	
	/* Sources
	-----------------------------------------------------------------------------*/
	

	function addEventSource(source) {
		source = _addEventSource(source);
		if (source) {
			pendingSourceCnt++;
			fetchEventSource(source, currentFetchID); // will eventually call reportEvents
		}
	}
	
	
	function _addEventSource(source) {
		if ($.isFunction(source) || $.isArray(source)) {
			source = { events: source };
		}
		else if (typeof source == 'string') {
			source = { url: source };
		}
		if (typeof source == 'object') {
			normalizeSource(source);
			sources.push(source);
			return source;
		}
	}
	

	function removeEventSource(source) {
		sources = $.grep(sources, function(src) {
			return !isSourcesEqual(src, source);
		});
		// remove all client events from that source
		cache = $.grep(cache, function(e) {
			return !isSourcesEqual(e.source, source);
		});
		reportEvents(cache);
	}
	
	
	
	/* Manipulation
	-----------------------------------------------------------------------------*/
	
	
	function updateEvent(event) { // update an existing event
		var i, len = cache.length, e,
			defaultEventEnd = getView().defaultEventEnd, // getView???
			startDelta = event.start - event._start,
			endDelta = event.end ?
				(event.end - (event._end || defaultEventEnd(event))) // event._end would be null if event.end
				: 0;                                                      // was null and event was just resized
		for (i=0; i<len; i++) {
			e = cache[i];
			if (e._id == event._id && e != event) {
				e.start = new Date(+e.start + startDelta);
				if (event.end) {
					if (e.end) {
						e.end = new Date(+e.end + endDelta);
					}else{
						e.end = new Date(+defaultEventEnd(e) + endDelta);
					}
				}else{
					e.end = null;
				}
				e.title = event.title;
				e.url = event.url;
				e.allDay = event.allDay;
				e.className = event.className;
				e.editable = event.editable;
				e.color = event.color;
				e.backgroundColor = event.backgroundColor;
				e.borderColor = event.borderColor;
				e.textColor = event.textColor;
				normalizeEvent(e);
			}
		}
		normalizeEvent(event);
		reportEvents(cache);
	}
	
	
	function renderEvent(event, stick) {
		normalizeEvent(event);
		if (!event.source) {
			if (stick) {
				stickySource.events.push(event);
				event.source = stickySource;
			}
			cache.push(event);
		}
		reportEvents(cache);
	}
	
	
	function removeEvents(filter) {
		if (!filter) { // remove all
			cache = [];
			// clear all array sources
			for (var i=0; i<sources.length; i++) {
				if ($.isArray(sources[i].events)) {
					sources[i].events = [];
				}
			}
		}else{
			if (!$.isFunction(filter)) { // an event ID
				var id = filter + '';
				filter = function(e) {
					return e._id == id;
				};
			}
			cache = $.grep(cache, filter, true);
			// remove events from array sources
			for (var i=0; i<sources.length; i++) {
				if ($.isArray(sources[i].events)) {
					sources[i].events = $.grep(sources[i].events, filter, true);
				}
			}
		}
		reportEvents(cache);
	}
	
	
	function clientEvents(filter) {
		if ($.isFunction(filter)) {
			return $.grep(cache, filter);
		}
		else if (filter) { // an event ID
			filter += '';
			return $.grep(cache, function(e) {
				return e._id == filter;
			});
		}
		return cache; // else, return all
	}
	
	
	
	/* Loading State
	-----------------------------------------------------------------------------*/
	
	
	function pushLoading() {
		if (!loadingLevel++) {
			trigger('loading', null, true, getView());
		}
	}
	
	
	function popLoading() {
		if (!--loadingLevel) {
			trigger('loading', null, false, getView());
		}
	}
	
	
	
	/* Event Normalization
	-----------------------------------------------------------------------------*/
	
	
	function normalizeEvent(event) {
		var source = event.source || {};
		var ignoreTimezone = firstDefined(source.ignoreTimezone, options.ignoreTimezone);
		event._id = event._id || (event.id === undefined ? '_fc' + eventGUID++ : event.id + '');
		if (event.date) {
			if (!event.start) {
				event.start = event.date;
			}
			delete event.date;
		}
		event._start = cloneDate(event.start = parseDate(event.start, ignoreTimezone));
		event.end = parseDate(event.end, ignoreTimezone);
		if (event.end && event.end <= event.start) {
			event.end = null;
		}
		event._end = event.end ? cloneDate(event.end) : null;
		if (event.allDay === undefined) {
			event.allDay = firstDefined(source.allDayDefault, options.allDayDefault);
		}
		if (event.className) {
			if (typeof event.className == 'string') {
				event.className = event.className.split(/\s+/);
			}
		}else{
			event.className = [];
		}
		// TODO: if there is no start date, return false to indicate an invalid event
	}
	
	
	
	/* Utils
	------------------------------------------------------------------------------*/
	
	
	function normalizeSource(source) {
		if (source.className) {
			// TODO: repeat code, same code for event classNames
			if (typeof source.className == 'string') {
				source.className = source.className.split(/\s+/);
			}
		}else{
			source.className = [];
		}
		var normalizers = fc.sourceNormalizers;
		for (var i=0; i<normalizers.length; i++) {
			normalizers[i](source);
		}
	}
	
	
	function isSourcesEqual(source1, source2) {
		return source1 && source2 && getSourcePrimitive(source1) == getSourcePrimitive(source2);
	}
	
	
	function getSourcePrimitive(source) {
		return ((typeof source == 'object') ? (source.events || source.url) : '') || source;
	}


}

;;


fc.addDays = addDays;
fc.cloneDate = cloneDate;
fc.parseDate = parseDate;
fc.parseISO8601 = parseISO8601;
fc.parseTime = parseTime;
fc.formatDate = formatDate;
fc.formatDates = formatDates;



/* Date Math
-----------------------------------------------------------------------------*/

var dayIDs = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'],
	DAY_MS = 86400000,
	HOUR_MS = 3600000,
	MINUTE_MS = 60000;
	

function addYears(d, n, keepTime) {
	d.setFullYear(d.getFullYear() + n);
	if (!keepTime) {
		clearTime(d);
	}
	return d;
}


function addMonths(d, n, keepTime) { // prevents day overflow/underflow
	if (+d) { // prevent infinite looping on invalid dates
		var m = d.getMonth() + n,
			check = cloneDate(d);
		check.setDate(1);
		check.setMonth(m);
		d.setMonth(m);
		if (!keepTime) {
			clearTime(d);
		}
		while (d.getMonth() != check.getMonth()) {
			d.setDate(d.getDate() + (d < check ? 1 : -1));
		}
	}
	return d;
}


function addDays(d, n, keepTime) { // deals with daylight savings
	if (+d) {
		var dd = d.getDate() + n,
			check = cloneDate(d);
		check.setHours(9); // set to middle of day
		check.setDate(dd);
		d.setDate(dd);
		if (!keepTime) {
			clearTime(d);
		}
		fixDate(d, check);
	}
	return d;
}


function fixDate(d, check) { // force d to be on check's YMD, for daylight savings purposes
	if (+d) { // prevent infinite looping on invalid dates
		while (d.getDate() != check.getDate()) {
			d.setTime(+d + (d < check ? 1 : -1) * HOUR_MS);
		}
	}
}


function addMinutes(d, n) {
	d.setMinutes(d.getMinutes() + n);
	return d;
}


function clearTime(d) {
	d.setHours(0);
	d.setMinutes(0);
	d.setSeconds(0); 
	d.setMilliseconds(0);
	return d;
}


function cloneDate(d, dontKeepTime) {
	if (dontKeepTime) {
		return clearTime(new Date(+d));
	}
	return new Date(+d);
}


function zeroDate() { // returns a Date with time 00:00:00 and dateOfMonth=1
	var i=0, d;
	do {
		d = new Date(1970, i++, 1);
	} while (d.getHours()); // != 0
	return d;
}


function dayDiff(d1, d2) { // d1 - d2
	return Math.round((cloneDate(d1, true) - cloneDate(d2, true)) / DAY_MS);
}


function setYMD(date, y, m, d) {
	if (y !== undefined && y != date.getFullYear()) {
		date.setDate(1);
		date.setMonth(0);
		date.setFullYear(y);
	}
	if (m !== undefined && m != date.getMonth()) {
		date.setDate(1);
		date.setMonth(m);
	}
	if (d !== undefined) {
		date.setDate(d);
	}
}



/* Date Parsing
-----------------------------------------------------------------------------*/


function parseDate(s, ignoreTimezone) { // ignoreTimezone defaults to true
	if (typeof s == 'object') { // already a Date object
		return s;
	}
	if (typeof s == 'number') { // a UNIX timestamp
		return new Date(s * 1000);
	}
	if (typeof s == 'string') {
		if (s.match(/^\d+(\.\d+)?$/)) { // a UNIX timestamp
			return new Date(parseFloat(s) * 1000);
		}
		if (ignoreTimezone === undefined) {
			ignoreTimezone = true;
		}
		return parseISO8601(s, ignoreTimezone) || (s ? new Date(s) : null);
	}
	// TODO: never return invalid dates (like from new Date(<string>)), return null instead
	return null;
}


function parseISO8601(s, ignoreTimezone) { // ignoreTimezone defaults to false
	// derived from http://delete.me.uk/2005/03/iso8601.html
	// TODO: for a know glitch/feature, read tests/issue_206_parseDate_dst.html
	var m = s.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);
	if (!m) {
		return null;
	}
	var date = new Date(m[1], 0, 1);
	if (ignoreTimezone || !m[13]) {
		var check = new Date(m[1], 0, 1, 9, 0);
		if (m[3]) {
			date.setMonth(m[3] - 1);
			check.setMonth(m[3] - 1);
		}
		if (m[5]) {
			date.setDate(m[5]);
			check.setDate(m[5]);
		}
		fixDate(date, check);
		if (m[7]) {
			date.setHours(m[7]);
		}
		if (m[8]) {
			date.setMinutes(m[8]);
		}
		if (m[10]) {
			date.setSeconds(m[10]);
		}
		if (m[12]) {
			date.setMilliseconds(Number("0." + m[12]) * 1000);
		}
		fixDate(date, check);
	}else{
		date.setUTCFullYear(
			m[1],
			m[3] ? m[3] - 1 : 0,
			m[5] || 1
		);
		date.setUTCHours(
			m[7] || 0,
			m[8] || 0,
			m[10] || 0,
			m[12] ? Number("0." + m[12]) * 1000 : 0
		);
		if (m[14]) {
			var offset = Number(m[16]) * 60 + (m[18] ? Number(m[18]) : 0);
			offset *= m[15] == '-' ? 1 : -1;
			date = new Date(+date + (offset * 60 * 1000));
		}
	}
	return date;
}


function parseTime(s) { // returns minutes since start of day
	if (typeof s == 'number') { // an hour
		return s * 60;
	}
	if (typeof s == 'object') { // a Date object
		return s.getHours() * 60 + s.getMinutes();
	}
	var m = s.match(/(\d+)(?::(\d+))?\s*(\w+)?/);
	if (m) {
		var h = parseInt(m[1], 10);
		if (m[3]) {
			h %= 12;
			if (m[3].toLowerCase().charAt(0) == 'p') {
				h += 12;
			}
		}
		return h * 60 + (m[2] ? parseInt(m[2], 10) : 0);
	}
}



/* Date Formatting
-----------------------------------------------------------------------------*/
// TODO: use same function formatDate(date, [date2], format, [options])


function formatDate(date, format, options) {
	return formatDates(date, null, format, options);
}


function formatDates(date1, date2, format, options) {
	options = options || defaults;
	var date = date1,
		otherDate = date2,
		i, len = format.length, c,
		i2, formatter,
		res = '';
	for (i=0; i<len; i++) {
		c = format.charAt(i);
		if (c == "'") {
			for (i2=i+1; i2<len; i2++) {
				if (format.charAt(i2) == "'") {
					if (date) {
						if (i2 == i+1) {
							res += "'";
						}else{
							res += format.substring(i+1, i2);
						}
						i = i2;
					}
					break;
				}
			}
		}
		else if (c == '(') {
			for (i2=i+1; i2<len; i2++) {
				if (format.charAt(i2) == ')') {
					var subres = formatDate(date, format.substring(i+1, i2), options);
					if (parseInt(subres.replace(/\D/, ''), 10)) {
						res += subres;
					}
					i = i2;
					break;
				}
			}
		}
		else if (c == '[') {
			for (i2=i+1; i2<len; i2++) {
				if (format.charAt(i2) == ']') {
					var subformat = format.substring(i+1, i2);
					var subres = formatDate(date, subformat, options);
					if (subres != formatDate(otherDate, subformat, options)) {
						res += subres;
					}
					i = i2;
					break;
				}
			}
		}
		else if (c == '{') {
			date = date2;
			otherDate = date1;
		}
		else if (c == '}') {
			date = date1;
			otherDate = date2;
		}
		else {
			for (i2=len; i2>i; i2--) {
				if (formatter = dateFormatters[format.substring(i, i2)]) {
					if (date) {
						res += formatter(date, options);
					}
					i = i2 - 1;
					break;
				}
			}
			if (i2 == i) {
				if (date) {
					res += c;
				}
			}
		}
	}
	return res;
};


var dateFormatters = {
	s	: function(d)	{ return d.getSeconds() },
	ss	: function(d)	{ return zeroPad(d.getSeconds()) },
	m	: function(d)	{ return d.getMinutes() },
	mm	: function(d)	{ return zeroPad(d.getMinutes()) },
	h	: function(d)	{ return d.getHours() % 12 || 12 },
	hh	: function(d)	{ return zeroPad(d.getHours() % 12 || 12) },
	H	: function(d)	{ return d.getHours() },
	HH	: function(d)	{ return zeroPad(d.getHours()) },
	d	: function(d)	{ return d.getDate() },
	dd	: function(d)	{ return zeroPad(d.getDate()) },
	ddd	: function(d,o)	{ return o.dayNamesShort[d.getDay()] },
	dddd: function(d,o)	{ return o.dayNames[d.getDay()] },
	M	: function(d)	{ return d.getMonth() + 1 },
	MM	: function(d)	{ return zeroPad(d.getMonth() + 1) },
	MMM	: function(d,o)	{ return o.monthNamesShort[d.getMonth()] },
	MMMM: function(d,o)	{ return o.monthNames[d.getMonth()] },
	yy	: function(d)	{ return (d.getFullYear()+'').substring(2) },
	yyyy: function(d)	{ return d.getFullYear() },
	t	: function(d)	{ return d.getHours() < 12 ? 'a' : 'p' },
	tt	: function(d)	{ return d.getHours() < 12 ? 'am' : 'pm' },
	T	: function(d)	{ return d.getHours() < 12 ? 'A' : 'P' },
	TT	: function(d)	{ return d.getHours() < 12 ? 'AM' : 'PM' },
	u	: function(d)	{ return formatDate(d, "yyyy-MM-dd'T'HH:mm:ss'Z'") },
	S	: function(d)	{
		var date = d.getDate();
		if (date > 10 && date < 20) {
			return 'th';
		}
		return ['st', 'nd', 'rd'][date%10-1] || 'th';
	},
	w   : function(d, o) { // local
		return o.weekNumberCalculation(d);
	},
	W   : function(d) { // ISO
		return iso8601Week(d);
	}
};
fc.dateFormatters = dateFormatters;


/* thanks jQuery UI (https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js)
 * 
 * Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
 * `date` - the date to get the week for
 * `number` - the number of the week within the year that contains this date
 */
function iso8601Week(date) {
	var time;
	var checkDate = new Date(date.getTime());

	// Find Thursday of this week starting on Monday
	checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));

	time = checkDate.getTime();
	checkDate.setMonth(0); // Compare with Jan 1
	checkDate.setDate(1);
	return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
}


;;

fc.applyAll = applyAll;


/* Event Date Math
-----------------------------------------------------------------------------*/


function exclEndDay(event) {
	if (event.end) {
		return _exclEndDay(event.end, event.allDay);
	}else{
		return addDays(cloneDate(event.start), 1);
	}
}


function _exclEndDay(end, allDay) {
	end = cloneDate(end);
	return allDay || end.getHours() || end.getMinutes() ? addDays(end, 1) : clearTime(end);
	// why don't we check for seconds/ms too?
}



/* Event Element Binding
-----------------------------------------------------------------------------*/


function lazySegBind(container, segs, bindHandlers) {
	container.unbind('mouseover').mouseover(function(ev) {
		var parent=ev.target, e,
			i, seg;
		while (parent != this) {
			e = parent;
			parent = parent.parentNode;
		}
		if ((i = e._fci) !== undefined) {
			e._fci = undefined;
			seg = segs[i];
			bindHandlers(seg.event, seg.element, seg);
			$(ev.target).trigger(ev);
		}
		ev.stopPropagation();
	});
}



/* Element Dimensions
-----------------------------------------------------------------------------*/


function setOuterWidth(element, width, includeMargins) {
	for (var i=0, e; i<element.length; i++) {
		e = $(element[i]);
		e.width(Math.max(0, width - hsides(e, includeMargins)));
	}
}


function setOuterHeight(element, height, includeMargins) {
	for (var i=0, e; i<element.length; i++) {
		e = $(element[i]);
		e.height(Math.max(0, height - vsides(e, includeMargins)));
	}
}


function hsides(element, includeMargins) {
	return hpadding(element) + hborders(element) + (includeMargins ? hmargins(element) : 0);
}


function hpadding(element) {
	return (parseFloat($.css(element[0], 'paddingLeft', true)) || 0) +
	       (parseFloat($.css(element[0], 'paddingRight', true)) || 0);
}


function hmargins(element) {
	return (parseFloat($.css(element[0], 'marginLeft', true)) || 0) +
	       (parseFloat($.css(element[0], 'marginRight', true)) || 0);
}


function hborders(element) {
	return (parseFloat($.css(element[0], 'borderLeftWidth', true)) || 0) +
	       (parseFloat($.css(element[0], 'borderRightWidth', true)) || 0);
}


function vsides(element, includeMargins) {
	return vpadding(element) +  vborders(element) + (includeMargins ? vmargins(element) : 0);
}


function vpadding(element) {
	return (parseFloat($.css(element[0], 'paddingTop', true)) || 0) +
	       (parseFloat($.css(element[0], 'paddingBottom', true)) || 0);
}


function vmargins(element) {
	return (parseFloat($.css(element[0], 'marginTop', true)) || 0) +
	       (parseFloat($.css(element[0], 'marginBottom', true)) || 0);
}


function vborders(element) {
	return (parseFloat($.css(element[0], 'borderTopWidth', true)) || 0) +
	       (parseFloat($.css(element[0], 'borderBottomWidth', true)) || 0);
}



/* Misc Utils
-----------------------------------------------------------------------------*/


//TODO: arraySlice
//TODO: isFunction, grep ?


function noop() { }


function dateCompare(a, b) {
	return a - b;
}


function arrayMax(a) {
	return Math.max.apply(Math, a);
}


function zeroPad(n) {
	return (n < 10 ? '0' : '') + n;
}


function smartProperty(obj, name) { // get a camel-cased/namespaced property of an object
	if (obj[name] !== undefined) {
		return obj[name];
	}
	var parts = name.split(/(?=[A-Z])/),
		i=parts.length-1, res;
	for (; i>=0; i--) {
		res = obj[parts[i].toLowerCase()];
		if (res !== undefined) {
			return res;
		}
	}
	return obj[''];
}


function htmlEscape(s) {
	return s.replace(/&/g, '&amp;')
		.replace(/</g, '&lt;')
		.replace(/>/g, '&gt;')
		.replace(/'/g, '&#039;')
		.replace(/"/g, '&quot;')
		.replace(/\n/g, '<br />');
}


function disableTextSelection(element) {
	element
		.attr('unselectable', 'on')
		.css('MozUserSelect', 'none')
		.bind('selectstart.ui', function() { return false; });
}


/*
function enableTextSelection(element) {
	element
		.attr('unselectable', 'off')
		.css('MozUserSelect', '')
		.unbind('selectstart.ui');
}
*/


function markFirstLast(e) {
	e.children()
		.removeClass('fc-first fc-last')
		.filter(':first-child')
			.addClass('fc-first')
		.end()
		.filter(':last-child')
			.addClass('fc-last');
}


function setDayID(cell, date) {
	cell.each(function(i, _cell) {
		_cell.className = _cell.className.replace(/^fc-\w*/, 'fc-' + dayIDs[date.getDay()]);
		// TODO: make a way that doesn't rely on order of classes
	});
}


function getSkinCss(event, opt) {
	var source = event.source || {};
	var eventColor = event.color;
	var sourceColor = source.color;
	var optionColor = opt('eventColor');
	var backgroundColor =
		event.backgroundColor ||
		eventColor ||
		source.backgroundColor ||
		sourceColor ||
		opt('eventBackgroundColor') ||
		optionColor;
	var borderColor =
		event.borderColor ||
		eventColor ||
		source.borderColor ||
		sourceColor ||
		opt('eventBorderColor') ||
		optionColor;
	var textColor =
		event.textColor ||
		source.textColor ||
		opt('eventTextColor');
	var statements = [];
	if (backgroundColor) {
		statements.push('background-color:' + backgroundColor);
	}
	if (borderColor) {
		statements.push('border-color:' + borderColor);
	}
	if (textColor) {
		statements.push('color:' + textColor);
	}
	return statements.join(';');
}


function applyAll(functions, thisObj, args) {
	if ($.isFunction(functions)) {
		functions = [ functions ];
	}
	if (functions) {
		var i;
		var ret;
		for (i=0; i<functions.length; i++) {
			ret = functions[i].apply(thisObj, args) || ret;
		}
		return ret;
	}
}


function firstDefined() {
	for (var i=0; i<arguments.length; i++) {
		if (arguments[i] !== undefined) {
			return arguments[i];
		}
	}
}


;;

fcViews.month = MonthView;

function MonthView(element, calendar) {
	var t = this;
	
	
	// exports
	t.render = render;
	
	
	// imports
	BasicView.call(t, element, calendar, 'month');
	var opt = t.opt;
	var renderBasic = t.renderBasic;
	var skipHiddenDays = t.skipHiddenDays;
	var getCellsPerWeek = t.getCellsPerWeek;
	var formatDate = calendar.formatDate;
	
	
	function render(date, delta) {

		if (delta) {
			addMonths(date, delta);
			date.setDate(1);
		}

		var firstDay = opt('firstDay');

		var start = cloneDate(date, true);
		start.setDate(1);

		var end = addMonths(cloneDate(start), 1);

		var visStart = cloneDate(start);
		addDays(visStart, -((visStart.getDay() - firstDay + 7) % 7));
		skipHiddenDays(visStart);

		var visEnd = cloneDate(end);
		addDays(visEnd, (7 - visEnd.getDay() + firstDay) % 7);
		skipHiddenDays(visEnd, -1, true);

		var colCnt = getCellsPerWeek();
		var rowCnt = Math.round(dayDiff(visEnd, visStart) / 7); // should be no need for Math.round

		if (opt('weekMode') == 'fixed') {
			addDays(visEnd, (6 - rowCnt) * 7); // add weeks to make up for it
			rowCnt = 6;
		}

		t.title = formatDate(start, opt('titleFormat'));

		t.start = start;
		t.end = end;
		t.visStart = visStart;
		t.visEnd = visEnd;

		renderBasic(rowCnt, colCnt, true);
	}
	
	
}

;;

fcViews.basicWeek = BasicWeekView;

function BasicWeekView(element, calendar) {
	var t = this;
	
	
	// exports
	t.render = render;
	
	
	// imports
	BasicView.call(t, element, calendar, 'basicWeek');
	var opt = t.opt;
	var renderBasic = t.renderBasic;
	var skipHiddenDays = t.skipHiddenDays;
	var getCellsPerWeek = t.getCellsPerWeek;
	var formatDates = calendar.formatDates;
	
	
	function render(date, delta) {

		if (delta) {
			addDays(date, delta * 7);
		}

		var start = addDays(cloneDate(date), -((date.getDay() - opt('firstDay') + 7) % 7));
		var end = addDays(cloneDate(start), 7);

		var visStart = cloneDate(start);
		skipHiddenDays(visStart);

		var visEnd = cloneDate(end);
		skipHiddenDays(visEnd, -1, true);

		var colCnt = getCellsPerWeek();

		t.start = start;
		t.end = end;
		t.visStart = visStart;
		t.visEnd = visEnd;

		t.title = formatDates(
			visStart,
			addDays(cloneDate(visEnd), -1),
			opt('titleFormat')
		);

		renderBasic(1, colCnt, false);
	}
	
	
}

;;

fcViews.basicDay = BasicDayView;


function BasicDayView(element, calendar) {
	var t = this;
	
	
	// exports
	t.render = render;
	
	
	// imports
	BasicView.call(t, element, calendar, 'basicDay');
	var opt = t.opt;
	var renderBasic = t.renderBasic;
	var skipHiddenDays = t.skipHiddenDays;
	var formatDate = calendar.formatDate;
	
	
	function render(date, delta) {

		if (delta) {
			addDays(date, delta);
		}
		skipHiddenDays(date, delta < 0 ? -1 : 1);

		var start = cloneDate(date, true);
		var end = addDays(cloneDate(start), 1);

		t.title = formatDate(date, opt('titleFormat'));

		t.start = t.visStart = start;
		t.end = t.visEnd = end;

		renderBasic(1, 1, false);
	}
	
	
}

;;

setDefaults({
	weekMode: 'fixed'
});


function BasicView(element, calendar, viewName) {
	var t = this;
	
	
	// exports
	t.renderBasic = renderBasic;
	t.setHeight = setHeight;
	t.setWidth = setWidth;
	t.renderDayOverlay = renderDayOverlay;
	t.defaultSelectionEnd = defaultSelectionEnd;
	t.renderSelection = renderSelection;
	t.clearSelection = clearSelection;
	t.reportDayClick = reportDayClick; // for selection (kinda hacky)
	t.dragStart = dragStart;
	t.dragStop = dragStop;
	t.defaultEventEnd = defaultEventEnd;
	t.getHoverListener = function() { return hoverListener };
	t.colLeft = colLeft;
	t.colRight = colRight;
	t.colContentLeft = colContentLeft;
	t.colContentRight = colContentRight;
	t.getIsCellAllDay = function() { return true };
	t.allDayRow = allDayRow;
	t.getRowCnt = function() { return rowCnt };
	t.getColCnt = function() { return colCnt };
	t.getColWidth = function() { return colWidth };
	t.getDaySegmentContainer = function() { return daySegmentContainer };
	
	
	// imports
	View.call(t, element, calendar, viewName);
	OverlayManager.call(t);
	SelectionManager.call(t);
	BasicEventRenderer.call(t);
	var opt = t.opt;
	var trigger = t.trigger;
	var renderOverlay = t.renderOverlay;
	var clearOverlays = t.clearOverlays;
	var daySelectionMousedown = t.daySelectionMousedown;
	var cellToDate = t.cellToDate;
	var dateToCell = t.dateToCell;
	var rangeToSegments = t.rangeToSegments;
	var formatDate = calendar.formatDate;
	
	
	// locals
	
	var table;
	var head;
	var headCells;
	var body;
	var bodyRows;
	var bodyCells;
	var bodyFirstCells;
	var firstRowCellInners;
	var firstRowCellContentInners;
	var daySegmentContainer;
	
	var viewWidth;
	var viewHeight;
	var colWidth;
	var weekNumberWidth;
	
	var rowCnt, colCnt;
	var showNumbers;
	var coordinateGrid;
	var hoverListener;
	var colPositions;
	var colContentPositions;
	
	var tm;
	var colFormat;
	var showWeekNumbers;
	var weekNumberTitle;
	var weekNumberFormat;
	
	
	
	/* Rendering
	------------------------------------------------------------*/
	
	
	disableTextSelection(element.addClass('fc-grid'));
	
	
	function renderBasic(_rowCnt, _colCnt, _showNumbers) {
		rowCnt = _rowCnt;
		colCnt = _colCnt;
		showNumbers = _showNumbers;
		updateOptions();

		if (!body) {
			buildEventContainer();
		}

		buildTable();
	}
	
	
	function updateOptions() {
		tm = opt('theme') ? 'ui' : 'fc';
		colFormat = opt('columnFormat');

		// week # options. (TODO: bad, logic also in other views)
		showWeekNumbers = opt('weekNumbers');
		weekNumberTitle = opt('weekNumberTitle');
		if (opt('weekNumberCalculation') != 'iso') {
			weekNumberFormat = "w";
		}
		else {
			weekNumberFormat = "W";
		}
	}
	
	
	function buildEventContainer() {
		daySegmentContainer =
			$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>")
				.appendTo(element);
	}
	
	
	function buildTable() {
		var html = buildTableHTML();

		if (table) {
			table.remove();
		}
		table = $(html).appendTo(element);

		head = table.find('thead');
		headCells = head.find('.fc-day-header');
		body = table.find('tbody');
		bodyRows = body.find('tr');
		bodyCells = body.find('.fc-day');
		bodyFirstCells = bodyRows.find('td:first-child');

		firstRowCellInners = bodyRows.eq(0).find('.fc-day > div');
		firstRowCellContentInners = bodyRows.eq(0).find('.fc-day-content > div');
		
		markFirstLast(head.add(head.find('tr'))); // marks first+last tr/th's
		markFirstLast(bodyRows); // marks first+last td's
		bodyRows.eq(0).addClass('fc-first');
		bodyRows.filter(':last').addClass('fc-last');

		bodyCells.each(function(i, _cell) {
			var date = cellToDate(
				Math.floor(i / colCnt),
				i % colCnt
			);
			trigger('dayRender', t, date, $(_cell));
		});

		dayBind(bodyCells);
	}



	/* HTML Building
	-----------------------------------------------------------*/


	function buildTableHTML() {
		var html =
			"<table class='fc-border-separate' style='width:100%' cellspacing='0'>" +
			buildHeadHTML() +
			buildBodyHTML() +
			"</table>";

		return html;
	}


	function buildHeadHTML() {
		var headerClass = tm + "-widget-header";
		var html = '';
		var col;
		var date;

		html += "<thead><tr>";

		if (showWeekNumbers) {
			html +=
				"<th class='fc-week-number " + headerClass + "'>" +
				htmlEscape(weekNumberTitle) +
				"</th>";
		}

		for (col=0; col<colCnt; col++) {
			date = cellToDate(0, col);
			html +=
				"<th class='fc-day-header fc-" + dayIDs[date.getDay()] + " " + headerClass + "'>" +
				htmlEscape(formatDate(date, colFormat)) +
				"</th>";
		}

		html += "</tr></thead>";

		return html;
	}


	function buildBodyHTML() {
		var contentClass = tm + "-widget-content";
		var html = '';
		var row;
		var col;
		var date;

		html += "<tbody>";

		for (row=0; row<rowCnt; row++) {

			html += "<tr class='fc-week'>";

			if (showWeekNumbers) {
				date = cellToDate(row, 0);
				html +=
					"<td class='fc-week-number " + contentClass + "'>" +
					"<div>" +
					htmlEscape(formatDate(date, weekNumberFormat)) +
					"</div>" +
					"</td>";
			}

			for (col=0; col<colCnt; col++) {
				date = cellToDate(row, col);
				html += buildCellHTML(date);
			}

			html += "</tr>";
		}

		html += "</tbody>";

		return html;
	}


	function buildCellHTML(date) {
		var contentClass = tm + "-widget-content";
		var month = t.start.getMonth();
		var today = clearTime(new Date());
		var html = '';
		var classNames = [
			'fc-day',
			'fc-' + dayIDs[date.getDay()],
			contentClass
		];

		if (date.getMonth() != month) {
			classNames.push('fc-other-month');
		}
		if (+date == +today) {
			classNames.push(
				'fc-today',
				tm + '-state-highlight'
			);
		}
		else if (date < today) {
			classNames.push('fc-past');
		}
		else {
			classNames.push('fc-future');
		}

		html +=
			"<td" +
			" class='" + classNames.join(' ') + "'" +
			" data-date='" + formatDate(date, 'yyyy-MM-dd') + "'" +
			">" +
			"<div>";

		if (showNumbers) {
			html += "<div class='fc-day-number'>" + date.getDate() + "</div>";
		}

		html +=
			"<div class='fc-day-content'>" +
			"<div style='position:relative'>&nbsp;</div>" +
			"</div>" +
			"</div>" +
			"</td>";

		return html;
	}



	/* Dimensions
	-----------------------------------------------------------*/
	
	
	function setHeight(height) {
		viewHeight = height;
		
		var bodyHeight = viewHeight - head.height();
		var rowHeight;
		var rowHeightLast;
		var cell;
			
		if (opt('weekMode') == 'variable') {
			rowHeight = rowHeightLast = Math.floor(bodyHeight / (rowCnt==1 ? 2 : 6));
		}else{
			rowHeight = Math.floor(bodyHeight / rowCnt);
			rowHeightLast = bodyHeight - rowHeight * (rowCnt-1);
		}
		
		bodyFirstCells.each(function(i, _cell) {
			if (i < rowCnt) {
				cell = $(_cell);
				cell.find('> div').css(
					'min-height',
					(i==rowCnt-1 ? rowHeightLast : rowHeight) - vsides(cell)
				);
			}
		});
		
	}
	
	
	function setWidth(width) {
		viewWidth = width;
		colPositions.clear();
		colContentPositions.clear();

		weekNumberWidth = 0;
		if (showWeekNumbers) {
			weekNumberWidth = head.find('th.fc-week-number').outerWidth();
		}

		colWidth = Math.floor((viewWidth - weekNumberWidth) / colCnt);
		setOuterWidth(headCells.slice(0, -1), colWidth);
	}
	
	
	
	/* Day clicking and binding
	-----------------------------------------------------------*/
	
	
	function dayBind(days) {
		days.click(dayClick)
			.mousedown(daySelectionMousedown);
	}
	
	
	function dayClick(ev) {
		if (!opt('selectable')) { // if selectable, SelectionManager will worry about dayClick
			var date = parseISO8601($(this).data('date'));
			trigger('dayClick', this, date, true, ev);
		}
	}
	
	
	
	/* Semi-transparent Overlay Helpers
	------------------------------------------------------*/
	// TODO: should be consolidated with AgendaView's methods


	function renderDayOverlay(overlayStart, overlayEnd, refreshCoordinateGrid) { // overlayEnd is exclusive

		if (refreshCoordinateGrid) {
			coordinateGrid.build();
		}

		var segments = rangeToSegments(overlayStart, overlayEnd);

		for (var i=0; i<segments.length; i++) {
			var segment = segments[i];
			dayBind(
				renderCellOverlay(
					segment.row,
					segment.leftCol,
					segment.row,
					segment.rightCol
				)
			);
		}
	}

	
	function renderCellOverlay(row0, col0, row1, col1) { // row1,col1 is inclusive
		var rect = coordinateGrid.rect(row0, col0, row1, col1, element);
		return renderOverlay(rect, element);
	}
	
	
	
	/* Selection
	-----------------------------------------------------------------------*/
	
	
	function defaultSelectionEnd(startDate, allDay) {
		return cloneDate(startDate);
	}
	
	
	function renderSelection(startDate, endDate, allDay) {
		renderDayOverlay(startDate, addDays(cloneDate(endDate), 1), true); // rebuild every time???
	}
	
	
	function clearSelection() {
		clearOverlays();
	}
	
	
	function reportDayClick(date, allDay, ev) {
		var cell = dateToCell(date);
		var _element = bodyCells[cell.row*colCnt + cell.col];
		trigger('dayClick', _element, date, allDay, ev);
	}
	
	
	
	/* External Dragging
	-----------------------------------------------------------------------*/
	
	
	function dragStart(_dragElement, ev, ui) {
		hoverListener.start(function(cell) {
			clearOverlays();
			if (cell) {
				renderCellOverlay(cell.row, cell.col, cell.row, cell.col);
			}
		}, ev);
	}
	
	
	function dragStop(_dragElement, ev, ui) {
		var cell = hoverListener.stop();
		clearOverlays();
		if (cell) {
			var d = cellToDate(cell);
			trigger('drop', _dragElement, d, true, ev, ui);
		}
	}
	
	
	
	/* Utilities
	--------------------------------------------------------*/
	
	
	function defaultEventEnd(event) {
		return cloneDate(event.start);
	}
	
	
	coordinateGrid = new CoordinateGrid(function(rows, cols) {
		var e, n, p;
		headCells.each(function(i, _e) {
			e = $(_e);
			n = e.offset().left;
			if (i) {
				p[1] = n;
			}
			p = [n];
			cols[i] = p;
		});
		p[1] = n + e.outerWidth();
		bodyRows.each(function(i, _e) {
			if (i < rowCnt) {
				e = $(_e);
				n = e.offset().top;
				if (i) {
					p[1] = n;
				}
				p = [n];
				rows[i] = p;
			}
		});
		p[1] = n + e.outerHeight();
	});
	
	
	hoverListener = new HoverListener(coordinateGrid);
	
	colPositions = new HorizontalPositionCache(function(col) {
		return firstRowCellInners.eq(col);
	});

	colContentPositions = new HorizontalPositionCache(function(col) {
		return firstRowCellContentInners.eq(col);
	});


	function colLeft(col) {
		return colPositions.left(col);
	}


	function colRight(col) {
		return colPositions.right(col);
	}
	
	
	function colContentLeft(col) {
		return colContentPositions.left(col);
	}
	
	
	function colContentRight(col) {
		return colContentPositions.right(col);
	}
	
	
	function allDayRow(i) {
		return bodyRows.eq(i);
	}
	
}

;;

function BasicEventRenderer() {
	var t = this;
	
	
	// exports
	t.renderEvents = renderEvents;
	t.clearEvents = clearEvents;
	

	// imports
	DayEventRenderer.call(t);

	
	function renderEvents(events, modifiedEventId) {
		t.renderDayEvents(events, modifiedEventId);
	}
	
	
	function clearEvents() {
		t.getDaySegmentContainer().empty();
	}


	// TODO: have this class (and AgendaEventRenderer) be responsible for creating the event container div

}

;;

fcViews.agendaWeek = AgendaWeekView;

function AgendaWeekView(element, calendar) {
	var t = this;
	
	
	// exports
	t.render = render;
	
	
	// imports
	AgendaView.call(t, element, calendar, 'agendaWeek');
	var opt = t.opt;
	var renderAgenda = t.renderAgenda;
	var skipHiddenDays = t.skipHiddenDays;
	var getCellsPerWeek = t.getCellsPerWeek;
	var formatDates = calendar.formatDates;

	
	function render(date, delta) {

		if (delta) {
			addDays(date, delta * 7);
		}

		var start = addDays(cloneDate(date), -((date.getDay() - opt('firstDay') + 7) % 7));
		var end = addDays(cloneDate(start), 7);

		var visStart = cloneDate(start);
		skipHiddenDays(visStart);

		var visEnd = cloneDate(end);
		skipHiddenDays(visEnd, -1, true);

		var colCnt = getCellsPerWeek();

		t.title = formatDates(
			visStart,
			addDays(cloneDate(visEnd), -1),
			opt('titleFormat')
		);

		t.start = start;
		t.end = end;
		t.visStart = visStart;
		t.visEnd = visEnd;

		renderAgenda(colCnt);
	}

}

;;

fcViews.agendaDay = AgendaDayView;


function AgendaDayView(element, calendar) {
	var t = this;
	
	
	// exports
	t.render = render;
	
	
	// imports
	AgendaView.call(t, element, calendar, 'agendaDay');
	var opt = t.opt;
	var renderAgenda = t.renderAgenda;
	var skipHiddenDays = t.skipHiddenDays;
	var formatDate = calendar.formatDate;
	
	
	function render(date, delta) {

		if (delta) {
			addDays(date, delta);
		}
		skipHiddenDays(date, delta < 0 ? -1 : 1);

		var start = cloneDate(date, true);
		var end = addDays(cloneDate(start), 1);

		t.title = formatDate(date, opt('titleFormat'));

		t.start = t.visStart = start;
		t.end = t.visEnd = end;

		renderAgenda(1);
	}
	

}

;;

setDefaults({
	allDaySlot: true,
	allDayText: 'all-day',
	firstHour: 6,
	slotMinutes: 30,
	defaultEventMinutes: 120,
	axisFormat: 'h(:mm)tt',
	timeFormat: {
		agenda: 'h:mm{ - h:mm}'
	},
	dragOpacity: {
		agenda: .5
	},
	minTime: 0,
	maxTime: 24,
	slotEventOverlap: true
});


// TODO: make it work in quirks mode (event corners, all-day height)
// TODO: test liquid width, especially in IE6


function AgendaView(element, calendar, viewName) {
	var t = this;
	
	
	// exports
	t.renderAgenda = renderAgenda;
	t.setWidth = setWidth;
	t.setHeight = setHeight;
	t.afterRender = afterRender;
	t.defaultEventEnd = defaultEventEnd;
	t.timePosition = timePosition;
	t.getIsCellAllDay = getIsCellAllDay;
	t.allDayRow = getAllDayRow;
	t.getCoordinateGrid = function() { return coordinateGrid }; // specifically for AgendaEventRenderer
	t.getHoverListener = function() { return hoverListener };
	t.colLeft = colLeft;
	t.colRight = colRight;
	t.colContentLeft = colContentLeft;
	t.colContentRight = colContentRight;
	t.getDaySegmentContainer = function() { return daySegmentContainer };
	t.getSlotSegmentContainer = function() { return slotSegmentContainer };
	t.getMinMinute = function() { return minMinute };
	t.getMaxMinute = function() { return maxMinute };
	t.getSlotContainer = function() { return slotContainer };
	t.getRowCnt = function() { return 1 };
	t.getColCnt = function() { return colCnt };
	t.getColWidth = function() { return colWidth };
	t.getSnapHeight = function() { return snapHeight };
	t.getSnapMinutes = function() { return snapMinutes };
	t.defaultSelectionEnd = defaultSelectionEnd;
	t.renderDayOverlay = renderDayOverlay;
	t.renderSelection = renderSelection;
	t.clearSelection = clearSelection;
	t.reportDayClick = reportDayClick; // selection mousedown hack
	t.dragStart = dragStart;
	t.dragStop = dragStop;
	
	
	// imports
	View.call(t, element, calendar, viewName);
	OverlayManager.call(t);
	SelectionManager.call(t);
	AgendaEventRenderer.call(t);
	var opt = t.opt;
	var trigger = t.trigger;
	var renderOverlay = t.renderOverlay;
	var clearOverlays = t.clearOverlays;
	var reportSelection = t.reportSelection;
	var unselect = t.unselect;
	var daySelectionMousedown = t.daySelectionMousedown;
	var slotSegHtml = t.slotSegHtml;
	var cellToDate = t.cellToDate;
	var dateToCell = t.dateToCell;
	var rangeToSegments = t.rangeToSegments;
	var formatDate = calendar.formatDate;
	
	
	// locals
	
	var dayTable;
	var dayHead;
	var dayHeadCells;
	var dayBody;
	var dayBodyCells;
	var dayBodyCellInners;
	var dayBodyCellContentInners;
	var dayBodyFirstCell;
	var dayBodyFirstCellStretcher;
	var slotLayer;
	var daySegmentContainer;
	var allDayTable;
	var allDayRow;
	var slotScroller;
	var slotContainer;
	var slotSegmentContainer;
	var slotTable;
	var selectionHelper;
	
	var viewWidth;
	var viewHeight;
	var axisWidth;
	var colWidth;
	var gutterWidth;
	var slotHeight; // TODO: what if slotHeight changes? (see issue 650)

	var snapMinutes;
	var snapRatio; // ratio of number of "selection" slots to normal slots. (ex: 1, 2, 4)
	var snapHeight; // holds the pixel hight of a "selection" slot
	
	var colCnt;
	var slotCnt;
	var coordinateGrid;
	var hoverListener;
	var colPositions;
	var colContentPositions;
	var slotTopCache = {};
	
	var tm;
	var rtl;
	var minMinute, maxMinute;
	var colFormat;
	var showWeekNumbers;
	var weekNumberTitle;
	var weekNumberFormat;
	

	
	/* Rendering
	-----------------------------------------------------------------------------*/
	
	
	disableTextSelection(element.addClass('fc-agenda'));
	
	
	function renderAgenda(c) {
		colCnt = c;
		updateOptions();

		if (!dayTable) { // first time rendering?
			buildSkeleton(); // builds day table, slot area, events containers
		}
		else {
			buildDayTable(); // rebuilds day table
		}
	}
	
	
	function updateOptions() {

		tm = opt('theme') ? 'ui' : 'fc';
		rtl = opt('isRTL')
		minMinute = parseTime(opt('minTime'));
		maxMinute = parseTime(opt('maxTime'));
		colFormat = opt('columnFormat');

		// week # options. (TODO: bad, logic also in other views)
		showWeekNumbers = opt('weekNumbers');
		weekNumberTitle = opt('weekNumberTitle');
		if (opt('weekNumberCalculation') != 'iso') {
			weekNumberFormat = "w";
		}
		else {
			weekNumberFormat = "W";
		}

		snapMinutes = opt('snapMinutes') || opt('slotMinutes');
	}



	/* Build DOM
	-----------------------------------------------------------------------*/


	function buildSkeleton() {
		var headerClass = tm + "-widget-header";
		var contentClass = tm + "-widget-content";
		var s;
		var d;
		var i;
		var maxd;
		var minutes;
		var slotNormal = opt('slotMinutes') % 15 == 0;
		
		buildDayTable();
		
		slotLayer =
			$("<div style='position:absolute;z-index:2;left:0;width:100%'/>")
				.appendTo(element);
				
		if (opt('allDaySlot')) {
		
			daySegmentContainer =
				$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>")
					.appendTo(slotLayer);
		
			s =
				"<table style='width:100%' class='fc-agenda-allday' cellspacing='0'>" +
				"<tr>" +
				"<th class='" + headerClass + " fc-agenda-axis'>" + opt('allDayText') + "</th>" +
				"<td>" +
				"<div class='fc-day-content'><div style='position:relative'/></div>" +
				"</td>" +
				"<th class='" + headerClass + " fc-agenda-gutter'>&nbsp;</th>" +
				"</tr>" +
				"</table>";
			allDayTable = $(s).appendTo(slotLayer);
			allDayRow = allDayTable.find('tr');
			
			dayBind(allDayRow.find('td'));
			
			slotLayer.append(
				"<div class='fc-agenda-divider " + headerClass + "'>" +
				"<div class='fc-agenda-divider-inner'/>" +
				"</div>"
			);
			
		}else{
		
			daySegmentContainer = $([]); // in jQuery 1.4, we can just do $()
		
		}
		
		slotScroller =
			$("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>")
				.appendTo(slotLayer);
				
		slotContainer =
			$("<div style='position:relative;width:100%;overflow:hidden'/>")
				.appendTo(slotScroller);
				
		slotSegmentContainer =
			$("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>")
				.appendTo(slotContainer);
		
		s =
			"<table class='fc-agenda-slots' style='width:100%' cellspacing='0'>" +
			"<tbody>";
		d = zeroDate();
		maxd = addMinutes(cloneDate(d), maxMinute);
		addMinutes(d, minMinute);
		slotCnt = 0;
		for (i=0; d < maxd; i++) {
			minutes = d.getMinutes();
			s +=
				"<tr class='fc-slot" + i + ' ' + (!minutes ? '' : 'fc-minor') + "'>" +
				"<th class='fc-agenda-axis " + headerClass + "'>" +
				((!slotNormal || !minutes) ? formatDate(d, opt('axisFormat')) : '&nbsp;') +
				"</th>" +
				"<td class='" + contentClass + "'>" +
				"<div style='position:relative'>&nbsp;</div>" +
				"</td>" +
				"</tr>";
			addMinutes(d, opt('slotMinutes'));
			slotCnt++;
		}
		s +=
			"</tbody>" +
			"</table>";
		slotTable = $(s).appendTo(slotContainer);
		
		slotBind(slotTable.find('td'));
	}



	/* Build Day Table
	-----------------------------------------------------------------------*/


	function buildDayTable() {
		var html = buildDayTableHTML();

		if (dayTable) {
			dayTable.remove();
		}
		dayTable = $(html).appendTo(element);

		dayHead = dayTable.find('thead');
		dayHeadCells = dayHead.find('th').slice(1, -1); // exclude gutter
		dayBody = dayTable.find('tbody');
		dayBodyCells = dayBody.find('td').slice(0, -1); // exclude gutter
		dayBodyCellInners = dayBodyCells.find('> div');
		dayBodyCellContentInners = dayBodyCells.find('.fc-day-content > div');

		dayBodyFirstCell = dayBodyCells.eq(0);
		dayBodyFirstCellStretcher = dayBodyCellInners.eq(0);
		
		markFirstLast(dayHead.add(dayHead.find('tr')));
		markFirstLast(dayBody.add(dayBody.find('tr')));

		// TODO: now that we rebuild the cells every time, we should call dayRender
	}


	function buildDayTableHTML() {
		var html =
			"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>" +
			buildDayTableHeadHTML() +
			buildDayTableBodyHTML() +
			"</table>";

		return html;
	}


	function buildDayTableHeadHTML() {
		var headerClass = tm + "-widget-header";
		var date;
		var html = '';
		var weekText;
		var col;

		html +=
			"<thead>" +
			"<tr>";

		if (showWeekNumbers) {
			date = cellToDate(0, 0);
			weekText = formatDate(date, weekNumberFormat);
			if (rtl) {
				weekText += weekNumberTitle;
			}
			else {
				weekText = weekNumberTitle + weekText;
			}
			html +=
				"<th class='fc-agenda-axis fc-week-number " + headerClass + "'>" +
				htmlEscape(weekText) +
				"</th>";
		}
		else {
			html += "<th class='fc-agenda-axis " + headerClass + "'>&nbsp;</th>";
		}

		for (col=0; col<colCnt; col++) {
			date = cellToDate(0, col);
			html +=
				"<th class='fc-" + dayIDs[date.getDay()] + " fc-col" + col + ' ' + headerClass + "'>" +
				htmlEscape(formatDate(date, colFormat)) +
				"</th>";
		}

		html +=
			"<th class='fc-agenda-gutter " + headerClass + "'>&nbsp;</th>" +
			"</tr>" +
			"</thead>";

		return html;
	}


	function buildDayTableBodyHTML() {
		var headerClass = tm + "-widget-header"; // TODO: make these when updateOptions() called
		var contentClass = tm + "-widget-content";
		var date;
		var today = clearTime(new Date());
		var col;
		var cellsHTML;
		var cellHTML;
		var classNames;
		var html = '';

		html +=
			"<tbody>" +
			"<tr>" +
			"<th class='fc-agenda-axis " + headerClass + "'>&nbsp;</th>";

		cellsHTML = '';

		for (col=0; col<colCnt; col++) {

			date = cellToDate(0, col);

			classNames = [
				'fc-col' + col,
				'fc-' + dayIDs[date.getDay()],
				contentClass
			];
			if (+date == +today) {
				classNames.push(
					tm + '-state-highlight',
					'fc-today'
				);
			}
			else if (date < today) {
				classNames.push('fc-past');
			}
			else {
				classNames.push('fc-future');
			}

			cellHTML =
				"<td class='" + classNames.join(' ') + "'>" +
				"<div>" +
				"<div class='fc-day-content'>" +
				"<div style='position:relative'>&nbsp;</div>" +
				"</div>" +
				"</div>" +
				"</td>";

			cellsHTML += cellHTML;
		}

		html += cellsHTML;
		html +=
			"<td class='fc-agenda-gutter " + contentClass + "'>&nbsp;</td>" +
			"</tr>" +
			"</tbody>";

		return html;
	}


	// TODO: data-date on the cells

	
	
	/* Dimensions
	-----------------------------------------------------------------------*/

	
	function setHeight(height) {
		if (height === undefined) {
			height = viewHeight;
		}
		viewHeight = height;
		slotTopCache = {};
	
		var headHeight = dayBody.position().top;
		var allDayHeight = slotScroller.position().top; // including divider
		var bodyHeight = Math.min( // total body height, including borders
			height - headHeight,   // when scrollbars
			slotTable.height() + allDayHeight + 1 // when no scrollbars. +1 for bottom border
		);

		dayBodyFirstCellStretcher
			.height(bodyHeight - vsides(dayBodyFirstCell));
		
		slotLayer.css('top', headHeight);
		
		slotScroller.height(bodyHeight - allDayHeight - 1);
		
		// the stylesheet guarantees that the first row has no border.
		// this allows .height() to work well cross-browser.
		slotHeight = slotTable.find('tr:first').height() + 1; // +1 for bottom border

		snapRatio = opt('slotMinutes') / snapMinutes;
		snapHeight = slotHeight / snapRatio;
	}
	
	
	function setWidth(width) {
		viewWidth = width;
		colPositions.clear();
		colContentPositions.clear();

		var axisFirstCells = dayHead.find('th:first');
		if (allDayTable) {
			axisFirstCells = axisFirstCells.add(allDayTable.find('th:first'));
		}
		axisFirstCells = axisFirstCells.add(slotTable.find('th:first'));
		
		axisWidth = 0;
		setOuterWidth(
			axisFirstCells
				.width('')
				.each(function(i, _cell) {
					axisWidth = Math.max(axisWidth, $(_cell).outerWidth());
				}),
			axisWidth
		);
		
		var gutterCells = dayTable.find('.fc-agenda-gutter');
		if (allDayTable) {
			gutterCells = gutterCells.add(allDayTable.find('th.fc-agenda-gutter'));
		}

		var slotTableWidth = slotScroller[0].clientWidth; // needs to be done after axisWidth (for IE7)
		
		gutterWidth = slotScroller.width() - slotTableWidth;
		if (gutterWidth) {
			setOuterWidth(gutterCells, gutterWidth);
			gutterCells
				.show()
				.prev()
				.removeClass('fc-last');
		}else{
			gutterCells
				.hide()
				.prev()
				.addClass('fc-last');
		}
		
		colWidth = Math.floor((slotTableWidth - axisWidth) / colCnt);
		setOuterWidth(dayHeadCells.slice(0, -1), colWidth);
	}
	


	/* Scrolling
	-----------------------------------------------------------------------*/


	function resetScroll() {
		var d0 = zeroDate();
		var scrollDate = cloneDate(d0);
		scrollDate.setHours(opt('firstHour'));
		var top = timePosition(d0, scrollDate) + 1; // +1 for the border
		function scroll() {
			slotScroller.scrollTop(top);
		}
		scroll();
		setTimeout(scroll, 0); // overrides any previous scroll state made by the browser
	}


	function afterRender() { // after the view has been freshly rendered and sized
		resetScroll();
	}
	
	
	
	/* Slot/Day clicking and binding
	-----------------------------------------------------------------------*/
	

	function dayBind(cells) {
		cells.click(slotClick)
			.mousedown(daySelectionMousedown);
	}


	function slotBind(cells) {
		cells.click(slotClick)
			.mousedown(slotSelectionMousedown);
	}
	
	
	function slotClick(ev) {
		if (!opt('selectable')) { // if selectable, SelectionManager will worry about dayClick
			var col = Math.min(colCnt-1, Math.floor((ev.pageX - dayTable.offset().left - axisWidth) / colWidth));
			var date = cellToDate(0, col);
			var rowMatch = this.parentNode.className.match(/fc-slot(\d+)/); // TODO: maybe use data
			if (rowMatch) {
				var mins = parseInt(rowMatch[1]) * opt('slotMinutes');
				var hours = Math.floor(mins/60);
				date.setHours(hours);
				date.setMinutes(mins%60 + minMinute);
				trigger('dayClick', dayBodyCells[col], date, false, ev);
			}else{
				trigger('dayClick', dayBodyCells[col], date, true, ev);
			}
		}
	}
	
	
	
	/* Semi-transparent Overlay Helpers
	-----------------------------------------------------*/
	// TODO: should be consolidated with BasicView's methods


	function renderDayOverlay(overlayStart, overlayEnd, refreshCoordinateGrid) { // overlayEnd is exclusive

		if (refreshCoordinateGrid) {
			coordinateGrid.build();
		}

		var segments = rangeToSegments(overlayStart, overlayEnd);

		for (var i=0; i<segments.length; i++) {
			var segment = segments[i];
			dayBind(
				renderCellOverlay(
					segment.row,
					segment.leftCol,
					segment.row,
					segment.rightCol
				)
			);
		}
	}
	
	
	function renderCellOverlay(row0, col0, row1, col1) { // only for all-day?
		var rect = coordinateGrid.rect(row0, col0, row1, col1, slotLayer);
		return renderOverlay(rect, slotLayer);
	}
	

	function renderSlotOverlay(overlayStart, overlayEnd) {
		for (var i=0; i<colCnt; i++) {
			var dayStart = cellToDate(0, i);
			var dayEnd = addDays(cloneDate(dayStart), 1);
			var stretchStart = new Date(Math.max(dayStart, overlayStart));
			var stretchEnd = new Date(Math.min(dayEnd, overlayEnd));
			if (stretchStart < stretchEnd) {
				var rect = coordinateGrid.rect(0, i, 0, i, slotContainer); // only use it for horizontal coords
				var top = timePosition(dayStart, stretchStart);
				var bottom = timePosition(dayStart, stretchEnd);
				rect.top = top;
				rect.height = bottom - top;
				slotBind(
					renderOverlay(rect, slotContainer)
				);
			}
		}
	}
	
	
	
	/* Coordinate Utilities
	-----------------------------------------------------------------------------*/
	
	
	coordinateGrid = new CoordinateGrid(function(rows, cols) {
		var e, n, p;
		dayHeadCells.each(function(i, _e) {
			e = $(_e);
			n = e.offset().left;
			if (i) {
				p[1] = n;
			}
			p = [n];
			cols[i] = p;
		});
		p[1] = n + e.outerWidth();
		if (opt('allDaySlot')) {
			e = allDayRow;
			n = e.offset().top;
			rows[0] = [n, n+e.outerHeight()];
		}
		var slotTableTop = slotContainer.offset().top;
		var slotScrollerTop = slotScroller.offset().top;
		var slotScrollerBottom = slotScrollerTop + slotScroller.outerHeight();
		function constrain(n) {
			return Math.max(slotScrollerTop, Math.min(slotScrollerBottom, n));
		}
		for (var i=0; i<slotCnt*snapRatio; i++) { // adapt slot count to increased/decreased selection slot count
			rows.push([
				constrain(slotTableTop + snapHeight*i),
				constrain(slotTableTop + snapHeight*(i+1))
			]);
		}
	});
	
	
	hoverListener = new HoverListener(coordinateGrid);
	
	colPositions = new HorizontalPositionCache(function(col) {
		return dayBodyCellInners.eq(col);
	});
	
	colContentPositions = new HorizontalPositionCache(function(col) {
		return dayBodyCellContentInners.eq(col);
	});
	
	
	function colLeft(col) {
		return colPositions.left(col);
	}


	function colContentLeft(col) {
		return colContentPositions.left(col);
	}


	function colRight(col) {
		return colPositions.right(col);
	}
	
	
	function colContentRight(col) {
		return colContentPositions.right(col);
	}


	function getIsCellAllDay(cell) {
		return opt('allDaySlot') && !cell.row;
	}


	function realCellToDate(cell) { // ugh "real" ... but blame it on our abuse of the "cell" system
		var d = cellToDate(0, cell.col);
		var slotIndex = cell.row;
		if (opt('allDaySlot')) {
			slotIndex--;
		}
		if (slotIndex >= 0) {
			addMinutes(d, minMinute + slotIndex * snapMinutes);
		}
		return d;
	}
	
	
	// get the Y coordinate of the given time on the given day (both Date objects)
	function timePosition(day, time) { // both date objects. day holds 00:00 of current day
		day = cloneDate(day, true);
		if (time < addMinutes(cloneDate(day), minMinute)) {
			return 0;
		}
		if (time >= addMinutes(cloneDate(day), maxMinute)) {
			return slotTable.height();
		}
		var slotMinutes = opt('slotMinutes'),
			minutes = time.getHours()*60 + time.getMinutes() - minMinute,
			slotI = Math.floor(minutes / slotMinutes),
			slotTop = slotTopCache[slotI];
		if (slotTop === undefined) {
			slotTop = slotTopCache[slotI] =
				slotTable.find('tr').eq(slotI).find('td div')[0].offsetTop;
				// .eq() is faster than ":eq()" selector
				// [0].offsetTop is faster than .position().top (do we really need this optimization?)
				// a better optimization would be to cache all these divs
		}
		return Math.max(0, Math.round(
			slotTop - 1 + slotHeight * ((minutes % slotMinutes) / slotMinutes)
		));
	}
	
	
	function getAllDayRow(index) {
		return allDayRow;
	}
	
	
	function defaultEventEnd(event) {
		var start = cloneDate(event.start);
		if (event.allDay) {
			return start;
		}
		return addMinutes(start, opt('defaultEventMinutes'));
	}
	
	
	
	/* Selection
	---------------------------------------------------------------------------------*/
	
	
	function defaultSelectionEnd(startDate, allDay) {
		if (allDay) {
			return cloneDate(startDate);
		}
		return addMinutes(cloneDate(startDate), opt('slotMinutes'));
	}
	
	
	function renderSelection(startDate, endDate, allDay) { // only for all-day
		if (allDay) {
			if (opt('allDaySlot')) {
				renderDayOverlay(startDate, addDays(cloneDate(endDate), 1), true);
			}
		}else{
			renderSlotSelection(startDate, endDate);
		}
	}
	
	
	function renderSlotSelection(startDate, endDate) {
		var helperOption = opt('selectHelper');
		coordinateGrid.build();
		if (helperOption) {
			var col = dateToCell(startDate).col;
			if (col >= 0 && col < colCnt) { // only works when times are on same day
				var rect = coordinateGrid.rect(0, col, 0, col, slotContainer); // only for horizontal coords
				var top = timePosition(startDate, startDate);
				var bottom = timePosition(startDate, endDate);
				if (bottom > top) { // protect against selections that are entirely before or after visible range
					rect.top = top;
					rect.height = bottom - top;
					rect.left += 2;
					rect.width -= 5;
					if ($.isFunction(helperOption)) {
						var helperRes = helperOption(startDate, endDate);
						if (helperRes) {
							rect.position = 'absolute';
							selectionHelper = $(helperRes)
								.css(rect)
								.appendTo(slotContainer);
						}
					}else{
						rect.isStart = true; // conside rect a "seg" now
						rect.isEnd = true;   //
						selectionHelper = $(slotSegHtml(
							{
								title: '',
								start: startDate,
								end: endDate,
								className: ['fc-select-helper'],
								editable: false
							},
							rect
						));
						selectionHelper.css('opacity', opt('dragOpacity'));
					}
					if (selectionHelper) {
						slotBind(selectionHelper);
						slotContainer.append(selectionHelper);
						setOuterWidth(selectionHelper, rect.width, true); // needs to be after appended
						setOuterHeight(selectionHelper, rect.height, true);
					}
				}
			}
		}else{
			renderSlotOverlay(startDate, endDate);
		}
	}
	
	
	function clearSelection() {
		clearOverlays();
		if (selectionHelper) {
			selectionHelper.remove();
			selectionHelper = null;
		}
	}
	
	
	function slotSelectionMousedown(ev) {
		if (ev.which == 1 && opt('selectable')) { // ev.which==1 means left mouse button
			unselect(ev);
			var dates;
			hoverListener.start(function(cell, origCell) {
				clearSelection();
				if (cell && cell.col == origCell.col && !getIsCellAllDay(cell)) {
					var d1 = realCellToDate(origCell);
					var d2 = realCellToDate(cell);
					dates = [
						d1,
						addMinutes(cloneDate(d1), snapMinutes), // calculate minutes depending on selection slot minutes 
						d2,
						addMinutes(cloneDate(d2), snapMinutes)
					].sort(dateCompare);
					renderSlotSelection(dates[0], dates[3]);
				}else{
					dates = null;
				}
			}, ev);
			$(document).one('mouseup', function(ev) {
				hoverListener.stop();
				if (dates) {
					if (+dates[0] == +dates[1]) {
						reportDayClick(dates[0], false, ev);
					}
					reportSelection(dates[0], dates[3], false, ev);
				}
			});
		}
	}


	function reportDayClick(date, allDay, ev) {
		trigger('dayClick', dayBodyCells[dateToCell(date).col], date, allDay, ev);
	}
	
	
	
	/* External Dragging
	--------------------------------------------------------------------------------*/
	
	
	function dragStart(_dragElement, ev, ui) {
		hoverListener.start(function(cell) {
			clearOverlays();
			if (cell) {
				if (getIsCellAllDay(cell)) {
					renderCellOverlay(cell.row, cell.col, cell.row, cell.col);
				}else{
					var d1 = realCellToDate(cell);
					var d2 = addMinutes(cloneDate(d1), opt('defaultEventMinutes'));
					renderSlotOverlay(d1, d2);
				}
			}
		}, ev);
	}
	
	
	function dragStop(_dragElement, ev, ui) {
		var cell = hoverListener.stop();
		clearOverlays();
		if (cell) {
			trigger('drop', _dragElement, realCellToDate(cell), getIsCellAllDay(cell), ev, ui);
		}
	}
	

}

;;

function AgendaEventRenderer() {
	var t = this;
	
	
	// exports
	t.renderEvents = renderEvents;
	t.clearEvents = clearEvents;
	t.slotSegHtml = slotSegHtml;
	
	
	// imports
	DayEventRenderer.call(t);
	var opt = t.opt;
	var trigger = t.trigger;
	var isEventDraggable = t.isEventDraggable;
	var isEventResizable = t.isEventResizable;
	var eventEnd = t.eventEnd;
	var eventElementHandlers = t.eventElementHandlers;
	var setHeight = t.setHeight;
	var getDaySegmentContainer = t.getDaySegmentContainer;
	var getSlotSegmentContainer = t.getSlotSegmentContainer;
	var getHoverListener = t.getHoverListener;
	var getMaxMinute = t.getMaxMinute;
	var getMinMinute = t.getMinMinute;
	var timePosition = t.timePosition;
	var getIsCellAllDay = t.getIsCellAllDay;
	var colContentLeft = t.colContentLeft;
	var colContentRight = t.colContentRight;
	var cellToDate = t.cellToDate;
	var getColCnt = t.getColCnt;
	var getColWidth = t.getColWidth;
	var getSnapHeight = t.getSnapHeight;
	var getSnapMinutes = t.getSnapMinutes;
	var getSlotContainer = t.getSlotContainer;
	var reportEventElement = t.reportEventElement;
	var showEvents = t.showEvents;
	var hideEvents = t.hideEvents;
	var eventDrop = t.eventDrop;
	var eventResize = t.eventResize;
	var renderDayOverlay = t.renderDayOverlay;
	var clearOverlays = t.clearOverlays;
	var renderDayEvents = t.renderDayEvents;
	var calendar = t.calendar;
	var formatDate = calendar.formatDate;
	var formatDates = calendar.formatDates;


	// overrides
	t.draggableDayEvent = draggableDayEvent;

	
	
	/* Rendering
	----------------------------------------------------------------------------*/
	

	function renderEvents(events, modifiedEventId) {
		var i, len=events.length,
			dayEvents=[],
			slotEvents=[];
		for (i=0; i<len; i++) {
			if (events[i].allDay) {
				dayEvents.push(events[i]);
			}else{
				slotEvents.push(events[i]);
			}
		}

		if (opt('allDaySlot')) {
			renderDayEvents(dayEvents, modifiedEventId);
			setHeight(); // no params means set to viewHeight
		}

		renderSlotSegs(compileSlotSegs(slotEvents), modifiedEventId);
	}
	
	
	function clearEvents() {
		getDaySegmentContainer().empty();
		getSlotSegmentContainer().empty();
	}

	
	function compileSlotSegs(events) {
		var colCnt = getColCnt(),
			minMinute = getMinMinute(),
			maxMinute = getMaxMinute(),
			d,
			visEventEnds = $.map(events, slotEventEnd),
			i,
			j, seg,
			colSegs,
			segs = [];

		for (i=0; i<colCnt; i++) {

			d = cellToDate(0, i);
			addMinutes(d, minMinute);

			colSegs = sliceSegs(
				events,
				visEventEnds,
				d,
				addMinutes(cloneDate(d), maxMinute-minMinute)
			);

			colSegs = placeSlotSegs(colSegs); // returns a new order

			for (j=0; j<colSegs.length; j++) {
				seg = colSegs[j];
				seg.col = i;
				segs.push(seg);
			}
		}

		return segs;
	}


	function sliceSegs(events, visEventEnds, start, end) {
		var segs = [],
			i, len=events.length, event,
			eventStart, eventEnd,
			segStart, segEnd,
			isStart, isEnd;
		for (i=0; i<len; i++) {
			event = events[i];
			eventStart = event.start;
			eventEnd = visEventEnds[i];
			if (eventEnd > start && eventStart < end) {
				if (eventStart < start) {
					segStart = cloneDate(start);
					isStart = false;
				}else{
					segStart = eventStart;
					isStart = true;
				}
				if (eventEnd > end) {
					segEnd = cloneDate(end);
					isEnd = false;
				}else{
					segEnd = eventEnd;
					isEnd = true;
				}
				segs.push({
					event: event,
					start: segStart,
					end: segEnd,
					isStart: isStart,
					isEnd: isEnd
				});
			}
		}
		return segs.sort(compareSlotSegs);
	}


	function slotEventEnd(event) {
		if (event.end) {
			return cloneDate(event.end);
		}else{
			return addMinutes(cloneDate(event.start), opt('defaultEventMinutes'));
		}
	}
	
	
	// renders events in the 'time slots' at the bottom
	// TODO: when we refactor this, when user returns `false` eventRender, don't have empty space
	// TODO: refactor will include using pixels to detect collisions instead of dates (handy for seg cmp)
	
	function renderSlotSegs(segs, modifiedEventId) {
	
		var i, segCnt=segs.length, seg,
			event,
			top,
			bottom,
			columnLeft,
			columnRight,
			columnWidth,
			width,
			left,
			right,
			html = '',
			eventElements,
			eventElement,
			triggerRes,
			titleElement,
			height,
			slotSegmentContainer = getSlotSegmentContainer(),
			isRTL = opt('isRTL');
			
		// calculate position/dimensions, create html
		for (i=0; i<segCnt; i++) {
			seg = segs[i];
			event = seg.event;
			top = timePosition(seg.start, seg.start);
			bottom = timePosition(seg.start, seg.end);
			columnLeft = colContentLeft(seg.col);
			columnRight = colContentRight(seg.col);
			columnWidth = columnRight - columnLeft;

			// shave off space on right near scrollbars (2.5%)
			// TODO: move this to CSS somehow
			columnRight -= columnWidth * .025;
			columnWidth = columnRight - columnLeft;

			width = columnWidth * (seg.forwardCoord - seg.backwardCoord);

			if (opt('slotEventOverlap')) {
				// double the width while making sure resize handle is visible
				// (assumed to be 20px wide)
				width = Math.max(
					(width - (20/2)) * 2,
					width // narrow columns will want to make the segment smaller than
						// the natural width. don't allow it
				);
			}

			if (isRTL) {
				right = columnRight - seg.backwardCoord * columnWidth;
				left = right - width;
			}
			else {
				left = columnLeft + seg.backwardCoord * columnWidth;
				right = left + width;
			}

			// make sure horizontal coordinates are in bounds
			left = Math.max(left, columnLeft);
			right = Math.min(right, columnRight);
			width = right - left;

			seg.top = top;
			seg.left = left;
			seg.outerWidth = width;
			seg.outerHeight = bottom - top;
			html += slotSegHtml(event, seg);
		}

		slotSegmentContainer[0].innerHTML = html; // faster than html()
		eventElements = slotSegmentContainer.children();
		
		// retrieve elements, run through eventRender callback, bind event handlers
		for (i=0; i<segCnt; i++) {
			seg = segs[i];
			event = seg.event;
			eventElement = $(eventElements[i]); // faster than eq()
			triggerRes = trigger('eventRender', event, event, eventElement);
			if (triggerRes === false) {
				eventElement.remove();
			}else{
				if (triggerRes && triggerRes !== true) {
					eventElement.remove();
					eventElement = $(triggerRes)
						.css({
							position: 'absolute',
							top: seg.top,
							left: seg.left
						})
						.appendTo(slotSegmentContainer);
				}
				seg.element = eventElement;
				if (event._id === modifiedEventId) {
					bindSlotSeg(event, eventElement, seg);
				}else{
					eventElement[0]._fci = i; // for lazySegBind
				}
				reportEventElement(event, eventElement);
			}
		}
		
		lazySegBind(slotSegmentContainer, segs, bindSlotSeg);
		
		// record event sides and title positions
		for (i=0; i<segCnt; i++) {
			seg = segs[i];
			if (eventElement = seg.element) {
				seg.vsides = vsides(eventElement, true);
				seg.hsides = hsides(eventElement, true);
				titleElement = eventElement.find('.fc-event-title');
				if (titleElement.length) {
					seg.contentTop = titleElement[0].offsetTop;
				}
			}
		}
		
		// set all positions/dimensions at once
		for (i=0; i<segCnt; i++) {
			seg = segs[i];
			if (eventElement = seg.element) {
				eventElement[0].style.width = Math.max(0, seg.outerWidth - seg.hsides) + 'px';
				height = Math.max(0, seg.outerHeight - seg.vsides);
				eventElement[0].style.height = height + 'px';
				event = seg.event;
				if (seg.contentTop !== undefined && height - seg.contentTop < 10) {
					// not enough room for title, put it in the time (TODO: maybe make both display:inline instead)
					eventElement.find('div.fc-event-time')
						.text(formatDate(event.start, opt('timeFormat')) + ' - ' + event.title);
					eventElement.find('div.fc-event-title')
						.remove();
				}
				trigger('eventAfterRender', event, event, eventElement);
			}
		}
					
	}
	
	
	function slotSegHtml(event, seg) {
		var html = "<";
		var url = event.url;
		var skinCss = getSkinCss(event, opt);
		var classes = ['fc-event', 'fc-event-vert'];
		if (isEventDraggable(event)) {
			classes.push('fc-event-draggable');
		}
		if (seg.isStart) {
			classes.push('fc-event-start');
		}
		if (seg.isEnd) {
			classes.push('fc-event-end');
		}
		classes = classes.concat(event.className);
		if (event.source) {
			classes = classes.concat(event.source.className || []);
		}
		if (url) {
			html += "a href='" + htmlEscape(event.url) + "'";
		}else{
			html += "div";
		}
		html +=
			" class='" + classes.join(' ') + "'" +
			" style=" +
				"'" +
				"position:absolute;" +
				"top:" + seg.top + "px;" +
				"left:" + seg.left + "px;" +
				skinCss +
				"'" +
			">" +
			"<div class='fc-event-inner'>" +
			"<div class='fc-event-time'>" +
			htmlEscape(formatDates(event.start, event.end, opt('timeFormat'))) +
			"</div>" +
			"<div class='fc-event-title'>" +
			htmlEscape(event.title || '') +
			"</div>" +
			"</div>" +
			"<div class='fc-event-bg'></div>";
		if (seg.isEnd && isEventResizable(event)) {
			html +=
				"<div class='ui-resizable-handle ui-resizable-s'>=</div>";
		}
		html +=
			"</" + (url ? "a" : "div") + ">";
		return html;
	}
	
	
	function bindSlotSeg(event, eventElement, seg) {
		var timeElement = eventElement.find('div.fc-event-time');
		if (isEventDraggable(event)) {
			draggableSlotEvent(event, eventElement, timeElement);
		}
		if (seg.isEnd && isEventResizable(event)) {
			resizableSlotEvent(event, eventElement, timeElement);
		}
		eventElementHandlers(event, eventElement);
	}
	
	
	
	/* Dragging
	-----------------------------------------------------------------------------------*/
	
	
	// when event starts out FULL-DAY
	// overrides DayEventRenderer's version because it needs to account for dragging elements
	// to and from the slot area.
	
	function draggableDayEvent(event, eventElement, seg) {
		var isStart = seg.isStart;
		var origWidth;
		var revert;
		var allDay = true;
		var dayDelta;
		var hoverListener = getHoverListener();
		var colWidth = getColWidth();
		var snapHeight = getSnapHeight();
		var snapMinutes = getSnapMinutes();
		var minMinute = getMinMinute();
		eventElement.draggable({
			opacity: opt('dragOpacity', 'month'), // use whatever the month view was using
			revertDuration: opt('dragRevertDuration'),
			start: function(ev, ui) {
				trigger('eventDragStart', eventElement, event, ev, ui);
				hideEvents(event, eventElement);
				origWidth = eventElement.width();
				hoverListener.start(function(cell, origCell) {
					clearOverlays();
					if (cell) {
						revert = false;
						var origDate = cellToDate(0, origCell.col);
						var date = cellToDate(0, cell.col);
						dayDelta = dayDiff(date, origDate);
						if (!cell.row) {
							// on full-days
							renderDayOverlay(
								addDays(cloneDate(event.start), dayDelta),
								addDays(exclEndDay(event), dayDelta)
							);
							resetElement();
						}else{
							// mouse is over bottom slots
							if (isStart) {
								if (allDay) {
									// convert event to temporary slot-event
									eventElement.width(colWidth - 10); // don't use entire width
									setOuterHeight(
										eventElement,
										snapHeight * Math.round(
											(event.end ? ((event.end - event.start) / MINUTE_MS) : opt('defaultEventMinutes')) /
												snapMinutes
										)
									);
									eventElement.draggable('option', 'grid', [colWidth, 1]);
									allDay = false;
								}
							}else{
								revert = true;
							}
						}
						revert = revert || (allDay && !dayDelta);
					}else{
						resetElement();
						revert = true;
					}
					eventElement.draggable('option', 'revert', revert);
				}, ev, 'drag');
			},
			stop: function(ev, ui) {
				hoverListener.stop();
				clearOverlays();
				trigger('eventDragStop', eventElement, event, ev, ui);
				if (revert) {
					// hasn't moved or is out of bounds (draggable has already reverted)
					resetElement();
					eventElement.css('filter', ''); // clear IE opacity side-effects
					showEvents(event, eventElement);
				}else{
					// changed!
					var minuteDelta = 0;
					if (!allDay) {
						minuteDelta = Math.round((eventElement.offset().top - getSlotContainer().offset().top) / snapHeight)
							* snapMinutes
							+ minMinute
							- (event.start.getHours() * 60 + event.start.getMinutes());
					}
					eventDrop(this, event, dayDelta, minuteDelta, allDay, ev, ui);
				}
			}
		});
		function resetElement() {
			if (!allDay) {
				eventElement
					.width(origWidth)
					.height('')
					.draggable('option', 'grid', null);
				allDay = true;
			}
		}
	}
	
	
	// when event starts out IN TIMESLOTS
	
	function draggableSlotEvent(event, eventElement, timeElement) {
		var coordinateGrid = t.getCoordinateGrid();
		var colCnt = getColCnt();
		var colWidth = getColWidth();
		var snapHeight = getSnapHeight();
		var snapMinutes = getSnapMinutes();

		// states
		var origPosition; // original position of the element, not the mouse
		var origCell;
		var isInBounds, prevIsInBounds;
		var isAllDay, prevIsAllDay;
		var colDelta, prevColDelta;
		var dayDelta; // derived from colDelta
		var minuteDelta, prevMinuteDelta;

		eventElement.draggable({
			scroll: false,
			grid: [ colWidth, snapHeight ],
			axis: colCnt==1 ? 'y' : false,
			opacity: opt('dragOpacity'),
			revertDuration: opt('dragRevertDuration'),
			start: function(ev, ui) {

				trigger('eventDragStart', eventElement, event, ev, ui);
				hideEvents(event, eventElement);

				coordinateGrid.build();

				// initialize states
				origPosition = eventElement.position();
				origCell = coordinateGrid.cell(ev.pageX, ev.pageY);
				isInBounds = prevIsInBounds = true;
				isAllDay = prevIsAllDay = getIsCellAllDay(origCell);
				colDelta = prevColDelta = 0;
				dayDelta = 0;
				minuteDelta = prevMinuteDelta = 0;

			},
			drag: function(ev, ui) {

				// NOTE: this `cell` value is only useful for determining in-bounds and all-day.
				// Bad for anything else due to the discrepancy between the mouse position and the
				// element position while snapping. (problem revealed in PR #55)
				//
				// PS- the problem exists for draggableDayEvent() when dragging an all-day event to a slot event.
				// We should overhaul the dragging system and stop relying on jQuery UI.
				var cell = coordinateGrid.cell(ev.pageX, ev.pageY);

				// update states
				isInBounds = !!cell;
				if (isInBounds) {
					isAllDay = getIsCellAllDay(cell);

					// calculate column delta
					colDelta = Math.round((ui.position.left - origPosition.left) / colWidth);
					if (colDelta != prevColDelta) {
						// calculate the day delta based off of the original clicked column and the column delta
						var origDate = cellToDate(0, origCell.col);
						var col = origCell.col + colDelta;
						col = Math.max(0, col);
						col = Math.min(colCnt-1, col);
						var date = cellToDate(0, col);
						dayDelta = dayDiff(date, origDate);
					}

					// calculate minute delta (only if over slots)
					if (!isAllDay) {
						minuteDelta = Math.round((ui.position.top - origPosition.top) / snapHeight) * snapMinutes;
					}
				}

				// any state changes?
				if (
					isInBounds != prevIsInBounds ||
					isAllDay != prevIsAllDay ||
					colDelta != prevColDelta ||
					minuteDelta != prevMinuteDelta
				) {

					updateUI();

					// update previous states for next time
					prevIsInBounds = isInBounds;
					prevIsAllDay = isAllDay;
					prevColDelta = colDelta;
					prevMinuteDelta = minuteDelta;
				}

				// if out-of-bounds, revert when done, and vice versa.
				eventElement.draggable('option', 'revert', !isInBounds);

			},
			stop: function(ev, ui) {

				clearOverlays();
				trigger('eventDragStop', eventElement, event, ev, ui);

				if (isInBounds && (isAllDay || dayDelta || minuteDelta)) { // changed!
					eventDrop(this, event, dayDelta, isAllDay ? 0 : minuteDelta, isAllDay, ev, ui);
				}
				else { // either no change or out-of-bounds (draggable has already reverted)

					// reset states for next time, and for updateUI()
					isInBounds = true;
					isAllDay = false;
					colDelta = 0;
					dayDelta = 0;
					minuteDelta = 0;

					updateUI();
					eventElement.css('filter', ''); // clear IE opacity side-effects

					// sometimes fast drags make event revert to wrong position, so reset.
					// also, if we dragged the element out of the area because of snapping,
					// but the *mouse* is still in bounds, we need to reset the position.
					eventElement.css(origPosition);

					showEvents(event, eventElement);
				}
			}
		});

		function updateUI() {
			clearOverlays();
			if (isInBounds) {
				if (isAllDay) {
					timeElement.hide();
					eventElement.draggable('option', 'grid', null); // disable grid snapping
					renderDayOverlay(
						addDays(cloneDate(event.start), dayDelta),
						addDays(exclEndDay(event), dayDelta)
					);
				}
				else {
					updateTimeText(minuteDelta);
					timeElement.css('display', ''); // show() was causing display=inline
					eventElement.draggable('option', 'grid', [colWidth, snapHeight]); // re-enable grid snapping
				}
			}
		}

		function updateTimeText(minuteDelta) {
			var newStart = addMinutes(cloneDate(event.start), minuteDelta);
			var newEnd;
			if (event.end) {
				newEnd = addMinutes(cloneDate(event.end), minuteDelta);
			}
			timeElement.text(formatDates(newStart, newEnd, opt('timeFormat')));
		}

	}
	
	
	
	/* Resizing
	--------------------------------------------------------------------------------------*/
	
	
	function resizableSlotEvent(event, eventElement, timeElement) {
		var snapDelta, prevSnapDelta;
		var snapHeight = getSnapHeight();
		var snapMinutes = getSnapMinutes();
		eventElement.resizable({
			handles: {
				s: '.ui-resizable-handle'
			},
			grid: snapHeight,
			start: function(ev, ui) {
				snapDelta = prevSnapDelta = 0;
				hideEvents(event, eventElement);
				trigger('eventResizeStart', this, event, ev, ui);
			},
			resize: function(ev, ui) {
				// don't rely on ui.size.height, doesn't take grid into account
				snapDelta = Math.round((Math.max(snapHeight, eventElement.height()) - ui.originalSize.height) / snapHeight);
				if (snapDelta != prevSnapDelta) {
					timeElement.text(
						formatDates(
							event.start,
							(!snapDelta && !event.end) ? null : // no change, so don't display time range
								addMinutes(eventEnd(event), snapMinutes*snapDelta),
							opt('timeFormat')
						)
					);
					prevSnapDelta = snapDelta;
				}
			},
			stop: function(ev, ui) {
				trigger('eventResizeStop', this, event, ev, ui);
				if (snapDelta) {
					eventResize(this, event, 0, snapMinutes*snapDelta, ev, ui);
				}else{
					showEvents(event, eventElement);
					// BUG: if event was really short, need to put title back in span
				}
			}
		});
	}
	

}



/* Agenda Event Segment Utilities
-----------------------------------------------------------------------------*/


// Sets the seg.backwardCoord and seg.forwardCoord on each segment and returns a new
// list in the order they should be placed into the DOM (an implicit z-index).
function placeSlotSegs(segs) {
	var levels = buildSlotSegLevels(segs);
	var level0 = levels[0];
	var i;

	computeForwardSlotSegs(levels);

	if (level0) {

		for (i=0; i<level0.length; i++) {
			computeSlotSegPressures(level0[i]);
		}

		for (i=0; i<level0.length; i++) {
			computeSlotSegCoords(level0[i], 0, 0);
		}
	}

	return flattenSlotSegLevels(levels);
}


// Builds an array of segments "levels". The first level will be the leftmost tier of segments
// if the calendar is left-to-right, or the rightmost if the calendar is right-to-left.
function buildSlotSegLevels(segs) {
	var levels = [];
	var i, seg;
	var j;

	for (i=0; i<segs.length; i++) {
		seg = segs[i];

		// go through all the levels and stop on the first level where there are no collisions
		for (j=0; j<levels.length; j++) {
			if (!computeSlotSegCollisions(seg, levels[j]).length) {
				break;
			}
		}

		(levels[j] || (levels[j] = [])).push(seg);
	}

	return levels;
}


// For every segment, figure out the other segments that are in subsequent
// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs
function computeForwardSlotSegs(levels) {
	var i, level;
	var j, seg;
	var k;

	for (i=0; i<levels.length; i++) {
		level = levels[i];

		for (j=0; j<level.length; j++) {
			seg = level[j];

			seg.forwardSegs = [];
			for (k=i+1; k<levels.length; k++) {
				computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);
			}
		}
	}
}


// Figure out which path forward (via seg.forwardSegs) results in the longest path until
// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure
function computeSlotSegPressures(seg) {
	var forwardSegs = seg.forwardSegs;
	var forwardPressure = 0;
	var i, forwardSeg;

	if (seg.forwardPressure === undefined) { // not already computed

		for (i=0; i<forwardSegs.length; i++) {
			forwardSeg = forwardSegs[i];

			// figure out the child's maximum forward path
			computeSlotSegPressures(forwardSeg);

			// either use the existing maximum, or use the child's forward pressure
			// plus one (for the forwardSeg itself)
			forwardPressure = Math.max(
				forwardPressure,
				1 + forwardSeg.forwardPressure
			);
		}

		seg.forwardPressure = forwardPressure;
	}
}


// Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range
// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to "left" and
// seg.forwardCoord maps to "right" (via percentage). Vice-versa if the calendar is right-to-left.
//
// The segment might be part of a "series", which means consecutive segments with the same pressure
// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of
// segments behind this one in the current series, and `seriesBackwardCoord` is the starting
// coordinate of the first segment in the series.
function computeSlotSegCoords(seg, seriesBackwardPressure, seriesBackwardCoord) {
	var forwardSegs = seg.forwardSegs;
	var i;

	if (seg.forwardCoord === undefined) { // not already computed

		if (!forwardSegs.length) {

			// if there are no forward segments, this segment should butt up against the edge
			seg.forwardCoord = 1;
		}
		else {

			// sort highest pressure first
			forwardSegs.sort(compareForwardSlotSegs);

			// this segment's forwardCoord will be calculated from the backwardCoord of the
			// highest-pressure forward segment.
			computeSlotSegCoords(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);
			seg.forwardCoord = forwardSegs[0].backwardCoord;
		}

		// calculate the backwardCoord from the forwardCoord. consider the series
		seg.backwardCoord = seg.forwardCoord -
			(seg.forwardCoord - seriesBackwardCoord) / // available width for series
			(seriesBackwardPressure + 1); // # of segments in the series

		// use this segment's coordinates to computed the coordinates of the less-pressurized
		// forward segments
		for (i=0; i<forwardSegs.length; i++) {
			computeSlotSegCoords(forwardSegs[i], 0, seg.forwardCoord);
		}
	}
}


// Outputs a flat array of segments, from lowest to highest level
function flattenSlotSegLevels(levels) {
	var segs = [];
	var i, level;
	var j;

	for (i=0; i<levels.length; i++) {
		level = levels[i];

		for (j=0; j<level.length; j++) {
			segs.push(level[j]);
		}
	}

	return segs;
}


// Find all the segments in `otherSegs` that vertically collide with `seg`.
// Append into an optionally-supplied `results` array and return.
function computeSlotSegCollisions(seg, otherSegs, results) {
	results = results || [];

	for (var i=0; i<otherSegs.length; i++) {
		if (isSlotSegCollision(seg, otherSegs[i])) {
			results.push(otherSegs[i]);
		}
	}

	return results;
}


// Do these segments occupy the same vertical space?
function isSlotSegCollision(seg1, seg2) {
	return seg1.end > seg2.start && seg1.start < seg2.end;
}


// A cmp function for determining which forward segment to rely on more when computing coordinates.
function compareForwardSlotSegs(seg1, seg2) {
	// put higher-pressure first
	return seg2.forwardPressure - seg1.forwardPressure ||
		// put segments that are closer to initial edge first (and favor ones with no coords yet)
		(seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||
		// do normal sorting...
		compareSlotSegs(seg1, seg2);
}


// A cmp function for determining which segment should be closer to the initial edge
// (the left edge on a left-to-right calendar).
function compareSlotSegs(seg1, seg2) {
	return seg1.start - seg2.start || // earlier start time goes first
		(seg2.end - seg2.start) - (seg1.end - seg1.start) || // tie? longer-duration goes first
		(seg1.event.title || '').localeCompare(seg2.event.title); // tie? alphabetically by title
}


;;


function View(element, calendar, viewName) {
	var t = this;
	
	
	// exports
	t.element = element;
	t.calendar = calendar;
	t.name = viewName;
	t.opt = opt;
	t.trigger = trigger;
	t.isEventDraggable = isEventDraggable;
	t.isEventResizable = isEventResizable;
	t.setEventData = setEventData;
	t.clearEventData = clearEventData;
	t.eventEnd = eventEnd;
	t.reportEventElement = reportEventElement;
	t.triggerEventDestroy = triggerEventDestroy;
	t.eventElementHandlers = eventElementHandlers;
	t.showEvents = showEvents;
	t.hideEvents = hideEvents;
	t.eventDrop = eventDrop;
	t.eventResize = eventResize;
	// t.title
	// t.start, t.end
	// t.visStart, t.visEnd
	
	
	// imports
	var defaultEventEnd = t.defaultEventEnd;
	var normalizeEvent = calendar.normalizeEvent; // in EventManager
	var reportEventChange = calendar.reportEventChange;
	
	
	// locals
	var eventsByID = {}; // eventID mapped to array of events (there can be multiple b/c of repeating events)
	var eventElementsByID = {}; // eventID mapped to array of jQuery elements
	var eventElementCouples = []; // array of objects, { event, element } // TODO: unify with segment system
	var options = calendar.options;
	
	
	
	function opt(name, viewNameOverride) {
		var v = options[name];
		if ($.isPlainObject(v)) {
			return smartProperty(v, viewNameOverride || viewName);
		}
		return v;
	}

	
	function trigger(name, thisObj) {
		return calendar.trigger.apply(
			calendar,
			[name, thisObj || t].concat(Array.prototype.slice.call(arguments, 2), [t])
		);
	}
	


	/* Event Editable Boolean Calculations
	------------------------------------------------------------------------------*/

	
	function isEventDraggable(event) {
		var source = event.source || {};
		return firstDefined(
				event.startEditable,
				source.startEditable,
				opt('eventStartEditable'),
				event.editable,
				source.editable,
				opt('editable')
			)
			&& !opt('disableDragging'); // deprecated
	}
	
	
	function isEventResizable(event) { // but also need to make sure the seg.isEnd == true
		var source = event.source || {};
		return firstDefined(
				event.durationEditable,
				source.durationEditable,
				opt('eventDurationEditable'),
				event.editable,
				source.editable,
				opt('editable')
			)
			&& !opt('disableResizing'); // deprecated
	}
	
	
	
	/* Event Data
	------------------------------------------------------------------------------*/
	
	
	function setEventData(events) { // events are already normalized at this point
		eventsByID = {};
		var i, len=events.length, event;
		for (i=0; i<len; i++) {
			event = events[i];
			if (eventsByID[event._id]) {
				eventsByID[event._id].push(event);
			}else{
				eventsByID[event._id] = [event];
			}
		}
	}


	function clearEventData() {
		eventsByID = {};
		eventElementsByID = {};
		eventElementCouples = [];
	}
	
	
	// returns a Date object for an event's end
	function eventEnd(event) {
		return event.end ? cloneDate(event.end) : defaultEventEnd(event);
	}
	
	
	
	/* Event Elements
	------------------------------------------------------------------------------*/
	
	
	// report when view creates an element for an event
	function reportEventElement(event, element) {
		eventElementCouples.push({ event: event, element: element });
		if (eventElementsByID[event._id]) {
			eventElementsByID[event._id].push(element);
		}else{
			eventElementsByID[event._id] = [element];
		}
	}


	function triggerEventDestroy() {
		$.each(eventElementCouples, function(i, couple) {
			t.trigger('eventDestroy', couple.event, couple.event, couple.element);
		});
	}
	
	
	// attaches eventClick, eventMouseover, eventMouseout
	function eventElementHandlers(event, eventElement) {
		eventElement
			.click(function(ev) {
				if (!eventElement.hasClass('ui-draggable-dragging') &&
					!eventElement.hasClass('ui-resizable-resizing')) {
						return trigger('eventClick', this, event, ev);
					}
			})
			.hover(
				function(ev) {
					trigger('eventMouseover', this, event, ev);
				},
				function(ev) {
					trigger('eventMouseout', this, event, ev);
				}
			);
		// TODO: don't fire eventMouseover/eventMouseout *while* dragging is occuring (on subject element)
		// TODO: same for resizing
	}
	
	
	function showEvents(event, exceptElement) {
		eachEventElement(event, exceptElement, 'show');
	}
	
	
	function hideEvents(event, exceptElement) {
		eachEventElement(event, exceptElement, 'hide');
	}
	
	
	function eachEventElement(event, exceptElement, funcName) {
		// NOTE: there may be multiple events per ID (repeating events)
		// and multiple segments per event
		var elements = eventElementsByID[event._id],
			i, len = elements.length;
		for (i=0; i<len; i++) {
			if (!exceptElement || elements[i][0] != exceptElement[0]) {
				elements[i][funcName]();
			}
		}
	}
	
	
	
	/* Event Modification Reporting
	---------------------------------------------------------------------------------*/
	
	
	function eventDrop(e, event, dayDelta, minuteDelta, allDay, ev, ui) {
		var oldAllDay = event.allDay;
		var eventId = event._id;
		moveEvents(eventsByID[eventId], dayDelta, minuteDelta, allDay);
		trigger(
			'eventDrop',
			e,
			event,
			dayDelta,
			minuteDelta,
			allDay,
			function() {
				// TODO: investigate cases where this inverse technique might not work
				moveEvents(eventsByID[eventId], -dayDelta, -minuteDelta, oldAllDay);
				reportEventChange(eventId);
			},
			ev,
			ui
		);
		reportEventChange(eventId);
	}
	
	
	function eventResize(e, event, dayDelta, minuteDelta, ev, ui) {
		var eventId = event._id;
		elongateEvents(eventsByID[eventId], dayDelta, minuteDelta);
		trigger(
			'eventResize',
			e,
			event,
			dayDelta,
			minuteDelta,
			function() {
				// TODO: investigate cases where this inverse technique might not work
				elongateEvents(eventsByID[eventId], -dayDelta, -minuteDelta);
				reportEventChange(eventId);
			},
			ev,
			ui
		);
		reportEventChange(eventId);
	}
	
	
	
	/* Event Modification Math
	---------------------------------------------------------------------------------*/
	
	
	function moveEvents(events, dayDelta, minuteDelta, allDay) {
		minuteDelta = minuteDelta || 0;
		for (var e, len=events.length, i=0; i<len; i++) {
			e = events[i];
			if (allDay !== undefined) {
				e.allDay = allDay;
			}
			addMinutes(addDays(e.start, dayDelta, true), minuteDelta);
			if (e.end) {
				e.end = addMinutes(addDays(e.end, dayDelta, true), minuteDelta);
			}
			normalizeEvent(e, options);
		}
	}
	
	
	function elongateEvents(events, dayDelta, minuteDelta) {
		minuteDelta = minuteDelta || 0;
		for (var e, len=events.length, i=0; i<len; i++) {
			e = events[i];
			e.end = addMinutes(addDays(eventEnd(e), dayDelta, true), minuteDelta);
			normalizeEvent(e, options);
		}
	}



	// ====================================================================================================
	// Utilities for day "cells"
	// ====================================================================================================
	// The "basic" views are completely made up of day cells.
	// The "agenda" views have day cells at the top "all day" slot.
	// This was the obvious common place to put these utilities, but they should be abstracted out into
	// a more meaningful class (like DayEventRenderer).
	// ====================================================================================================


	// For determining how a given "cell" translates into a "date":
	//
	// 1. Convert the "cell" (row and column) into a "cell offset" (the # of the cell, cronologically from the first).
	//    Keep in mind that column indices are inverted with isRTL. This is taken into account.
	//
	// 2. Convert the "cell offset" to a "day offset" (the # of days since the first visible day in the view).
	//
	// 3. Convert the "day offset" into a "date" (a JavaScript Date object).
	//
	// The reverse transformation happens when transforming a date into a cell.


	// exports
	t.isHiddenDay = isHiddenDay;
	t.skipHiddenDays = skipHiddenDays;
	t.getCellsPerWeek = getCellsPerWeek;
	t.dateToCell = dateToCell;
	t.dateToDayOffset = dateToDayOffset;
	t.dayOffsetToCellOffset = dayOffsetToCellOffset;
	t.cellOffsetToCell = cellOffsetToCell;
	t.cellToDate = cellToDate;
	t.cellToCellOffset = cellToCellOffset;
	t.cellOffsetToDayOffset = cellOffsetToDayOffset;
	t.dayOffsetToDate = dayOffsetToDate;
	t.rangeToSegments = rangeToSegments;


	// internals
	var hiddenDays = opt('hiddenDays') || []; // array of day-of-week indices that are hidden
	var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)
	var cellsPerWeek;
	var dayToCellMap = []; // hash from dayIndex -> cellIndex, for one week
	var cellToDayMap = []; // hash from cellIndex -> dayIndex, for one week
	var isRTL = opt('isRTL');


	// initialize important internal variables
	(function() {

		if (opt('weekends') === false) {
			hiddenDays.push(0, 6); // 0=sunday, 6=saturday
		}

		// Loop through a hypothetical week and determine which
		// days-of-week are hidden. Record in both hashes (one is the reverse of the other).
		for (var dayIndex=0, cellIndex=0; dayIndex<7; dayIndex++) {
			dayToCellMap[dayIndex] = cellIndex;
			isHiddenDayHash[dayIndex] = $.inArray(dayIndex, hiddenDays) != -1;
			if (!isHiddenDayHash[dayIndex]) {
				cellToDayMap[cellIndex] = dayIndex;
				cellIndex++;
			}
		}

		cellsPerWeek = cellIndex;
		if (!cellsPerWeek) {
			throw 'invalid hiddenDays'; // all days were hidden? bad.
		}

	})();


	// Is the current day hidden?
	// `day` is a day-of-week index (0-6), or a Date object
	function isHiddenDay(day) {
		if (typeof day == 'object') {
			day = day.getDay();
		}
		return isHiddenDayHash[day];
	}


	function getCellsPerWeek() {
		return cellsPerWeek;
	}


	// Keep incrementing the current day until it is no longer a hidden day.
	// If the initial value of `date` is not a hidden day, don't do anything.
	// Pass `isExclusive` as `true` if you are dealing with an end date.
	// `inc` defaults to `1` (increment one day forward each time)
	function skipHiddenDays(date, inc, isExclusive) {
		inc = inc || 1;
		while (
			isHiddenDayHash[ ( date.getDay() + (isExclusive ? inc : 0) + 7 ) % 7 ]
		) {
			addDays(date, inc);
		}
	}


	//
	// TRANSFORMATIONS: cell -> cell offset -> day offset -> date
	//

	// cell -> date (combines all transformations)
	// Possible arguments:
	// - row, col
	// - { row:#, col: # }
	function cellToDate() {
		var cellOffset = cellToCellOffset.apply(null, arguments);
		var dayOffset = cellOffsetToDayOffset(cellOffset);
		var date = dayOffsetToDate(dayOffset);
		return date;
	}

	// cell -> cell offset
	// Possible arguments:
	// - row, col
	// - { row:#, col:# }
	function cellToCellOffset(row, col) {
		var colCnt = t.getColCnt();

		// rtl variables. wish we could pre-populate these. but where?
		var dis = isRTL ? -1 : 1;
		var dit = isRTL ? colCnt - 1 : 0;

		if (typeof row == 'object') {
			col = row.col;
			row = row.row;
		}
		var cellOffset = row * colCnt + (col * dis + dit); // column, adjusted for RTL (dis & dit)

		return cellOffset;
	}

	// cell offset -> day offset
	function cellOffsetToDayOffset(cellOffset) {
		var day0 = t.visStart.getDay(); // first date's day of week
		cellOffset += dayToCellMap[day0]; // normlize cellOffset to beginning-of-week
		return Math.floor(cellOffset / cellsPerWeek) * 7 // # of days from full weeks
			+ cellToDayMap[ // # of days from partial last week
				(cellOffset % cellsPerWeek + cellsPerWeek) % cellsPerWeek // crazy math to handle negative cellOffsets
			]
			- day0; // adjustment for beginning-of-week normalization
	}

	// day offset -> date (JavaScript Date object)
	function dayOffsetToDate(dayOffset) {
		var date = cloneDate(t.visStart);
		addDays(date, dayOffset);
		return date;
	}


	//
	// TRANSFORMATIONS: date -> day offset -> cell offset -> cell
	//

	// date -> cell (combines all transformations)
	function dateToCell(date) {
		var dayOffset = dateToDayOffset(date);
		var cellOffset = dayOffsetToCellOffset(dayOffset);
		var cell = cellOffsetToCell(cellOffset);
		return cell;
	}

	// date -> day offset
	function dateToDayOffset(date) {
		return dayDiff(date, t.visStart);
	}

	// day offset -> cell offset
	function dayOffsetToCellOffset(dayOffset) {
		var day0 = t.visStart.getDay(); // first date's day of week
		dayOffset += day0; // normalize dayOffset to beginning-of-week
		return Math.floor(dayOffset / 7) * cellsPerWeek // # of cells from full weeks
			+ dayToCellMap[ // # of cells from partial last week
				(dayOffset % 7 + 7) % 7 // crazy math to handle negative dayOffsets
			]
			- dayToCellMap[day0]; // adjustment for beginning-of-week normalization
	}

	// cell offset -> cell (object with row & col keys)
	function cellOffsetToCell(cellOffset) {
		var colCnt = t.getColCnt();

		// rtl variables. wish we could pre-populate these. but where?
		var dis = isRTL ? -1 : 1;
		var dit = isRTL ? colCnt - 1 : 0;

		var row = Math.floor(cellOffset / colCnt);
		var col = ((cellOffset % colCnt + colCnt) % colCnt) * dis + dit; // column, adjusted for RTL (dis & dit)
		return {
			row: row,
			col: col
		};
	}


	//
	// Converts a date range into an array of segment objects.
	// "Segments" are horizontal stretches of time, sliced up by row.
	// A segment object has the following properties:
	// - row
	// - cols
	// - isStart
	// - isEnd
	//
	function rangeToSegments(startDate, endDate) {
		var rowCnt = t.getRowCnt();
		var colCnt = t.getColCnt();
		var segments = []; // array of segments to return

		// day offset for given date range
		var rangeDayOffsetStart = dateToDayOffset(startDate);
		var rangeDayOffsetEnd = dateToDayOffset(endDate); // exclusive

		// first and last cell offset for the given date range
		// "last" implies inclusivity
		var rangeCellOffsetFirst = dayOffsetToCellOffset(rangeDayOffsetStart);
		var rangeCellOffsetLast = dayOffsetToCellOffset(rangeDayOffsetEnd) - 1;

		// loop through all the rows in the view
		for (var row=0; row<rowCnt; row++) {

			// first and last cell offset for the row
			var rowCellOffsetFirst = row * colCnt;
			var rowCellOffsetLast = rowCellOffsetFirst + colCnt - 1;

			// get the segment's cell offsets by constraining the range's cell offsets to the bounds of the row
			var segmentCellOffsetFirst = Math.max(rangeCellOffsetFirst, rowCellOffsetFirst);
			var segmentCellOffsetLast = Math.min(rangeCellOffsetLast, rowCellOffsetLast);

			// make sure segment's offsets are valid and in view
			if (segmentCellOffsetFirst <= segmentCellOffsetLast) {

				// translate to cells
				var segmentCellFirst = cellOffsetToCell(segmentCellOffsetFirst);
				var segmentCellLast = cellOffsetToCell(segmentCellOffsetLast);

				// view might be RTL, so order by leftmost column
				var cols = [ segmentCellFirst.col, segmentCellLast.col ].sort();

				// Determine if segment's first/last cell is the beginning/end of the date range.
				// We need to compare "day offset" because "cell offsets" are often ambiguous and
				// can translate to multiple days, and an edge case reveals itself when we the
				// range's first cell is hidden (we don't want isStart to be true).
				var isStart = cellOffsetToDayOffset(segmentCellOffsetFirst) == rangeDayOffsetStart;
				var isEnd = cellOffsetToDayOffset(segmentCellOffsetLast) + 1 == rangeDayOffsetEnd; // +1 for comparing exclusively

				segments.push({
					row: row,
					leftCol: cols[0],
					rightCol: cols[1],
					isStart: isStart,
					isEnd: isEnd
				});
			}
		}

		return segments;
	}
	

}

;;

function DayEventRenderer() {
	var t = this;

	
	// exports
	t.renderDayEvents = renderDayEvents;
	t.draggableDayEvent = draggableDayEvent; // made public so that subclasses can override
	t.resizableDayEvent = resizableDayEvent; // "
	
	
	// imports
	var opt = t.opt;
	var trigger = t.trigger;
	var isEventDraggable = t.isEventDraggable;
	var isEventResizable = t.isEventResizable;
	var eventEnd = t.eventEnd;
	var reportEventElement = t.reportEventElement;
	var eventElementHandlers = t.eventElementHandlers;
	var showEvents = t.showEvents;
	var hideEvents = t.hideEvents;
	var eventDrop = t.eventDrop;
	var eventResize = t.eventResize;
	var getRowCnt = t.getRowCnt;
	var getColCnt = t.getColCnt;
	var getColWidth = t.getColWidth;
	var allDayRow = t.allDayRow; // TODO: rename
	var colLeft = t.colLeft;
	var colRight = t.colRight;
	var colContentLeft = t.colContentLeft;
	var colContentRight = t.colContentRight;
	var dateToCell = t.dateToCell;
	var getDaySegmentContainer = t.getDaySegmentContainer;
	var formatDates = t.calendar.formatDates;
	var renderDayOverlay = t.renderDayOverlay;
	var clearOverlays = t.clearOverlays;
	var clearSelection = t.clearSelection;
	var getHoverListener = t.getHoverListener;
	var rangeToSegments = t.rangeToSegments;
	var cellToDate = t.cellToDate;
	var cellToCellOffset = t.cellToCellOffset;
	var cellOffsetToDayOffset = t.cellOffsetToDayOffset;
	var dateToDayOffset = t.dateToDayOffset;
	var dayOffsetToCellOffset = t.dayOffsetToCellOffset;


	// Render `events` onto the calendar, attach mouse event handlers, and call the `eventAfterRender` callback for each.
	// Mouse event will be lazily applied, except if the event has an ID of `modifiedEventId`.
	// Can only be called when the event container is empty (because it wipes out all innerHTML).
	function renderDayEvents(events, modifiedEventId) {

		// do the actual rendering. Receive the intermediate "segment" data structures.
		var segments = _renderDayEvents(
			events,
			false, // don't append event elements
			true // set the heights of the rows
		);

		// report the elements to the View, for general drag/resize utilities
		segmentElementEach(segments, function(segment, element) {
			reportEventElement(segment.event, element);
		});

		// attach mouse handlers
		attachHandlers(segments, modifiedEventId);

		// call `eventAfterRender` callback for each event
		segmentElementEach(segments, function(segment, element) {
			trigger('eventAfterRender', segment.event, segment.event, element);
		});
	}


	// Render an event on the calendar, but don't report them anywhere, and don't attach mouse handlers.
	// Append this event element to the event container, which might already be populated with events.
	// If an event's segment will have row equal to `adjustRow`, then explicitly set its top coordinate to `adjustTop`.
	// This hack is used to maintain continuity when user is manually resizing an event.
	// Returns an array of DOM elements for the event.
	function renderTempDayEvent(event, adjustRow, adjustTop) {

		// actually render the event. `true` for appending element to container.
		// Recieve the intermediate "segment" data structures.
		var segments = _renderDayEvents(
			[ event ],
			true, // append event elements
			false // don't set the heights of the rows
		);

		var elements = [];

		// Adjust certain elements' top coordinates
		segmentElementEach(segments, function(segment, element) {
			if (segment.row === adjustRow) {
				element.css('top', adjustTop);
			}
			elements.push(element[0]); // accumulate DOM nodes
		});

		return elements;
	}


	// Render events onto the calendar. Only responsible for the VISUAL aspect.
	// Not responsible for attaching handlers or calling callbacks.
	// Set `doAppend` to `true` for rendering elements without clearing the existing container.
	// Set `doRowHeights` to allow setting the height of each row, to compensate for vertical event overflow.
	function _renderDayEvents(events, doAppend, doRowHeights) {

		// where the DOM nodes will eventually end up
		var finalContainer = getDaySegmentContainer();

		// the container where the initial HTML will be rendered.
		// If `doAppend`==true, uses a temporary container.
		var renderContainer = doAppend ? $("<div/>") : finalContainer;

		var segments = buildSegments(events);
		var html;
		var elements;

		// calculate the desired `left` and `width` properties on each segment object
		calculateHorizontals(segments);

		// build the HTML string. relies on `left` property
		html = buildHTML(segments);

		// render the HTML. innerHTML is considerably faster than jQuery's .html()
		renderContainer[0].innerHTML = html;

		// retrieve the individual elements
		elements = renderContainer.children();

		// if we were appending, and thus using a temporary container,
		// re-attach elements to the real container.
		if (doAppend) {
			finalContainer.append(elements);
		}

		// assigns each element to `segment.event`, after filtering them through user callbacks
		resolveElements(segments, elements);

		// Calculate the left and right padding+margin for each element.
		// We need this for setting each element's desired outer width, because of the W3C box model.
		// It's important we do this in a separate pass from acually setting the width on the DOM elements
		// because alternating reading/writing dimensions causes reflow for every iteration.
		segmentElementEach(segments, function(segment, element) {
			segment.hsides = hsides(element, true); // include margins = `true`
		});

		// Set the width of each element
		segmentElementEach(segments, function(segment, element) {
			element.width(
				Math.max(0, segment.outerWidth - segment.hsides)
			);
		});

		// Grab each element's outerHeight (setVerticals uses this).
		// To get an accurate reading, it's important to have each element's width explicitly set already.
		segmentElementEach(segments, function(segment, element) {
			segment.outerHeight = element.outerHeight(true); // include margins = `true`
		});

		// Set the top coordinate on each element (requires segment.outerHeight)
		setVerticals(segments, doRowHeights);

		return segments;
	}


	// Generate an array of "segments" for all events.
	function buildSegments(events) {
		var segments = [];
		for (var i=0; i<events.length; i++) {
			var eventSegments = buildSegmentsForEvent(events[i]);
			segments.push.apply(segments, eventSegments); // append an array to an array
		}
		return segments;
	}


	// Generate an array of segments for a single event.
	// A "segment" is the same data structure that View.rangeToSegments produces,
	// with the addition of the `event` property being set to reference the original event.
	function buildSegmentsForEvent(event) {
		var startDate = event.start;
		var endDate = exclEndDay(event);
		var segments = rangeToSegments(startDate, endDate);
		for (var i=0; i<segments.length; i++) {
			segments[i].event = event;
		}
		return segments;
	}


	// Sets the `left` and `outerWidth` property of each segment.
	// These values are the desired dimensions for the eventual DOM elements.
	function calculateHorizontals(segments) {
		var isRTL = opt('isRTL');
		for (var i=0; i<segments.length; i++) {
			var segment = segments[i];

			// Determine functions used for calulating the elements left/right coordinates,
			// depending on whether the view is RTL or not.
			// NOTE:
			// colLeft/colRight returns the coordinate butting up the edge of the cell.
			// colContentLeft/colContentRight is indented a little bit from the edge.
			var leftFunc = (isRTL ? segment.isEnd : segment.isStart) ? colContentLeft : colLeft;
			var rightFunc = (isRTL ? segment.isStart : segment.isEnd) ? colContentRight : colRight;

			var left = leftFunc(segment.leftCol);
			var right = rightFunc(segment.rightCol);
			segment.left = left;
			segment.outerWidth = right - left;
		}
	}


	// Build a concatenated HTML string for an array of segments
	function buildHTML(segments) {
		var html = '';
		for (var i=0; i<segments.length; i++) {
			html += buildHTMLForSegment(segments[i]);
		}
		return html;
	}


	// Build an HTML string for a single segment.
	// Relies on the following properties:
	// - `segment.event` (from `buildSegmentsForEvent`)
	// - `segment.left` (from `calculateHorizontals`)
	function buildHTMLForSegment(segment) {
		var html = '';
		var isRTL = opt('isRTL');
		var event = segment.event;
		var url = event.url;

		// generate the list of CSS classNames
		var classNames = [ 'fc-event', 'fc-event-hori' ];
		if (isEventDraggable(event)) {
			classNames.push('fc-event-draggable');
		}
		if (segment.isStart) {
			classNames.push('fc-event-start');
		}
		if (segment.isEnd) {
			classNames.push('fc-event-end');
		}
		// use the event's configured classNames
		// guaranteed to be an array via `normalizeEvent`
		classNames = classNames.concat(event.className);
		if (event.source) {
			// use the event's source's classNames, if specified
			classNames = classNames.concat(event.source.className || []);
		}

		// generate a semicolon delimited CSS string for any of the "skin" properties
		// of the event object (`backgroundColor`, `borderColor` and such)
		var skinCss = getSkinCss(event, opt);

		if (url) {
			html += "<a href='" + htmlEscape(url) + "'";
		}else{
			html += "<div";
		}
		html +=
			" class='" + classNames.join(' ') + "'" +
			" style=" +
				"'" +
				"position:absolute;" +
				"left:" + segment.left + "px;" +
				skinCss +
				"'" +
			">" +
			"<div class='fc-event-inner'>";
		if (!event.allDay && segment.isStart) {
			html +=
				"<span class='fc-event-time'>" +
				htmlEscape(
					formatDates(event.start, event.end, opt('timeFormat'))
				) +
				"</span>";
		}
		html +=
			"<span class='fc-event-title'>" +
			htmlEscape(event.title || '') +
			"</span>" +
			"</div>";
		if (segment.isEnd && isEventResizable(event)) {
			html +=
				"<div class='ui-resizable-handle ui-resizable-" + (isRTL ? 'w' : 'e') + "'>" +
				"&nbsp;&nbsp;&nbsp;" + // makes hit area a lot better for IE6/7
				"</div>";
		}
		html += "</" + (url ? "a" : "div") + ">";

		// TODO:
		// When these elements are initially rendered, they will be briefly visibile on the screen,
		// even though their widths/heights are not set.
		// SOLUTION: initially set them as visibility:hidden ?

		return html;
	}


	// Associate each segment (an object) with an element (a jQuery object),
	// by setting each `segment.element`.
	// Run each element through the `eventRender` filter, which allows developers to
	// modify an existing element, supply a new one, or cancel rendering.
	function resolveElements(segments, elements) {
		for (var i=0; i<segments.length; i++) {
			var segment = segments[i];
			var event = segment.event;
			var element = elements.eq(i);

			// call the trigger with the original element
			var triggerRes = trigger('eventRender', event, event, element);

			if (triggerRes === false) {
				// if `false`, remove the event from the DOM and don't assign it to `segment.event`
				element.remove();
			}
			else {
				if (triggerRes && triggerRes !== true) {
					// the trigger returned a new element, but not `true` (which means keep the existing element)

					// re-assign the important CSS dimension properties that were already assigned in `buildHTMLForSegment`
					triggerRes = $(triggerRes)
						.css({
							position: 'absolute',
							left: segment.left
						});

					element.replaceWith(triggerRes);
					element = triggerRes;
				}

				segment.element = element;
			}
		}
	}



	/* Top-coordinate Methods
	-------------------------------------------------------------------------------------------------*/


	// Sets the "top" CSS property for each element.
	// If `doRowHeights` is `true`, also sets each row's first cell to an explicit height,
	// so that if elements vertically overflow, the cell expands vertically to compensate.
	function setVerticals(segments, doRowHeights) {
		var rowContentHeights = calculateVerticals(segments); // also sets segment.top
		var rowContentElements = getRowContentElements(); // returns 1 inner div per row
		var rowContentTops = [];

		// Set each row's height by setting height of first inner div
		if (doRowHeights) {
			for (var i=0; i<rowContentElements.length; i++) {
				rowContentElements[i].height(rowContentHeights[i]);
			}
		}

		// Get each row's top, relative to the views's origin.
		// Important to do this after setting each row's height.
		for (var i=0; i<rowContentElements.length; i++) {
			rowContentTops.push(
				rowContentElements[i].position().top
			);
		}

		// Set each segment element's CSS "top" property.
		// Each segment object has a "top" property, which is relative to the row's top, but...
		segmentElementEach(segments, function(segment, element) {
			element.css(
				'top',
				rowContentTops[segment.row] + segment.top // ...now, relative to views's origin
			);
		});
	}


	// Calculate the "top" coordinate for each segment, relative to the "top" of the row.
	// Also, return an array that contains the "content" height for each row
	// (the height displaced by the vertically stacked events in the row).
	// Requires segments to have their `outerHeight` property already set.
	function calculateVerticals(segments) {
		var rowCnt = getRowCnt();
		var colCnt = getColCnt();
		var rowContentHeights = []; // content height for each row
		var segmentRows = buildSegmentRows(segments); // an array of segment arrays, one for each row

		for (var rowI=0; rowI<rowCnt; rowI++) {
			var segmentRow = segmentRows[rowI];

			// an array of running total heights for each column.
			// initialize with all zeros.
			var colHeights = [];
			for (var colI=0; colI<colCnt; colI++) {
				colHeights.push(0);
			}

			// loop through every segment
			for (var segmentI=0; segmentI<segmentRow.length; segmentI++) {
				var segment = segmentRow[segmentI];

				// find the segment's top coordinate by looking at the max height
				// of all the columns the segment will be in.
				segment.top = arrayMax(
					colHeights.slice(
						segment.leftCol,
						segment.rightCol + 1 // make exclusive for slice
					)
				);

				// adjust the columns to account for the segment's height
				for (var colI=segment.leftCol; colI<=segment.rightCol; colI++) {
					colHeights[colI] = segment.top + segment.outerHeight;
				}
			}

			// the tallest column in the row should be the "content height"
			rowContentHeights.push(arrayMax(colHeights));
		}

		return rowContentHeights;
	}


	// Build an array of segment arrays, each representing the segments that will
	// be in a row of the grid, sorted by which event should be closest to the top.
	function buildSegmentRows(segments) {
		var rowCnt = getRowCnt();
		var segmentRows = [];
		var segmentI;
		var segment;
		var rowI;

		// group segments by row
		for (segmentI=0; segmentI<segments.length; segmentI++) {
			segment = segments[segmentI];
			rowI = segment.row;
			if (segment.element) { // was rendered?
				if (segmentRows[rowI]) {
					// already other segments. append to array
					segmentRows[rowI].push(segment);
				}
				else {
					// first segment in row. create new array
					segmentRows[rowI] = [ segment ];
				}
			}
		}

		// sort each row
		for (rowI=0; rowI<rowCnt; rowI++) {
			segmentRows[rowI] = sortSegmentRow(
				segmentRows[rowI] || [] // guarantee an array, even if no segments
			);
		}

		return segmentRows;
	}


	// Sort an array of segments according to which segment should appear closest to the top
	function sortSegmentRow(segments) {
		var sortedSegments = [];

		// build the subrow array
		var subrows = buildSegmentSubrows(segments);

		// flatten it
		for (var i=0; i<subrows.length; i++) {
			sortedSegments.push.apply(sortedSegments, subrows[i]); // append an array to an array
		}

		return sortedSegments;
	}


	// Take an array of segments, which are all assumed to be in the same row,
	// and sort into subrows.
	function buildSegmentSubrows(segments) {

		// Give preference to elements with certain criteria, so they have
		// a chance to be closer to the top.
		segments.sort(compareDaySegments);

		var subrows = [];
		for (var i=0; i<segments.length; i++) {
			var segment = segments[i];

			// loop through subrows, starting with the topmost, until the segment
			// doesn't collide with other segments.
			for (var j=0; j<subrows.length; j++) {
				if (!isDaySegmentCollision(segment, subrows[j])) {
					break;
				}
			}
			// `j` now holds the desired subrow index
			if (subrows[j]) {
				subrows[j].push(segment);
			}
			else {
				subrows[j] = [ segment ];
			}
		}

		return subrows;
	}


	// Return an array of jQuery objects for the placeholder content containers of each row.
	// The content containers don't actually contain anything, but their dimensions should match
	// the events that are overlaid on top.
	function getRowContentElements() {
		var i;
		var rowCnt = getRowCnt();
		var rowDivs = [];
		for (i=0; i<rowCnt; i++) {
			rowDivs[i] = allDayRow(i)
				.find('div.fc-day-content > div');
		}
		return rowDivs;
	}



	/* Mouse Handlers
	---------------------------------------------------------------------------------------------------*/
	// TODO: better documentation!


	function attachHandlers(segments, modifiedEventId) {
		var segmentContainer = getDaySegmentContainer();

		segmentElementEach(segments, function(segment, element, i) {
			var event = segment.event;
			if (event._id === modifiedEventId) {
				bindDaySeg(event, element, segment);
			}else{
				element[0]._fci = i; // for lazySegBind
			}
		});

		lazySegBind(segmentContainer, segments, bindDaySeg);
	}


	function bindDaySeg(event, eventElement, segment) {

		if (isEventDraggable(event)) {
			t.draggableDayEvent(event, eventElement, segment); // use `t` so subclasses can override
		}

		if (
			segment.isEnd && // only allow resizing on the final segment for an event
			isEventResizable(event)
		) {
			t.resizableDayEvent(event, eventElement, segment); // use `t` so subclasses can override
		}

		// attach all other handlers.
		// needs to be after, because resizableDayEvent might stopImmediatePropagation on click
		eventElementHandlers(event, eventElement);
	}

	
	function draggableDayEvent(event, eventElement) {
		var hoverListener = getHoverListener();
		var dayDelta;
		eventElement.draggable({
			delay: 50,
			opacity: opt('dragOpacity'),
			revertDuration: opt('dragRevertDuration'),
			start: function(ev, ui) {
				trigger('eventDragStart', eventElement, event, ev, ui);
				hideEvents(event, eventElement);
				hoverListener.start(function(cell, origCell, rowDelta, colDelta) {
					eventElement.draggable('option', 'revert', !cell || !rowDelta && !colDelta);
					clearOverlays();
					if (cell) {
						var origDate = cellToDate(origCell);
						var date = cellToDate(cell);
						dayDelta = dayDiff(date, origDate);
						renderDayOverlay(
							addDays(cloneDate(event.start), dayDelta),
							addDays(exclEndDay(event), dayDelta)
						);
					}else{
						dayDelta = 0;
					}
				}, ev, 'drag');
			},
			stop: function(ev, ui) {
				hoverListener.stop();
				clearOverlays();
				trigger('eventDragStop', eventElement, event, ev, ui);
				if (dayDelta) {
					eventDrop(this, event, dayDelta, 0, event.allDay, ev, ui);
				}else{
					eventElement.css('filter', ''); // clear IE opacity side-effects
					showEvents(event, eventElement);
				}
			}
		});
	}

	
	function resizableDayEvent(event, element, segment) {
		var isRTL = opt('isRTL');
		var direction = isRTL ? 'w' : 'e';
		var handle = element.find('.ui-resizable-' + direction); // TODO: stop using this class because we aren't using jqui for this
		var isResizing = false;
		
		// TODO: look into using jquery-ui mouse widget for this stuff
		disableTextSelection(element); // prevent native <a> selection for IE
		element
			.mousedown(function(ev) { // prevent native <a> selection for others
				ev.preventDefault();
			})
			.click(function(ev) {
				if (isResizing) {
					ev.preventDefault(); // prevent link from being visited (only method that worked in IE6)
					ev.stopImmediatePropagation(); // prevent fullcalendar eventClick handler from being called
					                               // (eventElementHandlers needs to be bound after resizableDayEvent)
				}
			});
		
		handle.mousedown(function(ev) {
			if (ev.which != 1) {
				return; // needs to be left mouse button
			}
			isResizing = true;
			var hoverListener = getHoverListener();
			var rowCnt = getRowCnt();
			var colCnt = getColCnt();
			var elementTop = element.css('top');
			var dayDelta;
			var helpers;
			var eventCopy = $.extend({}, event);
			var minCellOffset = dayOffsetToCellOffset( dateToDayOffset(event.start) );
			clearSelection();
			$('body')
				.css('cursor', direction + '-resize')
				.one('mouseup', mouseup);
			trigger('eventResizeStart', this, event, ev);
			hoverListener.start(function(cell, origCell) {
				if (cell) {

					var origCellOffset = cellToCellOffset(origCell);
					var cellOffset = cellToCellOffset(cell);

					// don't let resizing move earlier than start date cell
					cellOffset = Math.max(cellOffset, minCellOffset);

					dayDelta =
						cellOffsetToDayOffset(cellOffset) -
						cellOffsetToDayOffset(origCellOffset);

					if (dayDelta) {
						eventCopy.end = addDays(eventEnd(event), dayDelta, true);
						var oldHelpers = helpers;

						helpers = renderTempDayEvent(eventCopy, segment.row, elementTop);
						helpers = $(helpers); // turn array into a jQuery object

						helpers.find('*').css('cursor', direction + '-resize');
						if (oldHelpers) {
							oldHelpers.remove();
						}

						hideEvents(event);
					}
					else {
						if (helpers) {
							showEvents(event);
							helpers.remove();
							helpers = null;
						}
					}
					clearOverlays();
					renderDayOverlay( // coordinate grid already rebuilt with hoverListener.start()
						event.start,
						addDays( exclEndDay(event), dayDelta )
						// TODO: instead of calling renderDayOverlay() with dates,
						// call _renderDayOverlay (or whatever) with cell offsets.
					);
				}
			}, ev);
			
			function mouseup(ev) {
				trigger('eventResizeStop', this, event, ev);
				$('body').css('cursor', '');
				hoverListener.stop();
				clearOverlays();
				if (dayDelta) {
					eventResize(this, event, dayDelta, 0, ev);
					// event redraw will clear helpers
				}
				// otherwise, the drag handler already restored the old events
				
				setTimeout(function() { // make this happen after the element's click event
					isResizing = false;
				},0);
			}
		});
	}
	

}



/* Generalized Segment Utilities
-------------------------------------------------------------------------------------------------*/


function isDaySegmentCollision(segment, otherSegments) {
	for (var i=0; i<otherSegments.length; i++) {
		var otherSegment = otherSegments[i];
		if (
			otherSegment.leftCol <= segment.rightCol &&
			otherSegment.rightCol >= segment.leftCol
		) {
			return true;
		}
	}
	return false;
}


function segmentElementEach(segments, callback) { // TODO: use in AgendaView?
	for (var i=0; i<segments.length; i++) {
		var segment = segments[i];
		var element = segment.element;
		if (element) {
			callback(segment, element, i);
		}
	}
}


// A cmp function for determining which segments should appear higher up
function compareDaySegments(a, b) {
	return (b.rightCol - b.leftCol) - (a.rightCol - a.leftCol) || // put wider events first
		b.event.allDay - a.event.allDay || // if tie, put all-day events first (booleans cast to 0/1)
		a.event.start - b.event.start || // if a tie, sort by event start date
		(a.event.title || '').localeCompare(b.event.title) // if a tie, sort by event title
}


;;

//BUG: unselect needs to be triggered when events are dragged+dropped

function SelectionManager() {
	var t = this;
	
	
	// exports
	t.select = select;
	t.unselect = unselect;
	t.reportSelection = reportSelection;
	t.daySelectionMousedown = daySelectionMousedown;
	
	
	// imports
	var opt = t.opt;
	var trigger = t.trigger;
	var defaultSelectionEnd = t.defaultSelectionEnd;
	var renderSelection = t.renderSelection;
	var clearSelection = t.clearSelection;
	
	
	// locals
	var selected = false;



	// unselectAuto
	if (opt('selectable') && opt('unselectAuto')) {
		$(document).mousedown(function(ev) {
			var ignore = opt('unselectCancel');
			if (ignore) {
				if ($(ev.target).parents(ignore).length) { // could be optimized to stop after first match
					return;
				}
			}
			unselect(ev);
		});
	}
	

	function select(startDate, endDate, allDay) {
		unselect();
		if (!endDate) {
			endDate = defaultSelectionEnd(startDate, allDay);
		}
		renderSelection(startDate, endDate, allDay);
		reportSelection(startDate, endDate, allDay);
	}
	
	
	function unselect(ev) {
		if (selected) {
			selected = false;
			clearSelection();
			trigger('unselect', null, ev);
		}
	}
	
	
	function reportSelection(startDate, endDate, allDay, ev) {
		selected = true;
		trigger('select', null, startDate, endDate, allDay, ev);
	}
	
	
	function daySelectionMousedown(ev) { // not really a generic manager method, oh well
		var cellToDate = t.cellToDate;
		var getIsCellAllDay = t.getIsCellAllDay;
		var hoverListener = t.getHoverListener();
		var reportDayClick = t.reportDayClick; // this is hacky and sort of weird
		if (ev.which == 1 && opt('selectable')) { // which==1 means left mouse button
			unselect(ev);
			var _mousedownElement = this;
			var dates;
			hoverListener.start(function(cell, origCell) { // TODO: maybe put cellToDate/getIsCellAllDay info in cell
				clearSelection();
				if (cell && getIsCellAllDay(cell)) {
					dates = [ cellToDate(origCell), cellToDate(cell) ].sort(dateCompare);
					renderSelection(dates[0], dates[1], true);
				}else{
					dates = null;
				}
			}, ev);
			$(document).one('mouseup', function(ev) {
				hoverListener.stop();
				if (dates) {
					if (+dates[0] == +dates[1]) {
						reportDayClick(dates[0], true, ev);
					}
					reportSelection(dates[0], dates[1], true, ev);
				}
			});
		}
	}


}

;;
 
function OverlayManager() {
	var t = this;
	
	
	// exports
	t.renderOverlay = renderOverlay;
	t.clearOverlays = clearOverlays;
	
	
	// locals
	var usedOverlays = [];
	var unusedOverlays = [];
	
	
	function renderOverlay(rect, parent) {
		var e = unusedOverlays.shift();
		if (!e) {
			e = $("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>");
		}
		if (e[0].parentNode != parent[0]) {
			e.appendTo(parent);
		}
		usedOverlays.push(e.css(rect).show());
		return e;
	}
	

	function clearOverlays() {
		var e;
		while (e = usedOverlays.shift()) {
			unusedOverlays.push(e.hide().unbind());
		}
	}


}

;;

function CoordinateGrid(buildFunc) {

	var t = this;
	var rows;
	var cols;
	
	
	t.build = function() {
		rows = [];
		cols = [];
		buildFunc(rows, cols);
	};
	
	
	t.cell = function(x, y) {
		var rowCnt = rows.length;
		var colCnt = cols.length;
		var i, r=-1, c=-1;
		for (i=0; i<rowCnt; i++) {
			if (y >= rows[i][0] && y < rows[i][1]) {
				r = i;
				break;
			}
		}
		for (i=0; i<colCnt; i++) {
			if (x >= cols[i][0] && x < cols[i][1]) {
				c = i;
				break;
			}
		}
		return (r>=0 && c>=0) ? { row:r, col:c } : null;
	};
	
	
	t.rect = function(row0, col0, row1, col1, originElement) { // row1,col1 is inclusive
		var origin = originElement.offset();
		return {
			top: rows[row0][0] - origin.top,
			left: cols[col0][0] - origin.left,
			width: cols[col1][1] - cols[col0][0],
			height: rows[row1][1] - rows[row0][0]
		};
	};

}

;;

function HoverListener(coordinateGrid) {


	var t = this;
	var bindType;
	var change;
	var firstCell;
	var cell;
	
	
	t.start = function(_change, ev, _bindType) {
		change = _change;
		firstCell = cell = null;
		coordinateGrid.build();
		mouse(ev);
		bindType = _bindType || 'mousemove';
		$(document).bind(bindType, mouse);
	};
	
	
	function mouse(ev) {
		_fixUIEvent(ev); // see below
		var newCell = coordinateGrid.cell(ev.pageX, ev.pageY);
		if (!newCell != !cell || newCell && (newCell.row != cell.row || newCell.col != cell.col)) {
			if (newCell) {
				if (!firstCell) {
					firstCell = newCell;
				}
				change(newCell, firstCell, newCell.row-firstCell.row, newCell.col-firstCell.col);
			}else{
				change(newCell, firstCell);
			}
			cell = newCell;
		}
	}
	
	
	t.stop = function() {
		$(document).unbind(bindType, mouse);
		return cell;
	};
	
	
}



// this fix was only necessary for jQuery UI 1.8.16 (and jQuery 1.7 or 1.7.1)
// upgrading to jQuery UI 1.8.17 (and using either jQuery 1.7 or 1.7.1) fixed the problem
// but keep this in here for 1.8.16 users
// and maybe remove it down the line

function _fixUIEvent(event) { // for issue 1168
	if (event.pageX === undefined) {
		event.pageX = event.originalEvent.pageX;
		event.pageY = event.originalEvent.pageY;
	}
}
;;

function HorizontalPositionCache(getElement) {

	var t = this,
		elements = {},
		lefts = {},
		rights = {};
		
	function e(i) {
		return elements[i] = elements[i] || getElement(i);
	}
	
	t.left = function(i) {
		return lefts[i] = lefts[i] === undefined ? e(i).position().left : lefts[i];
	};
	
	t.right = function(i) {
		return rights[i] = rights[i] === undefined ? t.left(i) + e(i).width() : rights[i];
	};
	
	t.clear = function() {
		elements = {};
		lefts = {};
		rights = {};
	};
	
}

;;

})(jQuery);
;
/*
 * jQuery UI Draggable 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.core.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.mouse.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.widget.js
 */
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(c);if(!this.handle){return false}a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));if(d.containment){this._setContainment()}if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!d.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,e){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,c)}return false},_mouseStop:function(e){var g=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){g=a.ui.ddmanager.drop(this,e)}if(this.dropped){g=this.dropped;this.dropped=false}var c=this.element[0],f=false;while(c&&(c=c.parentNode)){if(c==document){f=true}}if(!f&&this.options.helper==="original"){return false}if((this.options.revert=="invalid"&&!g)||(this.options.revert=="valid"&&g)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,g))){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(d._trigger("stop",e)!==false){d._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,c)}return a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==c.target){d=true}});return d},_createHelper:function(d){var e=this.options;var c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!c.parents("body").length){c.appendTo((e.appendTo=="parent"?this.element[0].parentNode:e.appendTo))}if(c[0]!=this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_adjustOffsetFromHelper:function(c){if(typeof c=="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.ui.ie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;if(g.containment=="parent"){g.containment=this.helper[0].parentNode}if(g.containment=="document"||g.containment=="window"){this.containment=[g.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(g.containment=="document"?0:a(window).scrollLeft())+a(g.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(g.containment=="document"?0:a(window).scrollTop())+(a(g.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)&&g.containment.constructor!=Array){var h=a(g.containment);var e=h[0];if(!e){return}var f=h.offset();var d=(a(e).css("overflow")!="hidden");this.containment=[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=h}else{if(g.containment.constructor==Array){this.containment=g.containment}}},_convertPositionTo:function(g,i){if(!i){i=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(i.top+this.offset.relative.top*e+this.offset.parent.top*e-((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(i.left+this.offset.relative.left*e+this.offset.parent.left*e-((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(d){var e=this.options,l=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(l[0].tagName);var h=d.pageX;var g=d.pageY;if(this.originalPosition){var c;if(this.containment){if(this.relative_container){var k=this.relative_container.offset();c=[this.containment[0]+k.left,this.containment[1]+k.top,this.containment[2]+k.left,this.containment[3]+k.top]}else{c=this.containment}if(d.pageX-this.offset.click.left<c[0]){h=c[0]+this.offset.click.left}if(d.pageY-this.offset.click.top<c[1]){g=c[1]+this.offset.click.top}if(d.pageX-this.offset.click.left>c[2]){h=c[2]+this.offset.click.left}if(d.pageY-this.offset.click.top>c[3]){g=c[3]+this.offset.click.top}}if(e.grid){var j=e.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;g=c?(!(j-this.offset.click.top<c[1]||j-this.offset.click.top>c[3])?j:(!(j-this.offset.click.top<c[1])?j-e.grid[1]:j+e.grid[1])):j;var f=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX;h=c?(!(f-this.offset.click.left<c[0]||f-this.offset.click.left>c[2])?f:(!(f-this.offset.click.left<c[0])?f-e.grid[0]:f+e.grid[0])):f}}return{top:(g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:l.scrollTop())))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:l.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(c,d,e){e=e||this._uiHash();a.ui.plugin.call(this,c,[d,e]);if(c=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(c){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(d,f){var e=a(this).data("draggable"),g=e.options,c=a.extend({},f,{item:e.element});e.sortables=[];a(g.connectToSortable).each(function(){var h=a.data(this,"sortable");if(h&&!h.options.disabled){e.sortables.push({instance:h,shouldRevert:h.options.revert});h.refreshPositions();h._trigger("activate",d,c)}})},stop:function(d,f){var e=a(this).data("draggable"),c=a.extend({},f,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;if(e.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,c)}})},drag:function(d,g){var f=a(this).data("draggable"),c=this;var e=function(j){var p=this.offset.click.top,n=this.offset.click.left;var h=this.positionAbs.top,l=this.positionAbs.left;var k=j.height,m=j.width;var q=j.top,i=j.left;return a.ui.isOver(h+p,l+n,q,i,k,m)};a.each(f.sortables,function(j){var h=false;var k=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){h=true;a.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this!=k&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(k.instance.element[0],this.instance.element[0])){h=false}return h})}if(h){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return g.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",d);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}f._trigger("fromSortable",d);f.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(d,e){var c=a("body"),f=a(this).data("draggable").options;if(c.css("cursor")){f._cursor=c.css("cursor")}c.css("cursor",f.cursor)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._cursor){a("body").css("cursor",e._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(d,e){var c=a(e.helper),f=a(this).data("draggable").options;if(c.css("opacity")){f._opacity=c.css("opacity")}c.css("opacity",f.opacity)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._opacity){a(d.helper).css("opacity",e._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(d,e){var c=a(this).data("draggable");if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){c.overflowOffset=c.scrollParent.offset()}},drag:function(e,f){var d=a(this).data("draggable"),g=d.options,c=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!g.axis||g.axis!="x"){if((d.overflowOffset.top+d.scrollParent[0].offsetHeight)-e.pageY<g.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop+g.scrollSpeed}else{if(e.pageY-d.overflowOffset.top<g.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop-g.scrollSpeed}}}if(!g.axis||g.axis!="y"){if((d.overflowOffset.left+d.scrollParent[0].offsetWidth)-e.pageX<g.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(e.pageX-d.overflowOffset.left<g.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft-g.scrollSpeed}}}}else{if(!g.axis||g.axis!="x"){if(e.pageY-a(document).scrollTop()<g.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<g.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}}if(!g.axis||g.axis!="y"){if(e.pageX-a(document).scrollLeft()<g.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<g.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}}if(c!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,e)}}});a.ui.plugin.add("draggable","snap",{start:function(d,e){var c=a(this).data("draggable"),f=c.options;c.snapElements=[];a(f.snap.constructor!=String?(f.snap.items||":data(draggable)"):f.snap).each(function(){var h=a(this);var g=h.offset();if(this!=c.element[0]){c.snapElements.push({item:this,width:h.outerWidth(),height:h.outerHeight(),top:g.top,left:g.left})}})},drag:function(u,p){var g=a(this).data("draggable"),q=g.options;var y=q.snapTolerance;var x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(var v=g.snapElements.length-1;v>=0;v--){var s=g.snapElements[v].left,n=s+g.snapElements[v].width,m=g.snapElements[v].top,A=m+g.snapElements[v].height;if(!((s-y<x&&x<n+y&&m-y<f&&f<A+y)||(s-y<x&&x<n+y&&m-y<e&&e<A+y)||(s-y<w&&w<n+y&&m-y<f&&f<A+y)||(s-y<w&&w<n+y&&m-y<e&&e<A+y))){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=false;continue}if(q.snapMode!="inner"){var c=Math.abs(m-e)<=y;var z=Math.abs(A-f)<=y;var j=Math.abs(s-w)<=y;var k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}var h=(c||z||j||k);if(q.snapMode!="outer"){var c=Math.abs(m-f)<=y;var z=Math.abs(A-e)<=y;var j=Math.abs(s-x)<=y;var k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.ui.plugin.add("draggable","stack",{start:function(d,e){var g=a(this).data("draggable").options;var f=a.makeArray(a(g.stack)).sort(function(i,h){return(parseInt(a(i).css("zIndex"),10)||0)-(parseInt(a(h).css("zIndex"),10)||0)});if(!f.length){return}var c=parseInt(f[0].style.zIndex)||0;a(f).each(function(h){this.style.zIndex=c+h});this[0].style.zIndex=c+f.length}});a.ui.plugin.add("draggable","zIndex",{start:function(d,e){var c=a(e.helper),f=a(this).data("draggable").options;if(c.css("zIndex")){f._zIndex=c.css("zIndex")}c.css("zIndex",f.zIndex)},stop:function(c,d){var e=a(this).data("draggable").options;if(e._zIndex){a(d.helper).css("zIndex",e._zIndex)}}})})(jQuery);
;
/*
 * jQuery UI Resizable 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.core.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.mouse.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.widget.js
 */
(function(c,d){c.widget("ui.resizable",c.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var h=this,k=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(k.aspectRatio),aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=k.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var l=this.handles.split(",");this.handles={};for(var f=0;f<l.length;f++){var j=c.trim(l[f]),e="ui-resizable-"+j;var g=c('<div class="ui-resizable-handle '+e+'"></div>');g.css({zIndex:k.zIndex});if("se"==j){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[j]=".ui-resizable-"+j;this.element.append(g)}}this._renderAxis=function(q){q=q||this.element;for(var n in this.handles){if(this.handles[n].constructor==String){this.handles[n]=c(this.handles[n],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=c(this.handles[n],this.element),p=0;p=/sw|ne|nw|se|n|s/.test(n)?o.outerHeight():o.outerWidth();var m=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");q.css(m,p);this._proportionallyResize()}if(!c(this.handles[n]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!h.resizing){if(this.className){var i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}h.axis=i&&i[1]?i[1]:"se"}});if(k.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(k.disabled){return}c(this).removeClass("ui-resizable-autohide");h._handles.show()}).mouseleave(function(){if(k.disabled){return}if(!h.resizing){c(this).addClass("ui-resizable-autohide");h._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(g){c(g).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var f=this.element;this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f);f.remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(f){var g=false;for(var e in this.handles){if(c(this.handles[e])[0]==f.target){g=true}}return !this.options.disabled&&g},_mouseStart:function(g){var j=this.options,f=this.element.position(),e=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(e.is(".ui-draggable")||(/absolute/).test(e.css("position"))){e.css({position:"absolute",top:f.top,left:f.left})}this._renderProxy();var k=b(this.helper.css("left")),h=b(this.helper.css("top"));if(j.containment){k+=c(j.containment).scrollLeft()||0;h+=c(j.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof j.aspectRatio=="number")?j.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var i=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",i=="auto"?this.axis+"-resize":i);e.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(e){var g=this.helper,f=this.options,l={},k=this,i=this.originalMousePosition,m=this.axis;var p=(e.pageX-i.left)||0,n=(e.pageY-i.top)||0;var h=this._change[m];if(!h){return false}var j=h.apply(this,[e,p,n]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){j=this._updateRatio(j,e)}j=this._respectSize(j,e);this._propagate("resize",e);g.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(j);this._trigger("resize",e,this.ui());return false},_mouseStop:function(h){this.resizing=false;var i=this.options,l=this;if(this._helper){var g=this._proportionallyResizeElements,e=g.length&&(/textarea/i).test(g[0].nodeName),f=e&&c.ui.hasScroll(g[0],"left")?0:l.sizeDiff.height,k=e?0:l.sizeDiff.width;var n={width:(l.helper.width()-k),height:(l.helper.height()-f)},j=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,m=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!i.animate){this.element.css(c.extend(n,{top:m,left:j}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!i.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",h);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(g){var j=this.options,i,h,f,k,e;e={minWidth:a(j.minWidth)?j.minWidth:0,maxWidth:a(j.maxWidth)?j.maxWidth:Infinity,minHeight:a(j.minHeight)?j.minHeight:0,maxHeight:a(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||g){i=e.minHeight*this.aspectRatio;f=e.minWidth/this.aspectRatio;h=e.maxHeight*this.aspectRatio;k=e.maxWidth/this.aspectRatio;if(i>e.minWidth){e.minWidth=i}if(f>e.minHeight){e.minHeight=f}if(h<e.maxWidth){e.maxWidth=h}if(k<e.maxHeight){e.maxHeight=k}}this._vBoundaries=e},_updateCache:function(e){var f=this.options;this.offset=this.helper.offset();if(a(e.left)){this.position.left=e.left}if(a(e.top)){this.position.top=e.top}if(a(e.height)){this.size.height=e.height}if(a(e.width)){this.size.width=e.width}},_updateRatio:function(h,g){var i=this.options,j=this.position,f=this.size,e=this.axis;if(a(h.height)){h.width=(h.height*this.aspectRatio)}else{if(a(h.width)){h.height=(h.width/this.aspectRatio)}}if(e=="sw"){h.left=j.left+(f.width-h.width);h.top=null}if(e=="nw"){h.top=j.top+(f.height-h.height);h.left=j.left+(f.width-h.width)}return h},_respectSize:function(l,g){var j=this.helper,i=this._vBoundaries,r=this._aspectRatio||g.shiftKey,q=this.axis,t=a(l.width)&&i.maxWidth&&(i.maxWidth<l.width),m=a(l.height)&&i.maxHeight&&(i.maxHeight<l.height),h=a(l.width)&&i.minWidth&&(i.minWidth>l.width),s=a(l.height)&&i.minHeight&&(i.minHeight>l.height);if(h){l.width=i.minWidth}if(s){l.height=i.minHeight}if(t){l.width=i.maxWidth}if(m){l.height=i.maxHeight}var f=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height;var k=/sw|nw|w/.test(q),e=/nw|ne|n/.test(q);if(h&&k){l.left=f-i.minWidth}if(t&&k){l.left=f-i.maxWidth}if(s&&e){l.top=p-i.minHeight}if(m&&e){l.top=p-i.maxHeight}var n=!l.width&&!l.height;if(n&&!l.left&&l.top){l.top=null}else{if(n&&!l.top&&l.left){l.left=null}}return l},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var g=this.helper||this.element;for(var f=0;f<this._proportionallyResizeElements.length;f++){var h=this._proportionallyResizeElements[f];if(!this.borderDif){var e=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],j=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];this.borderDif=c.map(e,function(l,n){var m=parseInt(l,10)||0,o=parseInt(j[n],10)||0;return m+o})}h.css({height:(g.height()-this.borderDif[0]-this.borderDif[2])||0,width:(g.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,h=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var f=(c.ui.ie6?1:0),g=(c.ui.ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+g,height:this.element.outerHeight()+g,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++h.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f,e){return{width:this.originalSize.width+f}},w:function(h,f,e){var j=this.options,g=this.originalSize,i=this.originalPosition;return{left:i.left+f,width:g.width-f}},n:function(h,f,e){var j=this.options,g=this.originalSize,i=this.originalPosition;return{top:i.top+e,height:g.height-e}},s:function(g,f,e){return{height:this.originalSize.height+e}},se:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},sw:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,f,e]))},ne:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},nw:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,f,e]))}},_propagate:function(f,e){c.ui.plugin.call(this,f,[e,this.ui()]);(f!="resize"&&this._trigger(f,e,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.ui.plugin.add("resizable","alsoResize",{start:function(f,g){var e=c(this).data("resizable"),i=e.options;var h=function(j){c(j).each(function(){var k=c(this);k.data("resizable-alsoresize",{width:parseInt(k.width(),10),height:parseInt(k.height(),10),left:parseInt(k.css("left"),10),top:parseInt(k.css("top"),10)})})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.parentNode){if(i.alsoResize.length){i.alsoResize=i.alsoResize[0];h(i.alsoResize)}else{c.each(i.alsoResize,function(j){h(j)})}}else{h(i.alsoResize)}},resize:function(g,i){var f=c(this).data("resizable"),j=f.options,h=f.originalSize,l=f.originalPosition;var k={height:(f.size.height-h.height)||0,width:(f.size.width-h.width)||0,top:(f.position.top-l.top)||0,left:(f.position.left-l.left)||0},e=function(m,n){c(m).each(function(){var q=c(this),r=c(this).data("resizable-alsoresize"),p={},o=n&&n.length?n:q.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(o,function(s,u){var t=(r[u]||0)+(k[u]||0);if(t&&t>=0){p[u]=t||null}});q.css(p)})};if(typeof(j.alsoResize)=="object"&&!j.alsoResize.nodeType){c.each(j.alsoResize,function(m,n){e(m,n)})}else{e(j.alsoResize)}},stop:function(e,f){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","animate",{stop:function(i,p){var m=c(this).data("resizable"),j=m.options;var h=m._proportionallyResizeElements,e=h.length&&(/textarea/i).test(h[0].nodeName),f=e&&c.ui.hasScroll(h[0],"left")?0:m.sizeDiff.height,l=e?0:m.sizeDiff.width;var g={width:(m.size.width-l),height:(m.size.height-f)},k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null,n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;m.element.animate(c.extend(g,n&&k?{top:n,left:k}:{}),{duration:j.animateDuration,easing:j.animateEasing,step:function(){var o={width:parseInt(m.element.css("width"),10),height:parseInt(m.element.css("height"),10),top:parseInt(m.element.css("top"),10),left:parseInt(m.element.css("left"),10)};if(h&&h.length){c(h[0]).css({width:o.width,height:o.height})}m._updateCache(o);m._propagate("resize",i)}})}});c.ui.plugin.add("resizable","containment",{start:function(f,s){var q=c(this).data("resizable"),j=q.options,l=q.element;var g=j.containment,k=(g instanceof c)?g.get(0):(/parent/.test(g))?l.parent().get(0):g;if(!k){return}q.containerElement=c(k);if(/document/.test(g)||g==document){q.containerOffset={left:0,top:0};q.containerPosition={left:0,top:0};q.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var n=c(k),i=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){i[p]=b(n.css("padding"+o))});q.containerOffset=n.offset();q.containerPosition=n.position();q.containerSize={height:(n.innerHeight()-i[3]),width:(n.innerWidth()-i[1])};var r=q.containerOffset,e=q.containerSize.height,m=q.containerSize.width,h=(c.ui.hasScroll(k,"left")?k.scrollWidth:m),t=(c.ui.hasScroll(k)?k.scrollHeight:e);q.parentData={element:k,left:r.left,top:r.top,width:h,height:t}}},resize:function(g,r){var m=c(this).data("resizable"),i=m.options,f=m.containerSize,q=m.containerOffset,n=m.size,p=m.position,s=m._aspectRatio||g.shiftKey,e={top:0,left:0},h=m.containerElement;if(h[0]!=document&&(/static/).test(h.css("position"))){e=q}if(p.left<(m._helper?q.left:0)){m.size.width=m.size.width+(m._helper?(m.position.left-q.left):(m.position.left-e.left));if(s){m.size.height=m.size.width/m.aspectRatio}m.position.left=i.helper?q.left:0}if(p.top<(m._helper?q.top:0)){m.size.height=m.size.height+(m._helper?(m.position.top-q.top):m.position.top);if(s){m.size.width=m.size.height*m.aspectRatio}m.position.top=m._helper?q.top:0}m.offset.left=m.parentData.left+m.position.left;m.offset.top=m.parentData.top+m.position.top;var l=Math.abs((m._helper?m.offset.left-e.left:(m.offset.left-e.left))+m.sizeDiff.width),t=Math.abs((m._helper?m.offset.top-e.top:(m.offset.top-q.top))+m.sizeDiff.height);var k=m.containerElement.get(0)==m.element.parent().get(0),j=/relative|absolute/.test(m.containerElement.css("position"));if(k&&j){l-=m.parentData.left}if(l+m.size.width>=m.parentData.width){m.size.width=m.parentData.width-l;if(s){m.size.height=m.size.width/m.aspectRatio}}if(t+m.size.height>=m.parentData.height){m.size.height=m.parentData.height-t;if(s){m.size.width=m.size.height*m.aspectRatio}}},stop:function(f,p){var l=c(this).data("resizable"),g=l.options,m=l.position,n=l.containerOffset,e=l.containerPosition,i=l.containerElement;var j=c(l.helper),r=j.offset(),q=j.outerWidth()-l.sizeDiff.width,k=j.outerHeight()-l.sizeDiff.height;if(l._helper&&!g.animate&&(/relative/).test(i.css("position"))){c(this).css({left:r.left-e.left-n.left,width:q,height:k})}if(l._helper&&!g.animate&&(/static/).test(i.css("position"))){c(this).css({left:r.left-e.left-n.left,width:q,height:k})}}});c.ui.plugin.add("resizable","ghost",{start:function(g,h){var f=c(this).data("resizable"),i=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");f.ghost.appendTo(f.helper)},resize:function(f,g){var e=c(this).data("resizable"),h=e.options;if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(f,g){var e=c(this).data("resizable"),h=e.options;if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(e,n){var k=c(this).data("resizable"),h=k.options,l=k.size,i=k.originalSize,j=k.originalPosition,p=k.axis,m=h._aspectRatio||e.shiftKey;h.grid=typeof h.grid=="number"?[h.grid,h.grid]:h.grid;var g=Math.round((l.width-i.width)/(h.grid[0]||1))*(h.grid[0]||1),f=Math.round((l.height-i.height)/(h.grid[1]||1))*(h.grid[1]||1);if(/^(se|s|e)$/.test(p)){k.size.width=i.width+g;k.size.height=i.height+f}else{if(/^(ne)$/.test(p)){k.size.width=i.width+g;k.size.height=i.height+f;k.position.top=j.top-f}else{if(/^(sw)$/.test(p)){k.size.width=i.width+g;k.size.height=i.height+f;k.position.left=j.left-g}else{k.size.width=i.width+g;k.size.height=i.height+f;k.position.top=j.top-f;k.position.left=j.left-g}}}}});var b=function(e){return parseInt(e,10)||0};var a=function(e){return !isNaN(parseInt(e,10))}})(jQuery);
;
/*globals _jive_locale */
/**
 * @depends path=/plugins/event-type-plugin/resources/script/fullcalendar/fullcalendar.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.draggable.js
 * @depends path=/resources/scripts/jquery/ui/jquery.ui.resizable.js
 */
jive.namespace('EventCalendarApp');

jive.EventCalendarApp.CalendarView = jive.oo.Class.extend(function(protect) {
    jive.conc.observable(this);
    
    this.init = function(options) {
        var view = this;
        this.userID = options.userID;
        this.containerID = options.containerID;
        this.containerType = options.containerType;
        this.recursive = options.recursive;
        this.monthDayFormat = options.monthDayFormat;
        this.canCreateEvents = options.canCreateEvents;
        this.display24hrClock = options.display24hrClock;
        this.i18n = options.i18n;
        this.monthYearTitleFormat = options.monthYearFormat;
        
        if(this.userID) {
            this.url = jive.rest.url('/calendar/user/' + view.userID);
        } else {
            this.url = jive.rest.url('/calendar/' + view.containerType + '/' + view.containerID);
        } 
        
        this.showCalendar();
    };

    this.showCalendar = function() {
        var view = this;
        
        $j(document).ready(function(){
            $j('#event-calendar').fullCalendar({
                timeFormat: view.display24hrClock ? 'H:mm' : 'h(:mm)tt',
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                weekMode: 'liquid',
                editable: view.canCreateEvents,
                eventDrop: view.eventDropped.bind(view),
                eventResize: view.eventResized.bind(view),
                events: {
                    url: view.url,
                    type: 'GET',
                    data: {
                        recursive: view.recursive
                    },
                    error: function () {
                        alert('Something bad happened.');
                    }
                },
                titleFormat : {
                    month : view.monthYearTitleFormat,
                    week: "MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",
                    day: 'dddd, MMM d, yyyy'
                },
                columnFormat: {
                    week: 'ddd ' + view.monthDayFormat,
                    day: 'dddd ' + view.monthDayFormat
                },
                buttonText: {
                    today: view.i18n.buttons.today,
                    month: view.i18n.buttons.month,
                    week: view.i18n.buttons.week,
                    day: view.i18n.buttons.day
                },
                monthNames: [view.i18n.months.january,
                             view.i18n.months.february,
                             view.i18n.months.march,
                             view.i18n.months.april,
                             view.i18n.months.may,
                             view.i18n.months.june,
                             view.i18n.months.july,
                             view.i18n.months.august,
                             view.i18n.months.september,
                             view.i18n.months.october,
                             view.i18n.months.november,
                             view.i18n.months.december],
                monthNamesShort: [view.i18n.monthsShort.january,
                                  view.i18n.monthsShort.february,
                                  view.i18n.monthsShort.march,
                                  view.i18n.monthsShort.april,
                                  view.i18n.monthsShort.may,
                                  view.i18n.monthsShort.june,
                                  view.i18n.monthsShort.july,
                                  view.i18n.monthsShort.august,
                                  view.i18n.monthsShort.september,
                                  view.i18n.monthsShort.october,
                                  view.i18n.monthsShort.november,
                                  view.i18n.monthsShort.december],
                dayNames: [view.i18n.days.sunday,
                           view.i18n.days.monday,
                           view.i18n.days.tuesday,
                           view.i18n.days.wednesday,
                           view.i18n.days.thursday,
                           view.i18n.days.friday,
                           view.i18n.days.saturday],
                dayNamesShort: [view.i18n.daysShort.sunday,
                                view.i18n.daysShort.monday,
                                view.i18n.daysShort.tuesday,
                                view.i18n.daysShort.wednesday,
                                view.i18n.daysShort.thursday,
                                view.i18n.daysShort.friday,
                                view.i18n.daysShort.saturday]
                             
            });
        });
    };
    
    this.eventDropped = function( event, dayDelta, minuteDelta, allDay, revertFunc, jsEvent, ui, calendar_view ) {
        if(!event.allDay && calendar_view.name == 'month') {
            this.showMoveConfirmation(event, dayDelta, minuteDelta, revertFunc);
        } else {
            this.reschedule(event, dayDelta, minuteDelta, allDay, revertFunc);
        }
    };
    
    this.showMoveConfirmation = function(event, dayDelta, minuteDelta, revertFunc) {
        var view = this;
        $j(jive.event.calendar.moveConfirmation()).lightbox_me({
            destroyOnClose: true,
            closeClick: false,
            closeEsc: false,
            onLoad: function() {
                $j('#event-calendar-confirm-fullday').click( function() {
                    view.rescheduleAsAllDay(event, dayDelta, minuteDelta, revertFunc);
                });
                
                $j('#event-calendar-confirm-asis').click(function () {
                    view.rescheduleAsIs(event, dayDelta, minuteDelta, revertFunc);
                });
                
                $j('#event-calendar-confirm-cancel').click(function () {
                    revertFunc();
                });
            }
        });
    };

    this.eventResized = function( event, dayDelta, minuteDelta, revertFunc, jsEvent, ui, calendar_view ) {
        if(!event.allDay && calendar_view.name == 'month') {
            this.showResizeConfirmation(event, dayDelta, minuteDelta, revertFunc);
        } else {
            this.resize(event, dayDelta, minuteDelta, event.allDay, revertFunc);
        }
    };
    
    this.showResizeConfirmation = function(event, dayDelta, minuteDelta, revertFunc) {
        var view = this;
        $j(jive.event.calendar.resizeConfirmation()).lightbox_me({
            destroyOnClose: true,
            closeClick: false,
            closeEsc: false,
            onLoad: function() {
                $j('#event-calendar-confirm-continue').click(function() {
                    view.resize(event, dayDelta, minuteDelta, true, revertFunc);
                });
                
                $j('#event-calendar-confirm-cancel').click(function() {
                    revertFunc();
                });
            }
        });
    };
    
    this.rescheduleAsAllDay = function(event, dayDelta, minuteDelta, revertFunc) {
        this.reschedule(event, dayDelta, minuteDelta, true, revertFunc);
    };
    
    this.rescheduleAsIs = function(event, dayDelta, minuteDelta, revertFunc) {
        this.reschedule(event, dayDelta, minuteDelta, false, revertFunc);
    }
            
    this.reschedule = function(event, dayDelta, minuteDelta, allDay, revertFunc) {
        this.saveEvent(event, dayDelta, minuteDelta, allDay, 'drop', revertFunc);
    }

    this.resize = function(event, dayDelta, minuteDelta, allDay, revertFunc) {
        this.saveEvent(event, dayDelta, minuteDelta, allDay, 'resize', revertFunc);
    }
    
    this.saveEvent = function saveEvent(event, dayDelta, minuteDelta, allDay, action, revertFunc) {
        var view = this;
        var data = new Object();
        data.dayDelta = dayDelta;
        data.minuteDelta = minuteDelta;
        data.allDay = allDay;
        data.action = action;
        
        view.emitP('saveEvent', event.id, data) 
        .addCallback(function() {
            event.allDay = allDay;
            $j('#event-calendar').fullCalendar('render');
        })
        .addErrback(function(message, code) {
            revertFunc();
        });
    };
});

;
/**
 * @depends path=/plugins/event-type-plugin/resources/script/apps/eventCalendar/models/calendar_source.js
 * @depends path=/plugins/event-type-plugin/resources/script/apps/eventCalendar/views/calendar_view.js
 */
jive.namespace('EventCalendarApp');

jive.EventCalendarApp.Main = jive.oo.Class.extend(function(protect) {
    this.init = function(options) {
        var main = this;
        
        this.calendarSource = new jive.EventCalendarApp.CalendarSource(options);
        this.calendarView = new jive.EventCalendarApp.CalendarView(options);
        this.options = options;
        
        this.calendarView.addListener('saveEvent', function(eventID, data, promise) {
            main.calendarSource.save(eventID, data)
            .addCallback(function(data) {
                promise.emitSuccess(data);
            })
            .addErrback(function(error, status) {
                promise.emitError(error, status);
            });
        });
    };
}); 

;
// This file was automatically generated from event-invite.soy.
// Please don't edit this file by hand.

goog.provide('jive.event.invite.inviteConfirmation');
goog.provide('jive.event.invite.inviteUsers');
goog.provide('jive.event.invite.usersWithoutPermission');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.event.invite.inviteUsers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal" id="jive-modal-invite"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.title'),[])), '</h2></header><a href="#" class="j-modal-close-top close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content clearfix"><div id="invite-error" class="jive-error-box" style="display:none" ></div><form class="j-form">', (opt_data['private']) ? '<p class="j-info"><span class="j-info-icon j-ui-elem"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('invite.private.access'),[])) + '</p>' : '', '<p class="ie-zindex-fix"><label for="invite-users">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.people.label'),[])), '<strong class="required"> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</strong></label><input type="text" name="invite-users" id="invite-users" class="j-user-autocomplete j-autocomplete-input jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on"/></p><p><label for="jive-invite-not-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.message.label'),[])), '<strong class="required"> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</strong></label><textarea name="message" class="jive-form-element-textarea" id="jive-invite-not-message">', soy.$$escapeHtml(opt_data.message), '</textarea></p><p><input type="submit" name="invite-submit" class="j-btn-callout" value="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.submit.button'),[])), '" /><button type="button" class="close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '</button></p></form></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.event.invite.inviteConfirmation = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.confirm'),[])));
  return opt_sb ? '' : output.toString();
};


jive.event.invite.usersWithoutPermission = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-warn"></span>', (opt_data['private']) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.nopermission.private'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('event.invite.nopermission.noattachment'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from event-invite-action.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.actionqueue.item.eventInvitationActionRequest');
goog.provide('jive.eae.actionqueue.item.eventInvitationReplyResult');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.actionqueue.actionQueueItemAction');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.renderGuestDisplayName');
goog.require('jive.shared.displayutil.renderIconElement');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.actionqueue.item.eventInvitationActionRequest = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data invite-request clearfix"><div class="j-av">');
  if (opt_data.data.inviter) {
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.data.inviter, {size: '32'}), output);
  }
  output.append('</div><h4 class="j-aq-header font-color-meta"><span class="jive-icon-med jive-icon-gear"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.invite.label'),[])), '</h4><p>');
  var inviter__soy12 = new soy.StringBuilder();
  if (! opt_data.data.inviter.anonymous) {
    jive.shared.displayutil.userDisplayNameLink(opt_data.data.inviter, inviter__soy12);
  } else {
    jive.shared.displayutil.renderGuestDisplayName({message: ''}, inviter__soy12);
  }
  inviter__soy12 = inviter__soy12.toString();
  var event__soy19 = new soy.StringBuilder('<a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.data.objData.href)), '" class="title">');
  if (opt_data.data.objData.iconElement) {
    jive.shared.displayutil.renderIconElement({icon: opt_data.data.objData.iconElement}, event__soy19);
  } else {
    event__soy19.append('<span class="', soy.$$escapeHtml(opt_data.data.objData.iconCSS), '"></span>');
  }
  event__soy19.append(soy.$$escapeHtml(opt_data.data.objData.displayName), '</a>');
  event__soy19 = event__soy19.toString();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.data.inviteKey),[new soydata.VERY_UNSAFE.ordainSanitizedHtml(inviter__soy12),new soydata.VERY_UNSAFE.ordainSanitizedHtml(event__soy19)])), '</p><div class="j-aq-actions clearfix">');
  var actionList36 = opt_data.data.actions;
  var actionListLen36 = actionList36.length;
  for (var actionIndex36 = 0; actionIndex36 < actionListLen36; actionIndex36++) {
    var actionData36 = actionList36[actionIndex36];
    jive.eae.actionqueue.actionQueueItemAction({action: actionData36}, output);
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.item.eventInvitationReplyResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.i18nHelper({i18nKey: soy.$$escapeHtml(opt_data.data.messageKey), arg0: soy.$$escapeHtml(opt_data.data.eventTitle)}, output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from action_queue.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.actionqueue.actionError');
goog.provide('jive.eae.actionqueue.actionQueue');
goog.provide('jive.eae.actionqueue.actionQueueItemAction');
goog.provide('jive.eae.actionqueue.actionQueueItemActionResult');
goog.provide('jive.eae.actionqueue.actionQueueItemDetails');
goog.provide('jive.eae.actionqueue.actionQueueItemInfo');
goog.provide('jive.eae.actionqueue.actionQueueItemView');
goog.provide('jive.eae.actionqueue.actionQueueList');
goog.provide('jive.eae.actionqueue.excerptActionQueueItemView');
goog.provide('jive.eae.actionqueue.guestActions');
goog.provide('jive.eae.actionqueue.noActionQueueResults');
goog.provide('jive.eae.actionqueue.nonUserSourceImage');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.guest.page.whyLoginOrRegister');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.renderGuestDisplayName');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.render');


jive.eae.actionqueue.actionQueue = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-aq-actions-tabs j-act-filter-bar j-sub-bar j-rc4 j-rc-none-bottom"><a id="j-aq-subfilter-active" class="js-aq-subfilter filter j-sub-selected j-toggle left" data-type="active" href="#"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.subfilter.pending'),[])), '</span> </a><a class="js-aq-subfilter filter j-toggle right" data-type="resolved" href="#"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.subfilter.archived'),[])), '</span> </a></div><div id="j-actions-list-container" class="js-actions-list-container">');
  jive.eae.actionqueue.actionQueueList({actionQueue: opt_data.actionQueue, type: 'active'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.actionQueue.actionQueueList && opt_data.actionQueue.actionQueueList.length > 0) {
    if (opt_data.actionQueue.actionQueueList) {
      var actionQueueItemList17 = opt_data.actionQueue.actionQueueList;
      var actionQueueItemListLen17 = actionQueueItemList17.length;
      for (var actionQueueItemIndex17 = 0; actionQueueItemIndex17 < actionQueueItemListLen17; actionQueueItemIndex17++) {
        var actionQueueItemData17 = actionQueueItemList17[actionQueueItemIndex17];
        jive.eae.actionqueue.actionQueueItemView({actionQueueItem: actionQueueItemData17, renderLocation: 'actions'}, output);
      }
    }
    output.append((opt_data.actionQueue.hasMore) ? '<div><a class=\'j-js-show-older j-act-append j-rc6\' href=\'#\'><span class="j-rc6 j-more-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.load_more'),[])) + '</span></a></div>' : '');
  } else {
    jive.eae.actionqueue.noActionQueueResults(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.noActionQueueResults = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-js-aq-noresults j-aq-noresults"><span class="j-empty font-color-meta">', soy.$$escapeHtml(opt_data.type == 'resolved' ? jive.i18n.i18nText(jive.i18n.getMsg('eae.inbox.no_resolved_notifications'),[]) : jive.i18n.i18nText(jive.i18n.getMsg('eae.inbox.no_active_notifications'),[])), '</span></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueItemView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="article_actionqueue_', soy.$$escapeHtml(opt_data.actionQueueItem.entryID), '" data-modificationdate="', soy.$$escapeHtml(opt_data.actionQueueItem.modificationDate), '" class="j-aq-entry clearfix">');
  if (opt_data.actionQueueItem.template) {
    jive.shared.soy.render({templateName: opt_data.actionQueueItem.template, data: (function() { var map = {}; var pairs = [['data', opt_data.actionQueueItem.templateData], ['modificationTime', opt_data.actionQueueItem.modificationTime], ['renderLocation', opt_data.renderLocation]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: false}, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.excerptActionQueueItemView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.actionQueueItem.user) {
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.actionQueueItem.user, {size: 46}), output);
  } else if (opt_data.actionQueueItem.nonUserSource) {
    jive.eae.actionqueue.nonUserSourceImage({source: opt_data.actionQueueItem.nonUserSource, size: '46'}, output);
  }
  jive.eae.actionqueue.actionQueueItemInfo(opt_data, output);
  output.append('<div class="j-aq-actions clearfix">');
  var actionList60 = opt_data.actionQueueItem.actions;
  var actionListLen60 = actionList60.length;
  for (var actionIndex60 = 0; actionIndex60 < actionListLen60; actionIndex60++) {
    var actionData60 = actionList60[actionIndex60];
    jive.eae.actionqueue.actionQueueItemAction({action: actionData60}, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.nonUserSourceImage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img class="jive-avatar" src="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.source.imgurl)), '" width="', soy.$$escapeHtml(opt_data.size), '" alt="" height="', soy.$$escapeHtml(opt_data.size), '"/>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueItemInfo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.actionQueueItem.user) {
    if (! opt_data.actionQueueItem.user.anonymous) {
      jive.shared.displayutil.userDisplayNameLink(opt_data.actionQueueItem.user, output);
    } else {
      jive.shared.displayutil.renderGuestDisplayName({message: ''}, output);
    }
  }
  output.append(' ', soy.$$escapeHtml(opt_data.actionQueueItem.message), '<a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.actionQueueItem.jiveObject.jiveObjectURL)), '" class="title"><span class="jive-icon-med  ', soy.$$escapeHtml(opt_data.actionQueueItem.jiveObject.jiveObjectCSS), '"></span>', soy.$$escapeHtml(opt_data.actionQueueItem.jiveObject.renderedSubject), '</a>', (opt_data.actionQueueItem.details) ? '<div class=\'j-action-details clearfix\'><a href=\'#\' class=\'j-js-view-action-details\'>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.inbox.details.more'),[])) + '</a></div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueItemAction = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.action.href) ? '<a href="' + soy.$$escapeHtml(opt_data.action.href) + '" class="j-btn-global j-action-button">' + soy.$$escapeHtml(opt_data.action.name) + '</a>' : '<a href="#" name="' + soy.$$escapeHtml(opt_data.action.code) + '" class="j-btn-global j-action-button">' + soy.$$escapeHtml(opt_data.action.name) + '</a>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueItemActionResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-action-result">');
  if (opt_data.data.templateData.template) {
    jive.shared.soy.render({templateName: opt_data.data.templateData.template, data: (function() { var map = {}; var pairs = [['data', opt_data.data.templateData]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: false}, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-action-result" style="">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.inbox.error_performing_action'),[])), '</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.actionQueueItemDetails = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(opt_data.actionQueueItem.details));
  return opt_sb ? '' : output.toString();
};


jive.eae.actionqueue.guestActions = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<body class="j-body-inbox j-body-inbox-guest"><header class="j-page-header"><h1>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.actions'),[])), '</h1></header><div class="j-login-prompt">');
  jive.guest.page.whyLoginOrRegister({accountCreationEnabled: opt_data.accountCreationEnabled, validationEnabled: opt_data.validationEnabled, reasons: '<div class="j-rc5"><h3>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.action.guest.action'),[])) + '</h3><img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl('/images/apps/app-actions.png')) + '" class="j-aq-screenshot"/><ul class="j-simple-list"><li>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.action.guest.tips.actions'),[])) + '</li><li>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.action.guest.tips.notifications'),[])) + '</li><li>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.action.guest.tips.tasks'),[])) + '</li><li>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.action.guest.tips.everything'),[])) + '</li></ul></div>'}, output);
  output.append('</div></body>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from event-update-action.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.notificationqueue.item.eventDeleteNotification');
goog.provide('jive.eae.notificationqueue.item.eventUpdateNotification');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.actionqueue.actionQueueItemAction');
goog.require('jive.shared.displayutil.renderIconElement');


jive.eae.notificationqueue.item.eventUpdateNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data event-update clearfix"><h4 class="j-aq-header font-color-meta"><span class="jive-icon-med jive-icon-gear"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.notification.event_update.label'),[])), '</h4><p><a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.data.objData.href)), '" class="title">');
  if (opt_data.data.objData.iconElement) {
    jive.shared.displayutil.renderIconElement({icon: opt_data.data.objData.iconElement}, output);
  } else {
    output.append('<span class="', soy.$$escapeHtml(opt_data.data.objData.iconCSS), '"></span>');
  }
  output.append(soy.$$escapeHtml(opt_data.data.objData.displayName), '</a> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.notification.event_update.text'),[])), '</p><div class="j-aq-actions clearfix">');
  var actionList21 = opt_data.data.actions;
  var actionListLen21 = actionList21.length;
  for (var actionIndex21 = 0; actionIndex21 < actionListLen21; actionIndex21++) {
    var actionData21 = actionList21[actionIndex21];
    jive.eae.actionqueue.actionQueueItemAction({action: actionData21}, output);
  }
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.notificationqueue.item.eventDeleteNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-aq-av clearfix"><h4 class="j-aq-header font-color-meta"><span class="jive-icon-med jive-icon-gear"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.notification.event_delete.label'),[])), '</h4><p>');
  if (opt_data.data.objData.iconElement) {
    jive.shared.displayutil.renderIconElement({icon: opt_data.data.objData.iconElement}, output);
  } else {
    output.append('<span class="', soy.$$escapeHtml(opt_data.data.objData.iconCSS), '"></span>');
  }
  output.append(soy.$$escapeHtml(opt_data.data.objData.displayName), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.notification.event_delete.text'),[])), '</p><div class="j-aq-actions clearfix">');
  var actionList42 = opt_data.data.actions;
  var actionListLen42 = actionList42.length;
  for (var actionIndex42 = 0; actionIndex42 < actionListLen42; actionIndex42++) {
    var actionData42 = actionList42[actionIndex42];
    jive.eae.actionqueue.actionQueueItemAction({action: actionData42}, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from configuration.soy.
// Please don't edit this file by hand.

goog.provide('jive.antivirus.configurationPage');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.resourceInlineJs');


jive.antivirus.configurationPage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<head><title>', soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.configuration.title'),[])), '</title><meta name="description" content="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.configuration.description'),[])), '" />');
  jive.shared.soy.resourceInlineJs({code: 'var avConfiguration = new jive.antivirus.configuration.Main();'}, output);
  output.append('</head><body class="j-body-home j-body-antivirus"><div class="j-layout j-layout-sl clearfix j-contained" id="j-antivirus-main"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.manage.title'),[])), '"><ul id="j-home-side-nav" class="j-homenav"><li id="jive-nav-link-configuration" class="j-js-side-nav-item j-homenav-item selected" data-source="all"><span class="jive-icon-med jive-icon-moderate j-homenav-icon"></span><a href="/antivirus-configuration.jspa" class="j-homenav-link j-js-side-nav-link j-ui-elem"><span class="nav-link lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.configuration.label'),[])), '</span></a></li></ul></nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l"><span class="antivirus-success-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.configuration.successful.message'),[])), '</span><span class="antivirus-error-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.configuration.error.message'),[])), '</span><form action="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/')), '" method="post" id="antivirus-edit-form" name="settingsform" enctype="multipart/form-data" autocomplete="off"><div class="jive-table"><table cellpadding="3" cellspacing="2" class="jive-edit-antivirus"><tbody><tr><td class="jive-antivirus-label jive-label-required"><label for="enabled">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.enabled.label'),[])), ' <span class="required">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</label></td><td class="jive-antivirus-edit-field"><input type="radio" name="enabled" id="enabled-true" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.yes'),[])), '"><label for="enabled-true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.yes'),[])), '</label><br/><input type="radio" name="enabled" id="enabled-false" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.no'),[])), '"><label for="enabled-false">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.no'),[])), '</label></td><td class="jive-antivirus-edit-desc"><span class="jive-form-instructions font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.enabled.description'),[])), '</span></td></tr><tr><td class="jive-antivirus-label jive-label-required"><label for="uri">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.uri.label'),[])), ' <span class="required">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</label></td><td class="jive-antivirus-edit-field"><input type="text" name="uri" size="40" id="uri"></td><td class="jive-antivirus-edit-desc"><span class="jive-form-instructions font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.uri.description'),[])), '</span></td></tr><tr><td class="jive-antivirus-label jive-label-required"><label for="notifyAuthor">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.notifyAuthor.label'),[])), ' <span class="required">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</label></td><td class="jive-antivirus-edit-field"><input type="radio" name="notifyAuthor" id="notifyAuthor-true" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.yes'),[])), '"><label for="notifyAuthor-true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.yes'),[])), '</label><br/><input type="radio" name="notifyAuthor" id="notifyAuthor-false" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.no'),[])), '"><label for="notifyAuthor-false">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.no'),[])), '</label></td><td class="jive-antivirus-edit-desc"><span class="jive-form-instructions font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.notifyAuthor.description'),[])), '</span></td></tr><tr><td class="jive-antivirus-label jive-label-required"><label for="scanTimeout">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.scanTimeout.label'),[])), ' <span class="required">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.required.parens'),[])), '</span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), '</label></td><td class="jive-antivirus-edit-field"><input type="text" name="scanTimeout" size="40" id="scanTimeout"></td><td class="jive-antivirus-edit-desc"><span class="jive-form-instructions font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.scanTimeout.description'),[])), '</span></td></tr><tr><td>&nbsp;</td><td class="jive-edit-antivirus-submit" colspan="2"><input type="submit" name="save" class="jive-form-button-submit j-btn-callout" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.save'),[])), '"><input type="submit" name="cancel" class="jive-form-button-cancel" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '"></td></tr></tbody></table></div></form></div></div></div></body>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace('antivirus.configuration');

jive.antivirus.configuration.AntivirusConfigurationSource = jive.RestService.extend(function(protect) {
	protect.resourceType = "antivirusConfiguration";
    protect.pluralizedResourceType = protect.resourceType;
    
    var serviceUrl = _jive_base_url + "/api/core/ext/antivirus/v3/admin/antivirus/configuration/";
	
	this.getConfiguration = function(fields, promise) {
	    if (!promise) {
            promise = new jive.conc.Promise();
        }
        
        return this.commonAjaxRequest(promise, 'GET', {url:serviceUrl, data:{fields:fields} || {}});
    };
    
    this.updateConfiguration = function(antivirusConfiguration, fields, promise) {
	    if (!promise) {
            promise = new jive.conc.Promise();
        }
        
        protect.displayGenericErrorMessages = false;
		
        return this.commonAjaxRequest(promise, 'PUT', {url:serviceUrl, data:JSON.stringify(antivirusConfiguration)})
        	.always(function() {
	            protect.displayGenericErrorMessages = true;
	        });
    };
});
;
jive.namespace('antivirus.configuration');

/**
 * Antivirus Configuration
 *
 * @class
 *
 * @depends path=/resources/scripts/jquery/jquery.message.js
 * @depends template=jive.error.rest.soy.*
 */
jive.antivirus.configuration.AntivirusConfigurationView = jive.AbstractView.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this.options = options;
        
        var self = this;
        
    	$j("input.jive-form-button-cancel").live('click', function(clickEvent) {
			window.location = this.form.action;
    		
	        clickEvent.preventDefault();
			return false;
    	});
    	
    	$j("input.jive-form-button-submit").live('click', function(clickEvent) {
			self.configuration.uri = $j('#uri').val();
			self.configuration.scanTimeout = $j('#scanTimeout').val();
			self.configuration.enabled = self.getValue($j('input[name="enabled"]:checked'));
			self.configuration.notifyAuthor = self.getValue($j('input[name="notifyAuthor"]:checked'));
			
			self.emitP('updateConfiguration', self.configuration, "enabled,uri,notifyAuthor,scanTimeout")
				.addCallback(function(configuration) {
					self.displayConfiguration(configuration);
			      	
			      	var message = $j('span.antivirus-success-message').clone().appendTo('#j-dynamic-pane');
			      	$j(message).show();
			      	$j(message).message({
			            style: 'success'
			        });
	            }).addErrback(function(message, code) {
    				console.log(message);
    				
			      	var message = $j('span.antivirus-error-message').clone().appendTo('#j-dynamic-pane');
			      	$j(message).show();
			      	$j(message).message({
			            style: 'error'
			        });
	            });
			
    		
	        clickEvent.preventDefault();
			return false;
    	});
    	
		this.emitP('getConfiguration', "enabled,uri,notifyAuthor,scanTimeout")
			.addCallback(function(configuration) {
				self.displayConfiguration(configuration);
            }).addErrback(function(message, code) {
				console.log(message);
    				
		      	var message = $j('span.antivirus-error-message').clone().appendTo('#j-dynamic-pane');
		      	$j(message).show();
		      	$j(message).message({
		            style: 'error'
		        });
            });
    }
    
    this.displayConfiguration = function(configuration) {
		this.configuration = configuration;
		
		$j('#uri').val(configuration.uri);
		$j('#scanTimeout').val(configuration.scanTimeout);
		$j('#enabled-' + configuration.enabled).attr('checked', 'checked');
		$j('#notifyAuthor-' + configuration.notifyAuthor).attr('checked', 'checked');
    };
    
    this.getValue = function(checkedRadioElement) {
    	var idValue = checkedRadioElement.attr('id');
    	
    	return "true" == idValue.split("-")[1];
    };
});
;
jive.namespace('antivirus.configuration');

/**
 * @depends path=/plugins/antivirus/resources/script/apps/antivirusConfiguration/models/antivirusConfiguration_source.js
 * @depends path=/plugins/antivirus/resources/script/apps/antivirusConfiguration/views/antivirusConfiguration_view.js
 */
jive.antivirus.configuration.Main = jive.oo.Class.extend(function(protect) {

    this.init = function(options) {
    	this.options = options;
    	var main = this;
    	
    	main.model = new jive.antivirus.configuration.AntivirusConfigurationSource(options);
        main.view = new jive.antivirus.configuration.AntivirusConfigurationView(options);
        
		main.view.addListener('getConfiguration', function(fields, promise) {
			main.model.getConfiguration(fields, promise)
                .addCallback(promise.emitSuccess.bind(promise))
			    .addErrback(promise.emitError.bind(promise));
		});
		
		main.view.addListener('updateConfiguration', function(antivirusConfiguration, fields, promise) {
			main.model.updateConfiguration(antivirusConfiguration, fields, promise)
                .addCallback(promise.emitSuccess.bind(promise))
			    .addErrback(promise.emitError.bind(promise));
		});
    };
});
;
// This file was automatically generated from action_queue_item_templates.soy.
// Please don't edit this file by hand.

goog.provide('jive.antivirus.eae.actionqueue.item.violationFoundNotification');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.antivirus.eae.actionqueue.item.violationFoundNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<div class="j-aq-data j-aq-av antivirus-violation-found clearfix"><span class="jive-icon-big jive-icon-warn"></span><h4 class="j-aq-header font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.eae.actionqueue.violation.label'),[])), '</h4><p> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('antivirus.eae.actionqueue.violation.message'),[opt_data.data.fileName,opt_data.data.violations,new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong><a href="' + opt_data.data.scannedObjectData.href + '" class="title"><span class="' + opt_data.data.scannedObjectData.iconCSS + '"></span>' + opt_data.data.scannedObjectData.displayName + '</a></strong>'),new soydata.VERY_UNSAFE.ordainSanitizedHtml('<a href="' + jive.soy.func.buildUrl('/people/' + encodeURIComponent(opt_data.data.contentAuthor.username)) + '" data-username="' + opt_data.data.contentAuthor.username + '" data-avatarId="' + opt_data.data.contentAuthor.avatarID + '" data-userId="' + opt_data.data.contentAuthor.id + '" class="jive-username-link jiveTT-hover-user">' + opt_data.data.contentAuthor.displayName + '</a>')])), ' </p></div><div class="j-act-meta font-color-meta-light">', (opt_data.creationTime) ? '<strong>' + soy.$$escapeHtml(opt_data.creationTime) + '</strong>' : '', '</div>');
  if (opt_data.renderLocation == 'actions') {
    output.append('<div class="j-aq-actions clearfix">');
    if (opt_data.data.actionable) {
      var actionList19 = opt_data.data.actions;
      var actionListLen19 = actionList19.length;
      for (var actionIndex19 = 0; actionIndex19 < actionListLen19; actionIndex19++) {
        var actionData19 = actionList19[actionIndex19];
        output.append((actionData19.href) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(actionData19.href)) + '" class="j-btn-global j-action-button">' + soy.$$escapeHtml(actionData19.name) + '</a>' : '<a href="#" name="' + soy.$$escapeHtmlAttribute(actionData19.code) + '" class="j-btn-global j-action-button">' + soy.$$escapeHtml(actionData19.name) + '</a>');
      }
    } else if (opt_data.data.actionTakenKey) {
      output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.action.taken'),[])), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.data.actionTakenKey),[])));
    }
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};

;
jive.namespace('antivirus');

jive.antivirus.AntivirusSource = jive.RestService.extend(function(protect) {
	protect.resourceType = "scanRecord";
    protect.pluralizedResourceType = protect.resourceType;
    
    var serviceUrl = _jive_base_url + "/api/core/ext/antivirus/v3/antivirus/";
	
	this.getScanRecord = function(scannedObjectType, scannedObjectID, fields, promise) {
	    if (!promise) {
            promise = new jive.conc.Promise();
        }
        
		var url = serviceUrl + scannedObjectType + "/" + scannedObjectID;
        
        return this.commonAjaxRequest(promise, 'GET', {url:url, data:{fields:fields} || {}});
    };
    
    this.scan = function(scannedObjectType, scannedObjectID, fields, promise) {
	    if (!promise) {
            promise = new jive.conc.Promise();
        }
    
		var url = serviceUrl + scannedObjectType + "/" + scannedObjectID;

		protect.displayGenericErrorMessages = false;
		
        return this.commonAjaxRequest(promise, 'PUT', {url:url, data:{fields:fields} || {}})
					.always(function() {
			            protect.displayGenericErrorMessages = true;
			        });
    };
});
;
jive.namespace('antivirus');

jive.antivirus.AntivirusView = jive.AbstractView.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this.options = options;
        
        this.interceptAttachmentLinks();
		this.interceptDocumentBodyLinks();
    }
    
    this.interceptAttachmentLinks = function() {
    	var view = this;
    	
    	$j("div.jive-attachments li").each(function(index) {
	    	var $container = $j(this);
	    	var scannedObjectType = 13;
	    	var scannedObjectID = $container.attr("data-attachmentid");
    	
    		view.interceptScannedObjectLink($container, scannedObjectType, scannedObjectID, "div.j-attachment-info span.j-attach-meta");
    	});
	};
	
    this.interceptDocumentBodyLinks = function() {
    	var view = this;
    	
    	$j("div.jive-wiki-body-download").each(function(index) {
	    	var $container = $j(this);
	    	var scannedObjectType = 110;
	    	var scannedObjectID = view.getBodyId($container);
    	
    		view.interceptScannedObjectLink($container, scannedObjectType, scannedObjectID, "span.jive-wiki-body-file span.jive-wiki-body-file-actions");
    	});
	};
    
    this.interceptScannedObjectLink = function($container, scannedObjectType, scannedObjectID, scanStatusTextInputSelector, scanOnDownloadHandler, startDownlaod) {
    	var view = this;
    	
    	if (!scanOnDownloadHandler) {
    		scanOnDownloadHandler = this.getScanOnDownloadHandler($container, scanStatusTextInputSelector, scannedObjectType, scannedObjectID);
    		
	    	$container.find("a").each(function() {
				var $scanObjectLink = $j(this);
	
				$scanObjectLink.click(scanOnDownloadHandler);
			});
    	}

		view.emitP('getScanRecord', scannedObjectType, scannedObjectID, "status,enabled,preventDownload,rescannable,labelKey,descriptionKey,lastScanDate")
			.addCallback(function(scanRecord) {
				var $scanObjectLink;
				
    			$container.find("a").each(function() {
    				$scanObjectLink = $j(this);
			
    				if (scanRecord.preventDownload) {
	    				if (!scanRecord.rescannable) {
	    					var $linkClass = $scanObjectLink.attr("class");
						    $scanObjectLink.after('<span class="' + $linkClass + '">' + $scanObjectLink.html() + '</span>');
						    $scanObjectLink.remove();
					    }
					} else {
						$scanObjectLink.unbind('click', scanOnDownloadHandler);
					}
				});

				if (scanRecord.enabled || (scanRecord.preventDownload && !scanRecord.rescannable)) {
					$container.find(scanStatusTextInputSelector).after('<span class="j-antivirus j-antivirus-' + scanRecord.status + '"><strong>' + jive.i18n.getMsg(scanRecord.labelKey) + '</strong> ' + jive.i18n.i18nText(jive.i18n.getMsg(scanRecord.descriptionKey), [scanRecord.lastScanDate]) + '</span>');
				}
				
				if (scannedObjectType == 110 && (scanRecord.preventDownload && !scanRecord.rescannable)) {
					$container.find(scanStatusTextInputSelector).remove();
				}
				
				if ($scanObjectLink && startDownlaod) {
					window.location = $scanObjectLink.attr("href");
				}
            }).addErrback(function(message, code) {
    			$container.find("a").each(function() {
    				$scanObjectLink = $j(this);
    				
					var $linkClass = $scanObjectLink.attr("class");
				    $scanObjectLink.after('<span class="' + $linkClass + '">' + $scanObjectLink.html() + '</span>');
				    $scanObjectLink.remove();
				});
            });
	};
	
	this.getScanOnDownloadHandler = function($container, scanStatusTextInputSelector, scannedObjectType, scannedObjectID) {
		var view = this;
		var scanning = false;
		
	    var scanOnDownloadHandler = function(clickEvent) {
	        if (!scanning) {
	        	scanning = view.scanStarting($container);
	        	
		        var $linkClicked = $j(clickEvent.currentTarget);
		    		    	
				view.emitP('scan', scannedObjectType, scannedObjectID, "status,preventDownload")
					.addCallback(function(scanRecord) {
						scanning = view.scanComplete($container);
			    		view.interceptScannedObjectLink($container, scannedObjectType, scannedObjectID, scanStatusTextInputSelector, scanOnDownloadHandler, !scanRecord.preventDownload);
		            }).addErrback(function(message, code) {
		            	if (code == 501) {
		            		// Antivirus Extension is disabled.  Continue with download. VIRUS-161
							var $scanObjectLink;
							
			    			$container.find("a").each(function() {
			    				$scanObjectLink = $j(this);
		
								$scanObjectLink.unbind('click', scanOnDownloadHandler);
							});
							
							$container.find("div.j-antivirus-scanning").remove();
							
							if ($scanObjectLink) {
								window.location = $scanObjectLink.attr("href");
							}
		            	} else {
		            		scanning = view.scanComplete($container);
		                	view.interceptScannedObjectLink($container, scannedObjectType, scannedObjectID, scanStatusTextInputSelector, scanOnDownloadHandler);
		            	}
		            });
            }
	            
	        clickEvent.preventDefault();
			return false;
		};
		
		return scanOnDownloadHandler;
	};
	
	this.scanStarting = function($container) {
		$container.find(".j-antivirus").each(function() {
			var $scanStatusText = $j(this);
			$scanStatusText.after('<div class="j-antivirus-scanning"><div><strong>' + jive.i18n.getMsg('antivirus.scanning.text') + '</strong></div></div>');
			$scanStatusText.remove();
		});
		
		return true;
	};
	
	this.scanComplete = function($container) {
		$container.find(".j-antivirus-scanning").each(function() {
			var $scanStatusText = $j(this);
			$scanStatusText.remove();
		});
		
		return false;
	};
	
	this.getBodyId = function(bodyContainer) {
		var $bodyContainer = $j(bodyContainer);
	
		var bodyHref = $bodyContainer.find("a").first().attr("href");
		
		var path = bodyHref.split("/");
		
		if (path.length > 2) {
			var docId = path[path.length - 2];
			var docIds = docId.split("-");
			
			if (docIds.length > 1) {
				var bodyId = docIds[docIds.length - 1];
				return bodyId;
			}
		}
		
		return;	
	};
});
;
jive.namespace('antivirus');

/**
 * @depends path=/plugins/antivirus/resources/script/apps/antivirus/models/antivirus_source.js
 * @depends path=/plugins/antivirus/resources/script/apps/antivirus/views/antivirus_view.js
 */
jive.antivirus.Main = jive.oo.Class.extend(function(protect) {

    this.init = function(options) {
    	this.options = options;
    	var main = this;
    	
    	main.model = new jive.antivirus.AntivirusSource(options);
        main.view = new jive.antivirus.AntivirusView(options);
        
		main.view.addListener('getScanRecord', function(scannedObjectType, scannedObjectID, fields, promise) {
			main.model.getScanRecord(scannedObjectType, scannedObjectID, fields, promise)
                .addCallback(promise.emitSuccess.bind(promise))
			    .addErrback(promise.emitError.bind(promise));
		});
		
		main.view.addListener('scan', function(scannedObjectType, scannedObjectID, fields, promise) {
			main.model.scan(scannedObjectType, scannedObjectID, fields, promise)
                .addCallback(promise.emitSuccess.bind(promise))
			    .addErrback(promise.emitError.bind(promise));
		});
    };
});
;
// This file was automatically generated from assignments.soy.
// Please don't edit this file by hand.

goog.provide('jive.cln.place.assignments');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.place.head');
goog.require('jive.place.header');
goog.require('jive.skin.template.main');


jive.cln.place.assignments = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param9 = new soy.StringBuilder();
  jive.place.head(opt_data, param9);
  param9.append('<link rel="stylesheet" href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-widgets.css'))), '" type="text/css" media="all" />');
  var param15 = new soy.StringBuilder();
  jive.place.header(opt_data, param15);
  param15.append('<div class="j-layout j-layout-l j-contained j-contained-tabs-place j-rc4 clearfix"><div class="j-colum-wrap-l"><div class="j-column j-column-l"><div id="jive-view-assignments-container"><div id="panelLoading"><p class="font-color-meta-light"><img src="/images/jive-image-loading.gif" alt=""/>Loading...</p></div>', (opt_data.ie8OrBelow) ? '<form id="assignmentsIFrameForm" action="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.mentorGroupIFrameURL)) + '" method="POST" target="assignmentsIFrame"></form><iframe name="assignmentsIFrame" id="assignmentsIFrame" ></iframe><script type="text/javascript">$j(function(){$j("#assignmentsIFrameForm").submit();});<\/script>' : '<iframe id="assignmentsIFrame" src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.mentorGroupIFrameURL)) + '" ></iframe>', '<script type="text/javascript">$j(function(){$j("#assignmentsIFrame").load(function(){$j("#assignmentsIFrame").fadeIn(); $j("#panelLoading").fadeOut();});});<\/script></div></div></div></div>');
  jive.skin.template.main(soy.$$augmentMap(opt_data.templateView, {title: soy.$$filterNoAutoescape(opt_data.place.name), canonicalUrl: opt_data.canonicalUrl, metaDescription: opt_data.place.description, selectedLinkID: 'jive-nav-link-place', headContent: param9.toString(), bodyClass: 'j-body-place', bodyContent: param15.toString()}), output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from subscriptions.soy.
// Please don't edit this file by hand.

goog.provide('jive.subscriptions.body');
goog.provide('jive.subscriptions.label');
goog.provide('jive.subscriptions.tableHeader');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.subscriptions.body = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-layout j-layout-l j-contained j-contained-tabs j-contained-tabs-profile j-rc5 clearfix"><div class="j-column-wrap-l"><div class="j-column j-column-l"><div id="jive-subscriptions-list-container">');
  if (opt_data.enrollmentItemsMap != null && soy.$$getMapKeys(opt_data.enrollmentItemsMap).length > 0) {
    output.append('<div class="jive-box"><div class="jive-box-body"><div class="jive-box-body-empty"><p>', soy.$$escapeHtml(), '</p></div></div></div><div class="jive-table" style="font-size: 9.3pt;table-layout: fixed;word-wrap: break-word;"><table>');
    jive.subscriptions.tableHeader(null, output);
    output.append('<tbody>');
    if (opt_data.enrollmentItemsMap['single']) {
      var enrollmentItemList13 = opt_data.enrollmentItemsMap['single'];
      var enrollmentItemListLen13 = enrollmentItemList13.length;
      for (var enrollmentItemIndex13 = 0; enrollmentItemIndex13 < enrollmentItemListLen13; enrollmentItemIndex13++) {
        var enrollmentItemData13 = enrollmentItemList13[enrollmentItemIndex13];
        output.append('<tr><td class="jive-table-cell-modified">', soy.$$escapeHtml(enrollmentItemData13.partNo), '</td><td class="jive-table-cell-modified">', soy.$$escapeHtml(enrollmentItemData13.title), '</td><td class="jive-table-cell-modified">', soy.$$escapeHtml(enrollmentItemData13.sessionOfferingDetail.startDate), (enrollmentItemData13.subscriptionExpiryDate != null) ? '- ' + soy.$$escapeHtml(soy.$$truncate(enrollmentItemData13.subscriptionExpiryDate, 10, false)) : '- ' + soy.$$escapeHtml(soy.$$truncate(enrollmentItemData13.sessionOfferingDetail.endDate, 10, false)), '</td><td class="jive-table-cell-modified" style="padding-left: 0">', (enrollmentItemData13.expired && enrollmentItemData13.launchURL == 'false') ? '<span style="padding-left: 7px;">Expired</span>' : '<input type="button" value="Launch Learning" ' + ((enrollmentItemData13.launchURL == 'false') ? ' disabled="disabled"' : ' onclick="location.href=\'' + soy.$$escapeHtmlAttribute(soy.$$escapeJsString(enrollmentItemData13.deepLink)) + '\';"') + '>', '</td></tr>');
      }
    }
    var bundleKeyList45 = soy.$$getMapKeys(opt_data.enrollmentItemsMap);
    var bundleKeyListLen45 = bundleKeyList45.length;
    for (var bundleKeyIndex45 = 0; bundleKeyIndex45 < bundleKeyListLen45; bundleKeyIndex45++) {
      var bundleKeyData45 = bundleKeyList45[bundleKeyIndex45];
      var enrollmentItemList46 = opt_data.enrollmentItemsMap[bundleKeyData45];
      var enrollmentItemListLen46 = enrollmentItemList46.length;
      for (var enrollmentItemIndex46 = 0; enrollmentItemIndex46 < enrollmentItemListLen46; enrollmentItemIndex46++) {
        var enrollmentItemData46 = enrollmentItemList46[enrollmentItemIndex46];
        output.append((enrollmentItemIndex46 == 0) ? '<tr><td class="jive-table-cell-modified" style="width: 137px;">' + soy.$$escapeHtml(enrollmentItemData46.packageId) + '</td><td class="jive-table-cell-modified" colspan="3"><b>' + soy.$$escapeHtml(enrollmentItemData46.packageTitle) + '</b><table class="jive-table" style="table-layout: fixed;word-wrap: break-word;font-size: 9.3pt">' : '', '<tr>');
        var isSubscriptionExpired__soy55 = enrollmentItemData46.expired && enrollmentItemData46.launchURL == 'false';
        output.append('<td class="jive-table-cell-modified" style="width: 45%">', soy.$$escapeHtml(enrollmentItemData46.title), '</td><td class="jive-table-cell-modified" style="width: 20%;', (isSubscriptionExpired__soy55) ? '_padding-left:37px!important;*padding-left:37px!important;' : '', '">', soy.$$escapeHtml(enrollmentItemData46.sessionOfferingDetail.startDate), (enrollmentItemData46.subscriptionExpiryDate != null) ? '- ' + soy.$$escapeHtml(soy.$$truncate(enrollmentItemData46.subscriptionExpiryDate, 10, false)) : '- ' + soy.$$escapeHtml(soy.$$truncate(enrollmentItemData46.sessionOfferingDetail.endDate, 10, false)), '<td class="jive-table-cell-modified" style="width: 20%;padding-left: 0">', (isSubscriptionExpired__soy55) ? '<span style="padding-left: 9px;_padding-left: 19px!important;*padding-left: 19px!important;">Expired</span>' : '<input type="button" value="Launch Learning" ' + ((enrollmentItemData46.launchURL == 'false') ? ' disabled="disabled"' : ' onclick="location.href=\'' + soy.$$escapeHtmlAttribute(soy.$$escapeJsString(enrollmentItemData46.deepLink)) + '\';"') + '>', '</td></tr>', (enrollmentItemIndex46 == enrollmentItemListLen46 - 1) ? '</table></td></tr>' : '');
      }
    }
    output.append('</tbody></table></div>');
  } else {
    output.append('<div class="jive-box"><div class="jive-box-body"><div class="jive-box-body-empty"><p>', (opt_data.enrollmentItemsMap != null) ? soy.$$escapeHtml() : soy.$$escapeHtml(), '</p></div></div></div>');
  }
  output.append('</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.subscriptions.tableHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<thead><tr><th style="width: 15%;">Part Number</th><th style="width: 45%;">Title</th><th style="width: 20%;">Access Duration</th><th style="width: 20%;">Access</th></tr></thead>');
  return opt_sb ? '' : output.toString();
};


jive.subscriptions.label = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<script type="text/javascript">$j( \'#j-header #j-satNav-wrap .js-satellite-nav-container\' ).css( \'min-width\', \'144px\' ); $j(\'#j-satNav > .nav-link\').append(\'<span class="premium-subscriber-label">', soy.$$escapeJsString(jive.i18n.i18nText(jive.i18n.getMsg('premium.subscriber.label'),[])), '</span>\');<\/script>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from subscriptions.soy.
// Please don't edit this file by hand.

goog.provide('jive.people.profile.subscriptions');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.people.profile.decorator');
goog.require('jive.people.profile.header');
goog.require('jive.subscriptions.body');


jive.people.profile.subscriptions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param4 = new soy.StringBuilder();
  jive.people.profile.header(opt_data, param4);
  jive.subscriptions.body(opt_data, param4);
  jive.people.profile.decorator(soy.$$augmentMap(opt_data, {bodyClass: '', bodyContent: param4.toString()}), output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from rightRail.soy.
// Please don't edit this file by hand.

goog.provide('jive.cln.content.rightrail');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.cln.content.rightrail = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t', (opt_data.rightRail) ? '<script type="text/javascript">$j(document).ready( function() {var sidebarcol = $j(\'.j-content-extras\'); sidebarcol.prepend(\'' + soy.$$escapeJsString(opt_data.rightRailHTML) + '\');});<\/script>' : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from refreshAkamaiToken-template-definition.soy.
// Please don't edit this file by hand.

goog.provide('cln.content.refreshAkamaiToken');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


cln.content.refreshAkamaiToken = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<script type="text/javascript">var newAkamaiToken =  ', soy.$$escapeJsValue(opt_data.refreshAkamaiToken), ';<\/script>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from cisco-link-macro-template-definition.soy.
// Please don't edit this file by hand.

goog.provide('cisco.content.link');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


cisco.content.link = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<script type="text/javascript">$j(document).ready( function() {$j(\'.tooltip\').tooltipster({arrow: false, maxWidth: 500, position: \'right\', theme: \'tooltipster-shadow\'});', (opt_data.isPremiumUser) ? '$j("a[tier-info$=\'premium\'].cisco-visibility-premium").show(); $j("a[tier-info$=\'potential\'].cisco-visibility-potential").hide();' + ((opt_data.userTier) ? '$j("a[tier-info^=\'premium-' + soy.$$escapeJsString(opt_data.userTier) + '-' + soy.$$escapeJsString(opt_data.userTierSortOrder) + '\']").show(); $j("a[tier-info^=\'potential-' + soy.$$escapeJsString(opt_data.userTier) + '-' + soy.$$escapeJsString(opt_data.userTierSortOrder) + '\']").show(); $j("a[tier-info^=\'premium-\']").each(function(){var tierInfoAttr = $j(this).attr("tier-info"); if(tierInfoAttr.indexOf(\'' + soy.$$escapeJsString(opt_data.userTier) + '\')>-1){$j(this).show();}var startIndexSortOrder = tierInfoAttr.lastIndexOf("-") + 1; var linkSortOrder = tierInfoAttr.substring(startIndexSortOrder, tierInfoAttr.length); var potentialBuyerLinkTierInfoAttr = tierInfoAttr.replace("premium", "potential"); if(linkSortOrder <= ' + soy.$$escapeJsValue(opt_data.userTierSortOrder) + '){$j(this).show(); $j("a[tier-info^=\'"+potentialBuyerLinkTierInfoAttr+"\']").hide();}else{$j(this).hide(); $j("a[tier-info^=\'"+potentialBuyerLinkTierInfoAttr+"\']").show();}});' : '') : '$j("a[tier-info$=\'potential\'].cisco-visibility-potential").show(); $j(".cisco-visibility-premium").hide();', '});<\/script>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from sitecatalyst.soy.
// Please don't edit this file by hand.

goog.provide('cisco.content.sitecatalyst');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


cisco.content.sitecatalyst = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<script language="JavaScript" type="text/javascript">var pageName = \'\';', (opt_data.contentCode) ? 'pageName += ' + soy.$$escapeJsValue(opt_data.contentCode) + ';' : '', (opt_data.contentID) ? 'pageName += \'-\' + ' + soy.$$escapeJsValue(opt_data.contentID) + ';' : '', (opt_data.contentTitle) ? 'var contentTitleStr = \'\' + ' + soy.$$escapeJsValue(opt_data.contentTitle) + '; var contentTitleAsciiOnly = contentTitleStr.replace(/[^\\x00-\\x7F]/g, ""); pageName += \'-\' + contentTitleAsciiOnly;' : '', 'var webData = {siteCode:"CLN", pageName:pageName, pageType:"", contentType:', soy.$$escapeJsValue(opt_data.contentType), ', contentCode:', soy.$$escapeJsValue(opt_data.contentCode), ', siteSection:', soy.$$escapeJsValue(opt_data.siteSection), ', site:"CLN", environment:', soy.$$escapeJsValue(opt_data.environment), ', language:"en", loginStatus:', soy.$$escapeJsValue(opt_data.loginStatus), ', userType:', soy.$$escapeJsValue(opt_data.userType), ', hier1:', soy.$$escapeJsValue(opt_data.breadcrumb), ', events: ["pageView"]};', (! opt_data.siteSection) ? 'webData.siteSection = document.title;' : '', '<\/script>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from congrats.soy.
// Please don't edit this file by hand.

goog.provide('jive.cln.place.congrats.popup');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.resourceInlineJs');


jive.cln.place.congrats.popup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.showPopup) {
    jive.shared.soy.resourceInlineJs({code: 'console.log("should show popup!"); console.log(\'qqq Firing modal\'); var $wrapper = $j(document.createElement(\'div\')); var modalHtml = `<div class="jive-modal-ciscovideomacro not-practice-quiz cln-lightboxmacro"><h2 class="ciscovideomaro-lb-title">The Cisco Learning Network</h2><a class="j-icon-close jive-close"></a><p>Congratulations, you now have a free 7 day Premium Trial!</p></div>`; $wrapper.html(modalHtml); $wrapper.lightbox_me({destroyOnClose: true, closeSelector: \'.jive-close\'});'}, output);
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from nitro-admin.soy.
// Please don't edit this file by hand.

goog.provide('jive.nitro.admin.nitroAdminModal');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.nitro.admin.nitroAdminModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal" id="jive-nitro-admin-modal"><header><h2 class="jive-modal-title">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nitro.admin.title'),[])), '</h2></header><a class="j-modal-close-top jive-close close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content clearfix"><iframe src="', soy.$$escapeHtml(opt_data.baseUrl), '/?userName=', soy.$$escapeHtml(opt_data.username), '&password=', soy.$$escapeHtml(opt_data.password), '&autoLogin=true&mode=', soy.$$escapeHtml(opt_data.mode), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nitro.admin.title'),[])), '</iframe></section></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace('nitro.admin');

/**
 * @depends path=/resources/scripts/jive/json-security.js
 */

jive.nitro.admin.NitroAdminSource = jive.RestService.extend(function(protect, _super) {
	protect.init = function(options) {
		this.options = options;
	};

	this.loadNitroAdminConfig = function() {
		var promise = new jive.conc.Promise();
		var error = this.errorFinding;
		var url = jive.rest.url("/nitro/admin/config");

		$j.ajax({
			url: url,
			type: "GET",
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			success: function(data) {
				promise.emitSuccess(data);
			},
			error: this.errorCallback(promise, error)
		});

		return promise;
	};
});

;
jive.namespace('nitro.admin');

jive.nitro.admin.NitroAdminView = jive.oo.Class.extend(function(protect, _super) {
	jive.conc.observable(this);

	this.init = function(options) {
		var view = this;
		this.options = options;

		$j(document).ready(function() {
			view.attachLinkHandler();
		});
	};

	protect.attachLinkHandler = function() {
		var view = this;

		$j('body').on('click', '#jive-nav-link-nitro-admin' , function(e) {
			view.emitP('nitroAdminLinkClicked').addCallback(function(config) {
				$j('#j-satNav-menu').trigger('close');
				view.openModal(config);
				e.preventDefault();
			}).addErrback(function() {
				console.log('promise got an errback');
			});
		});
	};

	protect.openModal = function(config) {
		var view = this;

		if (!$j('#jive-nitro-admin-modal').is(':visible')) {
			var modal = $j(jive.nitro.admin.nitroAdminModal(config));
			$j('body').append(modal);

			view.populateModal(modal.filter(':first'), function() {
				// on close callback
			});
		}
	};

	protect.populateModal = function(modal, callback) {
		modal.lightbox_me({
			onClose: function() {
				callback();
				modal.remove();
			},
			scrollWithPage: false,
			centered: true,
			destroyOnClose: true,
			closeClick: false
		});
	};
});

;
/**
 * @depends path=/plugins/gamification/resources/script/apps/admin/models/admin_source.js plugin=gamification
 * @depends path=/plugins/gamification/resources/script/apps/admin/views/admin_view.js plugin=gamification
 */
jive.namespace('nitro.admin');

jive.nitro.admin.Main = jive.oo.Class.extend(function(protect, _super) {

	this.init = function(options) {
		var main = this;
		this.options = options;

		this.nitroAdminSource = new jive.nitro.admin.NitroAdminSource(options);
		this.nitroAdminView = new jive.nitro.admin.NitroAdminView(options);

		this.nitroAdminView.addListener('nitroAdminLinkClicked', function(promise) {
			main.nitroAdminSource.loadNitroAdminConfig().addCallback(function (config) {
				promise.emitSuccess(config);
			}).addErrback(function (error, status) {
				console.log('got an error in main.js');
				promise.emitError(error, status);
			});
		});
	};
});

;
/**
 * @depends path=/plugins/gamification/resources/script/apps/admin/main.js plugin=gamification
 */

$j(document).ready(function() {
	new jive.nitro.admin.Main({});
});

;
jive.namespace("ShareApp");define("apps/share/views/share_view",["apps/userpicker/main","soy!jive.error.rest.soy.errorFinding","soy!jive.error.rest.soy.errorUpdating","soy!jive.soy.share.share","soy!jive.soy.share.shareConfirmation","soy!jive.soy.share.secretGroupMessage","soy!jive.soy.share.usersNotRelated","soy!jive.soy.share.userWithoutPermission","soy!jive.soy.share.listWithoutPermission","jquery/jquery.lightbox_me"],function(a,e,c,f,d,h,i,b,g){jive.ShareApp.ShareView=jive.oo.Class.extend(function(j){jive.conc.observable(this);this.init=function(){this.recipients=[];this.options={}};j.submitShare=function(p,l,n,o){var k=this;var m={message:$j("#jive-send-content-not-message").val(),recipients:k.buildRecipientArray(),subject:$j("#jive-send-content-not-subject").val()};m.message=m.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");k.emitP("share",l,p,m).addCallback(function(){$j(d({objectName:o})).message({style:"success"});n.trigger("close");if(k.recipients.some(function(q){return q.id!==window._jive_current_user.ID})){jive.dispatcher.dispatch("trial.share.created");jive.dispatcher.dispatch("trial.updatePercentComplete")}k.recipients=[]}).addErrback(function(r){var q=r?$j("<p>"+r+"</p>"):$j(c({href:window.location}));q.message({showClose:true,style:"error"});n.find("input, button").prop("disabled",false)})};j.buildRecipientArray=function(){this.checkExternalUsers(this.userPicker.getSelectedUsersAndLists(true));return this.recipients.map(function(k){return{identifier:k.id!=-1?k.id:k.email,notified:k.notified}})};j.checkExternalUsers=function(l){$j("#jive-include-attach-div").hide();l.users.forEach(function(m){if(m.id==-1||!m.entitled){$j("#jive-include-attach-div").show()}});this.recipients=this.recipients.filter(function(m){return l.users.some(function(n){return n.email===m.email})});var k=this.addedRecipients(l.users);this.recipients=this.recipients.concat(k)};j.addedRecipients=function(l){var k=this;return l.filter(function(m){return !k.recipients.some(function(n){return m.email===n.email})}).map(function(m){return $j.extend({},m,{notified:(!k.options.invitationsEnabled)&&!m.partner&&!m.external})})};j.recipient=function(k){return this.recipients.filter(function(l){return l.email===k})};j.notifyUser=function(k,l){this.recipient(k).forEach(function(m){m.notified=l});$j(".js-notify-user").toggle();$j(".js-unnotify-user").toggle()};this.openShareModal=function(m,l){var k=this;k.emitP("prepareShare",l,m).addCallback(function(q){if(!k.open){k.open=true;if(q.invitationsEnabled){k.options.invitationsEnabled=true}k.recipients=[];if(q.secretGroup){$j(h()).message({showClose:true,style:"error"})}else{var o=$j(f(q));o.lightbox_me({destroyOnClose:true,centered:true,closeClick:false,closeEsc:false,closeFocusSelector:jive.Accessibility.hasStackedFocus()?jive.Accessibility.popFocus():'a[data-command="share"][data-object-id="'+m+'"][data-object-type="'+l+'"]',onLoad:function(){jive.dispatcher.dispatch("trial.share.modal.loaded")},onClose:function(){k.cleanupModal()}});o.find("form").submit(function(){$j(this).find("input,button").prop("disabled",true);k.submitShare(m,l,o,q.objectNameCapital);return false});var n=new a({multiple:true,listAllowed:true,emailAllowed:q.externallyShareable,message:"",object:{objectID:m,objectType:l},entitlement:"VIEW",$input:$j("#share-users"),canInvitePartners:q.externallyShareable,canInviteJustPartners:false,canInvitePreprovisioned:true,relatedMessage:$j(i()),userMessages:[k.getUserPermissionsMessage(q)],listMessages:[k.getListPermissionsMessage(q)],placeholder:" "});n.addListener("selectedUsersChanged",function(r){k.checkExternalUsers(r)});k.userPicker=n;var p=$j("body");p.delegate(".js-notify-user","click",function(r){k.notifyUser($j(this).data("user-identifier"),true);r.preventDefault()});p.delegate(".js-unnotify-user","click",function(r){k.notifyUser($j(this).data("user-identifier"),false);r.preventDefault()})}}}).addErrback(function(o){var n=o?$j("<p>"+o+"</p>"):$j(e({href:window.location}));n.message({showClose:true,style:"error"})})};j.cleanupModal=function(){var k=this;$j(".js-userpicker-user-msg").trigger("close");var l=$j("body");l.undelegate(".js-notify-user","click");l.undelegate(".js-unnotify-user","click");k.open=false};j.getUserPermissionsMessage=function(l){var k=this;return{type:"warn",render:function(m){m.notified=k.recipient(m.email).some(function(o){return o.notified});var n=$j.extend({user:m},l);return b(n)}}};j.getListPermissionsMessage=function(k){return{type:"warn",render:function(){return g(k)}}}});return jive.ShareApp.ShareView});
;
jive.namespace("ShareApp");define("apps/share/models/share_source",["apps/shared/models/rest_service"],function(a){jive.ShareApp.ShareSource=a.extend(function(b){this.init=function(){this.suppressGenericErrorMessages()};this.save=function(c,g,e){var f=new jive.conc.Promise(),d=this;$j.ajax({type:"POST",url:jive.rest.url("/objects/")+c+"/"+g+"/shares",dataType:"json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(h,j,i){if(h){d.merge(e,h)}f.emitSuccess(e)},error:d.errorCallback(f),timeout:30000});return f};this.get=function(c,f){var e=new jive.conc.Promise(),d=this;$j.ajax({type:"GET",url:jive.rest.url("/objects/")+c+"/"+f+"/sharetemplate",dataType:"json",data:{},contentType:"application/json; charset=utf-8",success:function(g,i,h){e.emitSuccess(g)},error:d.errorCallback(e),timeout:30000});return e}});return jive.ShareApp.ShareSource});
;
jive.namespace("ShareApp");define("apps/share/main",["apps/share/models/share_source","apps/share/views/share_view"],function(b,a){jive.ShareApp.Main=jive.oo.Class.extend(function(){this.init=function(e){var d=e||{};var c=d.source||new b();this.view=new a();this.view.addListener("prepareShare",function(f,h,g){c.get(f,h).addCallback(g.emitSuccess.bind(g)).addErrback(g.emitError.bind(g))});this.view.addListener("share",function(f,i,g,h){c.save(f,i,g).addCallback(h.emitSuccess.bind(h).aritize(0)).addErrback(h.emitError.bind(h))})};this.showModal=function(d,c){this.view.openShareModal(d,c)}});return jive.ShareApp.Main});
;
// This file was automatically generated from fewer_meetings.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.quests.fewerMeetings.panelContent');
goog.provide('jive.trial.quests.fewerMeetings.panelTitle');
goog.provide('jive.trial.quests.fewerMeetings.questComplete');
goog.provide('jive.trial.quests.fewerMeetings.questName');
goog.provide('jive.trial.quests.fewerMeetings.questReadyToComplete');
goog.provide('jive.trial.quests.fewerMeetings.tips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.common.groupedUsers');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.trial.recentlyCompleted');


jive.trial.quests.fewerMeetings.questName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.link'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.fewerMeetings.panelTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-quest-group-header js-quest-group-header j-fewer-meetings', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? ' j-quest-complete' : '', (opt_data.panelData.lastViewedQuest == 'HaveFewerMeetingsQuest') ? ' j-active font-color-normal' : '', '" data-id="HaveFewerMeetingsQuest"><span class="lnk"><span class="j-donecheck-sm"></span>');
  jive.trial.quests.fewerMeetings.questName(null, output);
  output.append('<span class="quest-selected"></span></span></a>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.fewerMeetings.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="section clearfix collaboration"', (opt_data.panelData.lastViewedQuest != 'HaveFewerMeetingsQuest') ? ' style="display:none"' : '', 'data-id="HaveFewerMeetingsQuest"><p class="j-vdescription font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.text'),[])), '</p><div class="quest-section clearfix"><div class="j-quest-lcol"><div class="j-quest-video"><div id="wistia_b8c47e6cac" class="j-qvideo"style="width:325px;height:208px;" data-video-width="328" data-video-height="208">&nbsp;</div></div><div class="j-quest-completors"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.recently_completed.text'),[])), '</h4>');
  jive.trial.recentlyCompleted({users: opt_data.questData.recentlyCompleted}, output);
  output.append('</div></div><div class="j-quest-tasks ', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? 'j-quest-complete' : '', '"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tryit.label'),[])), '</h3><div class="j-qtask-list">', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? '<span class="j-completed-ribbon">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.completed.label'),[])) + '</span>' : '', '<ul><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].state), '" data-stepaction="', soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl('/discussion/create.jspa?fromQ=HaveFewerMeetingsQuest&qstep=0')), '"', (opt_data.questData.steps[0].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[0].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.post.title'),[])), '</span>', (opt_data.questData.steps[0].state != 'completed') ? '<strong class="j-qnotstarted font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])) + '</strong><p class="j-quest-text font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.post.text'),[])) + '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])) + '</label></span>' : '<strong class="j-qdone">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])) + '<span class="j-donecheck"></span></strong>' + ((opt_data.questData.steps[0].completionData.forumThreadViewBean) ? '<div class="j-quest-detail"><strong class="j-quest-action">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.youposted.text'),[])) + '</strong><p class="j-quest-output"><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL))) + '" class="j-quest-content"><span class="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.forumThreadViewBean.jiveObjectCSS) + '"></span>' + soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.questData.steps[0].completionData.forumThreadViewBean.htmlSubject, 32)) + '</a></p></div>' : ''), '</li><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[1].state), '" data-stepaction="', (opt_data.questData.steps[0].completionData.forumThreadViewBean) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL + '?fromQ=HaveFewerMeetingsQuest&qstep=1')) : '', '"', (opt_data.questData.steps[1].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[1].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.invite.title'),[])), '</span>');
  if (! opt_data.questData.steps[1].completionData.shareViewBean) {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.invite.text'),[])), '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail share"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.youinvited.text'),[])), '</strong><div class="j-quest-output j-sharees font-color-meta">');
    jive.eae.common.groupedUsers({groupedUserList: opt_data.questData.steps[1].completionData.sharedUsers, groupAfterNum: 3}, output);
    output.append('</div></div>');
  }
  output.append('</li><li class="j-qtask j-', (opt_data.questData.steps[2].completionData.replyCount && opt_data.questData.steps[2].completionData.replyCount < 2) ? 'unavailable' : soy.$$escapeHtmlAttribute(opt_data.questData.steps[2].state), '" data-stepaction="', (opt_data.questData.steps[0].completionData.forumThreadViewBean) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.forumThreadViewBean.jiveObjectURL + '?fromQ=HaveFewerMeetingsQuest&qstep=2')) : '', '"', (opt_data.questData.steps[2].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[2].state == 'available') ? (! (opt_data.questData.steps[2].completionData.replyCount && opt_data.questData.steps[2].completionData.replyCount < 2)) ? 'font-color-link' : '' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.discussdecide.title'),[])), '</span>');
  if (opt_data.questData.steps[2].state != 'completed') {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', (opt_data.questData.steps[2].completionData.replyCount && opt_data.questData.steps[2].completionData.replyCount < 2) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.awaiting.label'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.discussdecide.text'),[])), '</p>', (opt_data.questData.steps[2].completionData.replyCount && opt_data.questData.steps[2].completionData.replyCount < 2) ? '<p class="j-quest-waiting font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.awaiting.text'),[])) + '</p>' : '', '<span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong>');
    if (opt_data.questData.steps[2].completionData.author) {
      output.append('<div class="j-quest-detail"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.youdecided.text'),[])), '</strong><p class="j-quest-output j-correct font-color-meta"><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.questData.steps[2].completionData.url))), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('forum.thrd.correct_answer.link'),[])), '</a> ');
      var param177 = new soy.StringBuilder(' <span class="j-answerer">');
      jive.shared.displayutil.userDisplayNameLink(opt_data.questData.steps[2].completionData.author, param177);
      param177.append('</span>');
      jive.shared.soy.i18nHelper({i18nKey: 'eae.container.by', arg0: param177.toString(), noAutoEscape: true}, output);
      output.append('</p></div>');
    }
  }
  output.append('</li></ul></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.fewerMeetings.tips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.pageID == 'create-discussion') ? (opt_data.renderLocation == 'subject') ? '<div class="j-tips inline js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="subject" style="top: -70px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_title.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_title.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>' : (opt_data.renderLocation == 'body') ? '<div class="j-tips inline js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="body" style="top: 120px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_content.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_content.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 80px"></span></div>' : (opt_data.renderLocation == 'publishbar') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="publishbar" style="bottom: -30px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_location.label'),[opt_data.communityName])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_location.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="bottom: 35px"></span></div>' : (opt_data.renderLocation == 'post') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="post" style="top: -35px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_alldone.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_alldone.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>' : '' : (opt_data.pageID == 'view-discussion') ? (opt_data.renderLocation == 'share') ? '<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="share" style="top: 15px; left: -360px; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_share.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_share.text'),[])) + '</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>' : (opt_data.renderLocation == 'outcome') ? '<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="outcome" style="top: 185px; left: -0px; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_outcome.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.discussion_outcome.text'),[])) + '</p></div><span class="belowArrow pointer" style="left: 30px; top: -9px;"></span></div>' : (opt_data.renderLocation == 'share.modal.users') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: -205px; left: -155px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.share.email.text'),[])) + '</h4></div><span class="j-arrow-righthook white j-qarrow" style="left: 60px; bottom: -75px;"></span></div>' : (opt_data.renderLocation == 'share.modal.message') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 50px; width: 135px; left: -235px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.share.message.text'),[])) + '</h4></div><span class="j-arrow-rightess white j-qarrow" style="right: -35px; top: 0"></span></div>' : (opt_data.renderLocation == 'share.modal.submit') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 270px; width: 240px; left: -55px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.share.button.text'),[])) + '</h4></div><span class="j-arrow-up white j-qarrow" style="left: 77px; top: -30px"></span></div>' : (opt_data.renderLocation == 'answer') ? '<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="answer" style="position: absolute; top: 30px; left: 320px; visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main wide"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.decision.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.decision.text1'),[])) + '</p><p><span class="j-correct-btn-star j-ui-elem"></span><strong class="font-color-okay">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.decision.text2'),[])) + '</strong></p></div><span class="rightArrow pointer" style="left: -9px; top: 63px;"></span></div>' : (opt_data.renderLocation == 'banner') ? '<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.take5.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.take5.text1'),[])) + '</p>' + ((opt_data.nextQuestID) ? '<p><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.take5.text2'),[])) + '</a></strong></p>' : '<p><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/home'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.take5.text3'),[])) + '</a></strong></p>') + '</div><span class="belowArrow pointer" style="left: 170px; top: -9px;"></span></div>' : '' : '');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.fewerMeetings.questComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="font-color-normal j-tips wide j-pop-main"><h4 class="font-face-deco"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.completed.label'),[])), '</strong></h4>', (opt_data.nextQuestID) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.completed.text'),[])) + '</p><p class="j-qlinks"><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.onward.link'),[])) + '</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.later.link'),[])) + '</a></strong></p>' : '<p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.allcompleted.link'),[])) + '</a></strong></p>', '</div><span class="belowArrow pointer" style="top: -9px; left: 235px;"></span></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.fewerMeetings.questReadyToComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-banner-tip j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.close.label'),[])), '</h4><p><strong><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':'HaveFewerMeetingsQuest'}))), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.onward.link'),[])), '</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.fewer_meetings.tip.later.link'),[])), '</a></strong></p></div><span class="belowArrow pointer" style="left: 170px; top: -9px;"></span></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from less_email.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.quests.lessEmail.panelContent');
goog.provide('jive.trial.quests.lessEmail.panelTitle');
goog.provide('jive.trial.quests.lessEmail.questComplete');
goog.provide('jive.trial.quests.lessEmail.questName');
goog.provide('jive.trial.quests.lessEmail.tips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.common.groupedUsers');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.trial.recentlyCompleted');


jive.trial.quests.lessEmail.questName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.title'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.lessEmail.panelTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-quest-group-header js-quest-group-header j-less-email', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? ' j-quest-complete' : '', (opt_data.panelData.lastViewedQuest == 'LessEmailQuest') ? ' j-active font-color-normal' : '', '" data-id="LessEmailQuest"><span class="lnk"><span class="j-donecheck-sm"></span>');
  jive.trial.quests.lessEmail.questName(null, output);
  output.append('<span class="quest-selected"></span></span></a>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.lessEmail.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="section clearfix collaboration"', (opt_data.panelData.lastViewedQuest != 'LessEmailQuest') ? ' style="display:none"' : '', 'data-id="LessEmailQuest"><p class="j-vdescription font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.text'),[])), '</p><div class="quest-section clearfix"><div class="j-quest-lcol"><div class="j-quest-video"><div id="wistia_a26f53f98e" class="j-qvideo" style="width:325px;height:208px;" data-video-width="328" data-video-height="208">&nbsp;</div></div><div class="j-quest-completors"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.recently_completed.text'),[])), '</h4>');
  jive.trial.recentlyCompleted({users: opt_data.questData.recentlyCompleted}, output);
  output.append('</div></div><div class="j-quest-tasks ', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? 'j-quest-complete' : '', '"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tryit.label'),[])), '</h3><div class="j-qtask-list">', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? '<span class="j-completed-ribbon">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.completed.label'),[])) + '</span>' : '', '<ul><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].state), '" data-stepaction="', (opt_data.questData.steps[0].visibility) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl('/document/create.jspa',{'fromQ':'LessEmailQuest','qstep':'0','QVis':opt_data.questData.steps[0].visibility})) : soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl('/document/create.jspa',{'fromQ':'LessEmailQuest','qstep':'0'})), '" ', (opt_data.questData.steps[0].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[0].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.createdoc.title'),[])), '</span>', (opt_data.questData.steps[0].state != 'completed') ? '<strong class="j-qnotstarted font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])) + '</strong><p class="j-quest-text font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.createdoc.text'),[])) + '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])) + '</label></span>' : '<strong class="j-qdone">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])) + '<span class="j-donecheck"></span></strong>' + ((opt_data.questData.steps[0].completionData.documentViewBean) ? '<div class="j-quest-detail"><strong class="j-quest-action">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.createdoc.complete.text'),[])) + '</strong><p class="j-quest-output"><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.documentViewBean.jiveObjectURL))) + '" class="j-quest-content"><span class="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.documentViewBean.jiveObjectCSS) + '"></span>' + soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.questData.steps[0].completionData.documentViewBean.subject, 40)) + '</a></p></div>' : ''), '</li><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[1].state), '" data-stepaction="', (opt_data.questData.steps[0].completionData.documentViewBean) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.documentViewBean.jiveObjectURL + '?fromQ=LessEmailQuest&qstep=1')) : '', '"', (opt_data.questData.steps[1].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[1].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.addcollab.title'),[])), '</span>');
  if (! opt_data.questData.steps[1].completionData.collaborators) {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.addcollab.text'),[])), '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.youinvited.text'),[])), '</strong><div class="j-quest-output j-sharees font-color-meta">');
    jive.eae.common.groupedUsers({groupedUserList: opt_data.questData.steps[1].completionData.collaborators, groupAfterNum: 3}, output);
    output.append('</div></div>');
  }
  output.append('</li><li class="j-qtask ', (opt_data.questData.steps[2].state == 'completed') ? 'j-completed' : 'j-unavailable', '" data-stepaction="', (opt_data.questData.steps[0].completionData.documentViewBean) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.documentViewBean.jiveObjectURL)) : '', '"', (opt_data.questData.steps[2].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[2].state == 'available') ? (! opt_data.questData.steps[2].completionData.modifierUser) ? 'font-color-normal' : 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.edit.title'),[])), '</span>');
  if (! opt_data.questData.steps[2].completionData.modifierUser) {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', (opt_data.questData.steps[0].state == 'completed' && opt_data.questData.steps[1].state == 'completed' && opt_data.questData.steps[2].state != 'completed') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.waiting.label'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text j-wait font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.edit.text'),[])), '</p>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.edit.complete.editedby'),[])), '</strong><p class="j-quest-output font-color-meta">');
    jive.shared.displayutil.userDisplayNameLink(opt_data.questData.steps[2].completionData.modifierUser, output);
    output.append('</p></div>');
  }
  output.append('</li></ul></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.lessEmail.tips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.pageID == 'create-document') ? (opt_data.renderLocation == 'subject') ? '<div class="j-tips inline js-trial-tip" data-fromq="LessEmailQuest" data-location="subject" style="top: -5px; visibility: visible; z-index: 100;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_title.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_title.text'),[])) + '</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>' : (opt_data.renderLocation == 'body') ? '<div class="j-tips inline js-trial-tip" data-fromq="LessEmailQuest" data-location="body" style="top: 120px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_body.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_body.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>' : (opt_data.renderLocation == 'publishbar') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="publishbar" style="top: 37px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.text1'),[])) + '</p><p class="font-color-j-highlight"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.text2'),[])) + '</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>' : (opt_data.renderLocation == 'post') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="LessEmailQuest" data-location="post" style="top: -9px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_alldone.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_alldone.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>' : '' : (opt_data.pageID == 'view-document') ? (opt_data.renderLocation == 'edit') ? '<div class="js-pop j-tips j-pop-main js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="edit" style="left: -220px; top: -9px; visibility: visible; z-index: 100;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_edit.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_edit.text'),[])) + '</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>' : (opt_data.renderLocation == 'collaborators') ? '<div class="j-pop js-pop popover font-color-normal js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="collaborators" style="position: absolute; top: 25px; left: 270px; visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.take5.label'),[])) + '</h4><p class="j-qtip-msg">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.take5.text1'),[])) + '</p>' + ((opt_data.nextQuestID) ? '<p><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))) + '"><strong class="font-color-link">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.take5.text2'),[])) + '</strong></a></p>' : '<p><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/home'))) + '"><strong class="font-color-link">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.take5.text3'),[])) + '</strong></a></p>') + '</div><span class="rightArrow pointer" style="left: -9px; top: 60px;"></span></div>' : '' : (opt_data.pageID == 'edit-document') ? (opt_data.renderLocation == 'publishbar') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="LessEmailQuest" data-location="publishbar" style="top: 37px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.label2'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.text1'),[])) + '</p><p class="font-color-j-highlight"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.text2'),[])) + '</em></p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>' : (opt_data.renderLocation == 'skip-down') ? '<div class="j-tips inline js-pop js-trial-tip" data-fromq="LessEmailQuest" data-location="skip-down" style="top: 65px; left: -220px;"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.skip.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.skip.text'),[])) + '</p><span class="j-arrow-skipdown" style="left: -200px; top: 40px;"></span></div>' : (opt_data.renderLocation == 'publishbar-preselect') ? '<div class="j-tips inline p-bar js-pop js-trial-tip" data-fromq="LessEmailQuest" data-location="publishbar-preselect" style="bottom: 0;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.doc_location.label'),[])) + '</h4></div><span class="j-tiparrow-e j-tarrow" style="top: 40px"></span></div>' : '' : '');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.lessEmail.questComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-tips j-pop js-pop popover js-trial-tip" data-fromq="LessEmailQuest" data-location="banner" style="position: absolute; top: 50px; width: 400px; left: 50%; margin-left: -200px; visibility: visible; z-index: 100;"><div class="j-pop-main"><h4 class="font-face-deco"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.completed.label'),[])), '</strong></h4>', (opt_data.nextQuestID) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.completed.text'),[])) + '</p><p class="j-qlinks"><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.onward.link'),[])) + '</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.later.link'),[])) + '</a></strong></p>' : '<p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.less_email.tip.allcompleted.link'),[])) + '</a></strong></p>', '</div><span class="belowArrow pointer" style="top: -10px; left: 195px;"></span></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from stay_in_touch.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.quests.stayInTouch.mobileModal');
goog.provide('jive.trial.quests.stayInTouch.panelContent');
goog.provide('jive.trial.quests.stayInTouch.panelTitle');
goog.provide('jive.trial.quests.stayInTouch.questComplete');
goog.provide('jive.trial.quests.stayInTouch.questName');
goog.provide('jive.trial.quests.stayInTouch.tips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.renderGuestDisplayName');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.trial.recentlyCompleted');


jive.trial.quests.stayInTouch.questName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.title'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.stayInTouch.panelTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-quest-group-header js-quest-group-header j-stay-in-touch', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? ' j-quest-complete' : '', (opt_data.panelData.lastViewedQuest == 'StayInTouchQuest') ? ' j-active font-color-normal' : '', ' " data-id="StayInTouchQuest"><span class="lnk"><span class="j-donecheck-sm"></span>');
  jive.trial.quests.stayInTouch.questName(null, output);
  output.append('<span class="quest-selected"></span></span></a>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.stayInTouch.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="section clearfix collaboration"', (opt_data.panelData.lastViewedQuest != 'StayInTouchQuest') ? ' style="display:none"' : '', 'data-id="StayInTouchQuest"><p class="j-vdescription font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.text'),[])), '</p><div class="quest-section clearfix"><div class="j-quest-lcol"><div class="j-quest-video"><div id="wistia_9a4efbeb33" class="j-qvideo" style="width:325px;height:208px;" data-video-width="328" data-video-height="208">&nbsp;</div></div><div class="j-quest-completors"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.recently_completed.text'),[])), '</h4>');
  jive.trial.recentlyCompleted({users: opt_data.questData.recentlyCompleted}, output);
  output.append('</div></div><div class="j-quest-tasks ', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? 'j-quest-complete' : '', '"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tryit.label'),[])), '</h3><div class="j-qtask-list">', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? '<span class="j-completed-ribbon">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.completed.label'),[])) + '</span>' : '', '<ul><li class="j-qtask j-', soy.$$escapeHtml(opt_data.questData.steps[0].state), '" data-stepaction="', soy.$$escapeHtml(jive.soy.func.buildUrl('/activity?fromQ=StayInTouchQuest&qstep=0')), '"', (opt_data.questData.steps[0].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[0].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.microblogging.title'),[])), '</span>', (! opt_data.questData.steps[0].completionData.wallEntryViewBean) ? '<strong class="j-qnotstarted font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])) + '</strong><p class="j-quest-text font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.microblogging.text'),[])) + '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])) + '</label></span>' : '<strong class="j-qdone">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])) + '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.microblogging.complete.text'),[])) + '</strong><p class="j-quest-output"><a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.wallEntryViewBean.jiveObjectURL)) + '"><span class="' + soy.$$escapeHtml(opt_data.questData.steps[0].completionData.wallEntryViewBean.jiveObjectCSS) + '"></span>' + soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.questData.steps[0].completionData.wallEntryViewBean.subject, 40)) + '</a></p></div>', '</li><li class="j-qtask j-', soy.$$escapeHtml(opt_data.questData.steps[1].state), '" data-stepaction="', soy.$$escapeHtml(jive.soy.func.buildUrl('/activity?fromQ=StayInTouchQuest&qstep=1')), '"', (opt_data.questData.steps[1].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[1].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.like.title'),[])), '</span>');
  if (! opt_data.questData.steps[1].completionData.acclaimViewBean) {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.like.text'),[])), '</p><span class="j-qgobtn" tabindex="0"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.like.complete.text'),[])), '</strong><p class="j-quest-output j-like-task">');
    var param110 = new soy.StringBuilder();
    if (! opt_data.questData.steps[1].completionData.acclaimViewBean.likedContentOwner.anonymous) {
      jive.shared.displayutil.userDisplayNameLink(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContentOwner, param110);
    } else {
      jive.shared.displayutil.renderGuestDisplayName({message: opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent}, param110);
    }
    jive.shared.soy.i18nHelper({i18nKey: 'eae.inbox.rel.user.plural', arg0: param110.toString(), noAutoEscape: true}, output);
    output.append((opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.hasi18nTextKey && opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.objectType != 801) ? ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.i18nTextKey),[])) + ' ' : '', ' <a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectURL)), '">', (opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectIconLink) ? soy.$$filterNoAutoescape(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectIconLink) : '<span class="' + soy.$$escapeHtml(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.jiveObjectCSS) + '"></span>', '<span class="j-item">', soy.$$escapeHtml(opt_data.questData.steps[1].completionData.acclaimViewBean.likedContent.subject), '</span></a></p></div>');
  }
  output.append('</li>', (opt_data.questData.steps.length == 3) ? '<li class="j-qtask j-' + soy.$$escapeHtml(opt_data.questData.steps[2].state) + '"' + ((! opt_data.questData.steps[2].viewData.oAuthEnabled) ? ' data-stepaction="mobile_modal" data-mobileurl="' + soy.$$escapeHtml(opt_data.questData.steps[2].viewData.mobileUrl) + '"' : ' data-stepaction="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.questData.steps[2].viewData.mobileUrl)) + '"') + ((opt_data.questData.steps[2].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"') + '><span class="j-qtitle ' + ((opt_data.questData.steps[2].state == 'available') ? 'font-color-link' : '') + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.title'),[])) + '</span>' + ((opt_data.questData.steps[2].state != 'completed') ? '<strong class="j-qnotstarted font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])) + '</strong><p class="j-quest-text font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.text'),[])) + '</p><span class="j-qgobtn" tabindex="0" role="link"><label class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])) + '</label></span>' : '<strong class="j-qdone">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])) + '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><p class="j-quest-text">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.complete.text'),[])) + '</p></div>') + '</li>' : '', '</ul></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.stayInTouch.mobileModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal jive-modal-wide j-trial-mob-modal" id="j-trial-mob-modal"><header><h2 class="jive-modal-title">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.modal.title'),[])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a class="j-modal-close-top jive-close close" href="#" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem close"></span></a><div class="jive-modal-content clearfix"><div class="j-mob-url"><h3><span class="j-theme-arrow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.modal.description.url'),[])), '</h3><p class="j-rc5"><strong>', soy.$$escapeHtml(opt_data.url), '</strong></p></div><div class="j-mob-qr"><h3>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.modal.description.qr'),[])), '</h3><div class="j-mob-accesscode j-mob-accesslink"><span class="qr-code" style="background-image:url(', soy.$$escapeHtml(jive.soy.func.buildUrl('/__services/v2/rest/onboarding/qrcode/qrcode.gif')), ')"></span></div></div><div class="j-mob-qrnote clearfix">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.mobile.modal.whats.qr'),[])), '</div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.stayInTouch.tips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.pageID == 'all-activity') {
    if (opt_data.renderLocation == 'mb_body') {
      output.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="StayInTouchQuest" data-location="mb_body" style="position: absolute; top: 70px; left: -125px; visibility: visible; z-index: 100;"><div class="j-tips d-', soy.$$escapeHtml(opt_data.renderLocation), '-tip j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mb.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mb.text'),[])), '</p></div><span class="belowArrow pointer" style="top: -9px; left: 200px;"></span></div>');
    } else if (opt_data.renderLocation == 'at_mention_btn') {
      output.append('<div class="j-pop js-pop popover q-statusupdate js-trial-tip" data-fromq="StayInTouchQuest" data-location="at_mention_btn" style="position: absolute; top: 135px; right: -160px; visibility: visible; z-index: 100;"><div class="j-tips wide d-', soy.$$escapeHtml(opt_data.renderLocation), '-tip j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mention.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mention.text0'),[])), '</p><p><em>');
      jive.shared.soy.i18nHelper({i18nKey: 'trial.quest.stay_in_touch.tip.mention.text1', arg0: '<span class="jive-icon-med jive-icon-mention j-quest-mention">@</span>', noAutoEscape: true}, output);
      output.append('</em></p><p><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mention.text2'),[])), '</strong></p></div><span class="belowArrow pointer" style="right: 165px; top: -10px"></span></div>');
    } else if (opt_data.renderLocation == 'banner_post_mb') {
      output.append('<div class="j-pop js-pop popover js-trial-tip" data-fromq="StayInTouchQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips j-banner-tip d-', soy.$$escapeHtml(opt_data.renderLocation), '-tip j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.mb_done.label'),[])), '</h4><p><button class="js-back-to-onb j-btn-callout close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.ok'),[])), '</button></p></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>');
    } else if (opt_data.renderLocation == 'stream_header') {
      output.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="StayInTouchQuest" data-location="answer" style="position: fixed; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips wide d-', soy.$$escapeHtml(opt_data.renderLocation), '-tip j-pop-main"><h4 class="j-qtip-header font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.like.label'),[])), '</h4><p>');
      jive.shared.soy.i18nHelper({i18nKey: 'trial.quest.stay_in_touch.tip.like.text1', arg0: '<span style="background: #e28044; color: #fff; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.like'),[])) + '</span>', noAutoEscape: true}, output);
      output.append('</p><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.like.text2'),[])), '</p></div></div>');
    } else if (opt_data.renderLocation == 'banner_post_like') {
      output.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="StayInTouchQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -180px; visibility: visible; z-index: 100;"><div class="j-tips d-', soy.$$escapeHtml(opt_data.renderLocation), '-tip j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.like_done.label'),[])), '</h4><p><button class="js-back-to-onb j-btn-callout close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.ok'),[])), '</button></p></div><span class="belowArrow pointer" style="left: 170px; top: -10px;"></span></div>');
    }
  }
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.stayInTouch.questComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop js-pop popover j-qtip js-trial-tip" data-fromq="StayInTouchQuest" data-location="banner" style="position: absolute; top: 50px; width: 400px; left: 50%; margin-left: -200px; visibility: visible; z-index: 100;"><div class="j-quest-tip d-banner-tip j-pop-main"><h4 class="j-qtip-header font-face-deco"><strong class="font-color-new">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.completed.label'),[])), '</strong></h4>', (opt_data.nextQuestID) ? '<p class="j-qtip-body">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.completed.text'),[])) + '</p><p class="j-qtip-body j-qlinks"><strong><a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID})) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.onward.link'),[])) + '</a></strong></p><p class="j-qtip-body"><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.later.link'),[])) + '</a></strong></p>' : '<p class="j-qtip-body"><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.stay_in_touch.tip.allcompleted.link'),[])) + '</a></strong></p>', '</div><span class="belowArrow pointer" style="top: -9px; left: 195px;"></span></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from community_feedback.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.quests.communityFeedback.tips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.trial.quests.communityFeedback.tips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.pageID == 'create-discussion') ? (opt_data.renderLocation == 'body') ? '<div class="j-tips inline js-trial-tip" data-fromq="CommunityFeedbackQuest" data-location="body" style="position: absolute; top: 60px; visibility: visible; z-index: 100;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="j-qtip-header font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tip.prefilled.label'),[])) + '</h4><p class="j-qtip-body font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tip.prefilled.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>' : '' : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from teamwork.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.quests.teamwork.approved');
goog.provide('jive.trial.quests.teamwork.panelContent');
goog.provide('jive.trial.quests.teamwork.panelTitle');
goog.provide('jive.trial.quests.teamwork.pendingApproval');
goog.provide('jive.trial.quests.teamwork.questComplete');
goog.provide('jive.trial.quests.teamwork.questName');
goog.provide('jive.trial.quests.teamwork.tips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.common.groupedUsers');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.trial.recentlyCompleted');


jive.trial.quests.teamwork.questName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.link'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.panelTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-quest-group-header js-quest-group-header j-teamwork', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? ' j-quest-complete ' : '', (opt_data.panelData.lastViewedQuest == 'WorkBetterAsATeamQuest') ? ' j-active font-color-normal' : '', '" data-id="WorkBetterAsATeamQuest"><span class="lnk"><span class="j-donecheck-sm"></span>');
  jive.trial.quests.teamwork.questName(null, output);
  output.append('<span class="quest-selected"></span></span></a>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="section clearfix collaboration"', (opt_data.panelData.lastViewedQuest != 'WorkBetterAsATeamQuest') ? ' style="display:none"' : '', 'data-id="WorkBetterAsATeamQuest"><p class="j-vdescription font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.text'),[])), '</p><div class="quest-section clearfix"><div class="j-quest-lcol"><div class="j-quest-video"><div id="wistia_6f7950d404" class="j-qvideo" style="width:325px;height:208px;" data-video-width="328" data-video-height="208">&nbsp;</div></div><div class="j-quest-completors"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.completed.text'),[])), '</h4>');
  jive.trial.recentlyCompleted({users: opt_data.questData.recentlyCompleted}, output);
  output.append('</div></div><div class="j-quest-tasks"><h3 class="j-quest-theme font-face-deco"><span class="j-theme-arrow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.tryit.label'),[])), '</h3><div class="j-qtask-list">', (opt_data.questData.stepsComplete == opt_data.questData.steps.length) ? '<span class="j-completed-ribbon">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.completed.label'),[])) + '</span>' : '', '<ul>', (! (opt_data.questData.steps[0].state == 'completed') && opt_data.questData.steps[0].completionData.pending) ? '<li class="j-qtask j-pending" tabindex=\'0\'>' : '<li class="j-qtask j-' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].state) + '" data-stepaction="' + ((opt_data.questData.steps[0].viewData.activeInvitation) ? soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].viewData.activeInvitation.place.link + '?fromQ=WorkBetterAsATeamQuest&qstep=0')) : soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl('/edit-place.jspa?containerType=700&fromQ=WorkBetterAsATeamQuest&qstep=0'))) + '" ' + ((opt_data.questData.steps[0].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"') + '>');
  if (! (opt_data.questData.steps[0].state == 'completed') && ! opt_data.questData.steps[0].completionData.pending) {
    if (opt_data.questData.steps[0].viewData.activeInvitation) {
      output.append('<span class="j-qtitle ', (opt_data.questData.steps[0].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.join'),[])), '</span><strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><div class="j-quest-detail"><strong class="j-quest-action j-invited">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.invite.join'),[])), '</strong><p class="j-quest-output"><strong class="group name"><span class="jive-icon-med jive-icon-group"></span>', soy.$$escapeHtml(opt_data.questData.steps[0].viewData.activeInvitation.place.subject), '</strong></p></div>');
      if (opt_data.questData.steps[0].viewData.groupsExist) {
        output.append('<span class="j-quest-altpath font-color-meta">');
        jive.shared.soy.i18nHelper({i18nKey: 'trial.quest.work_better.group.caption.altpath', arg0: '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/create-group!input.jspa?containerType=700&fromQ=WorkBetterAsATeamQuest&qstep=0'))) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.create.lc'),[])) + '</a>', noAutoEscape: true}, output);
        output.append('</span>');
      }
    } else {
      output.append('<span class="j-qtitle ', (opt_data.questData.steps[0].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.create'),[])), '</span><strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.direction.create'),[])), '</p>');
      if (opt_data.questData.steps[0].viewData.groupsExist) {
        output.append('<span class="j-quest-altpath font-color-meta">');
        jive.shared.soy.i18nHelper({i18nKey: 'trial.quest.work_better.group.caption.altpath', arg0: '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/places?filterID=all~objecttype~objecttype[socialgroup]&fromQ=WorkBetterAsATeamQuest&qstep=0'))) + '" role="link">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.join.lc'),[])) + '</a>', noAutoEscape: true}, output);
        output.append('</span>');
      }
    }
    output.append('<span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else if (! (opt_data.questData.steps[0].state == 'completed') && opt_data.questData.steps[0].completionData.pending) {
    output.append('<span class="j-qtitle">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.join'),[])), '</span><div class="j-quest-detail share"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.pending.caption'),[])), '</strong><p class="j-quest-output">', (opt_data.questData.steps[0].completionData.socialGroupViewBean) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.socialGroupViewBean.jiveObjectURL)) + '" class="j-qcontent jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.id) + '" data-objectType="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.objectType) + '" role="link"><span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.jiveObjectCSS) + '"></span><span class="j-item">' + soy.$$filterNoAutoescape(opt_data.questData.steps[0].completionData.socialGroupViewBean.groupName) + '</span></a>' : '', '</p><strong class="j-qnotstarted">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.approval.label'),[])), '</strong></div>');
  } else {
    output.append('<span class="j-qtitle">', (opt_data.questData.steps[0].completionData.joined) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.join'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.caption.create'),[])), '</span><strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail share"><strong class="j-quest-action">', (opt_data.questData.steps[0].completionData.joined) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.complete.caption.join'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.group.complete.caption.create'),[])), '</strong><p class="j-quest-output">', (opt_data.questData.steps[0].completionData.socialGroupViewBean) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.socialGroupViewBean.jiveObjectURL)) + '" class="j-qcontent jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.id) + '" data-objectType="' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.objectType) + '" role="link"><span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[0].completionData.socialGroupViewBean.jiveObjectCSS) + '"></span><span class="j-item">' + soy.$$filterNoAutoescape(opt_data.questData.steps[0].completionData.socialGroupViewBean.groupName) + '</span></a>' : '', '</p></div>');
  }
  output.append('</li><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[1].state), '"', (opt_data.questData.steps[0].completionData && opt_data.questData.steps[0].completionData.socialGroupViewBean) ? 'data-stepaction="' + soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl('/document/upload.jspa?containerType=' + opt_data.questData.steps[0].completionData.socialGroupViewBean.objectType + '&containerID=' + opt_data.questData.steps[0].completionData.socialGroupViewBean.id + '&fromQ=WorkBetterAsATeamQuest&qstep=1')) + '"' : '', (opt_data.questData.steps[1].state == 'completed') ? 'tabindex=\'0\'' : ' role="button"', '><span class="j-qtitle ', (opt_data.questData.steps[1].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.document.caption'),[])), '</span>', (! (opt_data.questData.steps[1].state == 'completed')) ? '<strong class="j-qnotstarted font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])) + '</strong><p class="j-quest-text font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.document.direction'),[])) + '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])) + '</label></span>' : '<strong class="j-qdone">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])) + '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.document.complete.caption'),[])) + '</strong><p class="j-quest-output">' + ((opt_data.questData.steps[1].completionData && opt_data.questData.steps[1].completionData.documentItemBean) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.questData.steps[1].completionData.documentItemBean.link)) + '" class="js-header-text j-qcontent" role="link"><span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(opt_data.questData.steps[1].completionData.documentItemBean.iconCss) + '"></span><span class="j-item">' + soy.$$filterNoAutoescape(opt_data.questData.steps[1].completionData.documentItemBean.subject) + '</span></a>' : '') + '</p></div>', '</li><li class="j-qtask j-', soy.$$escapeHtmlAttribute(opt_data.questData.steps[2].state), '"', (opt_data.questData.steps[0].completionData && opt_data.questData.steps[0].completionData.socialGroupViewBean) ? 'data-stepaction="' + soy.$$escapeHtmlAttribute(jive.soy.func.buildUrl(opt_data.questData.steps[0].completionData.socialGroupViewBean.jiveObjectURL + '?fromQ=WorkBetterAsATeamQuest&qstep=2')) + '"' : '', (opt_data.questData.steps[2].state == 'completed') ? 'tabindex=\'0\'' : ' role="button" ', '><span class="j-qtitle ', (opt_data.questData.steps[2].state == 'available') ? 'font-color-link' : '', '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.invite.caption'),[])), '</span>');
  if (! (opt_data.questData.steps[2].state == 'completed')) {
    output.append('<strong class="j-qnotstarted font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.notstarted.label'),[])), '</strong><p class="j-quest-text font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.invite.direction'),[])), '</p><span class="j-qgobtn" tabindex="0" role="button"><label class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.go.button'),[])), '</label></span>');
  } else {
    output.append('<strong class="j-qdone">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.done.label'),[])), '<span class="j-donecheck"></span></strong><div class="j-quest-detail"><strong class="j-quest-action">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.invite.complete.caption'),[])), '</strong><div class="j-quest-output">');
    if (opt_data.questData.steps[2].completionData && opt_data.questData.steps[2].completionData.invitedUsers) {
      output.append('<div class="j-quest-result j-invites">');
      jive.eae.common.groupedUsers({groupedUserList: opt_data.questData.steps[2].completionData.invitedUsers, groupAfterNum: 3}, output);
      output.append('</div>');
    }
    output.append('</div></div>');
  }
  output.append('</li></ul></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.tips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.pageID == 'create-group') {
    output.append((opt_data.renderLocation == 'group-type') ? '<div class="j-tips inline p-bar js-trial-tip" style="top: -30px; visibility: visible; z-index: 100;" data-fromq="WorkBetterAsATeamQuest" ><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.step.tip.create_group.type.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.step.tip.create_group.type.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>' : '');
  } else if (opt_data.pageID == 'places') {
    if (opt_data.renderLocation == 'banner') {
      output.append('<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.joined.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.joined.text'),[])), '</p><p class="j-qlinks"><strong><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':'WorkBetterAsATeamQuest'}))), '" id="quest-complete-continue">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.continue.link'),[])), '</a></strong></p><p><strong><a id="quest-complete-close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])), '</a></strong></p></div></div>');
    } else {
      output.append('<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload-link" style="position: absolute; top: 75px; right: 50px; visibility: visible; z-index: 100;"><div class="j-tips d-', soy.$$escapeHtmlAttribute(opt_data.renderLocation), '-tip j-pop-main wide"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.findgroup.label'),[])), '</h4><p class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.findgroup.text1'),[])), '</p><p><strong>');
      jive.shared.soy.i18nHelper({i18nKey: 'trial.quest.work_better.tip.findgroup.text2', arg0: '<a href="#" id="js-teamwork-create-group-link">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.createown.text'),[])) + '</a>', noAutoEscape: true}, output);
      output.append('</strong></p></div></div>');
    }
  } else if (opt_data.pageID == 'place') {
    output.append((opt_data.renderLocation == 'banner') ? '<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approval.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approval.text'),[])) + '</p><p class="j-qlinks"><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':'WorkBetterAsATeamQuest'}))) + '" id="quest-complete-continue">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.continue.link'),[])) + '</a></strong></p><p><strong><a id="quest-complete-close" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])) + '</a></strong></p></div></div>' : (opt_data.renderLocation == 'join-link') ? (opt_data['private']) ? '<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="join-link" style="position: absolute; top: -28px; ' + ((opt_data['private'] == 'ask-to-join') ? ' left: 530px; ' : ' left: 490px; ') + ' visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + ((opt_data['private'] == 'ask-to-join') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.askjoingroup.label'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.joingroup.label'),[]))) + '</h4>' + ((opt_data['private'] == 'ask-to-join') ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.askjoingroup.text'),[])) + '</p>' : '') + '</div><span class="rightArrow pointer" style="left: -9px; top: 33px;"></span></div>' : '<div id="js-teamwork-join-tip" class="j-pop js-pop popover js-trial-tip" data-fromq="HaveFewerMeetingsQuest" data-location="join-link" style="position: absolute; top: -25px; right: 120px; visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.joingroup.label'),[])) + '</h4></div><span class="leftArrow pointer" style="right: -9px; top: 33px;"></span></div>' : (opt_data.renderLocation == 'actions-link') ? '<div class="j-pop js-pop j-qtip popover js-trial-tip" style="position: absolute; top: 48px; left: -130px; visibility: visible; z-index: 100;"><div class="j-tips d-actions-button-tip j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.actions_btn.label'),[])) + '</h4></div><span class="leftArrow pointer" style="top: 50px;"></span></div>' : (opt_data.renderLocation == 'upload-link') ? '<div class="j-pop js-pop j-qtip popover js-trial-tip" style="position: absolute; top: 50px; left: 200px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.doc_upload.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.doc_upload.text'),[])) + '</p></div><span class="belowArrow pointer" style="left: 168px;"></span></div>' : (opt_data.renderLocation == 'invite-link') ? '<div class="j-pop-main j-tips" style="width: 338px"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.invite_link.label'),[])) + '</h4></div>' : (opt_data.renderLocation == 'invite.modal.users') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: -180px; left: -180px; width: 325px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.invite.email.text'),[])) + '</h4></div><span class="j-arrow-righthook white j-qarrow" style="left: 85px; bottom: -50px;"></span></div>' : (opt_data.renderLocation == 'invite.modal.message') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 65px; width: 135px; left: -225px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.invite.message.text'),[])) + '</h4></div><span class="j-arrow-rightess white j-qarrow" style="right: -25px; top: -20px"></span></div>' : (opt_data.renderLocation == 'invite.modal.submit') ? '<div class="j-tips mtip js-trial-tip" style="position: absolute; top: 270px; width: 240px; left: -55px; visibility: visible; z-index: 100;"><div class="d-tip"><h4 class="font-face-deco font-color-white">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.invite.button.text'),[])) + '</h4></div><span class="j-arrow-up white j-qarrow" style="left: 80px; top: -25px"></span></div>' : '');
  } else if (opt_data.pageID == 'upload') {
    output.append((opt_data.renderLocation == 'choose-file') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: 80px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_choose.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_choose.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>' : (opt_data.renderLocation == 'choose-place') ? '<div class="j-tips p-bar inline js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: 0;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_location.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_location.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>' : (opt_data.renderLocation == 'submit') ? '<div class="j-tips inline p-bar js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="upload" style="top: -20px;"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_publish.label'),[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.file_publish.text'),[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 25px"></span></div>' : '');
  } else if (opt_data.pageID == 'view-document') {
    output.append((opt_data.renderLocation == 'banner') ? '<div class="j-pop js-pop popover js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="banner" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip j-pop-main wide"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.nice_work.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.nice_work.text'),[])) + '</p><p class="j-qlinks"><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':'WorkBetterAsATeamQuest'}))) + '" id="post-upload-tip-continue"><strong>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.continue.link'),[])) + '</strong></a></p><p><a id="post-upload-tip-close" href="#"><strong>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])) + '</strong></a></p></div></div>' : (opt_data.renderLocation == 'edit') ? '<div class="j-tips js-pop j-pop-main js-trial-tip" data-fromq="WorkBetterAsATeamQuest" data-location="edit"><div class="d-' + soy.$$escapeHtmlAttribute(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.doc_edit.label'),[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.doc_edit.text'),[])) + '</p></div><span class="leftArrow pointer" style="right: -9px; top: 40px;"></span></div>' : '');
  }
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.questComplete = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.completed.label'),[])), '</h4>', (opt_data.nextQuestID) ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.completed.text'),[])) + '</p><p class="j-qlinks"><strong><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))) + '" id="quest-complete-continue">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.onward.link'),[])) + '</a></strong></p><p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])) + '</a></strong></p>' : '<p><strong><a href="#" id="quest-complete-close" class="js-close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.allcompleted.link'),[])) + '</a></strong></p>', '</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.pendingApproval = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approval.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approval.text'),[])), '</p><p class="j-qlinks"><strong><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))), '" id="quest-complete-continue">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.continue.link'),[])), '</a></strong></p><p><strong><a id="quest-complete-close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])), '</a></strong></p></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.quests.teamwork.approved = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-tips j-pop js-pop popover js-trial-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -250px; visibility: visible; z-index: 100; width: auto;"><div class="j-tips j-pop-main wide"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approved.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.approved.text'),[])), '</p><p class="j-qlinks"><strong><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/get-started',{'showQ':opt_data.nextQuestID}))), '" id="quest-complete-continue">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.continue.link'),[])), '</a></strong></p><p><strong><a id="quest-complete-close" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.work_better.tip.notnow.link'),[])), '</a></strong></p></div></div>');
  return opt_sb ? '' : output.toString();
};

;
define("apps/trial/views/trial_tip_helper",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(c){var g=this,e=$j.deparam.querystring(),d=e.fromQ,f=e.qstep||0;g.communityName=c.communityName;if(d=="WorkBetterAsATeamQuest"||d=="HaveFewerMeetingsQuest"||d=="LessEmailQuest"||d=="StayInTouchQuest"||d=="CommunityFeedbackQuest"){g.setupPage(d,f)}};this.setupPage=function(c,e){var d=this;d.emitP("shouldSetupPage",c,e).addCallback(function(f){if(f||(c=="LessEmailQuest"&&e==1)||(c=="WorkBetterAsATeamQuest"&&e==0)){if(!f){d.setupPage(c,parseInt(e,10)+1)}else{if(c=="HaveFewerMeetingsQuest"){if(e==0){d.fewerMeetingsStep0(c,e)}else{if(e==1){d.fewerMeetingsStep1(c)}else{if(e==2){d.fewerMeetingsStep2(c)}}}}else{if(c=="LessEmailQuest"){if(e==0){d.lessEmailStep0(c,e)}else{if(e==1&&f){d.lessEmailStep1(c,e)}else{if((e==1&&!f)||e==2){d.lessEmailStep2()}}}}else{if(c=="StayInTouchQuest"){if(e==0){d.stayInTouchStep0(c)}else{if(e==1){d.stayInTouchStep1(c)}}}else{if(c=="CommunityFeedbackQuest"){d.communityFeedbackTips(c)}else{if(c=="WorkBetterAsATeamQuest"){if(e==1){d.uploadDocumentTips(c,e)}else{if(e==2){d.inviteTips(c,e)}}}}}}}}}})};this.fewerMeetingsStep0=function(d,f){var e=this;if($j("#jive-compose-title").length){var g="create-discussion";$j("body").addClass("j-quest-active");var c=$j("#create-discussion");c.append('<input type="hidden" name="fromQuest" value="'+d+'" />');c.append('<input type="hidden" name="qstep" value="'+f+'" />');c.append('<input type="hidden" name="markAsQuestion" value="true" />');$j("#jive-compose-title").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"body"})));$j("#js-all").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"publishbar",communityName:e.communityName})));$j("#submitButton").before($j(jive.trial.quests.fewerMeetings.tips({pageID:g,renderLocation:"post"})));$j("#js-all").click();if($j.browser.msie&&$j.browser.version<9){$j("#js-all").change()}}};this.fewerMeetingsStep1=function(c){var d=this;if($j("ul.j-social-actions").length){var e="view-discussion";$j("ul.j-social-actions").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share"})));$j("#jive-replies div.j-thread-post footer").first().before($j(jive.trial.quests.fewerMeetings.tips({pageID:"view-discussion",renderLocation:"outcome"})));jive.dispatcher.listen("trial.share.modal.loaded",function(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#share-users").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.users"})));$j("#jive-send-content-not-message").before($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.message"})));$j("#jive-send-content-not-message").after($j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"share.modal.submit"})))});jive.dispatcher.listen("trial.share.created",function(){d.closeTip(c);d.emit("clearActiveQuest");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].name+"";break}}var k=$j(jive.trial.quests.fewerMeetings.tips({pageID:e,renderLocation:"banner",nextQuestID:f}));$j("body").prepend(k);$j("body").on("click.afterTip",function(i){if(!$j(i.target).parents(".js-trial-tip").length){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip")}})})})}};this.fewerMeetingsStep2=function(){if($j("div.jive-thread-reply-btn-correct").length){var c="view-discussion";$j("div.jive-thread-reply-btn-correct").first().after($j(jive.trial.quests.fewerMeetings.tips({pageID:c,renderLocation:"answer"})))}};this.lessEmailStep0=function(d,e){if($j("#create-document").length){var g="create-document",f=$j("#create-document");f.append('<input type="hidden" name="fromQuest" value="'+d+'" />');f.append('<input type="hidden" name="qstep" value="'+e+'" />');$j("body").addClass("j-quest-active");var c=$j("#js-people");$j("#jive-compose-title").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"subject"})));$j("div.jive-editor-panel").prepend($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"body"})));c.before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:g,renderLocation:"post"})))}};this.lessEmailStep1=function(e,f){if($j("#jive-link-edit2 a").length){var i="view-document";var d=$j("#jive-link-edit2 a");d.attr("href",d.attr("href")+"&fromQ="+e+"&qstep="+f);var h=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"edit"}));$j(h).popover({context:d,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false,nudge:{left:-25},arrowOffset:0})}else{if($j("#edit-document").length){i="edit-document";$j("body").addClass("j-quest-active");var c=$j("#js-people"),g=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"skip-down"})),j=$j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar-preselect"}));$j("#edit-document").prepend(g);c.before(j);c.change(function(){g.remove();j.remove();c.before($j(jive.trial.quests.lessEmail.tips({pageID:i,renderLocation:"publishbar"})));$j("#submitButton").before($j(jive.trial.quests.lessEmail.tips({pageID:"create-document",renderLocation:"post"})))})}}};this.lessEmailStep2=function(){var d=this;if($j("#jive-body-main header span.jive-shared-list").length){var e="view-document";var c=$j("#jive-body-main header span.jive-shared-list");d.emitP("getAllQuestProgressData").addCallback(function(j){var f="";for(var h=0,g=j.quests.length;h<g;h++){if(j.quests[h].stepsComplete==0){f=j.quests[h].name+"";break}}var k=$j(jive.trial.quests.lessEmail.tips({pageID:e,renderLocation:"collaborators",nextQuestID:f}));c.append(k);$j("body").on("click.afterTip",function(i){if(!$j(i.target).parents(".js-trial-tip").length){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip")}})})}};this.stayInTouchStep0=function(d){var c=this;require(["jive.ActivityStream.MBController"],function(e){var g=e.getMicrobloggingView();if(g){var j="all-activity";e.addListener("submitSuccess",function(){c.closeTip(d);jive.dispatcher.dispatch("trial.updatePercentComplete");$j("body").prepend($j(jive.trial.quests.stayInTouch.tips({pageID:j,renderLocation:"banner_post_mb"})));$j("body").on("click.afterTip",function(m){var k=$j(m.target);if(!k.parents(".js-trial-tip").length||k.is(".close")){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip");var l=jive.app.url({path:"/get-started"});window.location=l}})});var i=$j(jive.trial.quests.stayInTouch.tips({pageID:j,renderLocation:"mb_body"})),h=$j("#statusInputs-mb-header-editor");h.prepend(i);var f=$j(jive.trial.quests.stayInTouch.tips({pageID:j,renderLocation:"at_mention_btn"})).hide();h.prepend(f);g.addListener("focus",function(){if(!f.is(":visible")){i.hide();f.show()}}).addListener("cancel",function(){if(f.is(":visible")){i.show();f.hide()}})}})};this.stayInTouchStep1=function(e){var g=this,d=$j("#j-activity-page .j-act-header h1");if(d.length){var h="all-activity";d.after($j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"stream_header"})));var c=$j('<style type="text/css"> a.jive-acclaim-likelink.like{ background: #e28044; color: #fff !important; font-weight: bold; -moz-border-radius: 3px; -webkit-border-radius: 3px; border-radius: 3px; padding: 2px 5px; margin: -2px;} </style>');c.appendTo("head");var f=function(){jive.localexchange.removeListener("trial.like.created",f);g.closeTip(e);c.remove();g.emit("clearActiveQuest");$j("html, body").animate({scrollTop:0},"fast");$j("body").prepend($j(jive.trial.quests.stayInTouch.tips({pageID:h,renderLocation:"banner_post_like"})));$j("body").on("click.afterTip",function(k){var i=$j(k.target);if(!i.parents(".js-trial-tip").length||i.is(".close")){$j("div.js-trial-tip").remove();$j("body").off("click.afterTip");var j=jive.app.url({path:"/get-started"});window.location=j}})};jive.localexchange.addListener("trial.like.created",f)}};this.communityFeedbackTips=function(f){var e=$j("#create-discussion"),d=$j("#js-all"),c=$j("#js-publishbar-select input[type=radio]");if(e.length){var g="create-discussion";$j("body").addClass("j-quest-active");e.append('<input type="hidden" name="markAsQuestion" value="true" />');e.append('<input type="hidden" name="fromQuest" value="'+f+'" />');d.click();if($j.browser.msie&&$j.browser.version<9){d.change()}c.attr("disabled","disabled");c.each(function(){$j(this).attr("name",$j(this).attr("name")+".disabled")});d.after('<input type="hidden" name="publishBar.visibility" value="all"/>');$j("div.jive-editor-panel").prepend($j(jive.trial.quests.communityFeedback.tips({pageID:g,renderLocation:"body"})))}};this.createSocialGroupTips=function(f,g){var e=this,h;if($j("body.j-body-yourplaces").length){h="places";$j("#jive-body").prepend($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"body"})));var d=jive.app.url({path:"/edit-place.jspa?containerType=700&fromQ="+f+"&qstep=0"});$j("#js-teamwork-create-group-link").attr("href",d);jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}else{if($j("#jive-link-joinSocialGroup").length){h="place";var j=false;if(!$j(".j-bigtab-nav").length){j=true}var c=$j("#jive-link-joinSocialGroup").filter(":visible");if(c){if(c.hasClass("j-ask-join")&&j){j="ask-to-join"}else{if(j){j="join"}}c.before($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"join-link","private":j})));jive.switchboard.addListener("sgroup.member.join",function(){$j("#js-teamwork-join-tip").hide();e.uploadDocumentTips(f,1);jive.dispatcher.dispatch("trial.updatePercentComplete")})}}else{if($j("#jive-socialgroup-desc").length){h="create-group";$j("div.j-form-advanced").hide();$j("body").addClass("j-quest-active");var i=a("#jive-socialgroup-type-OPEN");setTimeout(function(){var l=$j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"group-type"})),k=i.offset();a("body").prepend(l);l.css({position:"fixed",top:k.top-(l.outerHeight()/2)+"px",left:k.left-l.width()-60+"px","z-index":1002});l.addClass("j-pop");l.children("div").addClass("j-pop-main");l.children("span").css("top",((l.outerHeight()/2)-(l.children("span:first").outerHeight()/2))+"px");a(".js-about-form .j-aboutClose button").one("click",function(){e.closeTip(f)})},600);$j("#jive-socialgroup-template").prepend($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"template"})));$j("#jive-socialgroup-name").prepend($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"group-name"})));$j("#jive-socialgroup-img").prepend($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"group-img"})));$j("input.j-btn-callout").before($j(jive.trial.quests.teamwork.tips({pageID:h,renderLocation:"submit"})))}}}};this.uploadDocumentTips=function(c,d){var f=$j("#jive-place-link-actions"),e,g;if($j("body.j-body-yourplaces").length){e="places";g=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));g.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(g)}else{if(f.length&&!$j("div.js-placeEditBanner").length){this.showUploadFileTip()}else{if(f.length&&$j("div.js-placeEditBanner").length){jive.localexchange.addListener("place.activity.view",this.showUploadFileTip)}else{if(!f.length&&$j("body.j-body-place").length){e="place";g=$j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"banner"}));g.delegate("#quest-complete-close","click",function(h){h.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(g)}else{if($j(".jive-create-doc").length){e="upload";$j("body").addClass("j-quest-active");$j(".jive-create-doc").prepend($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-file"})));$j("#js-publishbar-visibility").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"choose-place"})));$j("#submitButton").before($j(jive.trial.quests.teamwork.tips({pageID:e,renderLocation:"submit"})))}}}}}};this.showUploadFileTip=function(){jive.localexchange.removeListener("place.activity.view",this.showUploadFileTip);var d="place";var c=a('#j-as-create-menu a[data-ident="nav.bar.create.file"]');c.attr("href",c.attr("href")+"&fromQ=WorkBetterAsATeamQuest&qstep=1");var e=$j(jive.trial.quests.teamwork.tips({pageID:d,renderLocation:"upload-link"}));c.after(e)};this.inviteTips=function(k,e){var c=$j("#jive-place-link-actions"),i,f;if(c.length){i="place";var g=a("#jive-place-link-actions"),h=g.offset(),j=$j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"actions-link"}));a("#jive-body").prepend(j);j.css("top",h.top-j.height()+"px");j.css("left",h.left-j.width()-30+"px");var l=function(){j.remove();jive.localexchange.removeListener("actionsMenuToggled",l);var m=a("#jive-place-link-actions-invite");f=$j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"invite-link"}));f.popover({context:m,position:"left",darkPopover:true,addClass:"j-q-tip wide",nudge:{top:-5,left:-20},arrowOffset:-5,onLoad:function(){$j("#jive-place-link-actions-invite").one("click",function(){$j("div.js_lb_overlay").addClass("j-quest-active");$j("#invitees").before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"invite.modal.users"})));$j("#jive-invite-message-content").before($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"invite.modal.message"})));$j("#jive-invite-message-content").after($j(jive.trial.quests.teamwork.tips({pageID:i,renderLocation:"invite.modal.submit"})));$j("#jive-modal-invite").on("close",function(){jive.dispatcher.dispatch("trial.updatePercentComplete")})})}})};jive.localexchange.addListener("actionsMenuToggled",l)}else{if($j("div.doc-page").length){var d=this;d.emitP("shouldSetupPage",k,e-1).addCallback(function(m){var p="view-document";if(!m){d.closeTip(k);var q=$j(jive.trial.quests.teamwork.tips({pageID:p,renderLocation:"banner"}));q.delegate("#post-upload-tip-close","click",function(r){r.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(q)}else{p="view-document";var n=$j("#jive-link-edit a");n.attr("href",n.attr("href")+"?fromQ="+k+"&qstep="+(e-1));var o=$j(jive.trial.quests.teamwork.tips({pageID:p,renderLocation:"edit"}));$j(o).popover({context:n,position:"left",darkPopover:true,destroyOnClose:false,putBack:true,addClass:"j-qtip",closeOnClick:false})}})}}};this.closeTip=function(e,c){var d="div.js-trial-tip[data-fromq="+e+"]";if(c){d+="[data-location="+c+"]"}var f=$j(d);if(f.length){f.each(function(){var h=$j(this);var g=h.closest("div.js-pop").length;if(g.length){g.trigger("close");g.remove()}else{h.remove()}})}}})});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.ThreadToDocView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Move.Content;a.init=function(){var d=this;c(document).ready(function(){c("#jive-link-wiki a").click(function(e){d.emit("browse");e.preventDefault()})})};this.maxMessagesExceeded=function(e){var d=this;if(confirm(jive.threadtodoc.maxMessagesExceeded())){d.emit("confirm",e)}}});define("apps/threadtodoc/views/threadtodoc_view",function(){return jive.ThreadToDoc.ThreadToDocView});
;
jive.namespace("ThreadToDoc");define("apps/threadtodoc/models/threadtodoc_source",["apps/shared/models/rest_service"],function(a){jive.ThreadToDoc.ThreadToDocSource=a.extend(function(b){b.resourceType="threadconversion"});return jive.ThreadToDoc.ThreadToDocSource});
;
jive.namespace("ThreadToDoc");jive.ThreadToDoc.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.maxMessages=c.maxMessages;this.threadMessageCount=c.threadMessageCount;this.threadToDocView=new jive.ThreadToDoc.ThreadToDocView();this.threadToDocView.addListener("browse",function(e){if(b.threadMessageCount>b.maxMessages){b.threadToDocView.maxMessagesExceeded(e)}else{var d=new jive.ThreadToDoc.ThreadToDocSource();d.save({threadID:b.objectID,containerType:b.containerType,containerID:b.containerID}).addCallback(function(f){window.location=f})}})}});define("apps/threadtodoc/main",function(){return jive.ThreadToDoc.Main});
;
// This file was automatically generated from threadtodoc.soy.
// Please don't edit this file by hand.

goog.provide('jive.threadtodoc.imports');
goog.provide('jive.threadtodoc.maxMessagesExceeded');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.threadtodoc.imports = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  return opt_sb ? '' : output.toString();
};


jive.threadtodoc.maxMessagesExceeded = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('forum.thrd.confirm_convert.text'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from modalizer.soy.
// Please don't edit this file by hand.

goog.provide('jive.modalizer.foo');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.modalizer.foo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  return opt_sb ? '' : output.toString();
};

;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ToggleFeatured == null) var ToggleFeatured = {};
ToggleFeatured._path = '/dwr';
ToggleFeatured.toggleFeatured = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeatured', p0, p1, p2, p3, callback);
}
ToggleFeatured.toggleFeaturedOnProfile = function(p0, p1, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeaturedOnProfile', p0, p1, callback);
}

;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
define("apps/shared/models/rest_service",["jquery"],function(a){window.jive.RestService=jive.oo.Class.extend(function(b){b.resourceType="abstract";b.displayGenericErrorMessages=true;b.putOnUpdate=false;b.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};b.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}a.ajax(a.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.emitSuccess(k)},error:this.errorCallback(j,c),timeout:120000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new jive.conc.Promise(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=a.extend({},this.defaultParams,e);return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new jive.conc.Promise(),c=this;if(e.hasOwnProperty("id")){e=e.id}a.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};b.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};b.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};b.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message||i.error||null:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};b.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.emitError.apply(e,d)};b.displayError=function(c){a(c).message({style:"error"})};b.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};b.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};b.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};b.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};b.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};b.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};b.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});return window.jive.RestService});
;
define("apps/shared/models/nested_rest_service",["apps/shared/models/rest_service"],function(a){jive.NestedRestService=a.extend(function(b,c){b.init=function(d){c.init.call(this,d);this.parentType=d.parentType;this.parentID=d.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});return jive.NestedRestService});
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){if(c!="outcome"){a[c]=b[c]}})}});define("apps/comment_app/models/comment",function(){return jive.CommentApp.Comment});
;
// This file was automatically generated from messages.soy.
// Please don't edit this file by hand.

goog.provide('jive.DiscussionApp.soy.renderReply');
goog.provide('jive.DiscussionApp.soy.replyErrorMessage');
goog.provide('jive.DiscussionApp.soy.rteMsgQuote');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.CommentApp.soy.outcomeAttachmentMenu');
goog.require('jive.i18n.soy');
goog.require('jive.resource.url');


jive.DiscussionApp.soy.renderReply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="', soy.$$escapeHtml(opt_data.messageID), '" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">', (opt_data.moderated) ? '<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('mod.content.create'),[])) + '</div>' : '', '<strong class="font-color-meta">', soy.$$escapeHtml(opt_data.i18n.forumThrdReplyTo), ' <span class="replyToName">', soy.$$escapeHtml(opt_data.userName), '</span> <img src="');
  jive.resource.url({path: '/images/inline-reply-arrow.png'}, output);
  output.append('"></strong>', (opt_data.externallyVisible == 'true') ? '' : '', (opt_data.anonymous) ? '<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.name'),[])) + '<span class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.required.label'),[])) + '</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.email_address'),[])) + '<span class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.rqdNotPblshd.label'),[])) + '</span></label></div></div>' : '', '<a class="font-color-meta advEditor" href="javascript:void(0);">', soy.$$escapeHtml(opt_data.i18n.advEditor), '</a>');
  jive.CommentApp.soy.outcomeAttachmentMenu(null, output);
  output.append('<p class="jive-discussion-post"></p></div></div></div></div></li>');
  return opt_sb ? '' : output.toString();
};


jive.DiscussionApp.soy.replyErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));
  return opt_sb ? '' : output.toString();
};


jive.DiscussionApp.soy.rteMsgQuote = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-rendered-content"><blockquote class="jive-quote"><span class="jive-quote-header">');
  if (opt_data.isAnonymous) {
    output.append(soy.$$escapeHtml(opt_data.i18n.postGuestWroteLabel));
  } else {
    jive.i18n.soy({string: opt_data.i18n.postUserWroteLabel, zero: soy.$$escapeHtml(opt_data.userName)}, output);
  }
  output.append(':</span><br/><br/>', soy.$$filterNoAutoescape(opt_data.msgBody), '</blockquote></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("SharedViews");define("apps/shared/views/rte_view",function(){jive.SharedViews.RteView=$Class.extend({init:function(a,b){this._preferredMode=window.preferredMode||b.preferredMode||"advanced";this._container=$j(a);this._formActionContainer=(b.formActionContainer)?$j(b.formActionContainer):this._container;this._rteDisabledBrowser=b.rteDisabledBrowser;this._resourceID=b.resourceID;this._resourceType=b.resourceType;this._isAnonymous=b.isAnonymous;this._templateName=b.templateName||"rte-template";this._bodyContent=b.bodyContent;this._settingsID=b.settingsID||"mini";this._i18n=b.i18n;this.images_enabled=b.imagesEnabled;var c=this;$j(document).ready(function(){c._render();if(!c._rteDisabledBrowser){c._createRTE()}c._addListeners()})},remove:function(){if(!this._rteDisabledBrowser){if(this._rte){this._rte.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"})}this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")},val:function(a){if(a){this._rte.setHTML(a);return this}else{return this._getContentBody()}},setPreviewButtonText:function(a){this._container.find("[name=preview]").val(a)},focus:function(){this._rte.tinymceFocus()},_initEditor:function(){this._currentMode="advanced";var a=this;var b=new jive.rte.RTEListener();b.doneTogglingMode=function(){if(a._currentMode=="advanced"){a._currentMode="rawhtml"}else{a._currentMode="advanced"}a._refreshLinks();a.emit("toggle",a._currentMode)};this._rte.addListener(b);if(this._preferredMode=="rawhtml"){this._rte.toggleEditorMode("wysiwygtext")}else{if(tinymce.isIE){this._rte.toggleEditorMode();this._rte.toggleEditorMode()}}},_initRTE:function(){var a=this;if(this._rte.isTextOnly()){$j("#wysiwyg-panel").removeClass("loading");this._preferredMode="rawhtml";this._currentMode="rawhtml";return}this._initEditor();this._refreshLinks();setTimeout(function(){a.focus()},0);this.emit("ready")},_createRTE:function(){var b=this;var a={images_enabled:this.images_enabled||false};this._rte=new jive.rte.RTE(jiveControl,"wysiwygtext",this._settingsID,a);window.editor.put("wysiwygtext",this._rte);jive.rte.multiRTE.push("wysiwygtext");var c=new jive.rte.RTEListener();c.initFinished=function(d){b._initRTE()};this._rte.addListener(c)},_getContentBody:function(){if(!this._rteDisabledBrowser){return this._rte.getHTML()}else{return this._container.find("textarea:visible").val()}},_getValues:function(){return{body:this._getContentBody()}},_postHandler:function(){this.emit("post",this._getValues());return false},_addListeners:function(){var a=this;this._formActionContainer.find("[name=post]").click(function(){return a._postHandler()}).end().find("[name=preview]").click(function(){a.emit("preview",a._getValues());return false}).end().find("[name=cancel]").click(function(){a.emit("cancel",a._getValues());a._unload();return false});this._container.find(".toggle_preferred_mode").click(function(){var b=a._currentMode;WikiTextConverter.setPreferredEditorMode(b,{callback:function(){a._preferredMode=b;window.preferredMode=b;a._refreshLinks()},timeout:DWRTimeout});return false}).end().find(".toggle_html").click(function(){a._rte.toggleEditorMode("wysiwygtext");return false});this._unloadCallback=this._unload.bind(this);$j(window).bind("unload",this._unloadCallback)},_unload:(function(){}),_template:(function(){var b={};return function a(f,e){var c=/^[\w\-]+$/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").replace(/(^|%>)(.+?)(<%|$)/,function(g,h,i,j){return h+d(i)+j}).split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c;function d(g){return g.replace("'","&apos;").replace("\\","\\\\")}}})(),_render:function(){this._container.append(this._template(this._templateName,{body:this._bodyContent}))},_refreshLinks:function(){this._container.find(".toggle_html").toggle(this._currentMode=="rawhtml");this._container.find(".toggle_preferred_mode").toggle(this._preferredMode!=this._currentMode)}});jive.SharedViews.RteView.setMiniRTEQuotedMsg=function(c,b,d,a){window._jive_gui_quote_text=jive.DiscussionApp.soy.rteMsgQuote({i18n:b,userName:c,isAnonymous:d,msgBody:a})};jive.conc.observable(jive.SharedViews.RteView.prototype);return jive.SharedViews.RteView});
;
// This file was automatically generated from form_waiting_view.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.formwaiting.formWaitingOverlay');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.formwaiting.formWaitingOverlay = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="', soy.$$escapeHtml(opt_data.bgCssClass), '"></div></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);b=b||{};if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){var e=new jive.loader.LoaderView({size:"big"});if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.shared.formwaiting.formWaitingOverlay({bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=e.getContent();e.appendTo(d);a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).prop("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).prop("disabled",false)}});define("apps/shared/views/form_waiting_view",function(){return jive.shared.FormWaitingView});
;
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

goog.provide('jive.CommentApp.soy.outcomeAttachment');
goog.provide('jive.CommentApp.soy.outcomeAttachmentMenu');
goog.provide('jive.CommentApp.soy.renderReply');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.outcomes.badge.badgeRaw');
goog.require('jive.resource.url');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.soy.i18nHelper');


jive.CommentApp.soy.renderReply = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="addReply jive-js-addReply" style="display:none;', (opt_data.indent) ? ' margin-left:' + soy.$$escapeHtml(opt_data.indent) : '', '">');
  jive.shared.displayutil.avatar({anonymous: _jive_current_user.anonymous, enabled: _jive_current_user.enabled, partner: _jive_current_user.partner, username: _jive_current_user.username, id: _jive_current_user.id, ID: _jive_current_user.ID, displayName: _jive_current_user.displayName, visible: true, prop: _jive_current_user.prop, avatarID: _jive_current_user.avatarID, currentUserPartner: _jive_current_user.partner, size: 32}, output);
  output.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content jive-create-comment"><p class="jive-comment-meta font-color-meta-light"><strong style="" class="font-color-meta replyTo">');
  jive.shared.soy.i18nHelper({i18nKey: 'cmnt.reply_to.gtitle', arg0: '<span class="replyToName">' + soy.$$escapeHtml(opt_data.username) + '</span>', noAutoEscape: true}, output);
  output.append('<img src="');
  jive.resource.url({path: '/images/inline-reply-arrow.png'}, output);
  output.append('"/></strong></p>');
  if (opt_data.commentMode == 'comments') {
    jive.CommentApp.soy.outcomeAttachmentMenu(null, output);
  }
  output.append((opt_data.externallyVisible == 'true') ? '' : '', '<div ', (opt_data.commentID) ? 'id="comment-body-' + soy.$$escapeHtml(opt_data.commentID) + '"' : '', ' class="jive-comment-body"><div class="jive-rendered-content"><p><div ', (opt_data.commentID) ? 'id="jive-content-post-' + soy.$$escapeHtml(opt_data.commentID) + '"' : '', ' class="jive-comment-post"></div></p></div></div></div></li>');
  return opt_sb ? '' : output.toString();
};


jive.CommentApp.soy.outcomeAttachmentMenu = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-reply-outcome-action-container js-reply-outcome-action-container" style="display: none;"><a href="#" class="font-color-meta js-reply-outcome-button">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.reply.actionButton.label'),[])), ' <span class="j-ui-elem j-action-down-arrow"></span></a><div class="js-reply-outcome-badge-container" styles="display: none;"></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.CommentApp.soy.outcomeAttachment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('cmnt.outcome.attached'),[])), ' ');
  jive.outcomes.badge.badgeRaw({tagName: 'span', outcomeType: String(opt_data.outcomeType.name).toLowerCase(), embedded: true}, output);
  output.append('<a href="#" class="j-remove-outcome js-remove-outcome" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.remove'),[])), '"><span class="jive-icon-sml jive-glyph-remove"></span><span class="j-508-label"></span></a></span>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from draft.soy.
// Please don't edit this file by hand.

goog.provide('jive.content.draft');
goog.provide('jive.content.draftDeleteButtonLabel');
goog.provide('jive.content.draftRecoverButtonLabel');
goog.provide('jive.content.draftlastsaved');
goog.provide('jive.content.drafts');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.i18nHelper');


jive.content.drafts = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="autosave-prompt" class="jive-warn-box" role="alert" aria-live="polite" aria-atomic="true" tabindex="0"><p><span class="jive-icon-med jive-icon-warn"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('draft.exists.info'),[])), '</p>');
  var draftList6 = opt_data.drafts;
  var draftListLen6 = draftList6.length;
  for (var draftIndex6 = 0; draftIndex6 < draftListLen6; draftIndex6++) {
    var draftData6 = draftList6[draftIndex6];
    jive.content.draft(draftData6, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.content.draftlastsaved = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="last-saved">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('draft.saved.last'),[(opt_data.date ? _jive_moment((parseFloat(opt_data.date) ? parseFloat(opt_data.date) : opt_data.date)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LT') : '')])), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.content.draft = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-draft" id="draft-', soy.$$escapeHtml(opt_data.id), '"><dl><dt>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('draft.saved.last.short'),[])), '</dt><dd>', soy.$$escapeHtml(((opt_data.modificationDate ? jive.model.DateUtil.parseISODateTime(opt_data.modificationDate) : '') ? _jive_moment((parseFloat((opt_data.modificationDate ? jive.model.DateUtil.parseISODateTime(opt_data.modificationDate) : '')) ? parseFloat((opt_data.modificationDate ? jive.model.DateUtil.parseISODateTime(opt_data.modificationDate) : '')) : (opt_data.modificationDate ? jive.model.DateUtil.parseISODateTime(opt_data.modificationDate) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('ll') : '')), '</dd>', (opt_data.subject) ? '<dt>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.subject'),[])) + ':</dt><dd>' + soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.subject, 70)) + '</dd>' : '', '</dl><button id="draft-recover-button-', soy.$$escapeHtml(opt_data.id), '" class="jive-description use-draft" aria-labelledby="draft-recover-label-', soy.$$escapeHtml(opt_data.id), '" role="button">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('draft.recover'),[])), '</button>');
  jive.content.draftRecoverButtonLabel(opt_data, output);
  output.append('<button id="draft-delete-button-', soy.$$escapeHtml(opt_data.id), '" class="jive-description destroy-draft" aria-labelledby="draft-delete-label-', soy.$$escapeHtml(opt_data.id), '" role="button">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('draft.delete'),[])), '</button>');
  jive.content.draftDeleteButtonLabel(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.content.draftRecoverButtonLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span aria-hidden="true" class="j-508-label" id="draft-recover-label-', soy.$$escapeHtml(opt_data.id), '">');
  jive.shared.soy.i18nHelper({i18nKey: opt_data.subject ? 'draft.recover.label.subject' : 'draft.recover.label.subject.none', arg0: soy.$$escapeHtml((opt_data.modificationDate ? _jive_moment((parseFloat(opt_data.modificationDate) ? parseFloat(opt_data.modificationDate) : opt_data.modificationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('ll') : '')), arg1: soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.subject, 70))}, output);
  output.append('</span>');
  return opt_sb ? '' : output.toString();
};


jive.content.draftDeleteButtonLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span aria-hidden="true" class="j-508-label" id="draft-delete-label-', soy.$$escapeHtml(opt_data.id), '">');
  jive.shared.soy.i18nHelper({i18nKey: opt_data.subject ? 'draft.delete.label.subject' : 'draft.delete.label.subject.none', arg0: soy.$$escapeHtml((opt_data.modificationDate ? _jive_moment((parseFloat(opt_data.modificationDate) ? parseFloat(opt_data.modificationDate) : opt_data.modificationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('ll') : '')), arg1: soy.$$escapeHtml((function(word, limit) {   var bits, i;   if ('string' !== typeof word) {       return '';   }    bits = word.split('');   if (bits.length > limit) {        for (i = bits.length - 1; i > -1; --i) {            if (i > limit) {                bits.length = i;            }            else if (' ' === bits[i]) {                bits.length = i;                break;            }        }        bits.push('...');    }    return bits.join('');})(opt_data.subject, 70))}, output);
  output.append('</span>');
  return opt_sb ? '' : output.toString();
};

;
var form2js=(function(){function e(m,l,n,k,p){if(typeof n=="undefined"||n==null){n=true}if(typeof l=="undefined"||l==null){l="."}if(arguments.length<5){p=false}m=typeof m=="string"?document.getElementById(m):m;var q=[],j,o=0;if(m.constructor==Array||(typeof NodeList!="undefined"&&m.constructor==NodeList)){while(j=m[o++]){q=q.concat(d(j,k,p))}}else{q=d(m,k,p)}return b(q,n,l)}function b(s,A,C){var p={},q={},y,x,w,v,u,r,n,t,o,m,z,D,B;for(y=0;y<s.length;y++){u=s[y].value;if(A&&(u===""||u===null)){continue}D=s[y].name;B=D.split(C);r=[];n=p;t="";for(x=0;x<B.length;x++){z=B[x].split("][");if(z.length>1){for(w=0;w<z.length;w++){if(w==0){z[w]=z[w]+"]"}else{if(w==z.length-1){z[w]="["+z[w]}else{z[w]="["+z[w]+"]"}}m=z[w].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(m){for(v=1;v<m.length;v++){if(m[v]){r.push(m[v])}}}else{r.push(z[w])}}}else{r=r.concat(z)}}for(x=0;x<r.length;x++){z=r[x];if(z.indexOf("[]")>-1&&x==r.length-1){o=z.substr(0,z.indexOf("["));t+=o;if(!n[o]){n[o]=[]}n[o].push(u)}else{if(z.indexOf("[")>-1){o=z.substr(0,z.indexOf("["));m=z.replace(/(^([a-z_]+)?\[)|(\]$)/gi,"");t+="_"+o+"_"+m;if(!q[t]){q[t]={}}if(o!=""&&!n[o]){n[o]=[]}if(x==r.length-1){if(o==""){n.push(u);q[t][m]=n[n.length-1]}else{n[o].push(u);q[t][m]=n[o][n[o].length-1]}}else{if(!q[t][m]){if((/^[a-z_]+\[?/i).test(r[x+1])){n[o].push({})}else{n[o].push([])}q[t][m]=n[o][n[o].length-1]}}n=q[t][m]}else{t+=z;if(x<r.length-1){if(!n[z]){n[z]={}}n=n[z]}else{n[z]=u}}}}}return p}function d(k,j,l){var i=a(k,j,l);return i.length>0?i:g(k,j,l)}function g(k,j,m){var i=[],l=k.firstChild;while(l){i=i.concat(a(l,j,m));l=l.nextSibling}return i}function a(l,j,n){var k,m,i,o=f(l,n);k=j&&j(l);if(k&&k.name){i=[k]}else{if(o!=""&&l.nodeName.match(/INPUT|TEXTAREA/i)){m=c(l);i=[{name:o,value:m}]}else{if(o!=""&&l.nodeName.match(/SELECT/i)){m=c(l);i=[{name:o.replace(/\[\]$/,""),value:m}]}else{i=g(l,j,n)}}}return i}function f(i,j){if(i.name&&i.name!=""){return i.name}else{if(j&&i.id&&i.id!=""){return i.id}else{return""}}}function c(i){if(i.disabled){return null}switch(i.nodeName){case"INPUT":case"TEXTAREA":switch(i.type.toLowerCase()){case"radio":case"checkbox":if(i.checked&&i.value==="true"){return true}if(!i.checked&&i.value==="true"){return false}if(i.checked){return i.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return i.value;break}break;case"SELECT":return h(i);break;default:break}return null}function h(o){var k=o.multiple,j=[],n,p,m;if(!k){return o.value}for(n=o.getElementsByTagName("option"),p=0,m=n.length;p<m;p++){if(n[p].selected){j.push(n[p].value)}}return j}return e})();var js2form=(function(){var f=/^\[\d+?\]/,j=/^[a-zA-Z_][a-zA-Z_0-9]+/,l=/\[[0-9]+?\]$/,g=/(.*)(\[)([0-9]*)(\])$/,k=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;function h(q,s,m,u,p){if(arguments.length<3){m="."}if(arguments.length<4){u=null}if(arguments.length<5){p=false}var o,r;o=i(s);r=a(q,p,m,{},false);for(var t=0;t<o.length;t++){var v=o[t].name,n=o[t].value;if(typeof r[v]!="undefined"){b(r[v],n)}else{if(typeof r[v.replace(l,"[]")]!="undefined"){b(r[v.replace(l,"[]")],n)}}}}function b(q,p){var o,n,m;if(q instanceof Array){for(n=0;n<q.length;n++){if(q[n].value==p){if(q[n].checked!=true){$j(q[n]).click()}}}}else{if(d.test(q.nodeName)){$j(q).val(p)}else{if(/SELECT/i.test(q.nodeName)){o=q.getElementsByTagName("option");for(n=0,m=o.length;n<m;n++){if(o[n].value==p){o[n].selected=true;if(q.multiple){break}}else{if(!q.multiple){o[n].selected=false}}}}}}}function a(q,p,n,v,r){if(arguments.length<4){v={}}var A={},w=q.firstChild,m,o,y,u,t,s,z;while(w){m="";if(w.name&&w.name!=""){m=w.name}else{if(p&&w.id&&w.id!=""){m=w.id}}if(m==""){var x=a(w,p,n,v,r);for(y in x){if(typeof A[y]=="undefined"){A[y]=x[y]}else{for(u=0;u<x[y].length;u++){A[y].push(x[y][u])}}}}else{if(/SELECT/i.test(w.nodeName)){for(t=0,z=w.getElementsByTagName("option"),s=z.length;t<s;t++){if(r){z[t].selected=false}o=e(m,n,v);A[o]=w}}else{if(/INPUT/i.test(w.nodeName)&&/CHECKBOX|RADIO/i.test(w.type)){if(r){w.checked=false}o=e(m,n,v);o=o.replace(l,"[]");if(!A[o]){A[o]=[]}A[o].push(w)}else{if(r){w.value=""}o=e(m,n,v);A[o]=w}}}w=w.nextSibling}return A}function e(o,p,u){var v=[],n=o.split(p),s,r,q,m,w,t;o=o.replace(k,"[$1].[$2]");for(t=0;t<n.length;t++){s=n[t];v.push(s);r=s.match(g);if(r!=null){q=v.join(p);m=q.replace(g,"$3");q=q.replace(g,"$1");if(typeof(u[q])=="undefined"){u[q]={lastIndex:-1,indexes:{}}}if(m==""||typeof u[q].indexes[m]=="undefined"){u[q].lastIndex++;u[q].indexes[m]=u[q].lastIndex}w=u[q].indexes[m];v[v.length-1]=s.replace(g,"$1$2"+w+"$4")}}q=v.join(p);q=q.replace("].[","][");return q}function i(q,o){var m=[],p,n;if(arguments.length==1){o=0}if(q==null){m=[{name:"",value:null}]}else{if(typeof q=="string"||typeof q=="number"||typeof q=="date"||typeof q=="boolean"){m=[{name:"",value:q}]}else{if(q instanceof Array){for(p=0;p<q.length;p++){n="["+p+"]";m=m.concat(c(q[p],n,o+1))}}else{for(p in q){n=p;m=m.concat(c(q[p],n,o+1))}}}}return m}function c(n,q,p){var t;var m=[],o=i(n,p+1),r,s;for(r=0;r<o.length;r++){t=q;if(f.test(o[r].name)){t+=o[r].name}else{if(j.test(o[r].name)){t+="."+o[r].name}}s={name:t,value:o[r].value};m.push(s)}return m}return h})();(function(a){a.fn.toObject=function(c){var b=[],d={mode:"first",delimiter:".",skipEmpty:true,nodeCallback:null,useIdIfEmptyName:false};if(c){a.extend(d,c)}switch(d.mode){case"first":return form2js(this.get(0),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break;case"all":this.each(function(){b.push(form2js(this,d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName))});return b;break;case"combine":return form2js(Array.prototype.slice.call(this),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break}}})(jQuery);
;
define("apps/shared/models/location_state",function(){if(jive.LocationState&&jive.locationState){return jive.locationState}jive.LocationState=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.defaults={supportPushState:true,supportFragment:true};a.init=function(c){var f=b.extend({},this.defaults,c||{}),e=location.href,g=this;this.location=e;this.description="";this.manuallyUpdatingHash=false;this.supportPushState=f.supportPushState&&!!(window.history&&window.history.pushState);this.supportFragment=f.supportFragment;var d=[this.supportPushState?"popstate":null,this.supportFragment?"hashchange":null].filter(function(h){return !!h}).join(" ");b(window).bind(d,function(i){var h=location.href;if(g.afterInit||h!==e){g.location=h;if(!g.manuallyUpdatingHash){g.emitChange(g.current(),g.description,h)}g.manuallyUpdatingHash=false}})};this.get=function(c){return this.current()[c]};this.getState=function(){return this.current()};this.getEphemeralState=function(){return b.deparam.fragment()};a.getPermaState=function(){return b.deparam.querystring()};this.pushState=function(e,c){var d=b.extend(this.current(),e);Object.keys(e).forEach(function(f){if(typeof e[f]=="undefined"||(b.isArray(e[f])&&e[f].length<1)){delete d[f]}});this.setState(d,c)};this.setState=function(g,f,e){var d=this.lastLocation;this.location=this.supportPushState?this.newLocation(g,e):this.newFragment(g,e);this.description=f||"";this.emitChange(g,f,this.location);if(this.location!==d){if(this.supportPushState){try{history.pushState(this.current(),this.description,this.location)}catch(c){window.location=this.location}}else{if(this.supportFragment){this.updateLocationHash(this.location)}}}};this.watchParam=function(d,e){var c=this.getState()[d];this.addListener("change",function(i,h,g){var f=i[d];if(f!==c){e(f,i,h,g);c=f}})};a.current=function(){var e=this.location.match(/\?/)?b.deparam.querystring(this.location):{},d=this.location.match(/#/)?b.deparam.fragment(this.location):{};var f=b.extend({},e,d);var c={};Object.keys(f).forEach(function(g){if(f[g]!==""){c[g]=f[g]}});return c};a.newLocation=function(e,c){var d;if(!c){d=location.href.split(/[?#]/)[0]}else{if(c.slice(0,_jive_base_url.length)===_jive_base_url||c.match(/^[a-z]+:/i)){d=c}else{d=jive.app.url({path:"/"+c.replace(/^\//,"")})}}return b.param.querystring(d,e)};a.newFragment=function(g,e){var c={},f=b.deparam.querystring(),h;h=location.href.split("#")[0];if(e){g.nPLoc=e}Object.keys(f).forEach(function(i){if(typeof g[i]==="undefined"||(b.isArray(g[i])&&g[i].length<1)){c[i]=""}});Object.keys(g).forEach(function(i){if(f[i]!==String(g[i])){c[i]=g[i]}});var d=b.param.fragment(h,c);if(/#[^=&]+=$/.test(d)){d=d.substring(0,d.length-1)}return d};a.emitChange=function(e,d,c){if(c!==this.lastLocation){this.emit("change",e,d,c);this.lastLocation=c;this.afterInit=true}else{this.emit("noChange",e,d,c)}};a.updateLocationHash=function(d){var c=this;function e(){c.preserveScrollPosition(d.split("#")[1],function(){c.manuallyUpdatingHash=true;location.href=d})}if(b.browser.msie&&b.browser.version<8){(this.locationHashTimeouts||[]).forEach(function(f){clearTimeout(f)});this.locationHashTimeouts=[];this.locationHashTimeouts.push(setTimeout(function(){c.locationHashTimeouts.push(setTimeout(e,100))},100))}else{e()}};a.preserveScrollPosition=function(c,e){var d;if(c){d=b(window).scrollTop();e();b(window).scrollTop(d)}else{e()}}});jive.locationState=new jive.LocationState();return jive.locationState});
;
jive.namespace("draft");jive.draft.View=jive.AbstractView.extend(function(b,d){var e=jQuery,a,f;var c=false;this.init=function(g){d.init.call(this,g);this.options=e.extend({pushStateEnabled:true},g);a=this;a.locationState=new jive.LocationState();e(function(){var j=a.getContent();var h=a.serializeForm();j.data("autosave",h);a.emit("display");e("#autosave-prompt .use-draft").live("click",function(m){var l=e(m.target).closest(".jive-draft");var k=l.data("draft");a.emit("restore",k);jive.switchboard.emit("draft.destroy",k.id)});e("#autosave-prompt .destroy-draft").live("click",function(m){var l=e(m.target).closest(".jive-draft");var k=l.data("draft");a.emit("destroy",k.id);jive.switchboard.emit("draft.destroy",k.id)});a.unpause();var i=window.setInterval(function(){a.emit("keepalive",i)},g.keepaliveInterval*1000);e(window).unload(function(){a.removeFromWorkingDrafts(j.data("autosave").id)});e(".jive-form-button-cancel").on("click",function(){a.removeFromWorkingDrafts(j.data("autosave").id)});jive.switchboard.addListener("draft.destroy",function(k){a.destroy(k)})})};this.pause=function(){if(f){clearTimeout(f);f=null}};this.unpause=function(){if(!f){f=setTimeout(a.save,a.options.interval*1000)}};this.save=function(){var i=new Date().getTime();var o=false;var j=function(r,q){if(q==4026||q==403){c=true}g()};function g(){var q=(new Date().getTime()-i);f=setTimeout(a.save,Math.min(Math.max(q*20,a.options.interval*1000),a.options.interval*50000))}var h=a.serializeForm();if(h.body.length===0){g();return}var m=a.getContent();var n=m.data("autosave");var l=m.data("lastAttempt");if(l){o=h.body==l.body&&h.subject==l.subject&&JSON.stringify(h.properties)==JSON.stringify(l.properties)}var k=h.body!=n.body||h.subject!=n.subject||JSON.stringify(h.properties)!=JSON.stringify(n.properties);if(!o){c=false}m.data("lastAttempt",h);if(!k){g();return}if(!c){if(n.id){h.id=n.id;var p=a.emitP("save",h,j).addCallback(g)}else{var p=a.emitP("create",h,j).addCallback(g)}}else{g()}};b.serializeForm=function(){var g={};var i=a.getContent().toObject({mode:"all"})[0];g.objectType=a.options.objectType;g.draftObjectType=a.options.draftObjectType;g.draftObjectID=a.options.draftObjectID;g.subject=e("#"+a.options.subject).val();var h=a.getRTE();if(h.isSpellChecking()){g.body=""}else{g.body=h?h.getHTML():""}g.properties={};e.each(a.options.properties,function(k,j){g.properties[j]=i[j]});return g};b.getRTE=function(){return window.editor.get(a.options.editorId)};this.saved=function(i,m){try{var l=a.getContent();l.data("autosave",i);a.addToWorkingDrafts(i.id);if(a.options.pushStateEnabled){a.updatePushState(i.id)}a.updateFormDraftID(l,i.id);var k=e(jive.content.draftlastsaved({date:new Date()}));var h=e(a.getRTE().getBelowEditorArea());var g=h.find(".last-saved");if(g.length){g.replaceWith(k)}else{k.hide().appendTo(h).fadeIn();a.getRTE().autoReposition()}m.emitSuccess(i)}catch(j){if(m){m.emitError(j)}}};this.display=function(l){var h=a.locationState.getState().draftID;if(h){var k=false;e.each(l,function(n,m){if(m.id==h){a.emit("restore",m);k=true}});if(k){return}}var i=[];e.each(l,function(n,m){if(!a.isWorkingDraft(m.id)){i.push(m)}});if(i.length===0){return}var j=a.getContent();var g=e(jive.content.drafts({drafts:i}));g.find(".jive-draft").each(function(m){e(this).data("draft",i[m])});g.hide().insertBefore(j).fadeIn();g.focus()};this.restore=function(h){var g=a.getContent();js2form(g[0],h.properties);a.getRTE().setHTML(h.body);e("#"+a.options.subject).val(h.subject);g.trigger("restore",h);a.addToWorkingDrafts(h.id);a.updateFormDraftID(g,h.id);g.data("autosave",h);e("#autosave-prompt").fadeOut(function(){e(this).safeRemove()});if(a.options.pushStateEnabled){a.updatePushState(h.id)}};this.destroy=function(k){var g=e("#autosave-prompt");if(g.length===0){return}var i=e("#draft-"+k);if(i.length===0){return}var j=g.find(".jive-draft").length>1;var h=j?i:g;h.fadeOut(function(){e(this).safeRemove()})};b.updateFormDraftID=function(h,i){var g=h.find("input#draftID");if(g.length===0){g=e("<input />",{id:"draftID",name:"draftID",type:"hidden"});g.appendTo(h)}g.val(i)};b.updatePushState=function(g){a.locationState.pushState({draftID:g})};b.addToWorkingDrafts=function(h){var g=a.getWorkingDrafts();if(!a.isWorkingDraft(h)){g.push(h)}if(typeof(localStorage)!="undefined"){localStorage.setItem("workingDrafts",g)}};b.removeFromWorkingDrafts=function(h){var g=a.getWorkingDrafts();g.splice(g.indexOf(String(h)),1);if(typeof(localStorage)!="undefined"){localStorage.setItem("workingDrafts",g)}};b.isWorkingDraft=function(g){return e.inArray(String(g),a.getWorkingDrafts())>-1};b.getWorkingDrafts=function(){if(typeof(localStorage)=="undefined"){return[]}var g=localStorage.getItem("workingDrafts");return g?g.split(","):[]}});define("apps/content/draft/view",function(){return jive.draft.View});
;
jive.namespace("draft");define("apps/content/draft/source",["apps/shared/models/rest_service"],function(a){jive.draft.Model=a.extend(function(b){b.resourceType="draft";b.pluralizedResourceType=b.resourceType;this.save=function(c){return this.commonAjaxRequest(new jive.conc.Promise(),"PUT",{url:this.RESOURCE_ENDPOINT+"/"+c.id,contentType:"application/json; charset=utf-8",data:JSON.stringify(c)})};this.create=function(c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT,contentType:"application/json; charset=utf-8",data:JSON.stringify(c)})};this.display=function(c){return this.get(c)}});return jive.draft.Model});
;
jive.namespace("draft");jive.draft.Main=jive.oo.Class.extend(function(a){this.init=function(b){a.main=this;this.options=$j.extend({enabled:true,interval:10,keepaliveInterval:90,objectType:null,draftObjectType:null,draftObjectID:null,editorId:null,subject:null,images:[],properties:[],confirmationMessage:jive.i18n.getMsg("global.unsaved_changes.text"),saveMessage:jive.i18n.getMsg("forum.post.save_and_edit.text"),savedMessage:jive.i18n.getMsg("forum.post.save_and_edit.text")},b);b=this.options;this.view=new jive.draft.View(b);this.model=new jive.draft.Model(b);this.view.addListener("keepalive",function(c){var d=a.main.model.get("");d.addListener("error",function(f,e){if(e==403){window.clearInterval(c)}})});this.view.addListener("display",function(c){var d=b.objectType+"/"+b.draftObjectType+"/"+b.draftObjectID;a.main.model.display(d).addCallback(function(e){a.main.view.display(e)})});this.view.addListener("create",function(d,c,e){a.main.model.create(d).addCallback(function(f){a.main.view.saved(f,e)}).addErrback(function(){e.emitError()}).addListener("error",c)});this.view.addListener("save",function(d,c,e){a.main.model.save(d).addCallback(function(f){a.main.view.saved(f,e)}).addErrback(function(){e.emitError()}).addListener("error",c)});this.view.addListener("restore",function(c){a.main.view.restore(c)});this.view.addListener("destroy",function(c){a.main.model.destroy(c).addCallback(function(d){a.main.view.destroy(c)})})};this.pause=function(){a.main.view.pause()};this.unpause=function(){a.main.view.unpause()}});define("apps/content/draft/main",function(){return jive.draft.Main});
;
jive.namespace("CommentApp");define("apps/comment_app/views/form_view",function(){jive.CommentApp.FormView=jive.oo.Class.extend(function(a,b){jive.conc.observable(this);this.init=function(c,d){this._parentCommentID=d.parentCommentID;this._commentMode=d.commentMode;if(!this._postBlock){this._postBlock=$j("#jive-comment-post-block")}this._itemAuthorID="comment-author";this._itemBodyID="commentBody";this._itemEmailID="comment-email";this._itemURLID="comment-url";this._container=$j(c);this._initFormWaitingView(d.i18n);this.rteView=null;this.options=d;this._render()};this.getParentCommentID=function(){return this._parentCommentID};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView(this._container.parents(".jive-js-addReply"),{containerPadding:0})};a.focus=function(){if(this._isAnonymous){$j("#"+this._itemAuthorID).focus()}else{b.focus.call(this)}};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:$j("#"+this._itemAuthorID).val(),email:$j("#"+this._itemEmailID).val(),url:$j("#"+this._itemURLID).val(),parentCommentID:this._parentCommentID,commentMode:this._commentMode,outcome:this._container.find(".js-outcome-attachment").data("outcomeType")}};a._postHandler=function(){var c=this;if(c._validateComment()){c._formWaitingView.disableForm();c.emitP("post",c._getValues()).addCallback(function(){c._formWaitingView.enableForm()}).addErrback(function(){c._formWaitingView.enableForm()})}return false};a._validateComment=function(){var c=this._getValues();if(this.options.isAnonymous&&$def(c.name)&&$j.trim(c.name)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.name_required.text"})}).message({style:"error"});return false}else{if(this.options.isAnonymous&&$def(c.email)&&$j.trim(c.email)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.email_required.text"})}).message({style:"error"});return false}else{if($j.trim(c.body)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"post.err.pls_enter_body.text"})}).message({style:"error"});return false}else{return true}}}};a._initFormControls=function(d,c){};a._isEdit=function(){return false};a._render=function(){var e=this._template();var j="wysiwyg_id_"+jive.CommentApp.FormView.id;jive.CommentApp.FormView.id++;e.find("textarea").attr("id",j);this._container.append(e);this._initFormControls(this._container,j);var h=this;var c=new jive.rte.EntitlementService({objectID:h.options.resourceID,objectType:h.options.resourceType,entitlement:"VIEW"});var g=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:h.options.containerID,containerType:h.options.containerType});var f=$j("#"+j).closest("form");var d=new jive.rte.FormService({$form:f,formSubmitHandler:function(){return h._postHandler()}});var i=$j.extend({$element:$j("#"+j),isEditing:this._isEdit,pinToolbar:false,onReady:function(){if(h.options.rteOptions.onReady){h.options.rteOptions.onReady()}jive.conc.nextTick(function(){h.rteView.focus()});if(!h.options.isAnonymous){var k={selector:f,objectType:105,draftObjectType:h.options.resourceType,draftObjectID:h.options.resourceID,editorId:j,pushStateEnabled:false};new jive.draft.Main(k)}},services:{imageService:g,formService:d,entitlementService:c}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(i);this._container.find("form").find("[name=cancel]").click(function(k){h.emit("cancel",h._getValues());k.preventDefault()})};a._template=function(){return $j("<div></div>").html(this._postBlock.html())};this.remove=function(){var c=this.rteView.getID();if(this.rteView){this.rteView.killYourself();this.rteView.destroy()}window.editor.clear(c);jive.rte.multiRTE=jive.rte.multiRTE.filter(function(d){return d!=c});this._container.find("form").parent().html("");$j(window).unbind("unload",this._unloadCallback);this.emit("remove")}});jive.CommentApp.FormView.id=0;return jive.CommentApp.FormView});
;
jive.namespace("CommentApp");jive.CommentApp.EditFormView=jive.CommentApp.FormView.extend(function(a,b){this.init=function(c,d){this._id=d.id;this._postBlock=$j("#jive-comment-edit-block");b.init.call(this,c,d)};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView($j(this._container).parents(".jive-comment-content"),{containerPadding:0})};a._initFormControls=function(h,g){var d=h.find(".jive-comment-rte-source").val();var c=h.find("[name=commentGuestName]").val();var f=h.find("[name=commentGuestEmail]").val();var e=h.find("[name=commentGuestUrl]").val();if(c||f||e){h.find(".jive-comment-rte-source").val();h.find(".jive-comment-post-anonymous [name=name]").val(c);h.find(".jive-comment-post-anonymous [name=email]").val(f);h.find(".jive-comment-post-anonymous [name=url]").val(e);h.find(".jive-comment-post-anonymous").show()}else{h.find(".jive-comment-post-anonymous").hide()}$j("#"+g).val(d)};a._isEdit=function(){return true};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:this._container.find("[name=name]").val(),email:this._container.find("[name=email]").val(),url:this._container.find("[name=url]").val(),id:this._id}}});define("apps/comment_app/views/edit_form_view",function(){return jive.CommentApp.EditFormView});
;
jive.namespace("CommentApp");jive.CommentApp.CommentView=function(l,q){jive.conc.observable(this);var n=q.id,i=$j(l),e=q.isThreaded,p=q.i18n,h=this;function f(){i.fadeOut(function(){$j(this).remove()});this.emit("remove",n);return this}function o(r){i.find("[class*=comment-preview]").html(r).fadeIn()}function m(){return i}function c(s,t,u){if(!u){u=i}var r=u.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(s,p,t,r)}function j(){i.find(".jive-comment-meta:first, #comment-body-"+n+", .js-comment-footer").hide();i.find(".jive-comment-meta:first").after('<p class="jive-js-edit-title j-editing-comment jive-comment-meta font-color-meta-light">'+p.cmntEditingTitle+"</p>")}function k(){i.find(".jive-comment-meta:first, #comment-body-"+n+", .js-comment-footer").show();i.find(".jive-js-edit-title").remove()}function g(){return n}function d(){return i.find(".jive-username-link:first").text()}function a(r){var s;if(e){s=i.find("ul.jive-comment:first");if(s.length===0){s=$j("<ul/>",{"class":"jive-comment clearfix jive-comment-threaded jive-comment-indent-1"});i.append(s)}s.append(r)}else{i.parent().append(r)}}function b(){var r=i.parents().andSelf().filter("ul.jive-comment").toArray();return r.slice(1).reduce(function(t,s){return t+parseInt($j(s).css("margin-left"),10)},0)}this.remove=f;this.displayPreview=o;this.getDOMElement=m;this.setQuotedMsg=c;this.getCommentID=g;this.username=d;this.showCommentEdit=j;this.hideCommentEdit=k;this.append=a;this.indent=b};define("apps/comment_app/views/comment_view",function(){return jive.CommentApp.CommentView});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Discussion=jive.CommentApp.Comment.extend({getFieldProps:function(){var b={};for(var a in this){if(!$j.isFunction(this[a])&&a!="outcome"){b[a]=this[a]}}return b}});define("apps/discussion_app/models/discussion",function(){return jive.DiscussionApp.Discussion});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/models/discussion_rest_source",["apps/shared/models/rest_service"],function(a){jive.DiscussionApp.DiscussionRestSource=a.extend(function(b){b.resourceType="message";b.pluralizedResourceType=b.resourceType;this.createMessage=function(h){var e=this.RESOURCE_ENDPOINT+"/"+h.forumThreadID+"/"+h.ID,d=h.name,c=h.email;delete h.name;delete h.email;var f=$j.deparam.querystring().fromQ?$j.deparam.querystring().fromQ:$j.deparam.fragment().fromQ;if(f){h.fromQuest=f}var g=JSON.stringify(h);if(d){e+="/guest";g={messageBean:h,guestUserName:d,guestUserEmail:c};g=JSON.stringify(g)}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:e,data:g})}});return jive.DiscussionApp.DiscussionRestSource});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.QuestionSource=function(h){var c=jive.rest.url("/message/"+h),b=c+"/question";function f(i){if(typeof i=="function"){i={success:i}}return i}function g(i){i=f(i);$j.ajax({type:"GET",url:b,dataType:"json",data:{},success:function(j){i.success(j)},error:function(j){if(typeof i.error=="function"){i.error.call(null,j)}}});return this}function d(i){i=f(i);$j.ajax({type:"POST",url:c+"/assumedanswered",dataType:"json",data:{},success:function(j){i.success(j)},error:function(j){if(typeof i.error=="function"){i.error.call(null,j)}}})}function e(i,j){j=f(j);$j.ajax({type:"POST",url:c+"/"+i+"/correct",dataType:"json",data:{},success:function(k){j.success(k)},error:function(k){if(typeof j.error=="function"){j.error.call(null,k)}}})}function a(i,j){j=f(j);$j.ajax({type:"POST",url:c+"/"+i+"/unmark",dataType:"json",data:{},success:function(k){j.success(k)},error:function(k){if(typeof j.error=="function"){j.error.call(null,k)}}})}this.getQuestion=g;this.markAsCorrect=e;this.markAssumedAnswered=d;this.unMarkAsCorrect=a};define("apps/discussion_app/models/question_source",function(){return jive.DiscussionApp.QuestionSource});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionView=function(h){jive.conc.observable(this);var e=$j(h),c=this;function b(){e.fadeOut(function(){$j(this).remove()});c.emit("remove",c.messageID);return c}function d(i){e.find("[class*=discussion-preview]").html(i).fadeIn()}function f(){return e}function g(k,j,l){var i=e.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(k,j,l,i)}function a(){var i=e.parents().andSelf().filter("li.reply").toArray();return i.slice(1).reduce(function(k,j){var l=$j(j);return k+parseInt(l.css("margin-left"),10)+parseInt(l.css("padding-left"),10)},0)}this.remove=b;this.displayPreview=d;this.getDOMElement=f;this.setQuotedMsg=g;this.indent=a;(function(j){var i=e.find("a.discussionAdd");j.messageID=i.attr("data-messageID");j.username=i.attr("data-discussionusername");j.userid=i.attr("data-discussionuserid");j.isReply=(i.attr("data-isReply")||"").toLowerCase()==="true";j.replySubject=i.attr("data-replySubject");j.isAnonymous=(i.attr("data-isAnonymous")||"").toLowerCase()==="true";j.advEditorLnk=i.attr("data-advEditorLnk")})(this)};define("apps/discussion_app/views/discussion_view",function(){return jive.DiscussionApp.DiscussionView});
;
// This file was automatically generated from badges.soy.
// Please don't edit this file by hand.

goog.provide('jive.outcomes.badge.badge');
goog.provide('jive.outcomes.badge.badgeActionLink');
goog.provide('jive.outcomes.badge.badgeAlertedNames');
goog.provide('jive.outcomes.badge.badgeByline');
goog.provide('jive.outcomes.badge.badgeComment');
goog.provide('jive.outcomes.badge.badgeContainer');
goog.provide('jive.outcomes.badge.badgeDetails');
goog.provide('jive.outcomes.badge.badgeOutdatedLink');
goog.provide('jive.outcomes.badge.badgePopup');
goog.provide('jive.outcomes.badge.badgeRaw');
goog.provide('jive.outcomes.badge.badgeShareLink');
goog.provide('jive.outcomes.badge.badges');
goog.provide('jive.outcomes.badge.fakeOutcomeBadge');
goog.provide('jive.outcomes.badge.outcomeBadge');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.itemList');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.outcomes.badge.badgeContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="js-outcome-badge-container j-outcome-badge-container js-ed-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-object-type="', soy.$$escapeHtml(opt_data.objectType), '" data-object-id="', soy.$$escapeHtml(opt_data.objectId), '"', (opt_data.parentType) ? 'data-parent-object-type="' + soy.$$escapeHtml(opt_data.parentType) + '"' : '', (opt_data.parentID) ? 'data-parent-object-id="' + soy.$$escapeHtml(opt_data.parentID) + '"' : '', 'aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badgeContainer.ariaLabel'),[])), '"', (opt_data.allowedOutcomeTypes) ? 'data-allowed-outcome-types="' + soy.$$escapeHtml(JSON.stringify(opt_data.allowedOutcomeTypes).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '"' : '', 'aria-live="polite">');
  if (opt_data.outcomes) {
    jive.outcomes.badge.badges(opt_data, output);
  } else if (opt_data.outcomeTypeName) {
    jive.outcomes.badge.badge({outcomeType: opt_data.outcomeTypeName, embedded: opt_data.embedded, objectType: opt_data.objectType, objectId: opt_data.objectId, outcomeId: opt_data.outcomeId}, output);
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badges = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var outcomeList47 = opt_data.outcomes;
  var outcomeListLen47 = outcomeList47.length;
  for (var outcomeIndex47 = 0; outcomeIndex47 < outcomeListLen47; outcomeIndex47++) {
    var outcomeData47 = outcomeList47[outcomeIndex47];
    jive.outcomes.badge.outcomeBadge({outcome: outcomeData47, embedded: opt_data.embedded}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.outcomeBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.outcomes.badge.badge({outcomeType: String(opt_data.outcome.outcomeType.name).toLowerCase(), embedded: opt_data.embedded}, output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.fakeOutcomeBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.outcomes.badge.badgeRaw({outcomeType: String(opt_data.outcomeTypeName).toLowerCase(), tagName: 'li', embedded: true, extraClasses: 'j-fake-badge js-fake-badge'}, output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.outcomes.badge.badgeRaw(soy.$$augmentMap(opt_data, {tagName: 'li'}), output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeRaw = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<', soy.$$escapeHtml(opt_data.tagName), ' class="js-outcome-badge j-outcome-badge js-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), ' j-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), ' ', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '"', (opt_data.outcomeId) ? 'data-outcome="' + soy.$$escapeHtml(jive.soy.func.buildUrl('/api/core/v3/outcomes/' + opt_data.outcomeId)) + '"' : '', (opt_data.objectType && opt_data.objectId) ? 'data-ed=\'{"type":' + soy.$$escapeHtml(opt_data.objectType) + ', "id": ' + soy.$$escapeHtml(opt_data.objectId) + '}\'' : '', 'data-outcome-type="', soy.$$escapeHtml(opt_data.outcomeType), '">', (! opt_data.embedded) ? '<a href="#" aria-haspopup="true">' : '', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.' + opt_data.outcomeType),[])), (! opt_data.embedded) ? '</a>' : '', '</', soy.$$escapeHtml(opt_data.tagName), '>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgePopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-badge-popup j-outcome-popup">');
  jive.outcomes.badge.badgeByline(opt_data, output);
  if (opt_data.comment) {
    jive.outcomes.badge.badgeComment(opt_data, output);
  }
  if (opt_data.alertedNames) {
    jive.outcomes.badge.badgeAlertedNames(opt_data, output);
  }
  if (opt_data.shareLink) {
    jive.outcomes.badge.badgeShareLink(opt_data.shareLink, output);
  }
  if (opt_data.props.url && opt_data.props.title) {
    jive.outcomes.badge.badgeOutdatedLink({href: opt_data.props.url, title: opt_data.props.title}, output);
  }
  if (opt_data.actions.length > 0) {
    output.append('<footer class="j-outcome-modal-footer j-pop-row j-last">');
    var itemList125 = opt_data.actions;
    var itemListLen125 = itemList125.length;
    for (var itemIndex125 = 0; itemIndex125 < itemListLen125; itemIndex125++) {
      var itemData125 = itemList125[itemIndex125];
      output.append((! (itemIndex125 == 0)) ? '<span class="font-color-meta-light">|</span>' : '');
      jive.outcomes.badge.badgeActionLink(itemData125, output);
    }
    output.append('</footer>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeByline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-byline">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.' + opt_data.outcomeTypeName),[])), ' ');
  jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.author, {anonymous: false}), output);
  output.append(' <span class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.datePart'),[((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '') ? _jive_moment((parseFloat((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '')) ? parseFloat((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '')) : (opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('lll') : '')])), '</span></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeDetails = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.comment) ? '<div class="j-outcome-comment"><strong class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.messageLabel'),[])) + '</strong> ' + soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.comment)) + '</div>' : '');
  if (opt_data.alertedNames) {
    jive.outcomes.badge.badgeAlertedNames(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-comment"><p><strong class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.messageLabel'),[])), '</strong> ', soy.$$changeNewlineToBr(soy.$$escapeHtml(opt_data.comment)), '</p></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeAlertedNames = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-approvers font-color-meta"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.approversLabel'),[])), '</strong> ');
  jive.shared.displayutil.itemList({items: opt_data.alertedNames, expandable: true}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeActionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="j-outcome-modal-footer-link js-actionLink ', soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses : ''), '"', (opt_data.actionData) ? 'data-action-data="' + soy.$$escapeHtml(opt_data.actionData) + '"' : '', (opt_data.event) ? 'data-event="' + soy.$$escapeHtml(opt_data.event) + '"' : '', 'href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.actionMenu.item.' + opt_data.labelSuffix),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeShareLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="j-share-link ', (opt_data.actionData && opt_data.event) ? 'js-actionLink j-ui-elem j-share-add-contributors font-color-meta-light' : '', '"', (opt_data.actionData) ? 'data-action-data="' + soy.$$escapeHtml(opt_data.actionData) + '"' : '', (opt_data.event) ? 'data-event="' + soy.$$escapeHtml(opt_data.event) + '"' : '', (opt_data.actionData && opt_data.event) ? 'title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.actionMenu.share.' + opt_data.labelSuffix),[])) + '"' : '', 'href="', soy.$$escapeHtml(opt_data.href ? opt_data.href : '#'), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.actionMenu.share.' + opt_data.labelSuffix),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.badgeOutdatedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcomes-outdated-redirect j-outcome-comment"><p><h5>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.outdated.link'),[])), ' </h5><a href="', soy.$$escapeHtml(opt_data.href), '">', soy.$$escapeHtml(opt_data.title), '</a></p></div>');
  return opt_sb ? '' : output.toString();
};

;
define("apps/shared/models/promise_cache",["jquery"],function(d){function a(l,k){this.cache={};this.keyNames=l;this.logEnabled=k&&console&&console.log}a.prototype._access=function i(m,p,o){var k=this.cache;for(var l=0;k!=null&&l<this.keyNames.length;++l){var n=m[this.keyNames[l]];if(k[n]==null){if(p){if(l<this.keyNames.length-1){k[n]={}}else{if(o!=null){k[n]=o}}}}else{if((l==this.keyNames.length-1)&&p&&o==null){delete k[n]}}k=k[n]}return k};a.prototype.get=function b(l,m){var k=this._access(l);if(k==null){if(this.logEnabled){console.log("Cache missed",l)}if(m){return this.put(l,m(l))}else{k=new d.Deferred();k.reject(this,l);return k.promise()}}else{if(this.logEnabled){console.log("Cache Hit",l)}return k}};a.prototype.getAll=function e(m,n){var l=[];var k=this;d.each(m,function(){l.push(k.get(this,n))});return d.when.apply(d,l).then(function(){return Array.prototype.slice.apply(arguments)})};a.prototype.getAllBulk=function c(o,n){var p=[],m=this;d.each(o,function(){if(!m.has(this)){p.push(this)}});if(p.length){var k=n(p);d.each(p,function(r,q){if(m.logEnabled){console.log("Bulk Cache missed",q)}m.put(q,k.then(function s(t){return t[r]}))})}function l(q,r){console.error("ERROR: bulk load failed",r);return this}return this.getAll(o,l)};a.prototype.put=function h(k,l){return this._access(k,true,l)};a.prototype.has=function j(k){var l=this._access(k);return l!=null};a.prototype.clear=function f(k){this._access(k,true,null)};a.prototype.clearAll=function g(){this.cache={}};return a});
;
define("jive/promise_util",["jquery"],function(d){function h(){var j=d.Deferred();j.resolve.apply(j,arguments);return j.promise()}function b(){var j=d.Deferred();j.reject.apply(j,arguments);return j.promise()}function c(k,l){var j=d.Deferred();k.then(j.resolve,function(){l.then(j.resolve,j.reject,j.notify)},j.notify);return j.promise()}function g(j){return d.when.apply(d,j).then(function(){return Array.prototype.slice.call(arguments)})}function e(k,j){k.then(j.resolve,j.reject,j.notify)}function a(m,o,n){var k=d.Deferred(),l=1800000;n=n||5000;o=o||Infinity;(function j(p){var q=m();q.done(e.bind(null,q,k)).fail(function(){var r=n*Math.pow(2,o-p);if(p<=1){e(q,k)}else{setTimeout(j.bind(null,p-1),Math.min(r,l))}})}(o));return k.promise()}function f(k){var j=d.Deferred();e(k,j);return j.promise()}function i(k){var j=d.Deferred();k(j.resolve,j.reject,j.notify);return j.promise()}return{success:h,failure:b,orElse:c,whenAll:g,proxy:e,retry:a,convert:f,promise:i}});
;
define("apps/shared/models/core_deferred",["jquery","underscore","jive/promise_util"],function(f,l,h){var e=function(){return e};e.runQuery=d;e.runAll=o;e.updateAll=a;e.getObject=m;e.withOsapi=c;e.slurp=j;e.squashBatchLists=g;function d(p){return n(p).then(function(r){var q=f.Deferred();r.execute(function(s){k(s,q)});return q.promise()})}function o(p){return h.whenAll(p.map(n)).then(function(q){return c(function(u){var r=u.newBatch();var t=q.map(function(w,v){r.add(String(v),w);return new f.Deferred()});var s=t.map(function(v){return v.promise().then(b)});r.execute(function(v){var w={batch:r,rawResponse:v};t.forEach(function(x,z){var y=String(z);k.call(w,v[y],x)})});return h.whenAll(s)})})}function a(p){return o(l.invoke(p,"update"))}function c(q){var p=f.Deferred();require(["apps/shared/models/lazy_corev3"],function(r){p.resolve(r)});return p.promise().then(q)}function n(p){if(f.isFunction(p.execute)){return h.success(p)}else{return c(p)}}function k(q,p){if(q.error){p.reject(q,this)}else{if(q.list){p.resolve(q.list,q)}else{p.resolve(q)}}}function j(q,p,r){if(!r){r=[]}if(q.length<p.itemsPerPage){return r.concat(q)}else{return d(p.getNextPage()).then(function(t,s){return j(t,s,r.concat(q))})}}function g(p){return l.pluck(p,0)}var i={3:"people",37:"places",600:"places",700:"places",14:"places",1527402675:"places"};function m(q,p){var s=i[q];if(!s){s="contents"}var r=function(t){var u=t.jive.corev3[s];return u.getByEntityDescriptor({entityDescriptor:q+","+p})};return d(r).then(function(t){return t[0]})}function b(){if(arguments.length>1){return Array.prototype.slice.apply(arguments)}else{if(arguments.length===1){return arguments[0]}else{return f.when()}}}return e});
;
define("apps/outcomes/outcomesModel",["jquery","apps/shared/models/core_deferred","apps/shared/models/promise_cache"],function(j,A,i){var I=false;var r=new i(["type","id"],I);var d=new i(["type","id"],I);function p(L,K,J){return{outcomeType:L,note:K,properties:J}}function B(N){var M={};function L(O){var P=O.type,Q=O.id;if(!M[P]){M[P]={}}if(!M[P][Q]){M[P][Q]=true;return false}else{return true}}var J=[];for(var K=0;K<N.length;++K){if(!L(N[K])){J.push(N[K])}else{console.log("warning: duplicate ed:",N[K])}}return J}function E(J){if(!J){throw new Error("Null entity descriptor")}return r.get(J,function(K){return A.getObject(K.type,K.id)})}function l(K){return r.getAllBulk(K,function J(L){var M=[];j.each(L,function(){M.push(this.type);M.push(this.id)});return A.runQuery(function(N){return N.jive.corev3.contents.getByEntityDescriptor({entityDescriptor:M.join(",")})})})}function f(J){return J}function e(J){return A.runQuery(function(K){return K.jive.corev3.outcomes.get({uri:J})})}function x(K,M,J){var N=K.join(","),L={filters:"outcomeType("+N+")",count:M,hidden:!!J};return A.runQuery(function(O){return O.jive.corev3.outcomes.get(L)})}function G(J){return E(J).then(function(K){return A.runQuery(K.getOutcomeTypes())}).then(f)}function q(J){return E(J).then(c)}function c(J){return d.get(J,function(K){return A.runQuery(K.getOutcomes()).then(f)})}function C(J){return E(J).then(function(K){return j.when(K,c(K))})}function b(J,L){if(!L){L="outcomes"}var K=d.getAllBulk(J,function(N){var M=[];j.each(N,function(){M.push(this.getOutcomes())});return A.runAll(M).then(A.squashBatchLists)});return K.then(function(M){for(var N=0;N<J.length;++N){J[N][L]=M[N]}j.each(J,function(){var O=this;j.each(O[L],function(Q,R){var P=R.outcomeType.name.toLowerCase();O[L][P]=R})});return J})}function n(J){return A.runQuery(J.getHistory())}function v(J){var K=0,M;if(J.replyCount){K=J.replyCount}var L={hierarchical:false,filter:"likeCount("+K+")",fields:"@most_liked"};if(J.getReplies){M=J.getReplies(L)}else{M=J.getComments(L)}return M}function y(K,J){var N=J.join(","),L={filter:"outcomeType("+N+")",hierarchical:false,fields:"@outcome_replies"},M;if(K.getReplies){M=K.getReplies(L)}else{M=K.getComments(L)}return M}function k(J,L){var K=[];j.each(J,function(){K.push(this[L].get())});return A.runAll(K).then(function(N){for(var M=0;M<J.length;++M){J[M][L]=N[M]}return J})}function t(J){if(J.properties&&J.properties.approvers){var K=J.properties.approvers.map(function(L){return function(M){return M.jive.corev3.people.get({uri:L,fields:"@summary"})}});return A.runAll(K).then(function(L){J.properties.alertedUsers=L;return J})}return j.when(J)}function h(J){if(J.properties&&J.properties.share){return A.runQuery(function(K){return K.jive.corev3.shares.get({uri:J.properties.share})}).then(function(K){J.properties.outcomeShare=K;return J})}return j.when(J)}function o(J,M,L,K){return E(J).then(function(N){return A.runQuery(N.createOutcome(p(M,L,K))).done(function(){d.clear(N)})}).then(function(N){return k([N],"user")}).then(function(N){return N[0]})}function D(J,M,N,L,K){return A.runQuery(M.createOutcome(p(N,L,K))).done(function(){E(J).done(function(O){d.clear(O)})}).then(function(O){return k([O],"user")}).then(function(O){return O[0]})}function u(J,M,N,L,K){return C(J).then(function(O,Q){var P=null;j.each(Q,function(){if(this.outcomeType.name==M.name){P=this}});if(!P){return z()}P.properties=j.extend(P.properties,K);return A.runQuery(P.update()).then(function(R){d.clear(O);return R})})}function F(J,K){return C(J).then(function(M,N){d.clear(M);var L=null;j.each(N,function(){if(this.outcomeType.name.toLowerCase()==K.name.toLowerCase()){L=this;return false}return true});if(!L){return z()}return A.runQuery(L.destroy())})}function m(K,J){return E(K).then(function(L){if(L.getChildOutcomeTypes){return A.runQuery(L.getChildOutcomeTypes({isCreate:!!J})).then(f)}else{return[]}})}function s(J){return j.when(E(J),m(J)).then(function(K,M){var L=[];j.each(M,function(){var N=this.name.toLowerCase(),O=y(K,[N]);L.push(A.runQuery(O).then(A.slurp).then(function(Q){var P={};P[N]=Q.length;return P}))});L.push(c(K));return j.when.apply(j,L)}).then(function(){var L={};if(arguments.length>1){L=j.extend.apply(j,[{}].concat(Array.prototype.slice.call(arguments,0,arguments.length-1)))}var K=arguments[arguments.length-1];j.each(K,function(){var M=this.outcomeType.name.toLowerCase();if(L[M]!=null){L[M]+=1}});return L})}function w(J){return E(J).then(function(K){return A.runQuery(v(K)).then(A.slurp)})}function g(K,J){return A.runQuery(y(K,J)).then(A.slurp)}function a(J){J=B(J);return l(J).then(function(K){var L=[];j.each(K,function(){L.push(this.getOutcomes())});return A.runAll(L)}).then(A.squashBatchLists).then(function(K){var L=[];j.each(K,function(M,N){L.push({ed:J[M],outcomes:N})});return L})}function H(){d.clearAll()}function z(){var K=j.Deferred();var L=jive.i18n.getMsg("outcomes.error.missing");var J={error:{code:409,message:L}};K.reject(J);return K.promise()}return{getOutcome:e,getOutcomeHistory:n,getOutcomeTypes:G,getDescendantOutcomeTypes:m,getOutcomes:q,getOutcomesForObj:c,getAllOutcomes:b,getFullUsers:k,getApproverUsers:t,getShare:h,createOutcome:o,createSuccessorOutcome:D,destroyOutcome:F,updateOutcome:u,getOutcomeCounts:s,getObject:E,getRepliesByOutcomeTypes:g,getMostLikedReplies:w,getOutcomesForEntities:a,clearCache:H,getUserOutcomes:x}});
;
define("apps/outcomes/shareModel",["jquery","apps/shared/models/core_deferred","apps/shared/models/promise_cache"],function(e,a,c){function b(g,h,f){return{content:{text:h,type:"text/html"},shared:g,participants:f}}function d(g,i,f){var h=b(g,i,f);return a.runQuery(function(j){return j.jive.corev3.shares.create(h)})}return{createShare:d}});
;
define("apps/outcomes/shareMain",["jquery","apps/shared/controllers/localexchange","apps/outcomes/shareModel","apps/outcomes/outcomesModel"],function(e,b,f,a){function d(g,h){if(!h.properties||!h.properties.message||!h.properties.approvers||!h.properties.shared){return}if(h.properties.share){return}f.createShare(h.resources.self.ref,h.properties.message,h.properties.approvers).done(function(i){return c(g,h,i)})}function c(g,j,i){var h=j.properties;h.message="";h.share=i.resources.self.ref;return a.updateOutcome(g,j.outcomeType,null,null,h)}b.addListener("outcome.created",d);b.addListener("outcome.updated",d);return{createShare:d}});
;
define("apps/outcomes/outcomesMain",["jquery","apps/shared/controllers/localexchange","apps/shared/controllers/switchboard","apps/outcomes/outcomesModel","apps/outcomes/shareMain"],function(i,c,m,f){function r(J,P,I,H,L,K,O){var N;var M;if(P.outcomeType){N=f.getOutcome(P.predecessor.url).then(function(Q){return f.createSuccessorOutcome(J,Q,P.outcomeType,L,K).done(function(){var R=Q.outcomeType;M=Q;m.emit("outcome.deleted",J,R);c.emit("outcome.deleted",J,R)})})}else{N=f.createOutcome(J,P,L,K)}N.done(function(Q){var R=M&&Q.outcomeType.id==M.outcomeType.id&&Q.user.id!=M.user.id;m.emit("outcome.created",J,Q,R);c.emit("outcome.created",J,Q,R)}).fail(function(Q){console.log("Failed to create",Q);D(Q);c.emit("outcome.refresh",[J])});if(O){O.proxy(N)}return N}function E(I,L,N,K,J,M){var H=f.destroyOutcome(I,L).done(function(){m.emit("outcome.deleted",I,L);c.emit("outcome.deleted",I,L)}).fail(function(O){console.log("Failed to delete",O);D(O);c.emit("outcome.removeBadge",I,L);c.emit("outcome.refreshSummary")});if(M){M.proxy(H)}return H}function o(I,M,O,L,K,J,N){var H=f.updateOutcome(I,M,O,L,J).done(function(P){if(!J){J.shared=P.properties.shared}m.emit("outcome.updated",I,P,J.shared);c.emit("outcome.updated",I,P,J.shared)}).fail(function(P){console.log("Failed to update",P);D(P);c.emit("outcome.removeBadge",I,M);c.emit("outcome.refreshSummary")});if(N){N.proxy(H)}return H}function C(H){f.getObject(H).done(function(I){if(p(I)){f.getOutcomeCounts(H).done(function(J){f.getMostLikedReplies(H).done(function(K){c.emit("outcome.summary",H,J,K,I)})})}})}function s(H,I){I.proxy(f.getOutcomes(H))}function n(H,I){I.proxy(f.getOutcomeHistory(H))}function a(H,I){I.proxy(f.getObject(H))}function A(H,K,J){var I;f.getObject(H).then(function(L){I=L.subject;return i.when(f.getRepliesByOutcomeTypes(L,[K]),f.getOutcomesForObj(L),L)}).then(function(O,L,M){for(var N=0;N<L.length;++N){if(L[N].outcomeType.name.toLowerCase()==K){O.unshift(M)}}return f.getFullUsers(O,"author")}).then(function(L){return f.getAllOutcomes(L,"outcomes")}).done(function(L){c.emit("outcome.rolledup",K,L,J,I)})}function u(J,I,H){f.getFullUsers(J,"author").done(function(K){c.emit("mostLiked.rolledup",K,I,H)})}function g(H){c.emitP("outcome.clearBadges",H).then(function(){f.getOutcomesForEntities(H).done(function(I){i.each(I,function(){var J=this.ed;i.each(this.outcomes,function(){c.emit("outcome.display",J,this)})})})})}function v(H,I){I.proxy(f.getObject(H).then(function(J){var K=[];if(J.destroy){K.push(new d(J,"delete",H))}if(J.update){K.push(new d(J,"edit",H))}return K}))}function k(H,I){I.proxy(f.getDescendantOutcomeTypes(H))}function b(H,I){I.proxy(f.getDescendantOutcomeTypes(H,true))}function j(H,I){I.proxy(i.when(f.getOutcomeTypes(H),f.getOutcomes(H)).then(function(K,L){var J=[];i.each(K,function(){J.push(new d(this,"post",H))});i.each(L,function(){if(this.destroy){J.push(new d(this.outcomeType,"delete",H))}else{J.push(new d(this.outcomeType,"get",H))}if(this.update){J.push(new d(this.outcomeType,"put",H))}});return J}))}function h(H,I){I.proxy(f.getOutcomeTypes(H).then(function(K){var J=[];i.each(K,function(){J.push(new d(this,"post",H))});return J}))}function z(I){var H=[];if(t(I)){H.push(new d(I.outcomeType,"delete",null))}if(I.createOutcome&&I.successorOutcomeTypes){i.each(I.successorOutcomeTypes,function(){H.push(new d(this,"post",I))})}return new i.Deferred().resolve(H)}function t(I){var H=I.outcomeType.name!="resolved"&&I.successorOutcomeTypes.length;var J=I.successorOutcomeTypes[0]==null;return I.destroy&&(H||J)}function B(H,I){return I.proxy(f.getOutcome(H).then(z))}function q(H){return f.getApproverUsers(H).then(function(I){return f.getShare(I)})}function l(H,I){I.proxy(f.getOutcome(H).then(function(J){return i.when(q(J),z(J))}))}function w(H,I){I.proxy(f.getOutcome(H).then(function(J){return f.getApproverUsers(J)}))}function G(H,I){I.proxy(f.getObject(H).then(function(J){return J.subject}))}function y(H){H.proxy(f.getUserOutcomes(["pending"],2,true))}function x(H){c.emit("outcome.refreshSummary")}function F(){f.clearCache()}function e(H,I){c.emit("outcome.display",H,I);c.emit("outcome.refreshSummary")}m.addListener("outcome.created",e);m.addListener("outcome.updated",function(H,I){c.emit("outcome.removeBadge",H,I.outcomeType);c.emit("outcome.display",H,I)});m.addListener("outcome.deleted",function(H,I){c.emit("outcome.removeBadge",H,I);c.emit("outcome.refreshSummary")});m.addListener("acclaim.recorded",function(){c.emit("outcome.refreshSummary")});function D(I){if(I&&I.error&&I.error.message){var H=I.error.code&&I.error.code==404?jive.i18n.getMsg("outcomes.error.missing"):I.error.message;$j("<p>"+H+"</p>").message({style:"error"})}else{$j(jive.error.rest.soy.errorSaving({href:window.location})).message({showClose:true,style:"error"})}c.emit("outcome.resync")}function p(H){return !H.restrictReplies||!H.restrictComments}function d(I,J,H){this.subject=I;this.verb=J;this.context=H}c.addListener("outcome.post",r);c.addListener("outcome.delete",E);c.addListener("outcome.put",o);c.addListener("outcome.summarize",C);c.addListener("outcome.get",s);c.addListener("outcome.getHistory",n);c.addListener("outcome.getContentObject",a);c.addListener("outcome.refresh",g);c.addListener("outcome.rollup",A);c.addListener("outcome.rollupMostLiked",u);c.addListener("outcome.getOutcomeActions",j);c.addListener("outcome.getOutcomeCreateActions",h);c.addListener("outcome.prepareForBadgePopup",l);c.addListener("outcome.prepareOutcomeDetails",w);c.addListener("outcome.prepareForShareActionPopup",G);c.addListener("outcome.prepareActionTooltip",y);c.addListener("outcome.getOutcomeUrlActions",B);c.addListener("outcome.getContentObjectActions",v);c.addListener("outcome.getDescendantOutcomeTypes",k);c.addListener("outcome.getDescendantOutcomeTypesForCreate",b);c.addListener("commentDeleted",x);c.addListener("outcome.clearCache",F);return{create:r,summarize:C,history:history,refresh:g,rollup:A,rollupMostLiked:u}});
;
define("apps/outcomes/replyOutcomeView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/outcomesMain"],function(e,b){function a(g){g.preventDefault();var h=e(this).closest(".js-reply-outcome-action-container");h.find("a.js-reply-outcome-button").show();h.find(".js-reply-outcome-badge-container").hide().children().remove();h.closest(".jive-js-addReply").find(".js-outcome-attachment").removeData("outcomeType").val("")}function f(i,g){g.find("a.js-reply-outcome-button").hide();var h=jive.CommentApp.soy.outcomeAttachment({outcomeType:i});g.find(".js-reply-outcome-badge-container").show().html(h);g.find(".js-remove-outcome").on("click",a);g.find(".js-outcome-attachment").data("outcomeType",i).val(i.name.toLowerCase())}function c(g){return b.emitP("outcome.getDescendantOutcomeTypesForCreate",g)}function d(g,h){return c(h).then(function(i){if(i.length>0){g.find(".js-reply-outcome-action-container").show();g.find(".js-reply-outcome-button").on("click",function(k){k.preventDefault();var l=[];e.each(i,function(m,n){l.push({labelSuffix:n.name.toLowerCase()+".post",actionData:JSON.stringify(n),event:"attachOutcome"})});var j={context:e(this),hoverSelection:true,returnPopover:true};e(jive.outcomes.action.actionMenu({outcomes:l,actions:[]})).on("click","a.js-actionItem",function(n){var o=e(this);var m=o.data("actionData");f(m,g);n.preventDefault();j.closeFunc()}).popover(j)})}})}return d});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/views/discussion_list_view",["jquery","apps/outcomes/replyOutcomeView","apps/shared/controllers/localexchange"],function(c,b,a){jive.DiscussionApp.DiscussionListView=function(v,g){jive.conc.observable(this);var m=this;var e,s,f=this,r=g.i18n,B=0,D,q=1,x=!g.isFinalized||window.location.hash.length>0;function F(){if(window.location.hash){c.scrollTo("a[name='"+window.location.hash.substring(1)+"']")}a.removeListener("heightChanged",F)}a.addListener("heightChanged",F);a.addListener("outcome.expandCollapsedComments",function(){x=true;y()});a.addListener("outcome.collapseComments",function(){x=false;y()});this._getValues=function(){var M={};e.find("[name='mobileEditor'],[name='containerType'],[name='container'],[name='thread'],[name='reply'],[name='message'],[name='postedFromGUIEditor'],[name='subject'],[name^='message.post'],[name='inlinePost'],[name='imageFile']").each(function(){var O=c(this).attr("name");if((O in M)){var N=M[O];M[O]=[];if(c.isArray(N)){c.each(N,function(P,Q){M[O].push(Q)})}else{M[O].push(N)}M[O].push(c(this).val())}else{M[O]=c(this).val()}});var L=e.find("[name='ansQuestion']:checked");if(L.length>0){M.ansQuestion=L.val()}M.outcome=e.find(".js-outcome-attachment").data("outcomeType");return c.extend(M,{body:s.getHTML()})};function K(){return c("<div></div>").html(c("#rte-template").html())}function A(N,Q){if(s){console.log("reusing RTE",s);s.setHTML("");s.focus()}else{var R="wysiwygtext"+q;++q;N.append(K());N.find("textarea").attr("id",R);var M=new jive.rte.EntitlementService({objectID:g.resourceID,objectType:g.resourceType,entitlement:"VIEW"});var P=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:g.containerID,containerType:g.containerType});var O=new jive.rte.FormService({$form:c("#"+R).closest("form"),formSubmitHandler:function(){j();var W=c.ajaxSettings.traditional;c.ajaxSettings.traditional=true;var X=c("#reply-author");var V=X.val();var U=c("#comment-email");var T=U.val();var Y=m._getValues();if(X.length>0&&c.trim(V)===""){c("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.name_required.text"})}).message({style:"error"});return false}else{if(U.length>0&&c.trim(T)===""){c("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.email_required.text"})}).message({style:"error"});return false}else{if(c.trim(Y.body)===""){c("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"post.err.pls_enter_body.text"})}).message({style:"error"});return false}else{Y=c.extend(Y,{name:V,email:T})}}}m._formWaitingView.disableForm();f.emit("saveDiscussion",Y,function(){m._formWaitingView.enableForm();c.ajaxSettings.traditional=W});return false}});var L=c("#reply-author").length>0;var S=c.extend({$element:c("#"+R),isEditing:false,minHeight:242,pinToolbar:false,onReady:function(){if(g.rteOptions.onReady){g.rteOptions.onReady()}jive.conc.nextTick(function(){s.focus()});if(!L){var T={selector:e,objectType:105,draftObjectType:g.resourceType,draftObjectID:g.resourceID,editorId:R,pushStateEnabled:false};new jive.draft.Main(T)}},services:{imageService:P,formService:O,entitlementService:M}},g.rteOptions);s=new jive.rte.RTEWrap(S);e=S.$element.parents("form");e.find(".jive-form-button-cancel").click(function(){w();s.destroy();s=null});h(Q)}e.find("[name=message]").val(Q.parentDiscussionID);b(N.closest(".jive-js-addReply"),{type:g.resourceType,id:g.resourceID});f.emit("formReady",{discussionId:Q.resourceID,parentMessageId:Q.parentDiscussionID,isReply:Q.isReply})}function h(L){m._advEditorLnk=L.advEditorLnk;H().click(function(){d();return false})}function H(){return D.parent().find(".advEditor")}function d(){var L=s.getHTML();if(L!=null&&L.length>0){L="&unsanitaryBody="+encodeURIComponent(L)}m._formWaitingView.disableForm();jive.util.createAndSubmitDynamicForm({url:m._advEditorLnk+L,method:"post"})}function E(L){w();x=true;var M=y();var O=$def(window._jive_current_user)&&(window._jive_current_user.ID==L.userid)?window._jive_current_user.username:L.username;L.setQuotedMsg(O,r,L.isAnonymous);var N=c.extend({parentDiscussionID:L.messageID,advEditorLnk:L.advEditorLnk,isReply:L.isReply,replySubject:L.replySubject,userName:L.username},g);M.then(function(){var P=t(L);A(P,N)})}function J(M){var L=c(M).closest(".jive-thread-message, .j-thread-post, #jive-thread-reply-footer");if(L.length>0){return new jive.DiscussionApp.DiscussionView(L)}else{return null}}function u(){c(".jive-thread-reply-hidden").closest(".reply").css("background-position","left -55px");y();c("#jive-unroll-replies").off("click").on("click",function(L){L.preventDefault();x=true;y()})}function p(){D.find("a.discussionAdd").live("click",function(){var L=J(this);E(L);return false});u()}function l(L){D.find(".jive-js-addReply #post-error-table > #post-error-subject").html(L).show().parent().slideDown()}function C(){l(jive.i18n.sub(r.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>"))}function j(){D.find(".jive-js-addReply #post-error-table").slideUp().find("#post-error-subject").html("").hide()}function i(M,L){c("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-warn"></span>'+M+"</div>").fadeIn("normal",function(){if(L){c.scrollTo(c("#success-moderation-edit"),"slow",{offset:{top:-20,left:0}})}})}function o(){c("#success-moderation-edit").hide()}function I(L){var N=!L.isReply?D.find("ul.jive-discussion-replies:first > li:last"):L.getDOMElement().closest("li.reply");var O=true;if(N.length===0&&!L.isReply){N=c('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-0"/>');D.append(N);O=false}var M;if(g.isThreaded&&L.isReply){M=N.find("ul.jive-discussion-replies:first > li:last");if(M.length==0){M=c('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-1"/>');N.append(M);return M}else{return M.parent()}}else{M=O?N.parent():N;return M}}function t(L){var N=D.find(".jive-js-addReply");if(N.length>0){N.remove();if(s){s.destroy();s=null}}N=c(jive.DiscussionApp.soy.renderReply({userName:L.username,messageID:L.messageID,i18n:r,anonymous:g.isAnonymous,moderated:g.isModerated}));I(L).append(N);var M=L.indent();c(".addReply").css("margin-left",-M+"px");m._formWaitingView=new jive.shared.FormWaitingView(D.find(".jive-js-addReply"),{i18n:g.i18n,containerPadding:M,bgCssClass:"jive-form-waiting-disable-bg-discusssions"});N.fadeIn("fast");c.scrollTo(N,"slow",{offset:{top:-40,left:0}});return N.find(".jive-discussion-post")}function w(){var L=D.find(".jive-js-addReply");var M=L.parent();L.fadeOut("fast",function(){if(M.children().length==0){M.hide()}})}function G(M){s.destroy();s=null;var L=D.find(".jive-content-rating").detach();L.find("script").remove();c.ajax({url:_jive_base_url+"/inline-message.jspa?message="+M.id,async:false,success:function(N){D.closest(".j-column-wrap-l").replaceWith(c(N));D=c("#jive-thread-messages-container");jive.localexchange.emit("renderedContent",D)}});D.find(".jive-content-rating").replaceWith(L);u()}function k(M){M=M||c("<p>").html(g.i18n.postSuccessText);var L=B<=0;i(M.html(),L);B+=1}function z(){x=true;y().then(function(){c("a.localScroll").first().click()})}function n(N){var M=c("#thread-message-"+N+", .js-tlo.js-ed-1-"+N).first(),L=null;if(M.length){L=new jive.DiscussionApp.DiscussionView(M)}E(L)}function y(){if(!!window.location.hash){x=true}if(x){if($j("#jive-rolled-up-replies").is(":visible")){$j("#jive-rolled-up-replies").fadeOut(150,function(){$j("#jive-replies").fadeIn(200)})}}else{if(!$j("#jive-rolled-up-replies").is(":visible")){$j("#jive-replies").fadeOut(200,function(){$j("#jive-rolled-up-replies").fadeIn(150)})}}return c("#jive-rolled-up-replies, #jive-replies").promise()}this.displayError=l;this.displayLoginError=C;this.displaySuccess=i;this.hideSuccess=o;this.scrollToLatestMsg=z;this.redisplayReplies=G;this.displayModeratedMessage=k;this.createReplyTo=n;c(document).ready(function(){D=c(v);p()})};return jive.DiscussionApp.DiscussionListView});
;
// This file was automatically generated from discussions-question.soy.
// Please don't edit this file by hand.

goog.provide('jive.discussions.soy.qCorrectAnswer');
goog.provide('jive.discussions.soy.qDisplayInlineAnswers');
goog.provide('jive.discussions.soy.qDisplayInlineCorrectAnswer');
goog.provide('jive.discussions.soy.qDisplayQuestionStateMessage');
goog.provide('jive.discussions.soy.qMarkAsCorrect');
goog.provide('jive.discussions.soy.qQuestionAssumedAnswered');
goog.provide('jive.discussions.soy.qQuestionNotAnswered');
goog.provide('jive.discussions.soy.qQuestionResolved');
goog.provide('jive.discussions.soy.qUnmarkAsCorrect');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.discussions.soy.qDisplayQuestionStateMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.question.questionState == opt_data.questionStateEnum.open) {
    jive.discussions.soy.qQuestionNotAnswered(opt_data, output);
  } else if (opt_data.question.questionState == opt_data.questionStateEnum.assumed_resolved) {
    jive.discussions.soy.qQuestionAssumedAnswered(opt_data, output);
  } else if (opt_data.question.questionState == opt_data.questionStateEnum.resolved) {
    jive.discussions.soy.qQuestionResolved(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qQuestionNotAnswered = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="jive-answer-type jive-answer-type-notanswered font-color-meta" style="">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionNotAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-danger">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml('</strong>')])), (opt_data.question.displayMarkAsAssumedAnswered) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.markQuestionAsAssumedAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<em style=""><a href="#">'),opt_data.i18n.leftParen,opt_data.i18n.rightParen,new soydata.VERY_UNSAFE.ordainSanitizedHtml('</a></em>')])) : '', '</p>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qQuestionAssumedAnswered = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="jive-answer-type jive-answer-type-assumedanswered font-color-meta" style="">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAssumedAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong>'),new soydata.VERY_UNSAFE.ordainSanitizedHtml('</strong>')])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qQuestionResolved = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="jive-answer-type jive-answer-type-answered font-color-meta" style="">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.questionAnswered),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong class="font-color-okay">'),new soydata.VERY_UNSAFE.ordainSanitizedHtml('</strong>')])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qMarkAsCorrect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.question.correctScenarioEnabled) ? '<div class="jive-thread-reply-btn-correct"><a href="#"><span class="j-correct-btn-star j-ui-elem"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[])) + '</a></div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qUnmarkAsCorrect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<!-- Unmark as correct --><div class="jive-thread-reply-btn-correct-unmark jive-reply-unmark', (opt_data.question.bridged) ? '-bridged' : '', '" style="display: inline-block;"><a href="#" class="font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.unmarkAsCorrectAnswer),[])), '</a></div>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qCorrectAnswer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="thisCorrect" style=""><span class="jive-icon-med jive-icon-discussion-okay"></span><span class="jive-thread-reply-message-correct-label font-color-okay">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[])), '</span></span>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qDisplayInlineAnswers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-answer-rollup"><!-- Embedded Correct Answer -->');
  if (opt_data.question.questionState == opt_data.questionStateEnum.resolved && opt_data.question.correctAnswer) {
    jive.discussions.soy.qDisplayInlineCorrectAnswer(opt_data, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.discussions.soy.qDisplayInlineCorrectAnswer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-inline-correct-answer" class="j-rc3"><header class="j-author-block"><span class="j-avatar-container">');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.question.correctAnswer.user, {size: 32}), output);
  output.append('</span><div class="j-author-info"><strong class="font-color-okay j-line1">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.correctAnswer),[])), ' </strong><span class="font-color-meta j-line2">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.byWord),[])), ' ');
  jive.shared.displayutil.userDisplayNameLink(opt_data.question.correctAnswer.user, output);
  output.append(' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.onWord),[])), ' ', soy.$$escapeHtml(opt_data.question.correctAnswer.modificationDate), '</span></div></header><section>', soy.$$filterNoAutoescape(opt_data.question.correctAnswerHtml), '</section><footer><strong><a href="', (opt_data.question.correctAnswer.useFullURL) ? soy.$$escapeHtml(opt_data.question.correctAnswer.url) : '#' + soy.$$escapeHtml(opt_data.question.correctAnswer.ID), '" class="jive-inline-correct-answer-context-link ', (! opt_data.question.correctAnswer.useFullURL) ? 'localScroll' : '', '"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.i18n.seeAnswerInContext),[])), '</a></strong></footer></div>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("DiscussionApp");jive.DiscussionApp.QuestionView=function(g,l,o){jive.conc.observable(this);var h=this;var m;var a={open:"open",resolved:"resolved",assumed_resolved:"assumed_resolved"};function j(p){c(p);f(p);k(p);if($j.browser.msie&&$j.browser.version<7){$j("#jive-thread-messages-container").hide().show()}}function k(p){$j(".js-thread-post-wrapper").each(function(){b($j(this),p)})}function b(p,q){var s=$j(p).find("a:first").attr("name");var r=parseInt(s,10);n(p,r,q);e($j(p).find("section"),r,q)}function e(u,s,p){if(p.canManageQuestionState){var r=$j(u).closest(".j-thread-post").find("header");var q=r.find(".j-dotted-star");var t=$j(u).find(".jive-thread-reply-btn");if(r.find(".j-dotted-star").length==0){r.append('<span class="j-dotted-star j-ui-elem"/>')}if(t.length==0){$j(u.append($j("<div>").addClass("jive-thread-reply-btn")));t=$j(u).find(".jive-thread-reply-btn")}t.empty();q.unbind();if(p.correctAnswer&&s==p.correctAnswer.ID){t.append(jive.discussions.soy.qUnmarkAsCorrect({question:p,i18n:o}));t.find(".jive-thread-reply-btn-correct-unmark").click(function(){l.unMarkAsCorrect(s,h.renderAll);return false})}else{if(p.questionState!="resolved"){t.append(jive.discussions.soy.qMarkAsCorrect({question:p,i18n:o}));t.find(".jive-thread-reply-btn-correct").click(function(){l.markAsCorrect(s,{success:function(v){h.renderAll(v);jive.dispatcher.dispatch("trial.updatePercentComplete")},error:function(w){var v=JSON.parse(w.responseText).message;$j("<p>"+v+"</p>").message({style:"error"})}});return false})}}}}function n(p,r,q){var s=$j(p).closest(".js-thread-post-wrapper");if(q.correctAnswer&&r==q.correctAnswer.ID){if(!s.is(".j-correct")){s.addClass("j-correct");$j(p).find("header h6").prepend(jive.discussions.soy.qCorrectAnswer({question:q,i18n:o}));if($j(p).find(".j-correct-star").length<1){$j(p).find("header").append('<a class="j-star j-correct-star j-ui-elem"></a>');$j(p).find(".j-star").addClass("popped")}}}else{s.removeClass("j-correct");s.find(".thisCorrect").remove();s.find(".j-star").remove()}}function c(p){if(p.questionState=="open"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-assumedanswered").remove()}else{if(p.questionState=="assumedResolved"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-notanswered").remove()}else{$j(".jive-answer-type-assumedanswered").remove();$j(".jive-answer-type-notanswered").remove()}}$j(".js-original-header h1").after(jive.discussions.soy.qDisplayQuestionStateMessage({question:p,questionStateEnum:a,i18n:o}));if(p.questionState=="open"){$j(".jive-answer-type-notanswered").find("em").find("a").click(function(){l.markAssumedAnswered(h.renderQuestionStateMessage)})}}function f(p){$j("div.j-answer-rollup").remove();if(!p.threaded){d(p)}var q=$j(jive.discussions.soy.qDisplayInlineAnswers({question:p,questionStateEnum:a,i18n:o,currentUserPartner:_jive_current_user.partner}));$j(".j-original-message").append(q);jive.localexchange.emit("renderedContent",q)}function d(p){if(p.correctAnswer&&!i(p.correctAnswer.ID)){p.correctAnswer.useFullURL=true}}function i(p){return($j("a[name='"+p+"']").length>0)}this.renderAll=j;this.renderInlineAnswers=f;this.renderQuestionStateMessage=c;this.renderResponses=k;this.renderReply=b;this.renderAnswerButtons=e;this.renderReplyDetails=n};define("apps/discussion_app/views/question_view",function(){return jive.DiscussionApp.QuestionView});
;
jive.namespace("DiscussionApp");define("apps/discussion_app/main",["apps/discussion_app/views/discussion_list_view"],function(){jive.DiscussionApp.Main=function(o){var l=o.resourceID,c=o.resourceType,j=o.resourceVersionID,g=o.listAction,k=o.isModerated,f=o.isThreaded,e=o.sort||"datedesc",n=o.i18n,a,b,i,d,m,h="#jive-thread-messages-container";a=new jive.DiscussionApp.DiscussionRestSource(o);b=new jive.DiscussionApp.DiscussionListView(h,o);m=new jive.Modalizer.Main({});jive.localexchange.addListener("reply.message.edit",function(p){window.location=o.editAction+"?id="+p.id}).addListener("reply.message.delete",function(q,s,t,p){var r=o.deleteAction+"&message="+q.id;m.modalize(r,p)}).addListener("reply.message.create",function(p){b.createReplyTo(p.id)});b.addListener("saveDiscussion",function(t,q){var r=new jive.DiscussionApp.Discussion(t),p=this,s=t.outcome;a.createMessage({forumThreadID:r.thread,ID:r.message,subject:r.subject,body:r.body,name:r.name,email:r.email}).addCallback(function(w){b.redisplayReplies(w.content);if(i){i.getQuestion(d.renderAll)}if(s){jive.localexchange.emit("outcome.doAction","outcome.post",{type:w.content.objectType,id:w.content.id},s,$j())}b.scrollToLatestMsg();var x=$j("div#jive-thread-reply-footer");var u=$j("a#jive-link-thread-following");var v=$j("a#jive-link-thread-startFollowing");if(x.exists()){setTimeout(function(){jive.Accessibility.focusIn(x)},100)}else{if(u.exists()){setTimeout(function(){u.focus()},100)}else{if(v.exists()){setTimeout(function(){v.focus()},100)}}}if(w.moderated){b.displayModeratedMessage()}}).addErrback(function(v,u){b.displayError(v);b._formWaitingView.enableForm()})});b.addListener("formReady",function(){});if(o.question){i=new jive.DiscussionApp.QuestionSource(l);d=new jive.DiscussionApp.QuestionView(l,i,n);$j(document).ready(function(){i.getQuestion(d.renderAll)})}$j(document).ready(function(){require(["jive.rte"],$j.noop)});this.addDiscussionListViewListener=function(p,q){b.addListener(p,q)}};return jive.DiscussionApp.Main});
;
// This file was automatically generated from headerBadges.soy.
// Please don't edit this file by hand.

goog.provide('jive.outcomes.badge.headerBadge');
goog.provide('jive.outcomes.badge.headerBadgeActionLink');
goog.provide('jive.outcomes.badge.headerBadgeByline');
goog.provide('jive.outcomes.badge.headerBadgeContainer');
goog.provide('jive.outcomes.badge.headerBadgeOutdatedLink');
goog.provide('jive.outcomes.badge.headerBadgePopup');
goog.provide('jive.outcomes.badge.headerBadgeRaw');
goog.provide('jive.outcomes.badge.headerBadges');
goog.provide('jive.outcomes.badge.headerOutcomeBadge');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.outcomes.badge.headerBadgeOutdatedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-outcomes-redirect">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.outdated.link.meta'),[])), ' <a href="', soy.$$escapeHtml(opt_data.href), '">', soy.$$escapeHtml(opt_data.title), '</a></span>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadgeContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="js-outcome-badge-container js-outcome-badge-container-top j-outcome-badge-container-top j-outcome-badge-container js-ed-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-object-type="', soy.$$escapeHtml(opt_data.objectType), '" data-object-id="', soy.$$escapeHtml(opt_data.objectId), '"', (opt_data.parentType) ? 'data-parent-object-type="' + soy.$$escapeHtml(opt_data.parentType) + '"' : '', (opt_data.parentID) ? 'data-parent-object-id="' + soy.$$escapeHtml(opt_data.parentID) + '"' : '', 'aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badgeContainer.ariaLabel'),[])), '"', (opt_data.allowedOutcomeTypes) ? 'data-allowed-outcome-types="' + soy.$$escapeHtml(JSON.stringify(opt_data.allowedOutcomeTypes).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '"' : '', 'aria-live="polite">');
  if (opt_data.outcomes) {
    jive.outcomes.badge.headerBadges(opt_data, output);
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadges = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var outcomeList48 = opt_data.outcomes;
  var outcomeListLen48 = outcomeList48.length;
  for (var outcomeIndex48 = 0; outcomeIndex48 < outcomeListLen48; outcomeIndex48++) {
    var outcomeData48 = outcomeList48[outcomeIndex48];
    jive.outcomes.badge.headerOutcomeBadge({outcome: outcomeData48, embedded: opt_data.embedded}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerOutcomeBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.outcomes.badge.headerBadge({outcomeType: String(opt_data.outcome.outcomeType.name).toLowerCase(), embedded: opt_data.embedded}, output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.outcomes.badge.headerBadgeRaw(soy.$$augmentMap(opt_data, {tagName: 'li'}), output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadgeRaw = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<', soy.$$escapeHtml(opt_data.tagName), ' class="js-outcome-badge js-outcome-badge-noclick js-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), ' j-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-outcome-type="', soy.$$escapeHtml(opt_data.outcomeType), '"><span class="j-outcome-badge j-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.' + opt_data.outcomeType),[])), '</span></', soy.$$escapeHtml(opt_data.tagName), '>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadgeByline = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-outcome-byline font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.' + opt_data.outcomeTypeName),[])), ' ');
  jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.author, {anonymous: false}), output);
  output.append(' <span class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.datePart'),[((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '') ? _jive_moment((parseFloat((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '')) ? parseFloat((opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : '')) : (opt_data.modifiedDate ? jive.model.DateUtil.parseISODateTime(opt_data.modifiedDate) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('lll') : '')])), '</span></span>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadgePopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-badge-popup j-outcome-popup j-outcome-meta">');
  if (! (opt_data.props.url && opt_data.props.title)) {
    jive.outcomes.badge.headerBadgeByline(opt_data, output);
  }
  if (opt_data.props.url && opt_data.props.title) {
    jive.outcomes.badge.headerBadgeOutdatedLink({href: opt_data.props.url, title: opt_data.props.title}, output);
  }
  if (opt_data.props.url && opt_data.props.title) {
    jive.outcomes.badge.headerBadgeByline(opt_data, output);
  }
  if (opt_data.actions.length > 0) {
    var itemList104 = opt_data.actions;
    var itemListLen104 = itemList104.length;
    for (var itemIndex104 = 0; itemIndex104 < itemListLen104; itemIndex104++) {
      var itemData104 = itemList104[itemIndex104];
      output.append((! (itemIndex104 == 0)) ? '' : '');
      jive.outcomes.badge.headerBadgeActionLink(itemData104, output);
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.badge.headerBadgeActionLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-outcome-modal-footer-link font-color-meta"><a class="j-outcome-modal-footer-link js-actionLink ', soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses : ''), '"', (opt_data.actionData) ? 'data-action-data="' + soy.$$escapeHtml(opt_data.actionData) + '"' : '', (opt_data.event) ? 'data-event="' + soy.$$escapeHtml(opt_data.event) + '"' : '', 'href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.actionMenu.item.meta.' + opt_data.labelSuffix),[])), '</a></span>');
  return opt_sb ? '' : output.toString();
};

;
define("apps/outcomes/viewUtil",["jquery","apps/shared/controllers/localexchange"],function(g,i){var l=["finalized","outdated","official","decision","pending","resolved","success","helpful"];function c(q){var o=[];var r=false;for(var p=l.length-1;p>=0;--p){if(r){o.push(l[p])}else{if(l[p]===q){r=true}}}return o}function f(u,r){if(u===r){return 0}var t=u.name.toLowerCase(),o=r.name.toLowerCase(),p=t.localeCompare(o);if(p===0){return 0}for(var q=0;q<l.length;++q){var s=l[q];if(s==t){return -1}if(s==o){return 1}}return p}function b(){if(b.timeout){clearTimeout(b.timeout)}b.timeout=setTimeout(function(){b.timeout=null;i.emit("heightChanged")},250)}function j(q,p,o){this.labelSuffix=q;this.event=p;this.actionData=o}function a(o){return g.map(o,function(p){if(p.verb=="get"){return null}var r="outcome."+p.verb;var q;if(p.context){q={outcomeType:p.subject,predecessor:{url:p.context.resources.self.ref,outcomeType:p.context.outcomeType,shared:p.context.properties?p.context.properties.shared:false}}}else{q=p.subject}q=JSON.stringify(q);var s;if(p.context){s=p.context.outcomeType.name.toLowerCase()+"."}else{s=""}s+=p.subject.name.toLowerCase()+"."+p.verb;return new j(s,r,q)})}function d(s,r,q){var o=r.first();var p=null;while(o.length){p=null;s.each(function(){if(o.has(this).length){p=g(this);return false}return true});if(p){return p}o=o.parent()}if(!r||r.length==0){s.each(function(){if(g(this).data("outcome-type")==q){p=g(this);return false}return true});if(p){return p}}return g()}return{getEd:function k(p){var o=g(p);return{type:o.data("objectType"),id:o.data("objectId")}},getParentEd:function e(p){var o=g(p);return{type:o.data("parentObjectType"),id:o.data("parentObjectId")}},getContext:function n(p){var o=g(p);return o.data("context")},getContextMeta:function n(p){var o=g(p);return o.data("meta-context")},getRootCommunityName:function m(p){var o=g(p);return o.data("root-community")},placeItem:function h(q,t,s,r,p){var u=g();var o=g();q.each(function(){var y=g(this),x=y.children(":visible").length==0,v=g(t).clone(),w=c(s);if(x&&p){y.hide()}u=u.add(v);if(w!=null){var z=g();g.each(w,function(A,B){z=r(y,B);return z.length==0});if(z.length==0){y.prepend(v)}else{z.after(v)}}else{y.append(v)}if(p){y.slideDown(p)}if(x){o=o.add(y)}});if(o.length>0){o.promise().done(b)}return u},outcomeTypeComparator:f,buildLinkActions:a,nearest:d}});
;
// This file was automatically generated from history.soy.
// Please don't edit this file by hand.

goog.provide('jive.outcomes.history.item');
goog.provide('jive.outcomes.history.showLink');
goog.provide('jive.outcomes.history.showPopup');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.outcomes.badge.badgeRaw');
goog.require('jive.shared.displayutil.itemList');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.outcomes.history.showLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="font-color-meta j-outcome-modal-footer-link j-outcome-history-link js-outcome-history-link">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.link'),[])), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.history.showPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-badge-popup j-outcome-popup j-pop-main" style="display: block;"><div class="j-outcome-history-items"><div class="j-outcome-history-title">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.title'),[])), ' ', soy.$$escapeHtml(opt_data.subject), '</div>');
  if (opt_data.alertedNames) {
    output.append('<div class="j-outcome-approvers font-color-meta"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.popup.approversLabel'),[])), '</strong> ');
    jive.shared.displayutil.itemList({items: opt_data.alertedNames, expandable: true}, output);
    output.append('</div>');
  }
  var itemList21 = opt_data.items;
  var itemListLen21 = itemList21.length;
  for (var itemIndex21 = 0; itemIndex21 < itemListLen21; itemIndex21++) {
    var itemData21 = itemList21[itemIndex21];
    jive.outcomes.history.item({item: itemData21}, output);
  }
  output.append('</div><footer class="j-outcome-modal-footer j-pop-row j-last"><a href="#" class="js-outcome-done-button j-outcome-modal-footer-link">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.done'),[])), '</a></footer></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.history.item = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-history-item">');
  if (opt_data.item.ownerChanged) {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.ownerChanged'),[])), ' ');
  } else {
    jive.outcomes.badge.badgeRaw({outcomeType: opt_data.item.outcomeType.name, embedded: true, tagName: 'span'}, output);
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.marked'),[])), ' ');
  }
  output.append('<span class="j-outcome-reply-author">');
  jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.item.user, {anonymous: false}), output);
  output.append('</span> <span class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.history.date'),[((opt_data.item.creationDate ? jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate) : '') ? _jive_moment((parseFloat((opt_data.item.creationDate ? jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate) : '')) ? parseFloat((opt_data.item.creationDate ? jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate) : '')) : (opt_data.item.creationDate ? jive.model.DateUtil.parseISODateTime(opt_data.item.creationDate) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('lll') : '')])), '</span><p class="j-outcome-history-note">', soy.$$escapeHtml(opt_data.item.note), '</p><br></div>');
  return opt_sb ? '' : output.toString();
};

;
(function(c){var a=0;var b="__generated_id_";c.fn.id=function(d){if(!this.length){return""}var e=this.first();if(d){e.attr("id",d);return this}else{var f=e.attr("id");if(f){return f}else{d=b+a;++a;e.attr("id",d);return d}}}})(jQuery);
;
define("apps/outcomes/historyView",["jquery","apps/shared/controllers/localexchange","apps/shared/views/itemList","apps/outcomes/outcomesMain"],function(e,d,b){function g(j){if(j){j.preventDefault()}var i=e(this);var h=i.data("originalContext");if(!h){h=i}if(i.data("outcome")){a(h,i.data("outcome"),i.data("alertedNames"),i.data("targetEd"))}else{console.log("History link is missing an entity descriptor: ",i)}}function a(h,j,k,i){d.emitP("outcome.getHistory",j).then(function(l){d.emitP("outcome.getContentObject",i).then(function(n){var u=[];var m={};var s;var t;var q;l.forEach(function(w){q=w.user;var v=$j.extend(true,{},w);if(t&&q.id!=t.id){u.push($j.extend(true,w,{ownerChanged:true}))}t=q;s=v.outcomeType;if(s.id!=m.id){u.push(v)}m=s});var o={items:u,alertedNames:k,subject:n.subject};var r=jive.outcomes.history.showPopup(o);var p=e(r).popover({context:h,onClose:function(){h.removeAttr("aria-owns")},hoverSelection:false});p.find(".js-outcome-done-button").on("click",function(v){p.trigger("close")});h.attr("aria-owns",p.id());d.emit("outcome.history.popoverDisplayed",j);b.bindHandlers(p)})})}function c(k,l,m,j,h){if(k.predecessorOutcome){var i=e(jive.outcomes.history.showLink());i.data("outcome",k);i.data("alertedNames",l);i.data("originalContext",h);i.data("targetEd",j);m.append(i);d.emit("outcome.history.linkDisplayed",k)}}function f(h,i){i.find(".js-outcome-history-link").safeRemove()}d.addListener("outcome.history.displayLink",c);d.addListener("outcome.history.removeLink",f);return{display:c,remove:f,clickHandler:g}});
;
// This file was automatically generated from summary.soy.
// Please don't edit this file by hand.

goog.provide('jive.outcomes.summary.avatar');
goog.provide('jive.outcomes.summary.detailsLinks');
goog.provide('jive.outcomes.summary.rollup');
goog.provide('jive.outcomes.summary.rollupReply');
goog.provide('jive.outcomes.summary.summaryContainer');
goog.provide('jive.outcomes.summary.summaryCount');
goog.provide('jive.outcomes.summary.textCountBadge');
goog.provide('jive.outcomes.summary.typeIdFromTypeName');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.outcomes.badge.badgeByline');
goog.require('jive.outcomes.badge.badgeRaw');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.outcomes.summary.summaryContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul id="js-outcome-summary-container-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), '" class="js-outcome-summary-container j-outcome-summary-container js-ed-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), '" data-object-type="', soy.$$escapeHtml(opt_data.objectType), '" data-object-id="', soy.$$escapeHtml(opt_data.objectId), '" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summaryContainer.ariaLabel'),[])), '" role="group"></ul>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.summaryCount = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="js-outcome-summary-count j-outcome-summary-count js-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), ' j-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), '" tabindex="0" role="button" aria-haspopup="true" data-outcome-type="', soy.$$escapeHtml(opt_data.outcomeType), '" data-count="', soy.$$escapeHtml(opt_data.count), '" aria-label="', soy.$$escapeHtml(opt_data.outcomeType), '"><a class="js-outcome-count-block j-outcome-count-block" href="#"><span class="j-outcome-count">', soy.$$escapeHtml(opt_data.count), '</span>');
  jive.outcomes.badge.badgeRaw({outcomeType: opt_data.outcomeType, embedded: true, tagName: 'span'}, output);
  output.append('</a></li>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.rollup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-rollup jive-modal-wide"><h3 class="j-outcome-rollup-title">');
  jive.outcomes.badge.badgeRaw({tagName: 'span', outcomeType: opt_data.outcomeType, embedded: true}, output);
  output.append('<span class="j-outcome-rollup-title-text"> ', soy.$$filterNoAutoescape(opt_data.tloTitle), '</span></h3><div class="j-outcome-rollup-replies">');
  var replyList47 = opt_data.replies;
  var replyListLen47 = replyList47.length;
  for (var replyIndex47 = 0; replyIndex47 < replyListLen47; replyIndex47++) {
    var replyData47 = replyList47[replyIndex47];
    jive.outcomes.summary.rollupReply({reply: replyData47, outcomeTypeName: opt_data.outcomeType}, output);
  }
  output.append('</div><div class="j-outcome-done-block j-rc5 j-rc-none-top"><a href="#" class="js-outcome-done-button">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.done'),[])), '</a></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.avatar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user, {enabled: opt_data.user.jive.enabled, partner: opt_data.user.jive.externalContributor, username: opt_data.user.jive.username, visible: opt_data.user.jive.visible, anonymous: false, prop: null, avatarID: 0, size: 32, hideTooltip: true}), output);
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.rollupReply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-badge-popup">');
  jive.outcomes.summary.detailsLinks({outcome: opt_data.reply.outcomes[opt_data.outcomeTypeName], contextUrl: opt_data.reply.resources.html.ref}, output);
  jive.outcomes.badge.badgeByline({outcomeTypeName: opt_data.outcomeTypeName, author: opt_data.reply.outcomes[opt_data.outcomeTypeName].user, modifiedDate: opt_data.reply.outcomes[opt_data.outcomeTypeName].updated}, output);
  output.append('<div class="j-outcome-details js-outcome-details" style="display:none;"></div></div><div class="j-outcome-rollup-reply"><div class="j-outcome-reply-avatar">');
  if (opt_data.reply.author) {
    jive.outcomes.summary.avatar({user: opt_data.reply.author}, output);
  } else {
    jive.shared.displayutil.avatar({anonymous: true, enabled: true, partner: false, username: 'guest', id: 0, ID: 0, displayName: '', visible: true, prop: null, avatarID: 0, size: 32}, output);
  }
  output.append('</div><div class="j-outcome-reply-box"><p class="j-outcome-reply-byline jive-comment-meta font-color-meta">');
  if (opt_data.reply.author) {
    jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.reply.author, {anonymous: false}), output);
  } else {
    jive.shared.displayutil.userDisplayNameLink({anonymous: true, enabled: true, username: 'guest', id: 0, displayName: '', visible: true}, output);
  }
  output.append(' <a href="', soy.$$escapeHtml(opt_data.reply.resources.html.ref), '" class="j-outcome-reply-date font-color-normal js-outcome-reply-incontext">', soy.$$escapeHtml(((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '') ? _jive_moment((parseFloat((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '')) ? parseFloat((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '')) : (opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('lll') : '')), '<span class="j-in-context font-color-meta-light"> (', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.rollup.inContext'),[])), ')</span></a></p><div class="j-outcome-reply-body js-outcome-reply-body">', soy.$$filterNoAutoescape(opt_data.reply.content.text), '</div><div class="j-outcome-more js-outcome-more" style="display:none;"><a class="j-rc3 font-color-meta" href=\'#\'>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.more'),[])), '</a></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.detailsLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.outcome.note || opt_data.outcome.properties && opt_data.outcome.properties.approvers) ? '<div class="j-outcome-link-container"><a class="j-outcome-link-details js-outcome-link-details js-outcome-link" href="#" data-outcome-url="' + soy.$$escapeHtml(opt_data.outcome.resources.self.ref) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.details'),[])) + '</a><a class="j-outcome-link-incontext js-outcome-link-incontext js-outcome-link" href="' + soy.$$escapeHtml(opt_data.contextUrl) + '" style="display:none;">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.rollup.inContext'),[])) + '</a></div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.typeIdFromTypeName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.typeName) {
    case 'document':
      output.append('102');
      break;
    case 'comment':
      output.append('105');
      break;
    case 'discussion':
      output.append('1');
      break;
    case 'message':
      output.append('2');
      break;
    case 'post':
      output.append('38');
      break;
    case 'update':
      output.append('1464927464');
      break;
    default:
      output.append('-1');
  }
  return opt_sb ? '' : output.toString();
};


jive.outcomes.summary.textCountBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-outcome-count j-search-result-meta"> ', (opt_data.outcomeType != 'finalized' && opt_data.outcomeType != 'outdated') ? soy.$$escapeHtml(opt_data.count) : '', '</span> <span class="js-outcome-text-badge j-outcome-text-badge js-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), ' j-outcome-type-', soy.$$escapeHtml(opt_data.outcomeType), '" data-outcome-type="', soy.$$escapeHtml(opt_data.outcomeType), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.' + opt_data.outcomeType),[])), (opt_data.isLast != true) ? '<span class="j-search-result-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.comma'),[])) + '</span>' : '', '</span>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from mostLiked.soy.
// Please don't edit this file by hand.

goog.provide('jive.outcomes.mostLiked.pseudoBadge');
goog.provide('jive.outcomes.mostLiked.reply');
goog.provide('jive.outcomes.mostLiked.rollup');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.outcomes.badge.badgeRaw');
goog.require('jive.outcomes.summary.avatar');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');


jive.outcomes.mostLiked.pseudoBadge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="js-outcome-summary-count j-outcome-summary-count js-mostLiked j-most-liked" tabindex="0" role="button" aria-haspopup="true"><a class="js-outcome-count-block j-outcome-count-block" href="#">');
  jive.outcomes.badge.badgeRaw({outcomeType: 'mostLiked', embedded: true, tagName: 'span'}, output);
  output.append('</a></li>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.mostLiked.rollup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-rollup jive-modal-wide"><h3 class="j-outcome-rollup-title">');
  jive.outcomes.badge.badgeRaw({outcomeType: 'mostLiked', embedded: true, tagName: 'span'}, output);
  output.append('<b>', soy.$$escapeHtml(opt_data.tloSubject), '</b></h3><div class="j-outcome-rollup-replies">');
  var replyList18 = opt_data.replies;
  var replyListLen18 = replyList18.length;
  for (var replyIndex18 = 0; replyIndex18 < replyListLen18; replyIndex18++) {
    var replyData18 = replyList18[replyIndex18];
    jive.outcomes.mostLiked.reply({reply: replyData18}, output);
  }
  output.append('</div><div class="j-outcome-done-block j-rc5 j-rc-none-top"><a href="#" class="js-outcome-done-button">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.done'),[])), '</a></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.outcomes.mostLiked.reply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-outcome-badge-popup"><div class="outcome-byline">', (opt_data.reply.likeCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.mostLiked.likes_singular'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.mostLiked.likes_plural'),[opt_data.reply.likeCount])), '</div></div><div class="j-outcome-rollup-reply"><div class="j-outcome-reply-avatar">');
  if (opt_data.reply.author) {
    jive.outcomes.summary.avatar({user: opt_data.reply.author}, output);
  } else {
    jive.shared.displayutil.avatar({anonymous: true, enabled: true, partner: false, username: 'guest', id: 0, ID: 0, displayName: '', visible: true, prop: null, avatarID: 0, size: 32}, output);
  }
  output.append('</div><div class="j-outcome-reply-box"><p class="j-outcome-reply-byline jive-comment-meta font-color-meta">');
  if (opt_data.reply.author) {
    jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.reply.author, {anonymous: false}), output);
  } else {
    jive.shared.displayutil.userDisplayNameLink({anonymous: true, enabled: true, username: 'guest', id: 0, displayName: '', visible: true}, output);
  }
  output.append(' <a href="', soy.$$escapeHtml(opt_data.reply.resources.html.ref), '" class="j-outcome-reply-date font-color-normal js-outcome-reply-incontext">', soy.$$escapeHtml(((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '') ? _jive_moment((parseFloat((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '')) ? parseFloat((opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : '')) : (opt_data.reply.updated ? jive.model.DateUtil.parseISODateTime(opt_data.reply.updated) : ''))).lang(_jive_locale.toLowerCase().replace('_','-')).format('lll') : '')), '<span class="j-in-context font-color-meta-light"> (', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.summary.rollup.inContext'),[])), ')</span></a></p><div class="j-outcome-reply-body js-outcome-reply-body">', soy.$$filterNoAutoescape(opt_data.reply.content.text), '</div><div class="j-outcome-more js-outcome-more" style="display:none;"><a class="j-rc3 font-color-meta" href=\'#\'>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.more'),[])), '</a></div></div></div>');
  return opt_sb ? '' : output.toString();
};

;
define("apps/outcomes/mostLikedView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/outcomes/outcomesMain"],function(d,a,c){function f(g){return g.length>0}function b(j,i,g){if(f(i)){var h=d(jive.outcomes.mostLiked.pseudoBadge({}));j.find(".js-mostLiked").remove();j.append(h)}}function e(l,j,h){var k=jive.outcomes.mostLiked.rollup({replies:l,tloSubject:j});var i={context:h,returnPopover:true,hoverSelection:false,onClose:function(){h.removeAttr("aria-owns")}};var m=d(k).popover(i);h.attr("aria-owns",m.id());function g(o){var p=o.hasClass("j-js-expanded");if(!p){o.addClass("j-js-expanded")}var n=o.height();if(!p){o.removeClass("j-js-expanded")}return n}m.find(".js-outcome-reply-body").each(function(){var n=d(this);if(g(n)>150){n.next(".js-outcome-more").show()}});m.find(".js-outcome-more").on("click",function(n){d(this).hide().prev(".js-outcome-reply-body").addClass("j-js-expanded");n.preventDefault()});m.find(".js-outcome-done-button").on("click",function(n){i.closeFunc();n.preventDefault()});a.emit("renderedContent",m);a.emit("mostLiked.rollupDisplayed",l)}a.addListener("mostLiked.rolledup",e);a.addListener("mostLiked.badge",b);return{mostLikedRollup:e,mostLikedBadge:b}});
;
define("apps/outcomes/badgeHelper",["jquery"],function(f){var d=["outdated","official","finalized"];var a=false;function g(){a=true}function c(){a=false}function b(h){if(a&&d.indexOf(h)!=-1){return true}return false}function e(j,i){var h=j.outcomeType.name.toLowerCase();if(a&&d.indexOf(h)>-1){return jive.outcomes.badge.headerOutcomeBadge({outcome:j,customBadgeTemplate:i})}else{return jive.outcomes.badge.outcomeBadge({outcome:j,customBadgeTemplate:i})}}return{isHeaderBadge:b,getBadge:e,enableHeaderBadges:g,disableHeaderBadges:c}});
;
define("apps/outcomes/badgeView",["jquery","apps/shared/controllers/localexchange","apps/outcomes/viewUtil","apps/shared/views/itemList","apps/outcomes/badgeHelper","apps/outcomes/outcomesMain"],function(j,l,d,n,b){function i(s,r,t){return d.placeItem(s,r,t,function(v,u){return v.find(".js-outcome-badge.js-outcome-type-"+u)})}function m(s,v){var t=v.outcomeType.name.toLowerCase();var w=j(".js-outcome-badge-container.js-ed-"+s.type+"-"+s.id);var u=w.data("customBadgeTemplate");var r=b.getBadge(v,u);w=f(w,t);w=w.not(":has(.js-outcome-type-"+t+")");i(w,r,t).data("outcome",v.resources.self.ref).data("ed",s);if(b.isHeaderBadge(t)){c(w)}l.emit("outcome.displayed",s,v)}function e(s,t,v){var r=jive.outcomes.badge.fakeOutcomeBadge({outcomeTypeName:t});var u=j(".js-outcome-badge-container.js-ed-"+s.type+"-"+s.id);u=f(u,t);i(u.not(":has(.js-outcome-badge.js-outcome-type-"+t+")"),r,t);v.emitSuccess(u.find(".js-outcome-badge.js-outcome-type-"+t))}function g(r,t){var s=t.name.toLowerCase();var u=j(".js-outcome-badge-container.js-ed-"+r.type+"-"+r.id);u.find(".js-outcome-badge.js-outcome-type-"+s).safeRemove()}function q(s,r){j.each(s,function(){var t=this;var u=j(".js-outcome-badge-container.js-ed-"+t.type+"-"+t.id);u.find(".js-outcome-badge").safeRemove()});if(r){r.emitSuccess()}}function p(r){r=r||document;var s=[];j(".js-outcome-badge-container",r).not("[data-no-hydrate]").each(function(){s.push(d.getEd(this))});l.emit("outcome.refresh",s)}function o(r){if(r){r.preventDefault()}var s=j(this);if(s.data("outcome")&&s.data("ed")){k(s,s.data("ed"),s.data("outcome"))}else{console.log("badge is missing outcome or entity descriptor data: ",s)}}function h(u,t,s,r){this.labelSuffix=u;this.event=t;this.actionData=s;this.href=r}function c(t){var s=t.find("li");var r=$j(".js-outcome-badge-container-top > li > .j-outcome-badge-popup");if(!(r.length>0)){if(s.data("outcome")&&s.data("ed")){l.emitP("outcome.prepareForBadgePopup",s.data("outcome")).then(function(x,y){var w=d.buildLinkActions(y);var v={outcomeTypeName:x.outcomeType.name.toLowerCase(),author:x.user,modifiedDate:x.updated,actions:w,props:x.properties};v=a(x,v);var u=jive.outcomes.badge.headerBadgePopup(v);s.append(u);s.on("click",".js-actionLink",function(A){A.preventDefault();var B=j(this);var C=s.closest(".js-outcome-badge-container");var z=d.getEd(C);l.emit("outcome.doAction",B.data("event"),z,B.data("actionData"),C)})})}}}function a(s,r){if(s.note){r.comment=j("<div/>").html(s.note).text()}if(s.properties){var u=[];if(s.properties.alertedUsers){j.each(s.properties.alertedUsers,function(w,v){u.push(v.displayName)});r.alertedNames=u}if(s.outcomeType.name=="pending"){if(u.length==0){u.push(s.user.displayName);r.alertedNames=u}if(s.properties.outcomeShare){if(document.URL!=s.properties.outcomeShare.resources.html.ref){var t=s.outcomeType.name.toLowerCase()+".view";r.shareLink=new h(t,null,null,s.properties.outcomeShare.resources.html.ref)}}else{if(s.update){var t=s.outcomeType.name.toLowerCase()+".put";r.shareLink=new h(t,"outcome.put",JSON.stringify(s.outcomeType),null)}}}}return r}function k(t,r,s){if(t.attr("aria-owns")){j("#"+t.attr("aria-owns")).trigger("close")}else{l.emitP("outcome.prepareForBadgePopup",s).then(function(y,z){var x=d.buildLinkActions(z);var v={outcomeTypeName:y.outcomeType.name.toLowerCase(),author:y.user,modifiedDate:y.updated,actions:x,props:y.properties};v=a(y,v);var u=jive.outcomes.badge.badgePopup(v);var w=j(u).popover({context:t,onClose:function(){t.removeAttr("aria-owns")},hoverSelection:false});l.emit("outcome.history.displayLink",y,v.alertedNames,w.find(".j-outcome-modal-footer"),r,t);l.addListener("outcome.history.popoverDisplayed",function(){w.trigger("close")});t.attr("aria-owns",w.id());n.bindHandlers(w);w.on("click",".js-actionLink",function(B){B.preventDefault();var C=j(this);var D=j(t).closest(".js-outcome-badge-container");var A=d.getEd(D);l.emit("outcome.doAction",C.data("event"),A,C.data("actionData"),t);C.trigger("close")})})}}function f(s,r){s=s.filter(function(){var t=j(this).data("allowedOutcomeTypes");return !t||t.indexOf(r)>=0});return s}l.addListener("outcome.display",m);l.addListener("outcome.displayFake",e);l.addListener("outcome.removeBadge",g);l.addListener("outcome.clearBadges",q);return{display:m,removeBadge:g,refresh:p,clickHandler:o}});
;
require(["jquery","apps/shared/controllers/localexchange"],function(b,a){a.addLazyListener("renderedContent",["apps/outcomes/badgeView"],function(d,c){d.refresh(c)},function(c){return b(".js-outcome-badge-container",c).not("[data-no-hydrate]").length>0});a.addLazyListener("renderedContent",["apps/outcomes/summaryView"],function(d,c){d.summarize(c)},function(c){return b(".js-outcome-summary-container",c).length>0});a.addLazyListener("renderedContent",["apps/outcomes/actionView"],function(d,c){d.tloActionButtonRefresh(c)},function(c){return b(".js-tlo-action-button",c).length>0});b(function(){b("body").off(".outcomes").on("click.outcomes","a.js-outcome-button",function(d){var c=this;require(["apps/outcomes/actionView"],function(e){e.clickHandler.call(c)});d.preventDefault()}).on("click.outcomes",".js-outcome-badge-container .js-outcome-badge:not(.js-outcome-badge-noclick)",function(d){var c=this;require(["apps/outcomes/badgeView"],function(e){e.clickHandler.call(c)});d.preventDefault()}).on("click.outcomes",".js-outcome-history-link",function(d){var c=this;require(["apps/outcomes/historyView"],function(e){b(c).parent("j-pop-main").attr("id");e.clickHandler.call(c)});d.preventDefault()}).on("click.outcomes",".j-outcome-link-details",function(d){var c=this;require(["apps/outcomes/summaryView"],function(e){e.clickHandler.call(c)})});require(["apps/outcomes/actionView"],function(c){c.tloActionButtonRefresh()})})});
;
// This file was automatically generated from userlist.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.activityinfo.userListHover');
goog.provide('jive.browse.activityinfo.userListHoverBox');
goog.provide('jive.browse.activityinfo.userListHoverItem');
goog.provide('jive.browse.activityinfo.userListHoverTableBody');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.people.profile.followLink');
goog.require('jive.shared.displayutil.avatar');


jive.browse.activityinfo.userListHover = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<header><h2>', (opt_data.activityType == 'reply') ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.replycount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.replycount.plural'),[opt_data.totalCount])) : (opt_data.activityType == 'like') ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.likecount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.likecount.plural'),[opt_data.totalCount])) : (opt_data.activityType == 'bookmark') ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.bookmarkcount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.bookmarkcount.plural'),[opt_data.totalCount])) : (opt_data.activityType == 'follow') ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followercount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followercount.plural'),[opt_data.totalCount])) : (opt_data.activityType == 'membership') ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.plural'),[opt_data.totalCount])) : (opt_data.activityType == 'connections') ? (opt_data.bidirectionalGraph) ? (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.friendcount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.friendcount.plural'),[opt_data.totalCount])) : (opt_data.totalCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followingcount.singular'),[opt_data.totalCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followingcount.plural'),[opt_data.totalCount])) : '', '</h2></header><a href="#" class="j-modal-close-top close">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><table><tbody>');
  jive.browse.activityinfo.userListHoverTableBody(opt_data, output);
  output.append('</tbody></table></section>');
  return opt_sb ? '' : output.toString();
};


jive.browse.activityinfo.userListHoverTableBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var userList55 = opt_data.items;
  var userListLen55 = userList55.length;
  if (userListLen55 > 0) {
    for (var userIndex55 = 0; userIndex55 < userListLen55; userIndex55++) {
      var userData55 = userList55[userIndex55];
      jive.browse.activityinfo.userListHoverItem({currentUserID: opt_data.currentUserID, user: userData55}, output);
    }
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.user.list.empty'),[])));
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.activityinfo.userListHoverItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr><td class="j-td-avatar">');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user, {size: 35}), output);
  output.append('</td><td class="j-td-name"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/people/' + encodeURIComponent(opt_data.user.username))), '">', (opt_data.currentUserID == opt_data.user.id) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.you'),[])) : soy.$$escapeHtml(opt_data.user.displayName), '</a></td><td class="j-td-follow">');
  if (opt_data.user.prop.connections && opt_data.user.prop.connections.followLinkShown) {
    jive.people.profile.followLink(soy.$$augmentMap(opt_data.user.prop.connections, {targetUserID: opt_data.user.id, targetUserDisplayName: opt_data.user.displayName, hideFollowingCount: true, renderLocation: 'user-list', streamsAssociatedCount: opt_data.user.prop.connections.streamsAssociatedBean ? opt_data.user.prop.connections.streamsAssociatedBean.streamIDs.length : 0}), output);
  }
  output.append('</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.browse.activityinfo.userListHoverBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jive-activity-info-hover" class="jive-modal j-people-list-modal"></div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from acclaim.soy.
// Please don't edit this file by hand.

goog.provide('jive.soy.acclaim.displayUserRow');
goog.provide('jive.soy.acclaim.displayYou');
goog.provide('jive.soy.acclaim.privateBookmarkNotification');
goog.provide('jive.soy.acclaim.renderAcclaimModal');
goog.provide('jive.soy.acclaim.renderEmptyListText');
goog.provide('jive.soy.acclaim.renderUserList');
goog.provide('jive.soy.acclaim.renderUserNotesList');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.app.url');
goog.require('jive.people.profile.followLink');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.icon');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.getCountTextByType');


jive.soy.acclaim.renderAcclaimModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="', soy.$$escapeHtml(opt_data.youID), '" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ', (opt_data.activityType == 'bookmark') ? 'class="j-modal-bookmark-header"' : '', '>', (opt_data.activityType == 'like') ? '<span class="jive-icon-med jive-icon-like"></span>' : '', (opt_data.activityType == 'bookmark') ? '<div class="jive-bookmark-ribbon j-ui-elem"></div>' : '', '<p class="modal-initially-focused" tabindex="0">');
  jive.shared.soy.getCountTextByType({count: opt_data.totalCount, type: opt_data.activityType, bidirectionalGraph: opt_data.bidirectionalGraph}, output);
  output.append('</p></h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem" role="img"></span></a><section  class="jive-modal-content clearfix">', (! opt_data.guest) ? '<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">' + ((opt_data.bidirectionalGraph) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.friends.filter.label'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.connections.filter.label'),[]))) + '</label>' + ((opt_data.activityType == 'bookmark') ? '<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('bookmarks.sidebar.filter.notes'),[])) + '</label>' : '') + '</nav>' : '');
  jive.soy.acclaim.renderUserList({activityType: opt_data.activityType, users: opt_data.users, currentUserID: opt_data.youID, currentUserPartner: opt_data.youPartner, onlyFriends: false, id: 'modal-liked-everyone', classNames: 'liked-everyone-list js-everyone-list', show: true}, output);
  jive.soy.acclaim.renderUserList({activityType: opt_data.activityType, users: opt_data.users, currentUserID: opt_data.youID, currentUserPartner: opt_data.youPartner, onlyFriends: true, id: 'modal-liked-friends', classNames: 'liked-friends-list js-friends-list', show: false}, output);
  if (opt_data.activityType == 'bookmark') {
    jive.soy.acclaim.renderUserNotesList({activityType: opt_data.activityType, users: opt_data.users, currentUserID: opt_data.youID, currentUserPartner: opt_data.youPartner, onlyFriends: false, onlyNotes: true, id: 'modal-bookmark-notes', classNames: 'j-user-bookmark-notes-list j-js-user-bookmark-notes-list', show: false}, output);
    jive.soy.acclaim.renderUserNotesList({activityType: opt_data.activityType, users: opt_data.users, currentUserID: opt_data.youID, currentUserPartner: opt_data.youPartner, onlyFriends: true, onlyNotes: true, id: 'modal-bookmark-friends-notes', classNames: 'j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list', show: false}, output);
  }
  output.append('</section></div>');
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.renderUserList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table', (opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '', (opt_data.classNames) ? ' class="' + soy.$$escapeHtml(opt_data.classNames) + '"' : '', (! opt_data.show) ? ' style="display: none;"' : '', '><tbody>');
  var userList100 = opt_data.users;
  var userListLen100 = userList100.length;
  if (userListLen100 > 0) {
    for (var userIndex100 = 0; userIndex100 < userListLen100; userIndex100++) {
      var userData100 = userList100[userIndex100];
      jive.soy.acclaim.displayUserRow({activityType: opt_data.activityType, user: userData100, currentUserID: opt_data.currentUserID, currentUserPartner: opt_data.currentUserPartner, onlyFriends: opt_data.onlyFriends, onlyNotes: opt_data.onlyNotes, hideFollow: opt_data.hideFollow, extraParams: opt_data.extraParams}, output);
    }
  } else {
    output.append('<tr><td><p class="j-empty font-color-meta-light">');
    if (opt_data.emptyContent) {
      output.append(soy.$$filterNoAutoescape(opt_data.emptyContent));
    } else {
      jive.soy.acclaim.renderEmptyListText(opt_data, output);
    }
    output.append('</p></td></tr>');
  }
  output.append('</tbody></table>');
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.renderEmptyListText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityType == 'bookmark') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.empty.msg.bookmarks'),[])) : (opt_data.activityType == 'like') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.empty.msg.likes'),[])) : (opt_data.activityType == 'follow') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.empty.msg.follow'),[])) : (opt_data.activityType == 'connections') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.empty.msg.connections'),[])) : (opt_data.activityType == 'membership') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.empty.msg.membership'),[])) : '');
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.renderUserNotesList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<table id="', soy.$$escapeHtml(opt_data.id), '" class="', soy.$$escapeHtml(opt_data.classNames), '"', (! opt_data.show) ? ' style="display: none;"' : '', '><tbody>');
  var userList144 = opt_data.users;
  var userListLen144 = userList144.length;
  if (userListLen144 > 0) {
    for (var userIndex144 = 0; userIndex144 < userListLen144; userIndex144++) {
      var userData144 = userList144[userIndex144];
      if (userData144.prop.bookmarknotes) {
        jive.soy.acclaim.displayUserRow({activityType: opt_data.activityType, user: userData144, currentUserID: opt_data.currentUserID, currentUserPartner: opt_data.currentUserPartner, onlyFriends: opt_data.onlyFriends, onlyNotes: opt_data.onlyNotes}, output);
      }
    }
  } else {
    output.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>');
  }
  output.append('</tbody></table>');
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.displayYou = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="');
  jive.app.url({path: '/people/' + soy.$$escapeHtml(encodeURIComponent(opt_data.username))}, output);
  output.append('" data-userid="', soy.$$escapeHtml(opt_data.ID), '" class="jiveTT-hover-user">', soy.$$escapeHtml(opt_data.i18n.acclaimLikedYou), '</a>');
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.displayUserRow = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.onlyFriends || opt_data.onlyFriends && opt_data.currentUserID != opt_data.user.id && opt_data.user.prop.connections.targetUserACurrentFriend) {
    if (opt_data.onlyNotes && opt_data.user.prop.hasBookmarknotes || ! opt_data.onlyNotes) {
      output.append('<tr data-user-id="', soy.$$escapeHtml(opt_data.user.id), '">');
      if (! opt_data.onlyNotes) {
        output.append('<td class="j-td-avatar ', (opt_data.user.prop.hasBookmarknotes) ? 'j-td-topalign' : '', '">');
        if (opt_data.activityType == 'expertise') {
          jive.shared.displayutil.icon(soy.$$augmentMap(opt_data.user, {size: 35}), output);
        } else {
          jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.user, {size: 35, currentUserPartner: opt_data.currentUserPartner, extraParams: opt_data.extraParams}), output);
        }
        output.append('</td>');
      }
      output.append('<td class="j-td-name">');
      if (opt_data.currentUserID == opt_data.user.id) {
        jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.user, {displayNameOverride: jive.i18n.i18nText(jive.i18n.getMsg('global.you'),[]), extraParams: opt_data.extraParams}), output);
      } else {
        jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.user, {extraParams: opt_data.extraParams}), output);
      }
      output.append((! opt_data.onlyNotes) ? '<!-- TODO: show truncated version of the notes -->' + ((opt_data.activityType == 'bookmark' && opt_data.user.prop.hasBookmarknotes && opt_data.user.prop.bookmarknotes) ? '<p class="j-user-bookmark-notes">' + soy.$$filterNoAutoescape(opt_data.user.prop.bookmarknotes) + '</p>' : '') : '<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->' + ((opt_data.activityType == 'bookmark' && opt_data.user.prop.hasBookmarknotes && opt_data.user.prop.bookmarknotes) ? '<p class="j-user-bookmark-notes">' + soy.$$filterNoAutoescape(opt_data.user.prop.bookmarknotes) + '</p>' : ''), '</td>');
      if (opt_data.activityType != 'bookmark' && ! opt_data.hideFollow) {
        if (! opt_data.onlyNotes) {
          output.append('<td class="j-td-follow">');
          if (opt_data.user.prop.connections && opt_data.user.prop.connections.followLinkShown) {
            if (opt_data.user.id != opt_data.currentUserID && opt_data.user.visible) {
              jive.people.profile.followLink(soy.$$augmentMap(opt_data.user.prop.connections, {targetUserID: opt_data.user.id, targetUserDisplayName: opt_data.user.displayName, hideFollowingCount: true, renderLocation: 'bookmarked-user-list', streamsAssociatedCount: opt_data.user.prop.connections.streamsAssociatedBean ? opt_data.user.prop.connections.streamsAssociatedBean.streamIDs.length : 0}), output);
            }
          }
          output.append('</td>');
        }
      }
      output.append('</tr>');
    }
  }
  return opt_sb ? '' : output.toString();
};


jive.soy.acclaim.privateBookmarkNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.modal.privateBookmarks'),[])), '</td></tr>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.soy.numberedPageLink');
goog.provide('jive.shared.soy.pageToStart');
goog.provide('jive.shared.soy.pageToStart__Cce8');
goog.provide('jive.shared.soy.pageUrl');
goog.provide('jive.shared.soy.pageUrl__C2bf6');
goog.provide('jive.shared.soy.paginationLinks');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.soy.paginationLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pagination"', (opt_data.elementID) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.elementID) + '"' : '', (opt_data.max <= 1 && ! opt_data.alwaysShow) ? 'style="display:none"' : '', '>');
  if (opt_data.current >= 1) {
    jive.shared.soy.numberedPageLink(soy.$$augmentMap(opt_data, {number: 1, active: opt_data.current == 1}), output);
  }
  output.append((opt_data.current > 5) ? '<span class="ellipsis">&hellip;</span>' : '');
  var iInit21 = opt_data.current - 3;
  var iLimit21 = opt_data.current + 4;
  for (var i21 = iInit21; i21 < iLimit21; i21++) {
    if (i21 > 1 && i21 <= opt_data.max) {
      jive.shared.soy.numberedPageLink(soy.$$augmentMap(opt_data, {number: i21, active: opt_data.current == i21}), output);
    }
  }
  output.append((opt_data.max > opt_data.current + 4) ? '<span class="ellipsis">&hellip;</span>' : '');
  if (opt_data.max > opt_data.current + 3) {
    jive.shared.soy.numberedPageLink(soy.$$augmentMap(opt_data, {number: opt_data.max}), output);
  }
  output.append('<span class="j-pagination-prevnext">');
  if (opt_data.current > 1) {
    output.append('<a href="');
    jive.shared.soy.pageUrl__C2bf6(soy.$$augmentMap(opt_data, {page: opt_data.current - 1}), output);
    output.append('" class="j-pagination-prev" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.previous_page_title'),[])), '" data-start="');
    jive.shared.soy.pageToStart__Cce8(soy.$$augmentMap(opt_data, {page: opt_data.current - 1}), output);
    output.append('">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.previous'),[])), '</a>');
  } else {
    output.append('<span class="j-pagination-prev j-disabled font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.previous'),[])), '</span>');
  }
  if (opt_data.current < opt_data.max) {
    output.append('<a href="');
    jive.shared.soy.pageUrl__C2bf6(soy.$$augmentMap(opt_data, {page: opt_data.current + 1}), output);
    output.append('" class="j-pagination-next" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.next_page_title'),[])), '" data-start="');
    jive.shared.soy.pageToStart__Cce8(soy.$$augmentMap(opt_data, {page: opt_data.current + 1}), output);
    output.append('">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.next'),[])), '</a>');
  } else {
    output.append('<span class="j-pagination-next j-disabled font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.next'),[])), '</span>');
  }
  output.append('</span></div>');
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.numberedPageLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.active) {
    output.append('<a href="');
    jive.shared.soy.pageUrl__C2bf6(soy.$$augmentMap(opt_data, {page: opt_data.number}), output);
    output.append('" class="j-pagination-current font-color-normal" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.numbered_page_title'),[opt_data.number])), '" data-start="');
    jive.shared.soy.pageToStart__Cce8(soy.$$augmentMap(opt_data, {page: opt_data.number}), output);
    output.append('"><strong>', soy.$$escapeHtml(opt_data.number), '</strong></a>');
  } else {
    output.append('<a href="');
    jive.shared.soy.pageUrl__C2bf6(soy.$$augmentMap(opt_data, {page: opt_data.number}), output);
    output.append('" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.numbered_page_title'),[opt_data.number])), '" data-start="');
    jive.shared.soy.pageToStart__Cce8(soy.$$augmentMap(opt_data, {page: opt_data.number}), output);
    output.append('">', soy.$$escapeHtml(opt_data.number), '</a>');
  }
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.pageUrl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.urlParams) ? soy.$$escapeHtml(opt_data.urlPath) + soy.$$escapeHtml((Object.keys(jQuery.extend({}, opt_data.urlParams, (function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })())).length > 0 ? '?'+ jQuery.param(jQuery.extend({}, opt_data.urlParams, (function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })())) : '')) : soy.$$escapeHtml(opt_data.urlPath) + soy.$$escapeHtml((Object.keys((function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()).length > 0 ? '?'+ jQuery.param((function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()) : '')));
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.pageToStart = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml((opt_data.page - 1) * opt_data.pageSize));
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.pageUrl__C2bf6 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.urlParams) ? soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.urlPath)) + soy.$$escapeHtmlAttribute((Object.keys(jQuery.extend({}, opt_data.urlParams, (function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })())).length > 0 ? '?'+ jQuery.param(jQuery.extend({}, opt_data.urlParams, (function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })())) : '')) : soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.urlPath)) + soy.$$escapeHtmlAttribute((Object.keys((function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()).length > 0 ? '?'+ jQuery.param((function() { var map = {}; var pairs = [['start', opt_data.page > 1 ? (opt_data.page - 1) * opt_data.pageSize : []]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()) : '')));
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.pageToStart__Cce8 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtmlAttribute((opt_data.page - 1) * opt_data.pageSize));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from modal.soy.
// Please don't edit this file by hand.

goog.provide('jive.shared.soy.confirmModal');
goog.provide('jive.shared.soy.modal');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.shared.soy.modal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-modal ', (opt_data.modalCss) ? soy.$$escapeHtml(opt_data.modalCss) : '', '"><header><h2>', (opt_data.header) ? soy.$$filterNoAutoescape(opt_data.header) : '&nbsp;', '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a class="j-modal-close-top jive-close no-underline close ', (opt_data.closeCss) ? soy.$$escapeHtml(opt_data.closeCss) : '', '" href="#" aria-labelledby="close-modal-508" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', (! opt_data.closeText) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])) : soy.$$escapeHtml(opt_data.closeText), ' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix ', (opt_data.contentCss) ? soy.$$escapeHtml(opt_data.contentCss) : '', '">', soy.$$filterNoAutoescape(opt_data.contents), '</section></div>');
  return opt_sb ? '' : output.toString();
};


jive.shared.soy.confirmModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.modal({header: '<header class="j-modal-header"><h2 class="js-title">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.titleKey),[])) + '</h2></header>', contents: '<p><span title="Warning" role="img" class="jive-icon-med jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.messageKey),[])) + '</p><div class="jive-form-buttons"><input id="inbox-mark-all-read" type="submit" class="j-btn-callout js-confirm" name="delete" value="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.buttonKey),[])) + '" /><input id="inbox-mark-read-cancel"  type="submit" class="jive-modal-close close" value="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])) + '" /></div>'}, output);
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Activity.Info");jive.Activity.Info.ActivityInfoView=jive.AbstractView.extend(function(a){var c=jQuery;function b(d){return d==="bookmark"}this.init=function(e){var d=this;this.$modal=null;this.pageSize=e.pageSize;this.soyParams={};this.renderModal=function(f){return $j(jive.soy.acclaim.renderAcclaimModal(f))};this.handleFollow=function(h){if(this.$modal){var g=this.$modal.find("table.js-everyone-list, table.js-friends-list"),f="tr[data-user-id="+h.id+"]";if(!g.eq(1).find(f).length){g.eq(0).find(f).clone().prependTo(g.eq(1).find("tbody"))}}};jive.switchboard.addListener("follow.user.complete",this.handleFollow.bind(this))};this.showUsers=function(d,i){var e=this,g={centered:true,destroyOnClose:true,closeFocusSelector:i.context,initialFocusSelector:".modal-initially-focused",onClose:function(){$j(".js-pop").remove()}};this.soyParams=a.buildSoyParams(d,i);this.$modal&&this.$modal.remove();var f=this.renderModal(this.soyParams);if(b(d.activityType)){var h=jive.soy.acclaim.privateBookmarkNotification();f.find("table.js-everyone-list tbody").each(function(){$j(this).append(h)})}this.$modal=f.lightbox_me(g);this.$modal.find("#jive-view-picker input:checkbox").click(function(){var j=$j("#jive-view-picker input:checked");var k=0;if(j.length==1){k=j.val()}else{if(j.length==2){k=3}}e.$modal.find("table").hide();e.$modal.find("table").eq(k).show()});this.$modal.find(".jive-modal-content").endlessScroll({fireDelay:false,callback:function(j){if(e.soyParams.moreResults){e.emitP("loadUsersFromIndex",i,e.pageSize*j).addCallback(function(k){e.soyParams.moreResults=k.moreResults;e.appendUsers(k)})}}})};this.appendUsers=function(e){var j=e&&e.items?e.items:[];if(j.length>0){this.$modal.find(".j-js-private-bookmark-notification").remove();var d=this.$modal.find(".jive-modal-content tbody:visible");var g=d.parent().attr("id");var h=this.renderModal($j.extend({},this.soyParams,{users:j}));var f=h.find("table#"+g+" tr");d.append(f.clone());if(b(this.soyParams.activityType)){var i=jive.soy.acclaim.privateBookmarkNotification();d.append(i)}}};a.buildSoyParams=function(d,e){return{activityType:e.activityType,bidirectionalGraph:d.bidirectionalGraph,currentUserID:d.currentUserID,currentUserPartner:d.currentUserPartner,moreResults:d.moreResults,objectID:e.objectID,objectType:e.objectType,totalCount:d.totalCount,users:d.items,youID:e.youID||d.currentUserID,youPartner:e.youPartner||d.currentUserPartner}}});define("apps/browse/activity/info/views/activity_info_view",function(){return jive.Activity.Info.ActivityInfoView});
;
jive.namespace("Activity");define("apps/browse/activity/model/activity_source",["apps/shared/models/rest_service"],function(a){jive.Activity.ItemSource=a.extend(function(b){b.resourceType="activity";b.pluralizedResourceType=b.resourceType;this.getContentActivityUsers=function(e,f,d){var c={cache:false,data:{count:d,start:f},url:[this.RESOURCE_ENDPOINT,"users",e.activityType,e.objectType,e.objectID].join("/")};return this.commonAjaxRequest(new jive.conc.Promise(),"GET",c)}});return jive.Activity.ItemSource});
;
jive.namespace("Activity.Info");jive.Activity.Info.Main=jive.oo.Class.extend(function(a){this.init=function(){this.pageSize=20;this.source=new jive.Activity.ItemSource();this.view=new jive.Activity.Info.ActivityInfoView({pageSize:this.pageSize});var b=this;this.view.addListener("loadUsersFromIndex",function(e,d,c){b.source.getContentActivityUsers(e,d,b.pageSize).addCallback(function(f){c.emitSuccess(f)})})};this.showUsers=function(e,d){var b=this.view,c=new jive.conc.Promise();this.source.getContentActivityUsers(e,d,this.pageSize).addCallback(function(f){b.showUsers(f,e);c.emitSuccess($j.extend({totalCount:f.totalCount},e))}).addErrback(function(){c.emitError()});return c}});define("apps/browse/activity/info/main",function(){return jive.Activity.Info.Main});
;
if(!jive.acclaim){jive.acclaim=(function(c){var b=jive.conc.observable({}),a=new jive.Activity.Info.Main(),d={showBookmarks:"bookmark",showChildren:"children",showConnections:"connections",showFollowers:"follow",showLikes:"like",showMembers:"membership",showExternalContributorMembers:"externalContributorsMembership"};jive.dispatcher.listen(Object.keys(d),function(f,e){f=c.extend({activityType:d[e]},f);delete f.count;delete f.command;var g=c.extend({objectID:f.objectId,context:this},f);delete g.objectId;b.emit("beforeFetch",f);a.showUsers(g,0).addCallback(function(h){b.emit("afterFetch",c.extend({totalCount:h.totalCount},f))}).addErrback(function(){b.emit("afterFetch",f)})});return b})(jQuery)};
;
// This file was automatically generated from acclaim_count.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.acclaim.count');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.acclaim.count = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.accessibilityLinkLabel) ? '<label class="j-508-label" id="' + soy.$$escapeHtmlAttribute(opt_data.command) + '-' + soy.$$escapeHtmlAttribute(opt_data.objectId) + '-' + soy.$$escapeHtmlAttribute(opt_data.objectType) + '-count-label">' + soy.$$escapeHtml(opt_data.accessibilityLinkLabel) + '</label>' : '', '<a ', (opt_data.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.id) + '"' : '', ' ', (opt_data.classes) ? 'class="' + soy.$$escapeHtmlAttribute(opt_data.classes) + '"' : '', ' data-command="', soy.$$escapeHtmlAttribute(opt_data.command), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.objectId), '" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.objectType), '" data-count="', soy.$$escapeHtmlAttribute(opt_data.count), '" href="#" role="button"', (opt_data.accessibilityLinkLabel) ? 'aria-labelledby="' + soy.$$escapeHtmlAttribute(opt_data.command) + '-' + soy.$$escapeHtmlAttribute(opt_data.objectId) + '-' + soy.$$escapeHtmlAttribute(opt_data.objectType) + '-count-label"' : '', '>', (opt_data.text) ? soy.$$escapeHtml(opt_data.text) : soy.$$escapeHtml(opt_data.count), '</a>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from acclaim.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.acclaim.acclaimContainerMedium');
goog.provide('jive.eae.acclaim.activityAcclaimLinkContainer');
goog.provide('jive.eae.acclaim.expressLike');
goog.provide('jive.eae.acclaim.likeControl');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.acclaim.count');
goog.require('jive.shared.soy.getCountTextByType');


jive.eae.acclaim.likeControl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.type) {
    case 'medium':
      jive.eae.acclaim.acclaimContainerMedium(opt_data, output);
      break;
    case 'mini':
      jive.eae.acclaim.activityAcclaimLinkContainer(opt_data, output);
      break;
    case 'small':
      output.append('<span class="j-js-liking-control">');
      jive.eae.acclaim.activityAcclaimLinkContainer(opt_data, output);
      output.append('</span>');
      break;
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.acclaim.activityAcclaimLinkContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.showIcon) ? '<span class="jive-icon-sml jive-' + ((opt_data.showGlyph) ? 'glyph' : 'icon') + '-like"></span>' : '', '<span id="acclaim-container-', soy.$$escapeHtmlAttribute(opt_data.objectType), '-', soy.$$escapeHtmlAttribute(opt_data.objectId), '" class="acclaim-container"><span id="jive-acclaim-like-container-', soy.$$escapeHtmlAttribute(opt_data.objectType), '-', soy.$$escapeHtmlAttribute(opt_data.objectId), '" data-likes="', soy.$$escapeHtmlAttribute(opt_data.likeCount), '" data-can-like="', soy.$$escapeHtmlAttribute(opt_data.canLike), '" data-type="', (opt_data.type) ? soy.$$escapeHtmlAttribute(opt_data.type) : 'mini', '" data-showicon="', soy.$$escapeHtmlAttribute(opt_data.showIcon), '" class="js-acclaim-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');
  jive.eae.acclaim.expressLike(soy.$$augmentMap(opt_data, {disabled: ! opt_data.canLike, iconType: 'none', type: (opt_data.liked) ? 'unlike' : 'like', classes: 'jive-acclaim-likelink'}), output);
  output.append(' ');
  var param61 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: opt_data.likeCount, type: 'showlikescount'}, param61);
  jive.eae.acclaim.count(soy.$$augmentMap(opt_data, {command: 'showLikes', count: opt_data.likeCount, classes: 'jive-acclaim-likedlink', text: '(' + soy.$$escapeHtml(opt_data.likeCount) + ')', accessibilityLinkLabel: param61.toString()}), output);
  output.append('</span></span></span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.acclaim.acclaimContainerMedium = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span>');
  if (opt_data.canLike) {
    jive.eae.acclaim.expressLike(soy.$$augmentMap(opt_data, {disabled: ! opt_data.canLike, iconType: 'medium', type: (opt_data.liked) ? 'unlike' : 'like', classes: 'jive-acclaim-likelink j-social-action'}), output);
  } else {
    output.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>', (opt_data.liked) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.unlike'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.like'),[])), '</span>');
  }
  var param92 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: opt_data.likeCount, type: 'showlikescount'}, param92);
  jive.eae.acclaim.count(soy.$$augmentMap(opt_data, {command: 'showLikes', count: opt_data.likeCount, classes: 'j-people-count j-rc3 jive-acclaim-likedlink', accessibilityLinkLabel: param92.toString()}), output);
  output.append('</span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.acclaim.expressLike = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((! opt_data.disabled) ? '<a ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtmlAttribute(opt_data.id) + '"' : '') + 'class="' + ((opt_data.classes) ? soy.$$escapeHtmlAttribute(opt_data.classes) : '') + ' ' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-command="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-object-id="' + soy.$$escapeHtmlAttribute(opt_data.objectId) + '" data-object-type="' + soy.$$escapeHtmlAttribute(opt_data.objectType) + '" title="' + ((opt_data.type == 'like') ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.like'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.unlike'),[]))) + '" href="#">' + ((opt_data.iconType != 'none') ? '<span class="jive-icon-' + ((opt_data.iconType == 'small') ? 'sml' : (opt_data.iconType == 'medium') ? 'med' : '') + ' jive-icon-like"></span>' : '') + ((opt_data.type == 'like') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.like'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.unlike'),[]))) + '</a>' : ((opt_data.iconType != 'none') ? '<span class="jive-icon-' + ((opt_data.iconType == 'small') ? 'sml' : (opt_data.iconType == 'medium') ? 'med' : '') + ' jive-icon-like"></span>' : '') + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('acclaim.liking.like'),[])));
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Liking");define("apps/like/models/like_source",["apps/shared/models/rest_service"],function(a){jive.Liking.LikeSource=a.extend(function(b){jive.conc.observable(this);b.resourceType="acclaim";b.pluralizedResourceType=b.resourceType;this.getLikes=function(d,f){var e=this.RESOURCE_ENDPOINT+"/"+d+"/"+f+"/scoredisplay";var c="like";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:e,data:{ratingType:c}})};this.getLikeData=function(d,f){var e=this.RESOURCE_ENDPOINT+"/"+d+"/"+f;var c="like";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:e,data:{ratingType:c}})};this.setLiked=function(c,e,f){var d,g,h="like",k=1,l=new jive.conc.Promise();if(c){g={ratingType:h,voteValue:k};var j=$j.deparam.querystring().fromQ;if(j){g.fromQuest=j}else{if(jive.Onboarding&&jive.Onboarding.Controller){var i=jive.Onboarding.Controller.getActiveQuestAndStep();if(i.activeQuestID=="StayInTouchQuest"&&i.activeQuestStep==1){g.fromQuest=i.activeQuestID}}}if(g.fromQuest){l.addCallback(function(){jive.localexchange.emit("trial.like.created");jive.dispatcher.dispatch("trial.updatePercentComplete")})}d="/"+this.resourceType+"/"+e+"/"+f+"/addvote"}else{d="/"+this.resourceType+"/"+e+"/"+f+"/removevote";g={ratingType:h}}$j.post(jive.rest.url(d),g,function(){l.emitSuccess()});return l}});return jive.Liking.LikeSource});
;
if(!jive.Like){jive.namespace("Like",(function(c,d){function b(k,j,e,h){var l=k.closest(".js-acclaim-container"),g,f=l.data("likes"),m={canLike:true,liked:j,objectId:h,objectType:e,type:l.data("type"),showIcon:l.data("showicon")};f+=j?1:-1;f=f<0?0:f;m.likeCount=f;switch(m.type){case"mini":g=k.closest(".j-js-liking-control").html(d(m));break;case"medium":g=l.data("likes",f).html(d(m));break;case"small":g=$j(d($j.extend({showGlyph:true},m)));var i=l.closest(".j-js-liking-control");if(i.length>0){i.replaceWith(g)}else{l.replaceWith(g)}break;default:throw"Unknown widget type"}if(g){g.find("a.jive-acclaim-likelink").focus()}}var a={};jive.dispatcher.listen(["like","unlike"],function(i,f,h){var e=i.objectType+"_"+i.objectId;if(a[e]){console.log("duplicate like request, ignoring",i,f,h);return}else{a[e]=true}var g=f==="like";c.setLiked(g,i.objectType,i.objectId).addCallback(function(){b($j(h),g,i.objectType,i.objectId);jive.switchboard.emit("acclaim.recorded",g,i.objectType,i.objectID)}).always(function(){delete a[e]})});return{}})(new jive.Liking.LikeSource({}),jive.eae.acclaim.likeControl));define("apps/like/like",jive.Like)};
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisSource=function(){var c=jive.rest.url("/morelikethis");function b(d){if(typeof d=="function"){d={success:d}}return d}function a(d,h,g,f){f=b(f);var e=c+"/"+d+"/"+h+"/type/"+d+"?numResults="+g;$j.ajax({type:"GET",url:e,dataType:"json",success:function(i){if(typeof f.success=="function"){f.success.call(i,i.morelikethisresultobject)}},error:function(i){if(typeof f.error=="function"){f.error.call(i)}}});return this}this.getMoreLike=a};define("apps/morelikethis/model/morelikethis_source",function(){return jive.MoreLikeThisApp.MoreLikeThisSource});
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.MoreLikeThisView=function(i,j){var c=j.noContentMessage,g=j.errorMessage,e="#"+i;function b(l){var k="";if(l.length>0){k+='<ul class="j-icon-list">';l.forEach(function(m){var n;if(a(m.objectType)){n=jive.shared.displayutil.containerDisplayNameLink({container:f(m)})}else{n='<a href="'+_jive_base_url+m.objectURL+'"><span class="'+m.objectClass+'"></span>'+m.subject+"</a>"}k+="<li>"+n+"</li>"});k+="</ul>"}else{k="<p>"+c+"</p>"}$j(e).empty().append(k)}var h=[3,2020,14,600,700];function f(k){return{jiveObjectURL:k.objectURL,id:k.ID,type:k.objectType,name:'<span class="'+k.objectClass+'"></span>'+k.subject}}function a(k){return $j.inArray(k,h)!=-1}function d(){$j(e).empty().append("<p>"+g+"</p>")}this.setContent=b;this.displayError=d};define("apps/morelikethis/views/morelikethis_view",function(){return jive.MoreLikeThisApp.MoreLikeThisView});
;
jive.namespace("MoreLikeThisApp");jive.MoreLikeThisApp.Main=function(d){var b=d.objectType,h=d.objectID,a=d.containerID,e=d.numResults||5,g,f;function c(){f.getMoreLike(b,h,e,{success:function(i){g.setContent(i)},error:function(){g.displayError()}})}g=new jive.MoreLikeThisApp.MoreLikeThisView(a,{noContentMessage:d.noContentMessage,errorMessage:d.errorMessage});f=new jive.MoreLikeThisApp.MoreLikeThisSource();$j(document).ready(function(){c()})};define("apps/morelikethis/main",function(){return jive.MoreLikeThisApp.Main});
;
// This file was automatically generated from apps-alert.soy.
// Please don't edit this file by hand.

goog.provide('jive.apps.alerts.renderAppHalt');
goog.provide('jive.apps.alerts.renderDevError');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.apps.alerts.renderDevError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><a href=\'javascript:;\' onclick="$j(\'#j-dev-err-msg-', soy.$$escapeHtml(opt_data.appId), '\').show();">Click here for more info</a></p><div id="j-dev-err-msg-', soy.$$escapeHtml(opt_data.appId), '" class="j-app-error-message"  style="display:none"><p>', soy.$$escapeHtml(opt_data.errorMessage), '</p><a href=\'javascript:;\' onclick="$j(\'#j-dev-err-msg-', soy.$$escapeHtml(opt_data.appId), '\').hide();">Hide this message</a></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.alerts.renderAppHalt = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  switch (opt_data.code) {
    case 401:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.credentials'),[])), '</p><button class="j-error-msg-configure-credentials-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.credentials.btn'),[])), '</button></div>');
      break;
    case 10404:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.unavailable'),[])), '</p>');
      if (opt_data.errorMessage) {
        jive.apps.alerts.renderDevError(opt_data, output);
      }
      output.append('<p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.unavailable.detail'),[])), '</p><button class="j-error-msg-refresh-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.refresh.btn'),[])), '</button></div>');
      break;
    case 10500:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.app.cannot.load'),[])), '</p>');
      if (! opt_data.fromExtension) {
        output.append('<ul><li><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.app.cannot.load.delete'),[])), '</strong> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.app.cannot.load.delete.detail'),[])), '</li></ul>');
        if (opt_data.errorMessage) {
          jive.apps.alerts.renderDevError(opt_data, output);
        }
        output.append('<button class="j-error-msg-delete-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.delete.btn'),[])), '</button><button class="j-error-msg-refresh-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.refresh.btn'),[])), '</button>');
      }
      output.append('</div>');
      break;
    case 6000:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.app.malformed'),[])), '</p>');
      if (opt_data.message) {
        jive.apps.alerts.renderDevError({appId: opt_data.appId, errorMessage: opt_data.message}, output);
      }
      output.append('<button class="j-error-msg-refresh-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.refresh.btn'),[])), '</button></div>');
      break;
    case 1000:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>', (opt_data.modifier && opt_data.modifier == 'configurationError') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.failure'),[])) : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.configure'),[])) + '</p><button class="j-error-msg-configure-app-btn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.configure.btn'),[])) + '</button>', '</div>');
      break;
    case 1010:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span>', (opt_data.modifier && opt_data.modifier == 'configurationError') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.failure'),[])) : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.configure.update'),[])) + '</p><button class="j-error-msg-configure-app-btn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.configure.btn'),[])) + '</button>', '</div>');
      break;
    case 2010:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.banned'),[])), '</p><ul><li><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.banned.detail.delete'),[])), '</strong> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.banned.detail.delete.detail'),[])), '</li></ul><p><a class="j-launch-market-faq" href="javascript:;">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.banned.detail.more.info'),[])), '</a>.</p><button class="j-error-msg-delete-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.delete.btn'),[])), '</button></div>');
      break;
    case 2020:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.blacklisted'),[opt_data.creator])), '</p><ul><li><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.blacklisted.detail.delete'),[])), '</strong> ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.blacklisted.detail.delete.detail'),[])), '</li></ul><p><a class="j-launch-market-faq" href="javascript:;">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.blacklisted.detail.more.info'),[])), '</a>.</p><button class="j-error-msg-delete-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.delete.btn'),[])), '</button></div>');
      break;
    case 2040:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.subscription.expired'),[])), '</p><button class="j-error-msg-remove-subscription-expired-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.renew.subscription'),[])), '</button></div>');
      break;
    case 2050:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.subscription.disabled'),[])), '</p>', (opt_data.message) ? '<p><b>' + soy.$$escapeHtml(opt_data.message) + '</b></p>' : '', (! opt_data.fromExtension) ? '<div><button class="j-error-msg-delete-app-btn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.delete.btn'),[])) + '</button><button class="j-error-msg-app-more-info-btn">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.more.info.btn'),[])) + '</button></div>' : '', '</div>');
      break;
    case 2060:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><h3>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.oauth.credentials'),[])), '</h3><div class="j-oauth-grant"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.oauth.credentials.need.grant'),[])), '</p><button class="j-error-msg-grant-oauth-access-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.oauth.credentials.grant.btn'),[])), '</button></div><div class="j-oauth-authorize"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.oauth.credentials.authorization'),[])), '</p><button class="j-error-msg-granted-oauth-access-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.halt.needs.oauth.credentials.granted.btn'),[])), '</button><button class="j-error-msg-oauth-approved-btn" style="display:none"></button></div></div>');
      break;
    case 5010:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.throttle.violation'),[])), '</p><button class="j-error-msg-remove-throttle-violation-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.dismiss'),[])), '</button></div>');
      break;
    case 5020:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.bulkcancel.warning'),[])), '</p><button class="j-error-msg-delete-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.bulkcancel.deleteButton'),[])), '</button><button class="j-error-msg-purchase-app-btn">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.bulkcancel.purchaseButton'),[])), '</button></div>');
      break;
    default:
      output.append('<div class="j-app-alert"><span class="j-ui-elem j-alert-icon"></span><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.alert.unexpected'),[])), '(', soy.$$escapeHtml(opt_data.code), ')</p>', (opt_data.message) ? '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>' : '');
      if (opt_data.errorMessage) {
        jive.apps.alerts.renderDevError(opt_data, output);
      }
      output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};

;
define("jive/app/configure/views/validate",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(d,c,e){this.serviceBlock=d;this.errorOptions=c;this.invalidFields=e};this.work=function(){var c=this;this.serviceBlock.find(".j-service-error").removeClass("j-service-error");var d=this.serviceBlock.find("INPUT.j-service-radio:visible");if(d.filter(":checked").length==0){this.errorOptions.missing_endpoint=true;d.each(function(){c.invalidFields.push(this)})}this.serviceBlock.find("INPUT.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}});this.serviceBlock.find("textarea.j-service-credential:visible").each(function(){var e=a.trim(a(this).val());a(this).val(e);if(!e){c.errorOptions.missing_credential=true;c.invalidFields.push(this)}})}})});
;
// This file was automatically generated from apps-configure.soy.
// Please don't edit this file by hand.

goog.provide('jive.apps.configure.renderAppDataErrorMessage');
goog.provide('jive.apps.configure.renderConfigureApp');
goog.provide('jive.apps.configure.renderConfigureAppNotNeeded');
goog.provide('jive.apps.configure.renderConfigureCredentialBlocks');
goog.provide('jive.apps.configure.renderCredentials');
goog.provide('jive.apps.configure.renderServicesSection');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.apps.configure.renderServicesSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section class="app-services-section"><h3 class="j-app-config-header font-color-normal">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.services.header'),[])), '</h3><ul class="ul-sections">');
  var serviceList6 = opt_data.configureAppView.serviceView;
  var serviceListLen6 = serviceList6.length;
  for (var serviceIndex6 = 0; serviceIndex6 < serviceListLen6; serviceIndex6++) {
    var serviceData6 = serviceList6[serviceIndex6];
    if (opt_data.configureAppView.configured && serviceData6.serviceOptionView.length < 2 || ! opt_data.configureAppView.configured && serviceData6.selected) {
      output.append('<li class="j-service-block-alert" data-serviceid="', soy.$$escapeHtml(serviceData6.selectedService.serviceID), '" data-alias="', soy.$$escapeHtml(serviceData6.selectedService.alias), '"><p><img src="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/images/jaf/j-icon-service-generic.png')), '" class="jaf-icon-svc" > ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.service'),[])), '&nbsp;<b>', soy.$$escapeHtml(serviceData6.name), '</b>&nbsp;', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.ready'),[])), '</p></li>');
    } else {
      output.append('<li class="j-service-block-alert"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.found'),[])), '&nbsp;', soy.$$escapeHtml(serviceData6.serviceOptionView.length), '&nbsp;', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.instances'),[])), '&nbsp; <b>', soy.$$escapeHtml(serviceData6.name), '</b>.&nbsp;', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.select'),[])), '</p><div>');
      var serviceOptionViewList35 = serviceData6.serviceOptionView;
      var serviceOptionViewListLen35 = serviceOptionViewList35.length;
      for (var serviceOptionViewIndex35 = 0; serviceOptionViewIndex35 < serviceOptionViewListLen35; serviceOptionViewIndex35++) {
        var serviceOptionViewData35 = serviceOptionViewList35[serviceOptionViewIndex35];
        output.append('<p class="j-form-row"><input type="radio" name="service-', soy.$$escapeHtml(serviceOptionViewData35.optionGroupID), '" value="', soy.$$escapeHtml(serviceOptionViewData35.serviceID), '" class="j-service-radio" data-serviceid="', soy.$$escapeHtml(serviceOptionViewData35.serviceID), '" data-alias="', soy.$$escapeHtml(serviceOptionViewData35.alias), '" data-optionid="', soy.$$escapeHtml(serviceOptionViewData35.optionID), '" data-optiongroupid="', soy.$$escapeHtml(serviceOptionViewData35.optionGroupID), '" id="j-service-', soy.$$escapeHtml(serviceOptionViewData35.optionID), '"', (serviceData6.selectedService && serviceData6.selectedService.serviceID == serviceOptionViewData35.serviceID) ? ' checked' : '', '><label for="j-service-', soy.$$escapeHtml(serviceOptionViewData35.optionID), '"><img src="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/images/jaf/j-icon-service-generic.png')), '" class="jaf-icon-svc" > ', soy.$$escapeHtml(serviceOptionViewData35.name), '</label></p>');
      }
      output.append('</div></li>');
    }
  }
  output.append('</ul></section>');
  return opt_sb ? '' : output.toString();
};


jive.apps.configure.renderAppDataErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var messageKeyList67 = opt_data.messageKeys;
  var messageKeyListLen67 = messageKeyList67.length;
  for (var messageKeyIndex67 = 0; messageKeyIndex67 < messageKeyListLen67; messageKeyIndex67++) {
    var messageKeyData67 = messageKeyList67[messageKeyIndex67];
    output.append('<span class="error-message">');
    switch (messageKeyData67) {
      case 'configure.success':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.success'),[])));
        break;
      case 'configure.cancel':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.cancel'),[])));
        break;
      case 'configure.cancel.not.changed':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.cancel.not.changed'),[])));
        break;
      case 'configure.noneed':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.no.need'),[])));
        break;
      case 'credentials.cancel':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.credentials.cancel'),[])));
        break;
      case 'credentials.success':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.credentials.success'),[])));
        break;
      case 'credentials.fail':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.credentials.fail'),[])));
        break;
      case 'missing.endpoint':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.error.missing.endpoint'),[])));
        break;
      case 'missing.credential':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.error.missing.credential'),[])));
        break;
      case 'permissions.acceptance':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.install.permissions.acceptance'),[])));
        break;
      case 'install.error':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.install.error'),[])));
        break;
      default:
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.general'),[])));
    }
    output.append('</span>');
  }
  return opt_sb ? '' : output.toString();
};


jive.apps.configure.renderConfigureApp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section class="clearfix">');
  if (opt_data.configureAppView.cannotConfigure) {
    output.append('<div class="jaf-cannot-configure j-rc4"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.failure'),[])), '</p></div>');
  } else {
    output.append('<div id="jive-modal-app-configure-feedback" style="display:none; color:red;"></div>');
    if (opt_data.configureAppView.requiresServices) {
      jive.apps.configure.renderServicesSection(opt_data, output);
    }
  }
  output.append('</section>');
  return opt_sb ? '' : output.toString();
};


jive.apps.configure.renderConfigureAppNotNeeded = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section class="clearfix"><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.service.no.need'),[])), '</p></section>');
  return opt_sb ? '' : output.toString();
};


jive.apps.configure.renderCredentials = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form href="#" action="post" onsubmit="return false;" class="j-form"><section class="j-service-credentials" data-optionid="', soy.$$escapeHtml(opt_data.selectedService.optionID), '" data-optiongroupid="', soy.$$escapeHtml(opt_data.selectedService.optionGroupID), '" id="j-service-credentials-', soy.$$escapeHtml(opt_data.selectedService.serviceID), '"><p class="j-form-text">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.services.prompt'),[])), '</p>');
  var credentialList124 = opt_data.selectedService.credentials;
  var credentialListLen124 = credentialList124.length;
  for (var credentialIndex124 = 0; credentialIndex124 < credentialListLen124; credentialIndex124++) {
    var credentialData124 = credentialList124[credentialIndex124];
    output.append('<div class="j-form"><p><label for="j-service-cred-', soy.$$escapeHtml(opt_data.selectedService.serviceID), '-', soy.$$escapeHtml(credentialData124.name), '">', soy.$$escapeHtml(credentialData124.label), '</label>');
    switch (credentialData124.format) {
      case 'text':
        output.append('<input class="j-form-element-text j-service-focus-hint j-service-credential" id="j-service-cred-', soy.$$escapeHtml(opt_data.selectedService.serviceID), '-', soy.$$escapeHtml(credentialData124.name), '" data-name="', soy.$$escapeHtml(credentialData124.name), '" type="text" />');
        break;
      case 'password':
        output.append('<input class="j-form-element-password j-service-focus-hint j-service-credential" id="j-service-cred-', soy.$$escapeHtml(opt_data.selectedService.serviceID), '-', soy.$$escapeHtml(credentialData124.name), '" data-name="', soy.$$escapeHtml(credentialData124.name), '" type="password" autocomplete="off" />');
        break;
      case 'textarea':
      case 'textbox':
        output.append('<textarea class="j-form-element-textarea j-service-focus-hint j-service-credential" cols="80" rows="20" id="j-service-cred-', soy.$$escapeHtml(opt_data.selectedService.serviceID), '-', soy.$$escapeHtml(credentialData124.name), '" data-name="', soy.$$escapeHtml(credentialData124.name), '" />');
        break;
    }
    output.append('</p></div>');
  }
  output.append('</section></form>');
  return opt_sb ? '' : output.toString();
};


jive.apps.configure.renderConfigureCredentialBlocks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section class="jive-modal-content clearfix">');
  var serviceOptionViewList162 = opt_data.credentialsSetupView.serviceOptionView;
  var serviceOptionViewListLen162 = serviceOptionViewList162.length;
  if (serviceOptionViewListLen162 > 0) {
    for (var serviceOptionViewIndex162 = 0; serviceOptionViewIndex162 < serviceOptionViewListLen162; serviceOptionViewIndex162++) {
      var serviceOptionViewData162 = serviceOptionViewList162[serviceOptionViewIndex162];
      output.append('<div class="j-service-block-container" id="j-service-block-container', soy.$$escapeHtml(serviceOptionViewData162.serviceID), '" ', (! (serviceOptionViewIndex162 == 0)) ? 'style="display:none"' : '', '><div class="j-service-block" data-serviceid="', soy.$$escapeHtml(serviceOptionViewData162.serviceID), '" data-connectionid="', soy.$$escapeHtml(serviceOptionViewData162.connectionID), '"><h3 class="j-app-config-header font-color-normal">', soy.$$escapeHtml(serviceOptionViewData162.name), '&nbsp;', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configuration.accessRequest'),[])), '</h3>');
      jive.apps.configure.renderCredentials({selectedService: serviceOptionViewData162}, output);
      output.append('</div><div class="clearfix"><button type="button" class="app-config-save j-btn-callout">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.approve'),[])), '</button><button type="button" class="app-config-cancel j-btn-global">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.deny'),[])), '</button></div></div>');
    }
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.configure.no.need'),[])));
  }
  output.append('</section>');
  return opt_sb ? '' : output.toString();
};

;
define("jive/app/configure/views/error",["jquery"],function(a){return jive.oo.Class.extend(function(b){b.init=function(){};this.clear=function(){a("#jive-modal-app-configure-feedback").hide()};this.render=function(d){if(d==null){return}var c=[];if(d.missing_endpoint){c.push("missing.endpoint")}if(d.missing_credential){c.push("missing.credential")}if(c.length==0){c.push("error.general")}if(c.length<1){this.clear();return}try{a("#jive-modal-app-configure-feedback").show().html(jive.apps.configure.renderAppDataErrorMessage(c))}catch(f){}};this.fieldsToVisualMarkers=function(c){return(a(c).map(function(){var d=a(this);return d.hasClass("j-service-radio")?d.parent()[0]:this})).addClass("j-service-error")}})});
;
// This file was automatically generated from apps-container.soy.
// Please don't edit this file by hand.

goog.provide('jive.apps.container.appModalHeader');
goog.provide('jive.apps.container.blockingAlertView');
goog.provide('jive.apps.container.canvasConfigurationModal');
goog.provide('jive.apps.container.chromeApp');
goog.provide('jive.apps.container.credentialsView');
goog.provide('jive.apps.container.renderMessage');
goog.provide('jive.apps.container.servicesView');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.apps.container.appModalHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<header><h2><img class="j-app-fav-icon" src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.app.favIconSrc)), '" /> <span class="js-app-title"><span class="js-app-title-main"></span></span></h2></header>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.chromeApp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop jive-modal j-app-modal js-app-chrome" id="jive-modal-appAction"><!-- start chrome actions -->', (opt_data.app.appSettings) ? '<a id="jive-app-settings" href="#" data-appuuid="' + soy.$$escapeHtmlAttribute(opt_data.app.appUUID) + '" class="j-modal-gear-top"><span class="jive-icon-med jive-icon-app-manage"></span></a>' : '', (opt_data.app.developerRefreshURL) ? '<a href="#" data-appuuid="' + soy.$$escapeHtmlAttribute(opt_data.app.appUUID) + '" data-endpoint="' + soy.$$escapeHtmlAttribute(opt_data.app.developerRefreshURL) + '" class="j-modal-refresh-top"><span class="jive-icon-sml jive-glyph-refresh j-ui-elem"></span></a>' : '', '<a href="#" data-appuuid="', soy.$$escapeHtmlAttribute(opt_data.app.appUUID), '" class="j-modal-back-top"><span class="j-ui-elem"></span> Back</a><!-- end chrome actions -->');
  jive.apps.container.appModalHeader(opt_data, output);
  output.append('<label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '"><span class="j-close-icon j-ui-elem" role="img"></span></a><div id="j-app-modal-parent" class="jive-modal-content j-pop-main"></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.canvasConfigurationModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-app-modal j-pop js-app-chrome" id="jive-canvas-modal">');
  jive.apps.container.appModalHeader(opt_data, output);
  output.append('<label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '"><span class="j-close-icon j-ui-elem" role="img"></span></a><div id="j-app-modal-parent" class="jive-modal-content j-pop-main"></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.servicesView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="app-services-container" class="j-app-modal-content"><div class="j-modal-column"><ul class="j-modal-nav">', (opt_data.app.systemSettingsAvailable) ? '<li><a href="#" id="j-app-sys-settings">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.apps.system.settings'),[])) + '</a></li>' : '', '<li class="selected"><a href="#" id="j-app-svcs-settings">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.options.preferences'),[])), '</a></li><li><a href="#" id="j-app-svcs-config">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.options.configure'),[])), '</a></li><li><a href="#" id="j-app-svcs-about">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.options.about'),[])), '</a></li></ul></div><div class="j-modal-main-wrap"><div class="j-modal-main"><div id="app-services-detail"></div><div class="j-modal-footer"><button id="j-app-services-submit" type="submit" class="j-btn-callout">Submit</button><button id="j-app-services-cancel" type="submit" class="j-btn-global">Cancel</button></div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.blockingAlertView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="app-blocking-alert-container" class="j-app-modal-content j-pop-main j-app-alert"><div id="app-blocking-alert-detail"></div><div class="j-modal-footer"><button id="j-app-blocking-alert-submit" type="submit" class="j-btn-callout">Submit</button><button id="j-app-blocking-alert-cancel" type="submit" class="j-btn-global">Cancel</button></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.credentialsView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="app-credentials-container" class="j-app-modal-content j-pop-main"></div>');
  return opt_sb ? '' : output.toString();
};


jive.apps.container.renderMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span>');
  switch (opt_data.messageKey) {
    case 'success.app.refresh':
      output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.development.refresh'),[])));
      break;
    default:
      output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.messageKey),[])));
  }
  output.append('</span>');
  return opt_sb ? '' : output.toString();
};

;
define("jive/app/configure/views/serviceblocks",["jquery"],function(a){return jive.AbstractView.extend(function(b){this.init=function(){this.blocks=a(".app-services-section .j-service-block-alert")};this.validate=function(c){return c(this.blocks)};this.get_services=function(){var c=[];this.blocks.each(function(){var e=a(this).attr("data-serviceid");if(e){c.push({serviceID:e,alias:a(this).attr("data-alias")})}else{var d=a(this).find("input.j-service-radio:checked");if(d){c.push({serviceID:d.attr("data-serviceid"),alias:d.attr("data-alias")})}}});return c}})});
;
define("jive/app/configure/views/configure_view",["jquery","jive/app/configure/views/serviceblocks","jive/app/configure/views/validate","jive/app/configure/views/error"],function(c,a,d,b){return jive.AbstractView.extend(function(e){this.init=function(g,h,f){this.instanceAppID=g.instanceAppID;this.configSetupData=h;this.configSetupData.app=g;if(h.requiresServices){this.content=c(jive.apps.configure.renderConfigureApp({configureAppView:h}));f.html("");f.append(this.content);c("#app-config-save").focus();this.bindClickEvents()}else{this.content=c(jive.apps.configure.renderConfigureAppNotNeeded());f.html("");f.append(this.content)}};e.bindClickEvents=function(){var f=this;var g=this.content;f.emit("app.service.wire.cancel",{callback:function(){f.emit("app.cancel_configuration")}});f.emit("app.service.wire.submit",{callback:function(){var h=new a();var j=h.validate(f.validate);if(j){var i=h.get_services();f.emit("app.save_configuration",i)}}});g.find(".j-service-radio").each(function(){var h=c(this).attr("data-optiongroupid");var i=c(this).attr("data-optionid");c(this).click(function(){c(".j-service-credentials[data-optiongroupid="+h+"]").hide();c(".j-service-credentials[data-optionid="+i+"]").show()})})};e.validate=function(g){var i=new b();i.clear();var f={};var h=[];g.find(".j-service-error").removeClass("j-service-error");g.each(function(){var j=new d(c(this),f,h);j.work()});if(h.length){i.render(f);i.fieldsToVisualMarkers(h)}return h.length==0}})});
;
define("jive/app/configure/models/configure_model",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(){};this.persist_configuration=function(c){var d=this;a.ajax({type:"PUT",url:jive.api.apps("instances/"),data:JSON.stringify(c),contentType:"application/json",dataType:"json",success:function(e){d.emit("app.configure.success")},error:function(e){d.emit("app.configure.failed")}})};this.get_configuration_data=function(e){var c=this;var d=jive.api.apps("instances/"+e+"/config_setup");a.getJSON(d,function(f){c.emit("app.got.configure.data",f)})}})});
;
define("jive/app/configure/main",["jive/app/configure/views/configure_view","jive/app/configure/models/configure_model"],function(a,b){return jive.oo.Class.extend(function(c){jive.conc.observable(this);c.init=function(e){var d=this;var f=e.app;this.domTarget=e.domTarget;this.instanceAppID=f.instanceAppID;this.model=new b();this.model.addListener("app.got.configure.data",function(g){d.configureView=new a(f,g,d.domTarget);d.configureView.addListener("app.save_configuration",function(i){var h={instanceAppID:d.instanceAppID,services:i};d.model.persist_configuration(h)});d.configureView.addListener("app.cancel_configuration",function(){d.emit("app.configure.cancel",d.instanceAppID)});d.configureView.addListener("app.service.wire.submit",function(h){d.emit("app.service.wire.submit",h)});d.configureView.addListener("app.service.wire.cancel",function(h){d.emit("app.service.wire.cancel",h)})});this.model.get_configuration_data(this.instanceAppID);this.model.addListener("app.configure.success",function(){d.emit("app.configure.success",d.instanceAppID)});this.model.addListener("app.configure.failed",function(){d.emit("app.configure.failed",d.instanceAppID)})}})});
;
define("jive/app/placepicker/main",function(){return jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.closeOnSelect=true;this.placePicker=new jive.Placepicker.Main({closeOnSelect:this.closeOnSelect,filterGroup:"appPlacePicker",personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey,containerType:c.containerType,pickerContext:"app",filterByContainer:(c.containerType)?true:false,allowedContainerIds:c.containerType,objectType:c.contentType})};this.showPicker=function(c){var b=this;b.placePicker.showPicker();b.placePicker.addListener("container",function(d){c(d);b.placePicker.removeListener("container")})}})});
;
define("jive/app/alert/views/blocking_alert_view",["jquery"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(c){this.app=c};this.applyBlockingAlert=function(c,e){var d=this.prepareBlockingAlertHtml(this.app,e);a(c).append(d);return d};b.prepareBlockingAlertHtml=function(e,i){var d;var g=this;var k=e.id;var f="";var j=null;if(i){switch(i.code){case 1000:case 1010:if(e.configurationError){f="configurationError"}d=function(l,m){m.find(".j-error-msg-configure-app-btn").click(function(){g.emit("app.block",{type:"app.launch.config",app:e})})};break;case 2010:d=function(l,m){m.find(".j-error-msg-remove-banned-app-btn").click(function(){g.emit("app.block",{type:"app.remove.banned",app:e})});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-launch-market-faq").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2020:d=function(l,m){m.find(".j-error-msg-remove-blacklisted-app-btn").click(function(){g.emit("app.block",{type:"app.remove.blacklisted",app:e})});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-launch-market-faq").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2040:d=function(l,m){m.find(".j-error-msg-remove-subscription-expired-app-btn").click(function(){g.emit("app.block",{type:"app.launch.account",app:e})});m.find(".j-visit-app-market-link").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 2050:d=function(l,m){m.find(".j-error-msg-app-more-info-btn").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}});m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})})};break;case 5010:d=function(l,m){m.find(".j-error-msg-remove-throttle-violation-btn").click(function(){g.emit("app.block",{type:"app.remove.throttle.violation",app:e})});m.find(".j-why-apps-may-be-suspended").click(function(){j=window.open(window._jive_base_url+"/apps/market/marketfaq/"+e.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(j){j.focus()}})};break;case 5020:d=function(l,m){m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-error-msg-purchase-app-btn").click(function(){g.emit("app.block",{type:"app.launch.market",app:e})})};break;case 10404:d=function(l,m){m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})};break;case 10500:d=function(l,m){m.find(".j-error-msg-delete-app-btn").click(function(){g.emit("app.block",{type:"app.delete",app:e})});m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})};break;case 6000:break}}if(!d){d=function(l,m){m.find(".j-error-msg-refresh-app-btn").click(function(){g.emit("app.block",{type:"app.refresh",app:e})})}}var h={code:i.code,modifier:f,message:i.message,creator:i.creator,errorMessage:i.errorMessage,fromExtension:i.fromExtension,iconSrc:e.iconSrc,appTitle:e.title};var c=a(jive.apps.alerts.renderAppHalt(h));d(this,c);return c}})});
;
define("jive/app/alert/main",["jive/app/alert/views/blocking_alert_view"],function(a){return jive.oo.Class.extend(function(b){jive.conc.observable(this);b.init=function(d,c){this.app=d;this.targetDomElement=c;this.blockingAlerts=this.app.blockingAlerts};this.hasBlockingAlerts=function(){return this.blockingAlerts.length>0};this.getApp=function(){return this.app};this.getActiveAlert=function(){return this.hasBlockingAlerts?this.blockingAlerts[0]:false};this.applyBlock=function(e,h,g){h=h||this.app;e=e?e:this.targetDomElement;if(!e){return}g=g||this.getActiveAlert();if(!g){return}var d=this;var c=new a(h);var f=c.applyBlockingAlert(e,g);c.addListener("app.block",function(i){d.emit("app.block",i)});return f};this.routeActionClicks=function(h,i,d,g,f){if(h.type=="app.launch.config"){i(this)}else{if(h.type=="app.launch.market"||h.type=="launch.market.app.profile"){window.location=window._jive_base_url+"/apps/market/marketapp/"+h.app.appUUID}else{if(h.type=="launch.market.faq"){var e=window.open(window._jive_base_url+"/apps/market/marketfaq/"+h.app.appUUID,"marketfaq","resizable=yes,scrollbars=yes");if(e){e.focus()}}else{if(h.type=="app.launch.account"){window.location=window._jive_base_url+"/apps/market/marketuser/"+h.app.appUUID}else{var c=function(){};var j=function(){};if(h.type=="app.remove.banned"||h.type=="app.remove.blacklisted"||h.type=="app.delete"||h.type=="app.hide"){c=d;j=g}f.emit(h.type,h.app,c,j)}}}}}})});
;
// This file was automatically generated from autosearch.soy.
// Please don't edit this file by hand.

goog.provide('jive.autosearch.contentItem');
goog.provide('jive.autosearch.contentItemDetail');
goog.provide('jive.autosearch.lightbox');
goog.provide('jive.autosearch.overlay');
goog.provide('jive.autosearch.peopleItem');
goog.provide('jive.autosearch.placeItem');
goog.provide('jive.autosearch.resultList');
goog.provide('jive.autosearch.resultSection');
goog.provide('jive.autosearch.results');
goog.provide('jive.autosearch.showMoreAccessibleLabel');
goog.provide('jive.autosearch.spotlightPopup');
goog.provide('jive.autosearch.spotlightView');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.nav.searchForm');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.icon');


jive.autosearch.spotlightPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-spotlight-search-result" data-component="popup" style="display: none;"><div>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.spotlightView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>', (opt_data.view == 'frequent' || opt_data.view == 'recent' || opt_data.view == 'bookmarks') ? '<p class="j-pop-desc"><strong>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.default.header'),[opt_data.communityName])) + '</strong> <span class="j-ui-elem j-spotlight-arrow"></span></p><h5>' + ((! opt_data.availableViews['bookmarks']) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.nobookmarks.title'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.default.title'),[]))) + '</h5><nav class="j-spotlightnav font-color-meta" >' + ((opt_data.availableViews['frequent']) ? '<a data-component="button" data-view="frequent" class="' + ((opt_data.view == 'frequent') ? 'j-active' : '') + '" href="javascript:void(0);">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.frequent.caption'),[])) + '</a>' : '') + ((opt_data.availableViews['recent']) ? '<a data-component="button" data-view="recent" class="' + ((opt_data.view == 'recent') ? 'j-active' : '') + '" href="javascript:void(0);">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.recent.caption'),[])) + '</a>' : '') + ((opt_data.availableViews['bookmarks']) ? '<a data-component="button" data-view="bookmarks" class="' + ((opt_data.view == 'bookmarks') ? 'j-active' : '') + ' j-last" href="javascript:void(0);">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.bookmarks.caption'),[])) + '</a>' : '') + '</nav>' : ((opt_data.availableViews['frequent'] || opt_data.availableViews['recent'] || opt_data.availableViews['bookmarks']) ? '<p class="j-pop-desc">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.search.header.history'),[])) + '</p>' : '') + ((opt_data.view == 'all' || opt_data.view == 'filtered') ? '<h5>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.search.title'),[])) + ' <span class="spinner" data-component="progressmeter" data-mode="undetermined" data-active="false" data-size="small"></span></h5>' : '') + ((opt_data.availableViews['filtered'] && opt_data.availableViews['all']) ? '<nav class="j-spotlightnav font-color-meta trimmed"><a href="javascript:void(0);" data-component="button" data-view="all" class="' + ((opt_data.view == 'all') ? 'j-active' : '') + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.all.caption'),[])) + '</a><a href="javascript:void(0);" data-component="button" data-view="filtered" class="' + ((opt_data.view == 'filtered') ? 'j-active' : '') + ' j-last">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.filtered.caption'),[opt_data.filterDisplayName])) + '</a></nav>' : ''), '<div class="j-spotlight-find" data-component="list" data-wrap="true"><div data-component="loadingpanel" class="j-spotlight-working font-color-meta"><div>', (opt_data.view == 'all' || opt_data.view == 'filtered') ? '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.search.searching.text'),[])) + '</p>' : '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.history.loading.text'),[])) + '</p>', '</div><span data-component="progressmeter" data-mode="undetermined" data-active="false"></span></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.results = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.results.content && opt_data.results.content.length) {
    output.append('<div class="j-results" data-type="contents">', (! (opt_data.view == 'bookmarks') && ! (opt_data.view == 'filtered')) ? '<h4 class="font-color-meta" id="header_content">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.search_for.content'),[])) + '</h4>' : '');
    jive.autosearch.resultSection(soy.$$augmentMap(opt_data, {list: opt_data.results.content, type: 'content', max: (! (opt_data.view == 'bookmarks') && ! (opt_data.view == 'filtered')) ? '5' : ''}), output);
    output.append('</div>');
  }
  if (opt_data.results.people && opt_data.results.people.length) {
    output.append('<div class="j-results" data-type="people"><h4 class="font-color-meta" id="header_people">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.search_for.people'),[])), '</h4>');
    jive.autosearch.resultSection(soy.$$augmentMap(opt_data, {list: opt_data.results.people, type: 'people', max: 5}), output);
    output.append('</div>');
  }
  if (opt_data.results.places && opt_data.results.places.length) {
    output.append('<div class="j-results" data-type="places"><h4 class="font-color-meta"  id="header_places">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.search_for.places'),[])), '</h4>');
    jive.autosearch.resultSection(soy.$$augmentMap(opt_data, {list: opt_data.results.places, type: 'places', max: 5}), output);
    output.append('</div>');
  }
  output.append(((! opt_data.results.content || ! opt_data.results.content.length) && (! opt_data.results.people || ! opt_data.results.people.length) && (! opt_data.results.places || ! opt_data.results.places.length)) ? '<div class="j-spotlight-empty font-color-meta">' + ((opt_data.view == 'frequent') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.frequent.empty.text'),[])) : (opt_data.view == 'recent') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.recent.empty.text'),[])) : (opt_data.view == 'bookmarks') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.bookmarks.empty.text'),[])) : (opt_data.view == 'all' || opt_data.view == 'filtered') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.search.empty.text'),[])) : '') + '</div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.resultSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol aria-labelledby="header_', soy.$$escapeHtmlAttribute(opt_data.type), '" role="listbox">');
  jive.autosearch.resultList(opt_data, output);
  output.append((opt_data.view == 'bookmarks') ? '<li class="j-listitem font-color-meta" data-component="listitem" role="option"><a class="more all" href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/bookmarks')) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.history.bookmarks.link'),[])) + '<span class="arrow-right"></span></a></li>' : (opt_data.view == 'all' || opt_data.view == 'filtered') ? '<li class="j-listitem' + ((opt_data.max && opt_data.list.length > opt_data.max) ? ' j-inactive' : '') + ' font-color-meta" data-component="listitem" role="option"><a class="more all" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/search.jspa'))) + '?q=' + soy.$$escapeUri(opt_data.searchTerm) + '&facet=' + soy.$$escapeUri(opt_data.type) + ((opt_data.view == 'filtered') ? '&' + soy.$$escapeUri(opt_data.filterType) + '=' + soy.$$escapeUri(opt_data.filter) : '') + '" >' + ((opt_data.type == 'places') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.results.all.place.link'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.results.all.' + opt_data.type + '.link'),[]))) + '<span class="arrow-right"></span></a></li>' : (opt_data.view == 'recent') ? '<li class="j-listitem' + ((opt_data.max && opt_data.list.length > opt_data.max) ? ' j-inactive' : '') + ' font-color-meta" data-component="listitem" role="option"><a class="more all" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/' + opt_data.type))) + '?filterID=historyarchetype%5B' + ((opt_data.type == 'places') ? 'containers' : soy.$$escapeUri(opt_data.type)) + '%5D" >' + ((opt_data.type == 'places') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.history.recent.containers.link'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.history.recent.' + opt_data.type + '.link'),[]))) + '<span class="arrow-right"></span></a></li>' : '');
  if (opt_data.view != 'bookmarks' && opt_data.max && opt_data.list.length > opt_data.max) {
    output.append('<li class="j-listitem font-color-meta" data-component="listitem" role="option"><a href="#" class="more" data-component="button" data-command="more"><span role="presentation" aria-hidden="true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more'),[opt_data.list.length - opt_data.max])), '</span><span role="img" class="arrow-down" aria-hidden="true"></span>');
    jive.autosearch.showMoreAccessibleLabel({type: opt_data.type, numMoreResults: opt_data.list.length - opt_data.max}, output);
    output.append('</a></li>');
  }
  output.append('</ol>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.showMoreAccessibleLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-508-label" id="', soy.$$escapeHtmlAttribute(opt_data.type), '-show-more-label">', (opt_data.type == 'places') ? (opt_data.numMoreResults == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.places.singular'),[opt_data.numMoreResults])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.places.plural'),[opt_data.numMoreResults])) : (opt_data.type == 'people') ? (opt_data.numMoreResults == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.people.singular'),[opt_data.numMoreResults])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.people.plural'),[opt_data.numMoreResults])) : (opt_data.numMoreResults == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.content.singular'),[opt_data.numMoreResults])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.show.more.content.plural'),[opt_data.numMoreResults])), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.resultList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var itemList226 = opt_data.list;
  var itemListLen226 = itemList226.length;
  for (var itemIndex226 = 0; itemIndex226 < itemListLen226; itemIndex226++) {
    var itemData226 = itemList226[itemIndex226];
    output.append('<li data-component="listitem" class="j-listitem ', (opt_data.max && itemIndex226 >= opt_data.max) ? 'j-inactive' : '', ' ', (opt_data.type == 'people') ? 'j-listitem-people' : '', '" role="option" data-type="', soy.$$escapeHtmlAttribute(itemData226.type), '" data-id="', soy.$$escapeHtmlAttribute(itemData226.id), '">');
    switch (opt_data.type) {
      case 'content':
        jive.autosearch.contentItem({item: itemData226}, output);
        break;
      case 'people':
        jive.autosearch.peopleItem({item: itemData226}, output);
        break;
      case 'places':
        jive.autosearch.placeItem({item: itemData226}, output);
        break;
    }
    output.append('</li>');
  }
  return opt_sb ? '' : output.toString();
};


jive.autosearch.contentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a ', (opt_data.item.resources.html) ? ' href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)) + '"' : '', ' class="j-result-bookmark">');
  if (opt_data.item.type == 'favorite') {
    output.append('<span data-id="', soy.$$escapeHtmlAttribute(opt_data.item.id), '" class="j-remove-mark jive-icon-med jive-icon-bookmark-ribbon" data-component="button" data-command="remove"></span>');
    if (opt_data.item.favoriteObject.type == 'url') {
      jive.autosearch.contentItemDetail(opt_data, output);
    } else {
      jive.autosearch.contentItemDetail({item: opt_data.item.favoriteObject}, output);
    }
  } else {
    jive.autosearch.contentItemDetail(opt_data, output);
  }
  output.append('</a>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.contentItemDetail = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.displayutil.icon(soy.$$augmentMap(opt_data.item, {size: 'med'}), output);
  output.append((opt_data.item.subject) ? '<span class="result-title">' + soy.$$escapeHtml(opt_data.item.subject) + '</span><span class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.item.type),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])) + '</span>' : (opt_data.item.parentContent && opt_data.item.parentContent.name) ? '<span class="result-title">' + soy.$$escapeHtml(opt_data.item.parentContent.name) + '</span><span class="j-508-label">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.item.parentContent.type),[])) + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])) + '</span>' : '', (opt_data.item.author) ? ' <em class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.spotlight.by_author_posted_date'),[opt_data.item.author.displayName,(opt_data.item.updatedDate ? _jive_moment((parseFloat(opt_data.item.updatedDate) ? parseFloat(opt_data.item.updatedDate) : opt_data.item.updatedDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('ll') : '')])) + '</em>' : '', (opt_data.item.displayExternalAccess) ? '<span class="font-color-meta-light j-browse-external-access"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '</em></span>' : '');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.peopleItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)), '">');
  jive.shared.displayutil.avatar({enabled: true, username: opt_data.item.jive.username, id: null, displayName: opt_data.item.displayName, visible: true, prop: null, avatarID: opt_data.item.thumbnailId, size: 24, hideTooltip: true, hideLink: true}, output);
  output.append((opt_data.item.mentionName) ? '<span class="result-title">' + soy.$$escapeHtml(opt_data.item.mentionName) + '</span>' : '<span class="result-title">' + soy.$$escapeHtml(opt_data.item.displayName) + '</span>', '<span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.user'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])), '</span>', (opt_data.item.title || opt_data.item.department) ? ' <em class="font-color-meta-light">' + ((opt_data.item.title && opt_data.item.department) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.result.people.in'),[opt_data.item.title,opt_data.item.department])) : (opt_data.item.title) ? soy.$$escapeHtml(opt_data.item.title) : (opt_data.item.department) ? soy.$$escapeHtml(opt_data.item.department) : '') + '</em>' : '', (opt_data.item.displayExternalContributor) ? '<span class="font-color-meta-light j-browse-external-access"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.external.contributor'),[])) + '</em></span>' : '', '</a>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.placeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.item.resources.html.ref)), '"><span class="jive-icon-med jive-icon-', soy.$$escapeHtmlAttribute(opt_data.item.type), '"></span><span class="result-title">', soy.$$escapeHtml(opt_data.item.name), '</span><span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.left_paren'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.' + opt_data.item.type),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.right_paren'),[])), '</span>', (opt_data.item.displayExternalAccess) ? '<span class="font-color-meta-light j-browse-external-access"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '</em></span>' : '', '</a>');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.overlay = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.type == 'bookmark') ? '<div class="j-tooltip" role="alert"><span class="jive-icon-med jive-icon-bookmark-ribbon"></span><span class="j-tooltip-content">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.placeholder.bookmark'),[])) + '</span><span class="j-ui-elem j-pointer"></span></div>' : '');
  return opt_sb ? '' : output.toString();
};


jive.autosearch.lightbox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-tile-searchContent"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('search.view.lightbox.title'),[])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), ' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><div class="j-spotlight-search j-tileModal-search" role="search">');
  jive.nav.searchForm(soy.$$augmentMap(opt_data, {spotlightSearchEnabled: true, fieldId: 'autosearch-lightbox', anchorId: 'searchpopupanchor-lightbox'}), output);
  output.append('</div><div class="jive-spotlight-search-result js-search-results"></div></section></div>');
  return opt_sb ? '' : output.toString();
};

;
define("jive/app/core_container/views/appscontainer_view",["jive/app/configure/main","jive/app/placepicker/main","jive/app/alert/main","osapi"],function(a,d,c,b){return jive.AbstractView.extend(function(e){jive.conc.observable(this);var f={};this.getEmbeddedContext=function(g){return f[g]};this.setEmbeddedContext=function(g,h){f[g]=h};this.deleteEmbeddedContext=function(g){delete f[g]};this.prepareMarketContext=function(g){f["market-app"]={target:{type:"embed"},jive:g};return{embeddedID:"market-app"}};this.init=function(g,h){this.commonContainer=g;this.options=h;this.bounds={maxWidth:1200,maxHeight:1200,minWidth:350,minHeight:150};this.addListener("app.apply.alert",this.handleAppAlert)};this.render=function(){};this.handleAppsMarketInstall=function(){};this.renderApp_=function(g,i,m,k){var p=this;if(!g){return}var j=new c(i,$j(g.el_));if(j.hasBlockingAlerts()){p.emit("app.apply.alert",j)}else{var h=this.createRenderParams_(i);var l=i.appURL;var n=m||function(){};var o=k||{};this.commonContainer.navigateGadget(g,l,o,h,n)}};this.renderAppEE_=function(j,m,k,i,g){var h=new c(m,j);if(h.hasBlockingAlerts()){this.emit("app.apply.alert",h);return false}else{var l=m.appURL||"";this.getAppFeatures(l,function(n){this.renderAppEE_impl(j,m,k,n,i,g)});return true}};this.renderAppEE_impl=function(n,j,l,g,o,m){l=l||{};var i=this.isOpenSocialFeatureRequired("2.5",(g||{}),"embedded-experiences");var p=e.constructEEDataModel(j,l);if(i){l=e.constructOpenSocialEEContext(l);if(!!l.appContext){p.context=l.appContext}}var h=this.createRenderParams_(j);var q=o||function(){};var r=m||{};var k={};k[b.container.ee.RenderParam.GADGET_RENDER_PARAMS]=h;k[b.container.ee.RenderParam.GADGET_VIEW_PARAMS]=r;this.commonContainer.ee.navigate(n,p,k,q,l.containerContext)};e.constructOpenSocialEEContext=function(h){var g={};if(h.jive&&h.jive.content){g.containerContext={};g.containerContext[b.container.ee.Context.ASSOCIATED_CONTEXT]={};g.containerContext[b.container.ee.Context.ASSOCIATED_CONTEXT]=h.jive.content}if(h&&h.target&&h.target.context){g.appContext=h.target.context}return g};e.constructEEDataModel=function(m,k){var l=m.appURL;var h=m.view;var j={};j.gadget=l;j.context=k;if(k&&(k.target||k.display)){var i=k.display||{};var g=k.target||{};if(g.type&&g.type==="embed"){g.type=b.container.ee.TargetType.GADGET}j[b.container.ee.DataModel.PREFERRED_EXPERIENCE]={display:i,target:g};if(k.target&&!k.target.hasOwnProperty("view")){k.target.view=m.view}}return j};this.computeAppDimensions=function(l,h){var k;if(h){k=h.replace(".","_")}var g=(k&&l.heightByView&&l.heightByView[k])||l.height||l.actionHeight;var j=(k&&l.widthByView&&l.widthByView[k])||l.width||l.actionWidth;var i=false;if(g===9999&&j===9999){i=true}return{height:g,width:j,isMaximum:i}};e.createRenderParams_=function(k){var h=b.container.RenderParam;var j={};var g=k.view;j[h.VIEW]=g;var i=this.computeAppDimensions(k,g);j[h.HEIGHT]=i.height;j[h.WIDTH]=i.width;j[h.USER_PREFS]=k.userPrefs;if(!window.__JAF_DEBUG){j[h.NO_CACHE]=k.hasOwnProperty(h.NO_CACHE)?k.nocache:false}return j};this.getRealTitle=function(i,h){var g="";if((i.title||h)&&i.actionLabel){g=(h?h:i.title)+" : "+i.actionLabel}else{if(i.title||h){g=h?h:i.title}else{if(i.actionLabel){g=i.actionLabel}}}return g};this.getAppFeatures=function(h,i){var g=this;this.commonContainer.preloadGadget(h,function(j){if(!j[h]||j[h].error){i.call(g,{error:j[h].error})}else{var k={};var l=j[h]["modulePrefs"];if(l&&l.features){k=l.features}i.call(g,k)}})};this.isOpenSocialFeatureRequired=function(h,l,m){var j="opensocial-"+h;var k=l[j]||null;if(k&&k.required){return true}if(m){var g=l[m]||null;if(g&&g.params.specificationVersion){var i=g.params.specificationVersion;i=$j.trim(i.toString());if(i.length>h.length){i=i.substring(0,h.length)}if(i===h){return true}}}return false};this.sendNotification=function(h){h=h||{};var i=h.message;var g=h.severity||"info";if(typeof(i)!="undefined"){$j("<p/>").html(i).message({style:g})}};this.setTitle=function(){};this.maximizeApp=function(){};this.reload=function(){};this.closeApp=function(){};this.resizeContainerHeight=function(){};this.resizeContainerWidth=function(){};this.requestNavigateTo=function(){};this.scrollIntoView=function(){};this.handleAppAlert=function(g){};this.initPlacePicker=function(g,i){var h=new d(g);h.showPicker(i)};this.initUserPicker=function(h,k){var j={multiple:false};h=$j.extend(j,h);var i=new jive.UserPicker.SelectPeopleView();var g=function(l){i.close();k(l)};i.setOptions(h).addListener("select",g).open()};this.initUnifiedPicker=function(g,h){require(["apps/autosearch/lightbox"],function(i){new i(g).addListener("chosen",function(j){h({type:j.type,id:j.id,ref:j.resources.self.ref})}).addListener("cancel",function(){h()})})};this.invokeCredentials=function(){};this.destroyCredentials=function(){};this.invokeSettings=function(){};this.destroySettings=function(){};this.closeModal=function(g){};this.setModalTitle=function(g){e.setWhichModalTitle();whichTitle.text(g)};e.setWhichModalTitle=function(){var g=".js-app-title-main";var h=$j(".js-app-title > *");whichTitle=g?h.filter(g):null};this.refresh=function(){this.emit("app.reload");this.displayRefreshMsg(true)};this.displayRefreshMsg=function(g,k){var h=g?"info":"error";var j=g?"appframework.app.development.refresh":"error.general";var i=jive.apps.container.renderMessage({messageKey:j});this.sendNotification({message:i,severity:h})};this.handleConfigurationDialog=function(i,j){var h=this;var l=i.getApp();var g=$j(jive.apps.container.blockingAlertView());if(l.configurationError){g.find("#j-app-blocking-alert-submit").hide();g.find("#j-app-blocking-alert-cancel").addClass("j-btn-callout")}var k=new a({app:l,domTarget:g.find("#app-blocking-alert-detail")});k.addListener("app.service.wire.cancel",function(m){$j("#j-app-blocking-alert-cancel").click(function(){var n=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.cancel"});h.sendNotification({severity:"warn",message:n});$j(".j-modal-close-top").click()})});k.addListener("app.service.wire.submit",function(m){$j("#j-app-blocking-alert-submit").click(m.callback)});k.addListener("app.configure.success",function(){var m=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.success"});h.sendNotification({severity:"info",message:m});if(j&&j.configureCallback){j.configureCallback(true)}h.emit("app.reload",false)});k.addListener("app.configure.failed",function(){var m=jive.apps.container.renderMessage({messageKey:"appframework.app.configure.failure"});h.sendNotification({severity:"error",message:m});if(j&&j.configureCallback){j.configureCallback(false)}});$j("#j-app-modal-parent iframe").css({display:"none"});$j("#j-app-modal-parent").append(g)};this.resizeModal=function(g,i,h){};this.restoreChromeNav=function(){};this.hideChromeNav=function(){};this.getRenderedApp=function(){};this.getMaximumHeight=function(){};this.getMaximumWidth=function(){};this.boundedHeight=function(g){g=(g+"").match(/\d+/)[0]/1;var h=Math.min(Math.max(g,this.bounds.minHeight),this.bounds.maxHeight);return h};this.boundedWidth=function(g){g=(g+"").match(/\d+/)[0]/1;var h=Math.min(Math.max(g,this.bounds.minWidth),this.bounds.maxWidth);return h};e.delayedRunner=function(i,h,g){var k=new Date().getTime();var j=window.setInterval(function(){var l=new Date().getTime();if(l-k>1500||g()){i();window.clearInterval(j)}},h)};e.recenter=function(j,h){h=!($j.browser.msie&&$j.browser.version<9)&&h;var g=j.height();var i=j.width();j.css({position:"fixed",top:"50%",marginTop:j.outerHeight()/-2,left:"50%",marginLeft:j.outerWidth()/-2});if(h){j.animate({marginLeft:i/-2,marginTop:g/-2},{duration:300,queue:false})}else{j.css({marginLeft:i/-2,marginTop:g/-2},{duration:300,queue:false})}}})});
;
function JiveSiteData(b,c,a){return{mvcView:b,app:c,view:c.view,viewParams:a,getAppView:function(){return this.view},getActionInfo:function(){return this.actionInfo},setActionInfo:function(d){this.actionInfo=d},getGadgetMetaData:function(){return this.gadgetInfo},setGadgetMetaData:function(d){this.gadgetInfo=d},getEEContext:function(){return this.context},setEEContext:function(d){this.context=d;if(d&&d.target&&d.target.view){this.view=d.target.view}},getSelection:function(){return this.selection},setSelection:function(d){this.selection=d},getLaunchContext:function(){return this.launchContext}}}JiveSiteData.get=function(b){var a=b[osapi.container.GadgetSite.RPC_ARG_KEY];return a.jiveData};
;
define("jive/app/core_container/navigate_app",function(){return jive.oo.Class.extend(function(a){var d={};var c=/(\/apps\/)([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})/;var b=/(\/apps\/)([a-zA-Z0-9\/\-._]{1,120})/;this.init=function(e){};this.setCanvasToken=function(e){d=e};this.getCanvasToken=function(){return d};this.getCanvasAppInfoFromUrl=function(f){var g=f||window.location.pathname;var e=c.exec(g);if(e!==null){return e[2]}e=b.exec(g);if(e!=null){return e[2]}return null};this.addActionQueueItemToViewParams=function(f){var h=(typeof(f)!=="undefined"&&f!==null)?f:{};var g=/&aq=([1-9]\d*)/.exec(window.location.search+" "+window.location.hash);if(g){var e=g[1];h.jive_aq=e}return h}})});
;
// This file was automatically generated from loading.soy.
// Please don't edit this file by hand.

goog.provide('jive.nav.loading');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.nav.loading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="font-color-meta-light j-menu-loading clearfix"><img src="', soy.$$escapeHtml(jive.soy.func.buildUrl('/images/jive-image-loading.gif')), '" alt="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('customize.loading'),[])), '" /> <span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('customize.loading'),[])), '</span></p>');
  return opt_sb ? '' : output.toString();
};

;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo["abstract"]=function(){};jive.oo._abstract=jive.oo["abstract"];
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.AbstractListView=jive.AbstractView.extend(function(a,b){this.init=function(d,f,e){var c=this;c.$menu=$j(f);c.$button=$j(d);c.menuOpts=e||{};c.popoverOpen=false;c.$button.click(function(g){if(!c.popoverOpen){c.$button.addClass("active");c.showSpinner();if(c.spinning){c.spinning=false;c.openPopover();c.spinning=true}c.emitP("toggle").addCallback(function(h){c.data=h||c.data;c.render(c.data);c.openPopover()}).always(function(){c.hideSpinner()})}g.preventDefault()});c.$menu.on("navbarPopoverLoad",function(){var g=$j(this);jive.conc.nextTick(function(){jive.Accessibility.focusIn(g)})})};this.render=jive.oo._abstract;a.setContent=function(c,d){this.content=$j(c);if(this.popoverOpen){this.$menu.trigger("updatePopoverHTML",[this.content,d])}else{this.$menu.children().remove();this.$menu.append(this.content);if(d){d()}}};this.getContent=function(){this.content=this.content||this.$menu.children();return this.content};this.close=function(){this.$menu.trigger("close")};this.repositionPopover=$j.noop;a.createSpinner=function(){if(!this.popoverOpen){this.spinner=new jive.loader.LoaderView();this.setContent(this.spinner.getContent());this.openPopover()}else{b.createSpinner.call(this)}this.spinning=true};a.destroySpinner=function(){this.spinning=false;b.destroySpinner.call(this);if(this.spinner){this.spinner.destroy()}};a.openPopover=function(){var c=this;if(!c.popoverOpen&&!c.spinning){c.$button.addClass("active");var d={};c.$menu.popover($j.extend(d,{context:c.$button,containWithinViewport:true,flip:false,hoverSelection:true,returnPopover:true,onClose:function(){c.repositionPopover=$j.noop;c.$button.removeClass("active");c.popoverOpen=false;c.$menu.find("div.js-onboarding-tip").remove()},onLoad:function(){c.repositionPopover=d.reposition;c.$menu.trigger("navbarPopoverLoad")}},c.menuOpts));c.popoverOpen=true}}});define("apps/navbar/menu/view/abstract_list",function(){return jive.Navbar.Menu.AbstractListView});
;
jive.namespace("Navbar.Menu");jive.Navbar.Menu.Main=jive.oo.Class.extend(function(a){a.init=function(c,e,d){var b=this;this.initialized=false;this.buttonSelector=c;this.listView=this.buildListView(c,e,d);this.itemSource=this.buildItemSource();this.listView.addListener("toggle",function(f){b.populate(f)})};a.populate=function(c){var b=this;if(!b.initialized){if(b.itemSource!=null){$j(b.buttonSelector).attr("aria-busy","true");b.itemSource.findAll(b.sourceParams()).addCallback(function(d){c.emitSuccess(d);$j(b.buttonSelector).attr("aria-busy","false");b.initialized=true})}else{c.emitSuccess({});b.initialized=true}}else{c.emitSuccess()}return c};a.invalidate=function(){this.initialized=false};a.sourceParams=function(){return{}};a.buildListView=jive.oo._abstract;a.buildItemSource=jive.oo._abstract});define("apps/navbar/menu/main",function(){return jive.Navbar.Menu.Main});
;
jive.namespace("Apps");jive.Apps.RteArtifacts=jive.oo.Class.extend(function(b){var i=CS_RESOURCE_BASE_URL+"/images/tiny_mce3/themes/advanced/skins/default/img/progress.gif";var f=450;var h="OpenSocial/2.5";var g="legacy";this.init=function(){};b.showMessage=function(l,k){$j("<p/>").html(l).message({style:k})};this.buildArtifactMarkup=function(v,z){var m=v?v[osapi.container.GadgetSite.RPC_ARG_KEY]:null;var o=m.jiveData.app;var y=z.artifactJson;var r=z.rteBound;b.makeArtifactURLsAbsolute(y,o,z.suppressImageUpload);var t=b.normalizeArtifact(y);var l=t.icon;var q=t.previewImage;var x=l||q;if(console){console.log("imageUrl",x)}var u=this;var s=function(K,H){if(!K){v.callback({error:"No artifactJson metadata was provided"});return}var I=m.getActiveSiteHolder().getGadgetInfo();var C=I.modulePrefs.features.actions;var A;if(C&&C.params&&C.params["action-contributions"]){var F=C.params["action-contributions"];for(var E=0;E<F.length;++E){var M=F[E].replace(/\n/mg,"");var D=M.match(/id="(.+?)"/);A=D?D[1]:null;if(A&&A==z.actionId){break}}}if(!A){v.callback({error:"App does not define action "+z.actionId});return}if(!m){u.showMessage("Error occured, app site missing");v.callback({error:"Application framework error"});return}var N=m.jiveData;var J=u.createArtifact({ed:document,appUUID:N.app.appUUID,appInstanceUUID:N.app.appInstanceUUID,data:K,rteBound:r});var G=$j(J);var L=G.wrap("<span></span>").parent().html();if($j.browser.msie){if($j.browser.version<9){L=L.replace(/<\w[^>]*>/g,function(O){return O.replace(/(\w+=)([-.\w]+)/g,'$1"$2"')});L=L.replace(/(<IMG((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\s*>)/g,"$1</IMG>")}else{var B=function(O,P){var Q=G.attr(P);if(Q){var R=Q.replace(/\"/g,"&quot;");O=O.replace(P+"='"+Q+"'",P+'="'+R+'"')}return O};L=B(L,"_context")}}v.callback({markup:L,error:H})};if(z.suppressImageUpload||!x){s(y);return}var n=l?b.uploadArtifactIcon(l,o.appInstanceUUID):undefined;var p=q?b.uploadArtifactImage(q):undefined;var k=n||p;if(!k){var w="Error uploading iconUrl or previewImage.";u.showMessage(w);if(console){console.log(w)}s(y,w);return}k.addCallback(function(A){A=A||x;if(l){b.updateIcon(y,A)}else{b.updatePreviewImage(y,A)}s(y)}).addErrback(function(A){var B="Could not upload "+x;u.showMessage(B);if(console){console.log(B,A)}s(y,B)})};b.isProxiedUrl=function(k){return k.startsWith(gadgets.io.getProxyUrl().split("?")[0])};b.makeRelativeAppResourceUrl=function(k,m){var l=m.appURL?m.appURL.match(/.*\//)[0]:"";if(k.match(/^http/)===null&&k.match(/^\/\//)===null){return l+k}return null};this.makeArtifactURLsAbsolute=function(l,q,k){var m=function(s){var r=b.makeRelativeAppResourceUrl(s,q);if(r){return r}else{if(s.match(/^\/\//)){if(typeof gadgets!="undefined"){var v=gadgets.io.getProxyUrl();var u=v.match(/^https?:(\/\/.+)\?/);if(u&&u.length>1){u[1]=u[1].substring(0,2)+".*"+u[1].substring(2);if(s.match("^"+u[1])){var t=s.match(/url=(.+)&?/);if(t&&t.length>1){return t[1]}}}}}}};var p=b.normalizeArtifact(l);var o=p.previewImage;if(o){o=m(o)||o;if(!k&&!b.isProxiedUrl(o)){o=gadgets.io.getProxyUrl(o)}b.updatePreviewImage(l,o)}var n=p.icon;if(n){n=m(n)||n;if(!k&&!b.isProxiedUrl(n)){n=gadgets.io.getProxyUrl(n)}b.updateIcon(l,n)}if(console){console.log(l)}};b.updatePreviewImage=function(l,k){if(b.deduceArtifactFormatType(l)==h){l.previewImage=k}else{l.display.previewImage=k}};b.updateIcon=function(k,l){if(b.deduceArtifactFormatType(k)==h){k.preferredExperience.display.icon=l}else{k.display.icon=l}};b.deduceArtifactFormatType=function(k){return k.preferredExperience?h:g};b.normalizeArtifact=function(l){var p=b.deduceArtifactFormatType(l);if(p==h){var o=l.preferredExperience;var k=o.target.type;k=k==="gadget"?"embed":k;o.display=o.display||{};o.target=o.target||{};var n=o.display.type;var m=n=="image"?o.display.altText:o.display.label;return{hasPreviewImage:n=="image"&&l.previewImage,hasIcon:n=="text"&&Boolean(o.display.icon),linkType:k||"none",label:m||l.actionLabel,icon:o.display.icon,previewImage:l.previewImage,url:l.url,view:o.target.view,context:l.context,artifactFormatType:p}}else{l.display=l.display||{};l.target=l.target||{};return{hasPreviewImage:l.display.type=="image",hasIcon:l.display.type=="text"&&Boolean(l.display.icon),linkType:l.target.type||"none",label:l.display.label||l.actionLabel,icon:l.display.icon,previewImage:l.display.previewImage,url:l.target.url,view:l.target.view,context:l.target.context,artifactFormatType:p}}};b.extractFileName=function(k){return b.isProxiedUrl(k)?k.match(/.*\%2F(.+)/)[1]:k.match(/.*\/(.+)/)[1]};this.createArtifact=function(m){var x=m.rte,p=m.ed,D=m.appUUID,E=m.actionId,J=m.data,C=m.editedContentBean,n=m.appInstanceUUID,k=m.rteBound;var q=x||k;var G=q?function(M){return"__"+M}:function(M){return"_"+M};J=J||{};J.actionLabel=m.actionLabel;var s=b.normalizeArtifact(J);var u=s.hasPreviewImage;var B=s.hasIcon;var A=s.linkType;var v=s.label;var H=s.icon;var z=s.previewImage;var o=s.url;var y=s.view;var l=s.context;var L=x?p.getDoc():p;var r=$j(L.createElement("a"));r.attr("jivemacro","appEmbeddedView");r.attr("__jive_macro_name","appEmbeddedView");r.attr("href",A=="url"?o:"javascript:;");if(x){if(u){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;var I=b.extractFileName(z);var w=$j(p.dom.create("img")).attr("src",i).attr("alt",I);r.append(w);var t=$j(p.dom.create("img")).attr("src",z).attr("alt",I).addClass("jiveImage").hide();r.append(t);t.load(function(){t.unbind();j(t);w.unbind().remove();t.show();jive.conc.nextTick(function(){if(F&&e(t)){c(t,x,p).addCallback(function(M){z=M.attr("src");r.attr("__previewImage",z)})}})});r.addClass("jive-link-app-preview")}else{if(B){var F=(C&&C.attachmentConfigActionBean)?C.attachmentConfigActionBean.canAttach:true;r.text(v);r.css("background-image","url('"+H+"')");r.addClass("jive-link-app-icon");r.attr("__icon",H);var I=b.extractFileName(H);var t=$j(p.dom.create("img")).attr("src",H).attr("alt",I).hide();jive.conc.nextTick(function(){if(F&&e(t)){d(t,x,p,n).addCallback(function(M){H=M.attr("src");r.attr("__icon",H);r.css("background-image","url('"+H+"')")})}});r.append($j(p.dom.create("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(x?p.dom.create("span"):L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}else{if(u){var I=b.extractFileName(z);r.attr(G("previewImage"),z);r.addClass("jive-link-app-preview");var K=$j(L.createElement("img"));K.attr("src",z).attr("alt",I).addClass("jiveImage");r.append(K)}else{if(B){r.text(v);if(!$j.browser.msie){r.css("background-image","url('"+H+"')")}r.addClass("jive-link-app-icon");r.attr(G("icon"),H);r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}else{r.text(v);r.addClass("jive-link-app");r.append($j(L.createElement("span")).addClass("j-ui-elem").addClass("j-app-link"))}}}if(v){r.attr("title",v)}r.attr(G("appUUID"),D);r.attr(G("action_id"),E);if(A=="embed"){r.attr(G("view"),y||"embedded");r.attr(G("context"),JSON.stringify(l||{}))}if(o){r.attr(G("url"),o)}r.attr("modifiedTitle","true");r.addClass("jive_macro");r.addClass("jive_macro_appEmbeddedView");return r[0]};this.parseSelectionContextFromArtifact=function(n){var m=n.attr("__context");var t=n.attr("__view");var l=n.attr("__url");var o=n.attr("__previewImage")?"image":"text";var u=n.attr("__title");var p=n.attr("__previewImage");var v=n.text().trim()||"";var s=n.attr("__icon");var r=null;switch(o){case"image":r={type:"image",previewImage:p};if(u){r.label=u}break;case"text":r={type:"text",label:v};if(s){r.icon=s}break}var k=(m||t)?"embed":"url";var q=null;switch(k){case"embed":q={type:"embed",view:t||"embedded"};if(m){q.context=JSON.parse(m)}if(l){q.url=l}break;case"url":q={type:"url",url:l||""};break}return{display:r,target:q}};this.uploadArtifactIcon=function(l,k){var m=b.extractFileName(l);var n=jive.api.apps("instances/"+k+"/attach_image")+"?name="+m;return a(n,l)};this.uploadArtifactImage=function(k){var l=b.extractFileName(k);var m=jive.rest.url("/rteImages")+"?name="+l+"&objectId=-1&objectType=-1";return a(m,k)};function j(m){var k=m.width();if(k>f){var n=f/k;var l=Math.round(n*k);m.attr("width",l)}}function e(m){var k=m.attr("src");if(k.match(/^\/[^\/]/)){return 0}var l="(https?:)?//"+location.hostname+(location.port?":"+location.port:"");if(!k.match("^"+l)){return true}return b.isProxiedUrl(k)?1:0}function d(n,m,l,k){var o=jive.api.apps("instances/"+k+"/attach_image");return c(n,m,l,o)}function c(k,l,r,p){var m=l.getImageService();var s=k.attr("alt");var t=k.attr("src");function o(){if(console){console.log("Image REST request failed for %s",s,arguments)}k.remove()}var n=new jive.conc.Promise();var u=l.getFormService();var q=u.setFormEnabled(false,r.getLang("jiveimage.please_wait"));m.createFromImageSrc(s,b.isProxiedUrl(t)?t:encodeURI(t),p).addCallback(function(v){k.load(function(){var w=$j(this);w.css({width:w.width()+"px",height:w.height()+"px","max-width":"","max-height":""})});k.attr("src",v.url);jive.conc.nextTick(function(){r.nodeChanged()});n.emitSuccess(k)}).addErrback(function(){o();n.emitError()}).always(function(){u.setFormEnabled(q)});return n}function a(o,k){var n=new jive.conc.Promise();var l={url:o,contentType:"application/x-www-form-urlencoded",processData:false,data:"url="+b.isProxiedUrl(k)?k:encodeURIComponent(k)};var m={contentType:"application/json; charset=utf-8"};$j.ajax($j.extend({type:"POST",dataType:"json",success:function(p,r,q){if(!p||!p.url){n.emitError()}else{n.emitSuccess(p.url)}},error:function(p){n.emitError(p)},timeout:30000},m,l));return n}});define("jive/app/rte/artifacts",["gadgets"],function(a){return jive.Apps.RteArtifacts});
;
define("apps/activity_stream/models/rtc_source",["jquery","underscore","apps/shared/models/core_deferred"],function(c,b,a){jive.RTCSource=jive.oo.Class.extend(function(d){d.init=function(e){if(e&&e.collabID){this.collabID=e.collabID;this.rtcEnabled=e.rtcEnabled;this.collabDeferred=this.getCollaboration(this.collabID)}};this.getCollaboration=function(e){return a.runQuery(function(f){return f.jive.corev3.collaborations.get({uri:"/collaborations/"+e})})};this.getInteractions=function(f){var e=this;return e.collabDeferred.then(function(g){return a.runQuery(g.getInteractions(f)).then(function(h){b.each(h,function(i){b.extend(i.author,i.author.jive);i.author.entitled=true;i.collabID=e.collabID;i.rtcEnabled=e.rtcEnabled});return h})})};this.updateSubject=function(g){var f=this,e={subject:g};return f.collabDeferred.then(function(h){return a.runQuery(h.setSubject(e))})};this.createInteraction=function(g){var f=this;var e={content:{text:g}};return f.collabDeferred.then(function(h){return a.runQuery(h.createInteraction(e)).then(function(i){b.extend(i.author,i.author.jive);i.author.entitled=true;i.collabID=f.collabID;i.rtcEnabled=f.rtcEnabled;return i})})};this.createCollaboration=function(f,h,g){var e=this;return a.runQuery(function(i){return i.jive.corev3.collaborations.create({participants:f,subject:g})}).then(function(i){e.collabDeferred=c.when(i);e.createInteraction("<body>"+h+"</body>")})};this.addCollaborators=function(g,i,h){var e=this,f=i.split(",").map(function(j){return{id:j}});return e.collabDeferred.then(function(j){return a.runQuery(j.addParticipant({participants:f}))}).then(function(j){return j.participants.map(function(k){return b.find(h,function(l){return l.id==k.id})})})};this.leaveCollaboration=function(){var e=this;return e.collabDeferred.then(function(){return a.runQuery(function(f){return f.jive.corev3.collaborations.participants.removeParticipants({userID:window._jive_current_user.ID,collabID:e.collabID})})})};this.deleteDM=function(e){return this.remove(jive.rest.corev3.url("/dms/"+e))};this.deleteComment=function(e){return this.remove(jive.rest.corev3.url("/comments/"+e))};this.remove=function(f){function e(){c("<p />").html(jive.i18n.getMsg("global.ajax_error")).message({style:"error"})}return c.ajax(f,{type:"DELETE",error:e})}});return jive.RTCSource});
;
jive.namespace("Browse.User");define("apps/browse/user/model/user_source",["apps/shared/models/rest_service"],function(a){jive.Browse.User.ItemSource=a.extend(function(b){b.resourceType="user";this.findAll=function(e){var d=(e.userID)?e.userID:"current";var c=this.RESOURCE_ENDPOINT+"/"+d+"/browse";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:e||{}})};this.findAllOrgChart=function(e){var d=(e&&e.userID)?e.userID:"current";var c=this.RESOURCE_ENDPOINT+"/"+d+"/orgchart";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:e||{}})};this.getDirectReportCount=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/directreports/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.getDirectReports=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/directreports";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.getUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{}})};this.setUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d.propValue})};this.removeUserProperty=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userID+"/prop/"+d.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"DELETE",{url:c})}});return jive.Browse.User.ItemSource});
;
jive.namespace("Tips");jive.Tips.TipGroupState=jive.oo.Class.extend(function(a){a.init=function(b){this.stateKey=b.stateKey;this.currentTipId=b.currentTipID||null;this.dismissed=b.dismissed||false;this.skipped=false};this.setCurrentTipId=function(b){this.currentTipId=b};this.getCurrentTipId=function(){return this.currentTipId};this.setDismissed=function(b){this.dismissed=b};this.isDismissed=function(){return this.dismissed};this.setSkipped=function(b){this.skipped=b};this.isSkipped=function(){return this.skipped};this.getKey=function(){return this.stateKey};this.serialize=function(){var b=this.isDismissed()?"true":"false";if(this.currentTipId){b+="#"+this.currentTipId}return b}});define("apps/tips/models/tip_group_state",function(){return jive.Tips.TipGroupState});
;
// This file was automatically generated from tips-app.soy.
// Please don't edit this file by hand.

goog.provide('jive.tips.application');
goog.provide('jive.tips.renderTip');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.resourceInlineJs');


jive.tips.application = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: '$j(function() {var tipsApp = new jive.Tips.Main({tipGroups:' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.tipGroups).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', skippedTipGroupIDs: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.skippedTipGroupIDs).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '});});'}, output);
  return opt_sb ? '' : output.toString();
};


jive.tips.renderTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jive-tips-', soy.$$escapeHtmlAttribute(opt_data.id), '" data-group-id="', soy.$$escapeHtmlAttribute(opt_data.groupId), '" style="display: none" class="j-tips ', (opt_data.cssClass) ? soy.$$escapeHtmlAttribute(opt_data.cssClass) : '', '">', (opt_data.templateName) ? soy.$$filterNoAutoescape(jive.soy.func.eval(opt_data.templateName,true,true,{'data':opt_data.templateData})) : ((opt_data.titleKey) ? '<h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.titleKey),[])) + '</h4>' : '') + '<p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.bodyKey),[])) + '</p>', '<!-- BEGIN tip footer --><div class="j-tips-footer"><div class="j-tips-footer-overlay"></div>', (opt_data.count > 1) ? '<div class="j-pagination"><span class="j-tips-count font-color-meta-light">' + soy.$$escapeHtml(opt_data.index + 1) + ' / ' + soy.$$escapeHtml(opt_data.count) + '</span><span class="j-pagination-prevnext">' + ((! opt_data.first) ? '<a href="#" class="j-pagination-prev js-prev-tip" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('tips.prev_tip.title'),[])) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.prev_tip'),[])) + '</a>' : '<span class="j-pagination-prev j-disabled font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.prev_tip'),[])) + '</span>') + ((! opt_data.last) ? '<a href="#" class="j-pagination-next js-next-tip" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('tips.next_tip.title'),[])) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.next_tip'),[])) + '</a>' : '<span class="j-pagination-next j-disabled font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.next_tip'),[])) + '</span>') + '</span></div>' : '', '<ul class="j-tips-actions"><li><a href="#" class="js-ignore-tips close" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('tips.ignore_tips.title'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.ignore_tips'),[])), '</a></li><li><a href="#" class="js-close-tips close" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('tips.close_tips.title'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tips.close_tips'),[])), '</a></li></ul></div><!-- END tip footer --></div>');
  return opt_sb ? '' : output.toString();
};

;
/*
 * jQuery imagesLoaded plugin v1.0.3
 * http://github.com/desandro/imagesloaded
 *
 * MIT License. by Paul Irish et al.
 */
(function(a,b){a.fn.imagesLoaded=function(i){var g=this,e=g.find("img").add(g.filter("img")),c=e.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function f(){i.call(g,e)}function d(){if(--c<=0&&this.src!==h){setTimeout(f);e.unbind("load error",d)}}if(!c){f()}e.bind("load error",d).each(function(){if(this.complete||this.complete===b){var j=this.src;this.src=h;this.src=j}});return g}})(jQuery);define("jquery/jquery.imagesloaded",["jquery"],function(a){return a.fn.imagesLoaded});
;
(function(f){var e=/^-?\d+$/;function a(g){var h=g.css("position");return h=="absolute"||h=="relative"||h=="fixed"}function d(g){var h=g.css("z-index");return typeof h=="number"||(h&&h.match(e))}function b(g){return(a(g)&&d(g))||g.is("body")}function c(h,g){return g.toArray().every(function(i){return f.contains(h,i)})}jQuery.fn.effectiveZIndex=function(h){var g;if(h&&h.context){g=f(h.context)}else{if(h&&h.relativeTo){g=this.stackingContexts(h)}else{g=f("body")}}var i=[],j=this;while(j.length>0){if(j[0]!==g[0]){i.push(j)}else{break}j=j.parent()}return i.reduce(function(m,l){var k=f(l);if(b(k)){return parseInt(k.css("z-index"),10)}else{return m}},0)};jQuery.fn.stackingContexts=function(g){var h=(g&&g.relativeTo)?f(g.relativeTo):this;var j=this;var i=this.parents().filter(function(){var l=f(this),k=c(this,j)&&c(this,h);return k&&b(l)});return i};jQuery.fn.stackingContext=function(g){return this.stackingContexts(g).filter(":first")}})(jQuery);
;
jive.namespace("Tips");jive.Tips.TipView=jive.AbstractView.extend(function(a){a.init=function(b){this.tipView=$j.extend({},b)};a.getId=function(){return this.tipView.id};this.hasBeenViewed=function(){return this.shown};this.hasValidSelector=function(){var c=this;if(c.tipView.selector){var d=$j(c.tipView.selector);var b=(c.tipView.hiddenSelectorAllowed||d.is(":visible"));return(d.length>0)&&b}return false};a.getLoadSelector=function(){return this.tipView.loadSelector};this.isInitialTip=function(){return this.initialTip};this.render=function(f){var c=this;this.shown=false;c.triggerEventType=f.triggerEventType;c.triggerSelector=f.triggerSelector;c.groupId=f.id;var b=f.getTipViewsWithValidSelectors();var e=f.findIndexById(c.getId(),b);this.initialTip=e==0;var g=$j.extend(c.tipView,{groupId:c.groupId,count:b.length,first:c.initialTip,last:e==(b.length-1),index:e});var d=jive.tips.renderTip(g);c.$tipElement=$j(d);c.bindTipElementHandlers(f)};a.bindTipElementHandlers=function(c){var b=this;b.$tipElement.find(".js-next-tip").bind("click",function(d){c.showNextTip();d.preventDefault()});b.$tipElement.find(".js-prev-tip").bind("click",function(d){c.showPreviousTip();d.preventDefault()});b.$tipElement.find(".js-ignore-tips").bind("click",function(d){c.skip();d.preventDefault()});b.$tipElement.find(".js-close-tips").bind("click",function(d){c.dismiss();d.preventDefault()})};this.display=function(){var b=this;b.$tipSelector=$j(b.tipView.selector).filter(":first");if(b.$tipSelector.length>0){var c=b.$tipSelector;if(b.triggerSelector){c=$j(b.triggerSelector)}if(c.length>0){this.showTip(c)}else{if(console){console.warn("Please ensure a valid trigger selector is specified for tip "+this.tipView.id)}}}else{if(console){console.warn("Please ensure a valid selector is specified for tip "+this.tipView.id)}}};a.isTransientTrigger=function(){return this.isMouseoverTrigger()||this.isFocusTrigger()};a.isMouseoverTrigger=function(){return this.triggerEventType=="mouseover"};a.isFocusTrigger=function(){return this.triggerEventType=="focus"};a.showTip=function(d){var b=this;if(b.triggerEventType&&b.isInitialTip()){b.$triggerSelector=d;b.$triggerSelector.one(b.triggerEventType,function(f){b.showPopover(f)})}else{var c=b.getLoadSelector();if(c){b.showTipWithLoadSelector(c)}else{b.showPopover()}}};a.showTipWithLoadSelector=function(d){var b=this;var c=$j(d);if(c.length>0){if(c.is("img")){c.imagesLoaded(function(){b.showPopover()})}else{c.bind("load",function(){b.showPopover()})}}else{b.showPopover()}};a.showPopover=function(f){var c=this;if(!c.shown){var b=c.determineTipContext(f);var d={context:b,closeOtherPopovers:true,closeOtherPopoversSelector:"BODY > .js-pop > .j-tips[data-group-id='"+c.groupId+"']"};if(c.tipView.hiddenSelectorAllowed){c.handleInvisibleContext(b)}d=$j.extend(d,c.unbindDefocusHandlers());d=$j.extend(d,c.addCloseOptions());d=$j.extend(d,c.addOffsetOptions());c.$tipElement.popover(d);var e=c.$tipElement.closest(".js-pop");e.css("z-index",b.effectiveZIndex({relativeTo:e})+5);c.bindDefocusHandlers();c.shown=true}};a.hasCloseSelector=function(){return(this.tipView.closeSelector&&this.tipView.closeSelector.length>0)||false};a.isCloseOnClick=function(){return this.hasCloseSelector()&&this.tipView.closeSelector.trim().toLowerCase()=="body"};a.addOffsetOptions=function(){var b=this;return{nudge:{top:b.tipView.belowOffset,bottom:b.tipView.aboveOffset}}};a.addCloseOptions=function(){var b=this;var d=b.hasCloseSelector();var c={closeOnClick:d};if(d){c=$j.extend(c,{closeOnClickSelector:b.tipView.closeSelector})}return c};a.bindDefocusHandlers=function(){var b=this;if(!b.isCloseOnClick()){b.$tipElement.bind("click",function(){b.focusTip()});jive.conc.nextTick(function(){$j("BODY").bind("click",function(c){b.blurTip(c)})})}};a.unbindDefocusHandlers=function(){var b=this;var c={};if(!b.isCloseOnClick()){c=$j.extend(c,{onClose:function(){b.$tipElement.unbind("click",b.focusTip);$j("BODY").unbind("click",b.blurTip);b.restoreContextVisibility()}})}return c};a.determineTipContext=function(e){var d=this;var c=d.$tipSelector;if(e){var b=$j(e.currentTarget);var f=b.find(d.tipView.selector);if(f.length==0&&d.triggerSelector){f=$j(e.target).find(d.triggerSelector)}if(f&&f.length>0){c=f}}return c};a.blurTip=function(f){var b=this;if(b.$tipElement){var c=b.$tipElement.parent();var d=$j(f.target).parents().andSelf().toArray().reduce(function(h,e){return h||e==c[0]},false);var g=$j(f.target).parents("body").length>0;if(!d&&g){c.addClass("j-pop-blurred");b.restoreContextVisibility()}}};a.focusTip=function(){if(this.$tipElement){this.$tipElement.parent().removeClass("j-pop-blurred")}};a.handleInvisibleContext=function(c){var b=this;if(!c.is(":visible")){b.hiddenSelector=true;var e=c.attr("style");var d=e&&e.match(/display:/);b.cssDiplayValue=(d)?c.css("display"):"";c.show()}};a.restoreContextVisibility=function(){var b=this;if(b.hiddenSelector&&b.$tipSelector.is(":visible")){b.$tipSelector.css("display",b.cssDiplayValue)}};this.close=function(){if(this.$tipElement){this.$tipElement.trigger("close")}}});define("apps/tips/views/tip_view_view",function(){return jive.Tips.TipView});
;
jive.namespace("Tips");jive.Tips.Tip=jive.AbstractView.extend(function(a){a.init=function(d){var c=this;c.id=d.id;var b=d.views||[];if(!d.views){b.push(d)}this.views=$j.map(b,function(e){return new jive.Tips.TipView($j.extend(e,{id:c.id}))})};a.getActiveTipView=function(){return this.views[this.getValidSelectorIndex()]};this.getId=function(){return this.id};this.hasValidSelector=function(){return this.getValidSelectorIndex()>-1};a.getValidSelectorIndex=function(){var b=this;for(var d=0;d<b.views.length;d++){var c=b.views[d];if(c.hasValidSelector()){return d}}return -1};this.isInitialTip=function(){return this.getActiveTipView().isInitialTip()};this.render=function(b){this.getActiveTipView().render(b)};this.display=function(){this.getActiveTipView().display()};this.close=function(){if(this.hasValidSelector()){this.getActiveTipView().close()}}});define("apps/tips/views/tip_view",function(){return jive.Tips.Tip});
;
jive.namespace("Tips");jive.Tips.TipGroup=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.id=c.id;b.index=c.index;b.triggerSelector=c.triggerSelector;b.triggerEventType=c.triggerEventType;b.dismissKey=c.dismissKey||[];b.tips=c.visibleTips||[];b.refreshSelector=c.refreshSelector;b.refreshTimeout=c.refreshTimeout||b.getRefreshTimeout();var d=c.state||{};b.state=new jive.Tips.TipGroupState($j.extend(d,{stateKey:b.dismissKey}));b.buildTipViews();b.bindRefreshHandler()};a.buildTipViews=function(){var b=this;b.tipViews=[];b.activeTipIndex=-1;var c=b.state.getCurrentTipId();$j.each(b.tips,function(e,f){var d=new jive.Tips.Tip(f);if(f.id==c){b.activeTipIndex=(e-1)}b.tipViews.push(d)});while(b.activeTipIndex>=(b.tipViews.length-1)){b.activeTipIndex--}};a.destroyTipViews=function(){$j.each(this.tipViews,function(c,b){b.close()})};a.refresh=function(){var b=this;if(!b.isHidden()){b.destroyTipViews();setTimeout(function(){b.buildTipViews();b.showNextTip()},b.refreshTimeout)}};a.isHidden=function(){return this.state&&(this.state.isSkipped()||this.state.isDismissed())};a.getRefreshTimeout=function(){return jive.localexchange?1000:5000};this.hasVisibleTips=function(){return this.getTipViewsWithValidSelectors().length>0};this.showNextTip=function(){var b=this;var c=b.tipViews;if(c&&b.activeTipIndex<(c.length-1)){b.activeTipIndex++;if(!b.showActiveTip()){b.showNextTip()}}else{if(b.hasVisibleTips()){b.resetSequence()}}};this.showPreviousTip=function(){var b=this;if(b.activeTipIndex>0){b.activeTipIndex--;if(!b.showActiveTip()){b.showPreviousTip()}}else{if(b.hasVisibleTips()){b.resetSequence()}}};a.resetSequence=function(){var b=this;b.activeTipIndex=-1;b.showNextTip()};a.showActiveTip=function(){var b=this;var c=b.getCurrentTipView();if(c){if(c.hasValidSelector()){c.render(b);c.display();b.storeState(c);return true}else{return false}}else{return false}};a.storeState=function(c){var b=this;var d=b.state.getCurrentTipId();if(c.getId()!=d){b.state.setCurrentTipId(c.getId());if(d){b.emit("state",b.state)}}};this.findIndexById=function(b,c){return $j.inArray(b,this.getTipIds(c))};a.getCurrentTipView=function(){return this.tipViews[this.activeTipIndex]};this.skip=function(){var b=this;b.state.setSkipped(true);b.state.setDismissed(false);b.emit("close",b.state)};this.dismiss=function(){var b=this;b.state.setSkipped(false);b.state.setDismissed(true);b.emit("close",b.state)};a.getTipIds=function(b){return $j.map(b,function(c){return c.getId()})};a.getTipViewsWithValidSelectors=function(){var b=this;return $j.map(b.tipViews,function(c){return c.hasValidSelector()?c:null})};a.bindRefreshHandler=function(){var b=this;if(b.hasRefreshSelector()){$j(b.refreshSelector).bind("click",function(c){b.refresh();c.preventDefault()})}else{if(jive.localexchange&&jive.localexchange.viewupdatesource){jive.localexchange.addListener("view.update.start",function(){if(!b.isHidden()){b.destroyTipViews()}});jive.localexchange.addListener("view.update.stop",function(){if(!b.isHidden()){setTimeout(function(){b.buildTipViews();b.showNextTip()},b.refreshTimeout)}})}}};a.hasRefreshSelector=function(){return(this.refreshSelector&&this.refreshSelector.length>0)||false}});define("apps/tips/views/tip_group_view",function(){return jive.Tips.TipGroup});
;
jive.namespace("Tips");jive.Tips.PageView=jive.AbstractView.extend(function(a){a.init=function(c){var b=this;b.currentTipGroupIndex=0;b.tipGroups=c.tipGroups||[];b.asyncLoad=(typeof c.asyncLoad!="undefined")?c.asyncLoad:true;if(b.tipGroups.length>0){b.handleAsyncLoad(function(){b.showNextTipGroup(b.tipGroups[0])})}};a.showNextTipGroup=function(d){var b=this;d.index=b.currentTipGroupIndex;var c=new jive.Tips.TipGroup(d);if(c.hasVisibleTips()){b.addListeners(c);c.showNextTip()}else{if(b.hasUnviewedTipGroups()){b.showNextTipGroup(b.tipGroups[++b.currentTipGroupIndex])}}};a.addListeners=function(c){var b=this;c.addListener("state",function(d){b.emit("state",d)});c.addListener("close",function(d){b.emit("state",d);if(b.hasUnviewedTipGroups()){b.showNextTipGroup(b.tipGroups[++b.currentTipGroupIndex])}})};a.hasUnviewedTipGroups=function(){return this.currentTipGroupIndex<(this.tipGroups.length-1)};a.handleAsyncLoad=function(c){var b=this;if(b.asyncLoad){jive.conc.nextTick(c)}else{c()}}});define("apps/tips/views/page_view",function(){return jive.Tips.PageView});
;
jive.namespace("Tips");jive.Tips.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;if(!$j.deparam.querystring().fromQ){b.userSource=c.userSource||new jive.Browse.User.ItemSource();b.tipView=new jive.Tips.PageView(c);b.skippedTipGroupIDs=c.skippedTipGroupIDs||[];b.tipView.addListener("state",function(d){if(d){if(!d.isSkipped()){b.userSource.setUserProperty({userID:"current",propName:d.getKey(),propValue:d.serialize()})}else{b.skippedTipGroupIDs.push(d.getKey());document.cookie="jive.tipGroups.skipped="+b.skippedTipGroupIDs.unique().join("|")}}})}}});define("apps/tips/main",function(){return jive.Tips.Main});
;
jive.namespace("Trial");define("apps/trial/views/trial_help_view",["jquery"],function(a){return jive.AbstractView.extend(function(b){jive.conc.observable(this);this.init=function(e){var c=this;this.trialBannerID="#jive-trial-banner";this.trialHelpLinkID="#jive-trial-help-link";this.trialHelpPanelID="#jive-trial-help-panel";var f=$j(c.trialBannerID),d=$j(c.trialHelpLinkID),g=$j(c.trialHelpPanelID);if(d){d.click(function(){var h=g.is(".j-active");$j("#jive-trial-help-link").toggleClass("open",!h);$j("#jive-trial-curtain, #jive-trial-help-panel").toggleClass("j-active",!h);b.setJiveHelpCopy(h);h||d.find(".j-js-chat-indicator").hide();return false})}$j("#jive-trial-help-panel a").click(function(h){h.preventDefault();window.open(this.getAttribute("href"))});$j("#jive-trial-help-panel iframe").load(function(){this.contentWindow.jQuery("body").on("onMessageToVisitor",function(){if(!$j("#jive-trial-help-panel").is(".j-active")){$j("#jive-trial-help-link .j-js-chat-indicator").show()}})});$j("#jive-trial-help-panel .close").click(function(h){h.preventDefault();d.click()})};b.setJiveHelpCopy=function(c){var d=c?jive.trial.openHelp():jive.trial.closeHelp();$j("#jive-trial-help-link .j-js-title").text(d)}})});
;
// This file was automatically generated from user_profile_image.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.user.userProfileImage');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.browse.user.userProfileImage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.prop.profileImage.url) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))) + '" class="j-user-photo" tabindex="-1"><img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','',opt_data.prop.profileImage.url))) + '" alt="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('profile.image.primary'),[])) + '" width="200"/>' + ((opt_data.prop.isVisibleToPartner) ? '<div class="j-browse-external-access"><span class="jive-icon-med jive-icon-partner" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '"></span><span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.external.contributor'),[])) + '</span></div>' : '') + '</a>' + ((opt_data.prop.profileImage.viewingSelf && opt_data.prop.profileImage['default']) ? '<span class="j-profile-img-text j-rc3"><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/edit-profile-avatar!input.jspa'))) + '?targetUser=' + soy.$$escapeUri(opt_data.id) + '" class="j-btn-global">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.image.text.add.photo'),[])) + '</a></span>' : '') : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from status_level.soy.
// Please don't edit this file by hand.

goog.provide('jive.people.profile.statusLevel');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.people.profile.statusLevel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.ready) ? '<div class="j-status-container"><span class="j-status-img"><img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.imagePath)) + '" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"/></span><span class="j-status-levels">' + ((opt_data.showPoints) ? soy.$$escapeHtml(opt_data.name) + ' (' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('stslvl.points'),[opt_data.pointLevel])) + ')' : '') + '</span></div>' : '');
  return opt_sb ? '' : output.toString();
};

;
jive=this.jive||{};jive.oo=jive.oo||{};jive.oo.resolve=function(b,a){var c;return a.superclass.extend(function(e,k){var j=a.definition,i,h=this;if(typeof j=="function"){j.call(h,e,k)}else{for(i in j){if(j.hasOwnProperty(i)){h[i]=j[i]}}}g(h);g(e);f(h);f(e);function g(l){d(l,function(m){if(b[m]===c){delete l[m]}})}function f(l){d(l,function(m){if(b[m]){l[b[m]]=l[m];delete l[m]}})}function d(m,n){for(var l in m){if(b.hasOwnProperty(l)&&m.hasOwnProperty(l)){n(l)}}}})};
;
jive.AbstractFlowController=jive.oo.Class.extend(function(a){a.init=function(d,c){var b=this;this.initialView=c;this.activeView=c;this.transitions=d;this.events=Object.keys(d);this.views=[c].concat(Object.values(d)).unique();this.resetHistory();b.views.forEach(function(e){b.events.forEach(function(f){e.addListener(f,function(){var h=Array.prototype.slice.call(arguments),g=b.transitions[f];b.transitionTo.apply(b,[g].concat(h));b.viewHistory.push({view:g,args:h});b.activeView=g})});e.addListener("back",function(){b.viewHistory.pop();var h=b.viewHistory.last(),f=h.view,g=h.args;if(b.transitionBack){b.transitionBack.apply(b,[f].concat(g))}else{b.transitionTo.apply(b,[f].concat(g))}b.activeView=f})})};a.transitionTo=jive.oo._abstract;a.resetHistory=function(){this.viewHistory=[{view:this.initialView,data:[]}]}});define("apps/shared/controllers/abstract_flow_controller",function(){return jive.AbstractFlowController});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.CreateFlowController=jive.oo.compose(jive.oo.resolve({init:"initFlowController"},jive.AbstractFlowController),jive.oo.resolve({init:"initListView"},jive.Navbar.Menu.AbstractListView)).extend(function(a,b){a.init=function(c,f,g,e,d){this.initFlowController(g,e);this.initListView(c,f,d);this.views.forEach(function(h){h.addListener("browse",function(){jQuery(f).trigger("close")})})};this.render=function(c){this.activeView=this.initialView;this.activeView.render(c);this.setContent(this.activeView.getContent());this.setClass();this.resetHistory()};this.getContent=function(){return this.activeView.getContent()};a.setContent=function(c,d){this.setClass();b.setContent.call(this,c,d)};a.transitionTo=function(d){var f=Array.prototype.slice.call(arguments,1),c=this,e=this.activeView.getClass?this.activeView.getClass():"",h=d.getClass?d.getClass():"";var i=d.render.apply(d,f).addCallback(function(){var j=d.getContent();c.setContent(j,function(){j.find("a, input").filter(":visible").first().focus();jive.localexchange.emit("containerChooserUpdated")})});var g=f.last();if(f.last()&&f.last().emitSuccess&&f.last().emitError){i.addCallback(g.emitSuccess.bind(g));i.addErrback(g.emitError.bind(g))}};a.setClass=function(){var c=this.$menu,d=this.activeView.getClass?this.activeView.getClass():"";this.views.filter(function(e){return e.getClass||e.getClassToRemove}).forEach(function(f){var e=f.getClassToRemove?f.getClassToRemove():f.getClass;c.removeClass(e)});if(d){c.addClass(d)}}});define("apps/navbar/menu/create/controllers/create_flow_controller",function(){return jive.Navbar.Menu.Create.CreateFlowController});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.Main=jive.Navbar.Menu.Main.extend(function(a,c){var b=jive.Navbar.Menu.Create;a.init=function(e,f){var d=this;c.init.call(this,e,f,{container:".js-create-nav-container"});this.suggestedContainers=new jive.Placepicker.SuggestedContainersSource({containerType:containerType,containerID:containerID});this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource("create",{containerType:containerType,containerID:containerID});this.quickCreateSource=new b.QuickCreateSource();this.userPrefSource=new jive.Browse.User.ItemSource();this.contentTypes={};this.currentContainerType=containerType;this.currentContainerID=containerID;this.listView.addListener("toggle",function(g){g.addCallback(function(h){d.initializeData(h);jive.localexchange.emit("navbarCreateMenuToggled")})});jive.localexchange.addListener("actions.create",function(g){d.selectedContentType=g.contentType;d.upload=g.upload;d.populate(new jive.conc.Promise()).addCallback(function(i){d.initializeData(i);var h=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:d.selectedContentType,upload:d.upload},d.contentTypes[d.selectedContentType]));h.showPicker();d.invalidate()})});jive.Accessibility.main.addHotkey("c",false,false,false,jive.Accessibility.clickAction($j(e)))};a.buildListView=function(g,i,h){var e=new b.TypeChooserView(),f=new b.ContainerChooserView(),j=new b.QuickCreateView(),d=this;d.flowController=new b.CreateFlowController(g,i,{contentType:f,toggleView:e},e,h);e.addListener("contentType",function(l,k){d.selectedContentType=l;d.upload=k}).addListener("toggleView",function(l,k){d.userPrefSource.setUserProperty({userID:"current",propName:"CreateMenuService.smallView",propValue:String(l)});d.initializeData(k)});f.addListener("render",function(k){d.suggestedContainers.get(d.selectedContentType).addCallback(function(l){k.emitSuccess(jQuery.extend({upload:d.upload,selectedContentType:d.contentTypes[d.selectedContentType]},l))})});f.addListener("search",function(k,l){d.containers.findAll({query:k,contentType:d.selectedContentType,maxReturned:10}).addCallback(function(m){l.emitSuccess(jQuery.extend({contentType:d.selectedContentType,containerType:containerType,containerID:containerID,upload:d.upload},m))})});f.addListener("browse",function(l){var k=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:d.selectedContentType,containerType:l.containerType,containerID:l.containerID,upload:d.upload},l.selectedContentType));k.showPicker()});e.addListener("quickCreate",function(l,k){d.selectedContentType=l;d.url=k;require(["apps/direct_messaging/factory"],function(m){if(m.isContentTypeEqualTo(l)){d.flowController.close();m.create({trackingID:"cmenu"}).showModal()}else{j.render()}})});j.addListener("fetch",function(k){d.flowController.close();if(d.url){d.quickCreateSource.fetch(d.url,k)}});jive.localexchange.addListener("createMenu.close",function(){d.flowController.close()});return d.flowController};a.buildItemSource=function(){return new jive.Navbar.Menu.CreateSource()};a.sourceParams=function(){return{containerType:containerType,containerID:containerID}};a.initializeData=function(e){var d=this;if(e){e.sections.reduce(function(f,g){return f.concat(g.items)},[]).filter(function(f){return f.urlParams&&f.urlParams.contentType}).forEach(function(f){if(f.id===null){delete f.id}if(d.currentContainerType&&typeof f.urlParams.containerType=="undefined"){f.urlParams.containerType=""+d.currentContainerType}if(d.currentContainerID&&typeof f.urlParams.containerID=="undefined"){f.urlParams.containerID=""+d.currentContainerID}d.contentTypes[f.urlParams.contentType]=jQuery.extend({id:f.urlParams.contentType,headingKey:f.headingKey,personalContainerTitleKey:f.personalContainerTitleKey,personalContainerCaptionKey:f.personalContainerCaptionKey,searchPlaceholderKey:f.searchPlaceholderKey},f)})}$j("a.js-container-context.quick").each(function(){$j(this).data("quick-create-url",$j(this).data("quick-create-url")+"&containerType="+d.currentContainerType+"&containerID="+d.currentContainerID);$j(this).removeClass("js-container-context")});$j("a.js-container-context").each(function(){$j(this).querystring("containerType="+d.currentContainerType+"&containerID="+d.currentContainerID);$j(this).removeClass("js-container-context")})}});define("apps/navbar/menu/create/main",function(){return jive.Navbar.Menu.Create.Main});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.TypeChooserView=jive.AbstractView.extend(function(a){var b=jQuery;this.getContent=function(){return this.content};this.getClass=function(){if(this.data&&!this.data.smallView){return"j-choose-type j-large-view"}else{return"j-choose-type j-small-view"}};this.getClassToRemove=function(){return"j-choose-type j-small-view j-large-view"};this.render=function(d){var c=b(jive.nav.menu.create.contentTypes(this.data||d)),f=new jive.conc.Promise(),e=this;e.updateCurrentContainer();c.on("click",".js-create-list a",function(i){var j=b(this),k=j.attr("data-content-type"),h=!!j.attr("data-upload");if(j.hasClass("quick")){e.showSpinner({size:"small",showLabel:false,context:b(this).parent("li")});var g=j.data("quick-create-url");e.emit("quickCreate",k,g);i.preventDefault()}else{if(k&&j.hasClass("js-createmenu-containerchooser")){e.showSpinner({size:"small",showLabel:false,context:b(this).parent("li")});e.emitP("contentType",k,h).always(function(){e.hideSpinner()});i.preventDefault()}}});e.flatFind(c,".js-use-small-menu").click(function(g){e.data.smallView=true;e.emit("toggleView",true,e.data);g.preventDefault()});e.flatFind(c,".js-use-large-menu").click(function(g){e.data.smallView=false;e.emit("toggleView",false,e.data);g.preventDefault()});this.content=c;this.data=this.data||d;if(e.currentContainerType&&e.currentContainerID){$j(c).find("a.js-container-context").each(function(){$j(this).querystring("containerType="+e.currentContainerType+"&containerID="+e.currentContainerID)})}f.emitSuccess();return f};a.flatFind=function(d,c){return d.find(c).andSelf().filter(c)};a.updateCurrentContainer=function(){var c=this;if(containerType&&containerID&&(typeof c.currentContainerType=="undefined"||typeof c.currentContainerID=="undefined")){c.currentContainerID=containerID;c.currentContainerType=containerType}}});define("apps/navbar/menu/create/views/type_chooser_view",function(){return jive.Navbar.Menu.Create.TypeChooserView});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateView=jive.AbstractView.extend(function(a){var c=jQuery;var b;this.render=function(){var f=new jive.conc.Promise();var d=this;var e=this;d.emitP("fetch").addCallback(function(g){e.showQuickView(g)});return f};this.showQuickView=function(i){var e=this;var k=new jive.conc.Promise();var g=e.separateScripts(i.body),f=g[0],d=g[1],j=(f.match(/data-title\s*=\s*(['"])(.+?)\1/)||[])[2]||"",h;j=c("<div/>",{html:j}).text();h=c(jive.nav.menu.create.quick({title:j,body:f}));h.lightbox_me({closeSelector:".close",closeClick:false,closeEsc:false,destroyOnClose:true,initialFocusSelector:"input[type=text]:first",additionalFocusSelectors:"div[contenteditable]",closeFocusSelector:"#navCreate",onLoad:function(){d();k.emitSuccess()},onClose:function(){h.trigger("lightboxclose");delete e.content}});e.content=h}});define("apps/navbar/menu/create/views/quick_create_view",function(){return jive.Navbar.Menu.Create.QuickCreateView});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.ContainerChooserView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Navbar.Menu.Create;this.getContent=function(){return this.content};this.getClass=function(){return"j-choose-container"};this.render=function(){var e=new jive.conc.Promise(),d=this;this.emitP("render").addCallback(function(h){var f,i,j,g=$j.deparam.querystring();if(g.fromQ){h.fromQ=g.fromQ}d.content=c(jive.placepicker.containers(h));d.content.find(".back").one("click",function(k){d.emit("back");k.preventDefault()});d.content.filter(".j-menu-quick-bottomlink").one("click",function(k){d.emit("browse",h);k.preventDefault()});i=d.flatFind(d.content,".j-places-list");j=new jive.Placepicker.ContainerSearchView(d.flatFind(d.content,"input[name=container-filter]"),i);d.proxyListener(j,"search");e.emitSuccess()});return e};a.flatFind=function(e,d){return e.find("*").andSelf().filter(d)}});define("apps/navbar/menu/create/views/container_chooser_view",function(){return jive.Navbar.Menu.Create.ContainerChooserView});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateSource=jive.oo.Class.extend(function(a){this.fetch=function(b,d){var c=d||new jive.conc.Promise();$j.get(b,function(e){c.emitSuccess({body:e})});return c}});define("apps/navbar/menu/create/models/quick_create_source",function(){return jive.Navbar.Menu.Create.QuickCreateSource});
;
jive.namespace("Navbar.Menu.Create");define("apps/navbar/menu/create/models/create_source",["apps/shared/models/rest_service"],function(a){jive.Navbar.Menu.CreateSource=a.extend(function(b){b.resourceType=b.pluralizedResourceType="createmenu"});return jive.Navbar.Menu.CreateSource});
;
jive.namespace("Placepicker");define("apps/placepicker/models/suggested_containers_source",["apps/shared/models/rest_service"],function(a){jive.Placepicker.SuggestedContainersSource=a.extend(function(b,c){b.resourceType="container";b.init=function(d){c.init.call(this,d);$j.extend(this.defaultParams,{containerType:d.containerType,containerID:d.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});return jive.Placepicker.SuggestedContainersSource});
;
// This file was automatically generated from menu.soy.
// Please don't edit this file by hand.

goog.provide('jive.nav.menu.generic');
goog.provide('jive.nav.menu.link');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.nav.menu.generic = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul>');
  var linkList4 = opt_data.links;
  var linkListLen4 = linkList4.length;
  for (var linkIndex4 = 0; linkIndex4 < linkListLen4; linkIndex4++) {
    var linkData4 = linkList4[linkIndex4];
    if (linkData4.visible) {
      jive.nav.menu.link(linkData4, output);
    }
  }
  if (opt_data.lastLink && opt_data.lastLink.visible) {
    jive.nav.menu.link(opt_data.lastLink, output);
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.link = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li', (opt_data.itemCss) ? ' class="' + soy.$$escapeHtml(opt_data.itemCss) + '"' : '', '><a id="', soy.$$escapeHtml(opt_data.id), '" href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url)), '"', (opt_data.urlParams && opt_data.urlParams.contentType) ? ' data-content-type="' + soy.$$escapeHtml(opt_data.urlParams.contentType) + '" ' : '', (opt_data.headingKey) ? ' data-heading-key="' + soy.$$escapeHtml(opt_data.headingKey) + '" ' : '', (opt_data.linkCss) ? 'class="' + soy.$$escapeHtml(opt_data.linkCss) + '"' : '', '>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.nameKey),[])), '</a></li>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Navbar.Menu.Custom");jive.Navbar.Menu.Custom.View=jive.AbstractView.extend(function(a,b){this.init=function(d,f,e){var c=this;c.$menu=$j(f);c.$button=$j(d);c.menuOpts=$j.extend({container:d},e);c.popoverOpen=false;c.$button.click(function(g){if(!c.popoverOpen){c.emitP("toggle").addCallback(function(h){c.data=h||c.data;c.openPopover()}).always(function(){c.hideSpinner();var h=c.getContent();if(h&&h.length){jive.Accessibility.focusIn(h)}})}if(!$j.contains(c.$menu[0],g.target)){g.preventDefault()}})};a.openPopover=function(){var c=this;if(!c.popoverOpen){c.$button.find("a").addClass("active");c.$menu.popover($j.extend({context:c.$button,flip:false,hoverSelection:true,onClose:function(){c.$button.find("a").removeClass("active");c.popoverOpen=false;c.$menu.find("div.js-onboarding-tip").remove()},onLoad:function(){c.$menu.trigger("navbarPopoverLoad")}},c.menuOpts));c.popoverOpen=true}}});define("apps/navbar/menu/custom/views/custom_view",function(){return jive.Navbar.Menu.Custom.View});
;
jive.namespace("Navbar.Menu.Custom");jive.Navbar.Menu.Custom.Main=jive.Navbar.Menu.Main.extend(function(a,b){this.init=function(d,f,e){var c=this;b.init.call(this,d,f,e)};a.buildListView=function(c,e,d){return new jive.Navbar.Menu.Custom.View(c,e,d)};a.buildItemSource=function(){return null}});define("apps/navbar/menu/custom/main",function(){return jive.Navbar.Menu.Custom.Main});
;
// This file was automatically generated from appinstancemenu.soy.
// Please don't edit this file by hand.

goog.provide('jive.nav.menu.apps.instances.computeWidthIcon');
goog.provide('jive.nav.menu.apps.instances.computeWidthIcon__Cce8');
goog.provide('jive.nav.menu.apps.instances.content');
goog.provide('jive.nav.menu.apps.instances.renderAppInstanceLink');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.soy.i18nHelper');


jive.nav.menu.apps.instances.content = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-pop-row j-rc7 j-rc-none-bottom"><h2 class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.apps.subTitle'),[])), '</h2></div><div id="j-quick-launch-apps" class="j-nav-menu-scrollable js-nav-menu-scrollable">');
  if (opt_data.links && opt_data.links.length > 0) {
    output.append('<ul id="j-quick-launch-apps-list" class="clearfix ');
    jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count: opt_data.links.length}, output);
    output.append('">');
    var linkList12 = opt_data.links;
    var linkListLen12 = linkList12.length;
    for (var linkIndex12 = 0; linkIndex12 < linkListLen12; linkIndex12++) {
      var linkData12 = linkList12[linkIndex12];
      jive.nav.menu.apps.instances.renderAppInstanceLink({appUUID: linkData12.appUUID, url: linkData12.url, largeIconSrc: linkData12.largeIconSrc, smallIconSrc: linkData12.iconSrc, iconSize: opt_data.links.length <= 9 ? 128 : 48, title: linkData12.displayTitle, blockedAppInstance: linkData12.blockedAppInstance}, output);
    }
    output.append('</ul>');
  } else {
    output.append('<div class="j-no-apps-installed j-empty-view"><div class="j-empty-container"><div class="j-ui-elem jive-icon-appsmarket"></div><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('appframework.app.name.plural.capitalized'),['Apps'])), '</h2><p class="font-color-meta"><strong>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.apps.market.no.apps'),['There are currently no apps installed.'])), '</strong></p><div class="j-divider"></div><p>');
    jive.shared.soy.i18nHelper({i18nKey: 'nav.bar.apps.market.no.apps.expound', arg0: '<a class="js-launch-app-market" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.apps.market.catalog.title'),[])) + '<span class="j-ui-elem j-cta-arrow"></span></a>', noAutoEscape: true}, output);
    output.append('</p></div></div>');
  }
  output.append('</div>');
  if (opt_data.appsMarketEnabled) {
    output.append('<div id="app-market-links" class="j-pop-row j-last"><ul id="j-app-market-nav" class="');
    jive.nav.menu.apps.instances.computeWidthIcon__Cce8({count: opt_data.links.length}, output);
    output.append('"><li><a id="app-launch-your-apps" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.apps.market.manage.title'),[])), '</a></li><li><a id="app-launch-market" href="#">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.apps.market.catalog.title'),[])), '</a></li></ul></div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.apps.instances.computeWidthIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.count == 0) ? 'app-list-cols-0 app-list-lg-icon' : (opt_data.count == 1) ? 'app-list-cols-1 app-list-lg-icon' : (opt_data.count <= 4) ? 'app-list-cols-2 app-list-lg-icon' : (opt_data.count <= 9) ? 'app-list-cols-3 app-list-lg-icon' : (opt_data.count <= 16) ? 'app-list-cols-4 app-list-sm-icon' : (opt_data.count <= 25) ? 'app-list-cols-5 app-list-sm-icon' : 'app-list-cols-6 app-list-sm-icon');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.apps.instances.renderAppInstanceLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="j-quick-launch-app-item"><a ', (opt_data.appUUID) ? 'id="app-ql-' + soy.$$escapeHtmlAttribute(opt_data.appUUID) + '"' : '', ' href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.url)), '" ', (opt_data.blockedAppInstance) ? 'class="j-quick-launch-app-warn-alert"' : '', '><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.iconSize == 48 ? opt_data.smallIconSrc : opt_data.largeIconSrc)), '" width="', soy.$$escapeHtmlAttribute(opt_data.iconSize ? opt_data.iconSize : '128'), '" height="', soy.$$escapeHtmlAttribute(opt_data.iconSize ? opt_data.iconSize : '128'), '" class="js-app-icon"/><div class="j-app-title">', (opt_data.blockedAppInstance) ? '<span class="jive-icon-med  jive-icon-warn"></span>' : '', soy.$$escapeHtml(opt_data.title), '</div></a></li>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.apps.instances.computeWidthIcon__Cce8 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.count == 0) ? 'app-list-cols-0 app-list-lg-icon' : (opt_data.count == 1) ? 'app-list-cols-1 app-list-lg-icon' : (opt_data.count <= 4) ? 'app-list-cols-2 app-list-lg-icon' : (opt_data.count <= 9) ? 'app-list-cols-3 app-list-lg-icon' : (opt_data.count <= 16) ? 'app-list-cols-4 app-list-sm-icon' : (opt_data.count <= 25) ? 'app-list-cols-5 app-list-sm-icon' : 'app-list-cols-6 app-list-sm-icon');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Apps");jive.AppMarketLaunch=$Class.extend({init:function(a){var b=this;this.appLaunchView=a.appLaunchView},showAppMarket:function(a){require(["appContainer"],function(b){b.handleMarketContext(a)})},addApp:function(b){var a=$j(jive.nav.menu.apps.instances.renderAppInstanceLink({appLink:b}));this.appLaunchView.showLaunchPad();$j(this.appLaunchView.$menu).find("#j-quick-launch-apps-list").fadeIn(200).append(a)}});
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.Main=jive.Navbar.Menu.Main.extend(function(a,c){var b=jive.Navbar.Menu.Apps.Instances;this.init=function(e,g,f){c.init.call(this,e,g,f);var d=this;require(["appContainer"],function(h){h.getMarketEvents().addListener("app_install",function(m,p){var o=p&&p.offset();if($j.isArray(m)){for(var n=0,k=m.length;n<k;++n){j(m[n])}}else{j(m)}function j(i){jive.Navbar.Menu.Apps.animatedInstall(i,o).addErrback(function(){d.invalidate();var l=jive.apps.container.renderMessage({messageKey:"appframework.app.installed"});$j("<p/>").html(l).message({style:"info"})})}});h.getMarketEvents().addListener("show_app_detail",function(i){if(i&&i.appUUID){var j=jive.app.url({path:"/apps/market/marketapp/"})+i.appUUID;window.open(j)}})});jive.switchboard.addListener("apps_market.apps_have_changed",function(){d.invalidate()})};this.buildListView=function(d,f,e){return new b.ListView(d,f,e)};this.buildItemSource=function(){return new jive.AppInstanceSource()};a.sourceParams=function(){return{ts:new Date().getTime()}}});define("apps/navbar/menu/apps/instances/main",function(){return jive.Navbar.Menu.Apps.Instances.Main});
;
(function(b){b.path={};var a={rotate:function(f,g){var e=g*3.141592654/180;var h=Math.cos(e),d=Math.sin(e);return[h*f[0]-d*f[1],d*f[0]+h*f[1]]},scale:function(c,d){return[d*c[0],d*c[1]]},add:function(d,c){return[d[0]+c[0],d[1]+c[1]]},minus:function(d,c){return[d[0]-c[0],d[1]-c[1]]}};b.path.bezier=function(g){g.start=b.extend({angle:0,length:0.3333},g.start);g.end=b.extend({angle:0,length:0.3333},g.end);this.p1=[g.start.x,g.start.y];this.p4=[g.end.x,g.end.y];var d=a.minus(this.p4,this.p1);var e=a.scale(d,g.start.length);e=a.rotate(e,g.start.angle);this.p2=a.add(this.p1,e);var c=a.scale(d,-1);var f=a.scale(c,g.end.length);f=a.rotate(f,g.end.angle);this.p3=a.add(this.p4,f);this.f1=function(h){return(h*h*h)};this.f2=function(h){return(3*h*h*(1-h))};this.f3=function(h){return(3*h*(1-h)*(1-h))};this.f4=function(h){return((1-h)*(1-h)*(1-h))};this.css=function(k){var i=this.f1(k),n=this.f2(k),l=this.f3(k),j=this.f4(k);var h=this.p1[0]*i+this.p2[0]*n+this.p3[0]*l+this.p4[0]*j;var m=this.p1[1]*i+this.p2[1]*n+this.p3[1]*l+this.p4[1]*j;return{top:m+"px",left:h+"px"}}};b.path.arc=function(d){for(var c in d){this[c]=d[c]}this.dir=this.dir||1;while(this.start>this.end&&this.dir>0){this.start-=360}while(this.start<this.end&&this.dir<0){this.start+=360}this.css=function(g){var f=this.start*(g)+this.end*(1-(g));f=f*3.1415927/180;var e=Math.sin(f)*this.radius+this.center[0];var h=Math.cos(f)*this.radius+this.center[1];return{top:h+"px",left:e+"px"}}};b.fx.step.path=function(e){var d=e.end.css(1-e.pos);for(var c in d){e.elem.style[c]=d[c]}}})(jQuery);
;
jive.namespace("Navbar.Menu.Apps.Instances");jive.Navbar.Menu.Apps.Instances.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(f){this.stripDomain(f);var e=b(jive.nav.menu.apps.instances.content({links:f,appsMarketEnabled:window.appsMarketEnabled}));this.$menu.html(e);this.repositionPopover();var g=new jive.AppMarketLaunch({appLaunchView:this});window.appsMarketLaunchPad=g;var c=function(h){window.location=jive.app.url({path:"/apps/market"})};b(this.$menu).find("#app-launch-market").unbind("click").click(c);b(this.$menu).find(".js-launch-app-market").unbind("click").click(c);b(this.$menu).find("#app-launch-your-apps").unbind("click").click(function(h){window.location=jive.app.url({path:"/apps/market/yourApps"})});var d=this;jive.switchboard.addListener("at",function(i,h){d.animateInstall(i,h)})};this.showLaunchPad=function(){var c=this;c.$button.click()};this.toggleButton=function(d){var c=this;if(d>0){c.$button.show()}else{c.$button.hide()}};a.stripDomain=function(d){var e=/^https?:\/\/.+?\//;if(d&&d.length){for(var c=0;c<d.length;++c){d[c].url=d[c].url.replace(e,"/");d[c].iconSrc=d[c].iconSrc.replace(e,"/");d[c].largeIconSrc=d[c].largeIconSrc.replace(e,"/");d[c].favIconSrc=d[c].favIconSrc.replace(e,"/")}}}});define("apps/navbar/menu/apps/instances/views/instance_list",function(){return jive.Navbar.Menu.Apps.Instances.ListView});
;
define("apps/shared/models/app_instance_source",["apps/shared/models/rest_service"],function(a){jive.AppInstanceSource=a.extend(function(b){b.init=function(c){this.resourceType="instance";this.pluralizedResourceType="instances";this.RESOURCE_ENDPOINT=jive.api.apps(this.pluralizedResourceType)}});return jive.AppDashboardSource});
;
// This file was automatically generated from welcome.soy.
// Please don't edit this file by hand.

goog.provide('jive.welcome.activityStreamNavItem');
goog.provide('jive.welcome.editPageMessage');
goog.provide('jive.welcome.getStartedNavLink');
goog.provide('jive.welcome.homeSideNav');
goog.provide('jive.welcome.homeSideNavLink');
goog.provide('jive.welcome.layoutUpgradeMessage');
goog.provide('jive.welcome.main');
goog.provide('jive.welcome.navConfigMenuPopover');
goog.provide('jive.welcome.newActivityStreamItem');
goog.provide('jive.welcome.onboardingNavProgress');
goog.provide('jive.welcome.pinnedMessage');
goog.provide('jive.welcome.simplifiedMain');
goog.provide('jive.welcome.streamNameEditForm');
goog.provide('jive.welcome.updateIndicator');
goog.provide('jive.welcome.welcomeDynamicPane');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.announcements.list');
goog.require('jive.invitation.inviteLink');
goog.require('jive.invite.jsInit');
goog.require('jive.shared.soy.resourceInlineJs');
goog.require('jive.skin.template.main');
goog.require('jive.try_jive.tryJiveLink');


jive.welcome.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param8 = new soy.StringBuilder('<div class="j-layout j-layout-sl clearfix j-contained j-rc5"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.nav'),[])), '">');
  jive.welcome.homeSideNav({homeNavHelper: opt_data.homeNavHelper, selectedLinkID: 'jive-nav-link-dashboard'}, param8);
  param8.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');
  jive.welcome.welcomeDynamicPane(opt_data, param8);
  param8.append('</div></div></div><!-- END main body -->');
  jive.skin.template.main(soy.$$augmentMap(opt_data.templateView, {title: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('userbar.welcome.gtitle'),[])), canonicalUrl: opt_data.jiveURL, selectedLinkID: 'jive-nav-link-home', bodyClass: ' j-body-welcome j-body-home', bodyContent: param8.toString(), headContent: '<link rel="stylesheet" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-widgets.css'))) + '" type="text/css" media="all" /><meta name="description" content=' + soy.$$escapeHtmlAttributeNospace(opt_data.communityMetaDescription) + '>'}), output);
  return opt_sb ? '' : output.toString();
};


jive.welcome.simplifiedMain = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param31 = new soy.StringBuilder();
  jive.welcome.welcomeDynamicPane(soy.$$augmentMap(opt_data, {selectedLinkID: 'jive-nav-link-activity'}), param31);
  jive.skin.template.main(soy.$$augmentMap(opt_data.templateView, {title: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('userbar.welcome.gtitle'),[])), canonicalUrl: opt_data.jiveURL, selectedLinkID: 'jive-nav-link-home', bodyClass: 'j-body-welcome j-body-home', bodyContent: param31.toString(), headContent: '<link rel="stylesheet" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-widgets.css'))) + '" type="text/css" media="all" /><meta name="description" content=' + soy.$$escapeHtmlAttributeNospace(opt_data.communityMetaDescription) + '>'}), output);
  return opt_sb ? '' : output.toString();
};


jive.welcome.welcomeDynamicPane = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: 'if (!widgetContainer) {var widgetContainer = new jive.widgets.Container({\'widgetType\': \'' + soy.$$escapeHtml(opt_data.widgetTypeKey) + '\', \'renderWidgetAction\': \'' + soy.$$escapeHtml(jive.soy.func.buildUrl('/render-widget.jspa')) + '\', \'containerID\': \'' + soy.$$escapeHtml(opt_data.place.id) + '\', \'containerType\': \'' + soy.$$escapeHtml(opt_data.place.objectType) + '\'}); define(\'widgetContainer\',widgetContainer);}function toggleWidgetPanel() {var spinner = new jive.loader.LoaderView(); $j(document.body).addClass(\'jive-widget-progresscursor\').addClass(\'jive-body-widget-customizing\'); $j("#jive-widgets-panel-loading").show(); spinner.appendTo($j("#jive-widgets-panel-loading")); $j("#jive-widget-container").safelyLoad(\'' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl('customize-container.jspa',{'containerType':opt_data.place.objectType,'containerID':opt_data.place.id})) + '\', { cache: false }, function() {$j("#jive-widgets-panel-loading").hide(); spinner.destroy(); $j("#jive-widgets-panel").fadeIn(500); $j("#jive-widgets-warning").fadeIn(500); $j(document.body).removeClass(\'jive-widget-progresscursor\');' + ((! opt_data.customizeMessageSeen) ? '$j(\'#customize-message\').slideDown();' : '') + '});}require([\'apps/places/actions/main\', \'apps/places/manage/main\', \'documentReady\'], function(Actions, ManageMain) {new Actions(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.place).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '); new ManageMain(' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.place).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', {canManageAnnouncements: ' + ((opt_data.canManageAnnouncements) ? 'true' : 'false') + ', i18n: ' + soy.$$filterNoAutoescape(JSON.stringify((function() { var map = {}; var pairs = [['startFollowing', jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix + '.startFollow.desc'),[])], ['stopFollowing', jive.i18n.i18nText(jive.i18n.getMsg(opt_data.place.placeI18nKeyPrefix + '.stopFollow.desc'),[])], ['followError', jive.i18n.i18nText(jive.i18n.getMsg('global.follow.error'),[])]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '}); widgetContainer.renderAll(); $j(\'#customize-message #dismiss-link\').click(dismissCustomizeMessage); $j(\'#js-layout-upgrade-link\').click(function() { dismissLayoutUpgradeMessage(); return false; }); $j(\'#js-layout-upgrade-change-link\').click(function() { dismissLayoutUpgradeMessage(); toggleWidgetPanel(); return false; }); $j(\'.widget-remove-link\').live(\'click\', function() { removeWidgetFrame(this); return false; }); $j(\'.widget-edit-link\').live(\'click\', function() { editWidgetFrame(this); return false; }); $j(\'.widget-dismiss-link\').live(\'click\', function() { dismissWidgetMessage(this); return false; }); var createQuick = new jive.Navbar.Menu.CreateQuick.Main(\'a.js-create-quick-link, a:has(.js-create-quick-link)\');' + ((opt_data.customizeNow) ? 'toggleWidgetPanel();' : '') + '}); function dismissCustomizeMessage() {$j(\'#customize-message\').slideUp(); if ($j(\'#customize-message\').find(\'#dont-display-message\').prop(\'checked\')) {var userSource = new jive.Browse.User.ItemSource(); userSource.setUserProperty({ userID: \'current\', propName: \'jive.customizeWidgetMsg.closed\', propValue: \'true\' });}return false;}function dismissLayoutUpgradeMessage() {$j(\'#js-layout-upgrade\').slideUp(); var containerSource = new jive.Browse.Container.ItemSource(); containerSource.removeContainerProperty({ containerType: ' + soy.$$escapeHtml(opt_data.place.objectType) + ', containerID: ' + soy.$$escapeHtml(opt_data.place.id) + ', propName: \'jive.upgrade.widgetLayoutInvalid\'});}function dismissWidgetMessage(link) {$j(link).closest(\'.widget-message\').slideUp(); var prop = $j(link).attr(\'data-property\'); if (prop) {var userSource = new jive.Browse.User.ItemSource(); userSource.setUserProperty({ userID: \'current\', propName: prop, propValue: \'true\' });}}function removeWidgetFrame(button) {var frameID = widgets.getWidgetFrameID(button); if (frameID) {widgets.removeWidgetFrame(frameID);}}function editWidgetFrame(button) {var frameID = widgets.getWidgetFrameID(button); if (frameID) {widgets.editWidgetFrame(frameID);}}'}, output);
  if (opt_data.invitationLink) {
    jive.invite.jsInit({container_id: opt_data.place.id, container_name: opt_data.place.name, container_type: opt_data.place.placeI18nKeyPrefix, company: opt_data.invitationLink.companyName, domains: opt_data.invitationLink.domainsAsJSON, allowEmail: opt_data.invitationLink.enabled, allowUsers: true, canInvitePartners: opt_data.place.visibleToPartner && opt_data.invitationLink.canInvitePartners, canInviteJustPartners: opt_data.invitationLink.canInviteJustPartners, canInvitePreprovisioned: opt_data.invitationLink.canInvitePreprovisioned, invitePreprovisionedDomainRestricted: opt_data.invitationLink.invitePreprovisionedDomainRestricted, maxInvite: opt_data.invitationLink.maxInvitationCount, invitePeriod: opt_data.invitationLink.invitationPeriodInHours, showNow: opt_data.showInviter, message: opt_data.defaultInviteMessage, trial: opt_data.invitationLink.trial, trigger: '#jive-place-link-actions-invite', trackingID: ''}, output);
  }
  jive.announcements.list({announcements: opt_data.announcements, showDismiss: false}, output);
  if (opt_data.canManageContainer) {
    if (opt_data.showLayoutUpgradeMessage) {
      jive.welcome.layoutUpgradeMessage(null, output);
    }
    if (! opt_data.customizeMessageSeen) {
      jive.welcome.editPageMessage(null, output);
    }
  }
  output.append('<div id="jive-widgets-panel-loading" style="display: none"></div><div id="jive-widget-container" role="main" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.overview'),[])), '"><div id="jive-widget-content" class="clearfix">', soy.$$filterNoAutoescape(opt_data.widgetMarkup), '</div></div>', (opt_data.canManageAnnouncements) ? '<div class="jive-modal" id="jive-modal-announcements"><header><h2 class="jive-modal-title jive-modal-title-manage-announcements">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.system.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-add-announcement" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.add.title'),[])) + '</h2><h2 class="jive-modal-title jive-modal-title-edit-announcement" style="display: none">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('announcement.manage.edit.title'),[])) + '</h2></header><a href="#" class="j-modal-close-top close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])) + '  <span class="j-close-icon j-ui-elem" role="img"></span></a><div id="announcements-modal"></div></div>' : '', soy.$$filterNoAutoescape(''));
  return opt_sb ? '' : output.toString();
};


jive.welcome.layoutUpgradeMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="customize-message jive-info-box clearfix" id="js-layout-upgrade" aria-live="polite" aria-atomic="true"><a href="#" id="js-layout-upgrade-link" style="float: right">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.dismiss.link'),[])), '</a><h5>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.layout.upgrade.header'),[])), '</h5><p class="welcome-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.layout.upgrade.text'),[])), '&nbsp;<a href="#" id="js-layout-upgrade-change-link">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.layout.upgrade.change.link'),[])), '</a></p></div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.editPageMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="customize-message clearfix" id="customize-message" style="display: none"><h5>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.editpagetitle'),[])), '</h5><p class="welcome-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.editinfo'),[])), '</p><div class="customize-display clearfix"><a href="#" id="dismiss-link" class="j-btn-global">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.dismiss.link'),[])), '</a><label for="dont-display-message"><input type="checkbox" id="dont-display-message">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('welcome.dontshowmsg'),[])), '</label></div><div style="float:right"></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.homeSideNav = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul id="j-home-side-nav" class="j-homenav">');
  if (! opt_data.homeNavHelper.partner) {
    jive.welcome.homeSideNavLink(soy.$$augmentMap(opt_data.homeNavHelper.dashboardLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.dashboardLink.id) ? 'true' : '', canPin: opt_data.homeNavHelper.canPin, pinned: opt_data.homeNavHelper.canPin && opt_data.homeNavHelper.pinnedLinkID == opt_data.homeNavHelper.dashboardLink.id, visible: opt_data.homeNavHelper.dashboardLink.visible}), output);
  }
  jive.welcome.homeSideNavLink(soy.$$augmentMap(opt_data.homeNavHelper.activityStreamLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.activityStreamLink.id) ? 'true' : '', canPin: opt_data.homeNavHelper.canPin, pinned: opt_data.homeNavHelper.canPin && opt_data.homeNavHelper.pinnedLinkID == opt_data.homeNavHelper.activityStreamLink.id}), output);
  if (! opt_data.homeNavHelper.anonymous) {
    output.append('<li id="j-as-nav-links" class="j-streamlinks"><ul class="j-custom-streams-nav" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.custom'),[])), '">');
    if (opt_data.homeNavHelper.activityStreams) {
      var streamList180 = opt_data.homeNavHelper.activityStreams;
      var streamListLen180 = streamList180.length;
      for (var streamIndex180 = 0; streamIndex180 < streamListLen180; streamIndex180++) {
        var streamData180 = streamList180[streamIndex180];
        jive.welcome.activityStreamNavItem(soy.$$augmentMap(streamData180, {id: streamData180.id, name: streamData180.name, selected: streamData180.selected, pollingEnabled: opt_data.homeNavHelper.pollingEnabled, pinnedLinkID: opt_data.homeNavHelper.pinnedLinkID, selectedLinkID: opt_data.selectedLinkID}), output);
      }
    }
    jive.welcome.newActivityStreamItem({disabled: opt_data.homeNavHelper.activityStreams.length >= opt_data.homeNavHelper.maxCustomStreams}, output);
    output.append('</ul></li>');
    if (! opt_data.homeNavHelper.anonymous) {
      jive.welcome.homeSideNavLink(soy.$$augmentMap(opt_data.homeNavHelper.inboxLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.inboxLink.id) ? 'true' : '', pollingEnabled: opt_data.homeNavHelper.pollingEnabled, canPin: opt_data.homeNavHelper.canPin, pinned: opt_data.homeNavHelper.canPin && opt_data.homeNavHelper.pinnedLinkID == opt_data.homeNavHelper.inboxLink.id}), output);
    }
    jive.welcome.homeSideNavLink(soy.$$augmentMap(opt_data.homeNavHelper.actionsLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.actionsLink.id) ? 'true' : '', pollingEnabled: opt_data.homeNavHelper.pollingEnabled, canPin: opt_data.homeNavHelper.canPin, pinned: opt_data.homeNavHelper.canPin && opt_data.homeNavHelper.pinnedLinkID == opt_data.homeNavHelper.actionsLink.id}), output);
    jive.welcome.homeSideNavLink(soy.$$augmentMap(opt_data.homeNavHelper.moderationLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.moderationLink.id) ? 'true' : '', pollingEnabled: opt_data.homeNavHelper.pollingEnabled, canPin: false, pinned: false}), output);
  }
  var linkList218 = opt_data.homeNavHelper.customLinks;
  var linkListLen218 = linkList218.length;
  for (var linkIndex218 = 0; linkIndex218 < linkListLen218; linkIndex218++) {
    var linkData218 = linkList218[linkIndex218];
    jive.welcome.homeSideNavLink(soy.$$augmentMap(linkData218, {selected: (opt_data.selectedLinkID == linkData218.id) ? 'true' : '', pollingEnabled: opt_data.homeNavHelper.pollingEnabled, canPin: false, pinned: false}), output);
  }
  jive.welcome.getStartedNavLink(soy.$$augmentMap(opt_data.homeNavHelper.onboardingLink, {selected: (opt_data.selectedLinkID == opt_data.homeNavHelper.onboardingLink.id) ? 'true' : '', canPin: opt_data.homeNavHelper.canPin, pinned: opt_data.homeNavHelper.canPin && opt_data.homeNavHelper.pinnedLinkID == opt_data.homeNavHelper.onboardingLink.id, visible: opt_data.homeNavHelper.onboardingLink.visible}), output);
  output.append('</ul>');
  jive.shared.soy.resourceInlineJs({code: '$j(function() {require([\'apps/home/home_nav_controller\'], function(HomeNavController) {jive.HomeNav.GlobalController = new HomeNavController({selectedLinkID: \'' + soy.$$escapeHtml(opt_data.selectedLinkID) + '\', pollingEnabled: ' + soy.$$escapeHtml(opt_data.homeNavHelper.pollingEnabled) + ', canPin: ' + soy.$$escapeHtml(opt_data.homeNavHelper.canPin) + ', maxCustomStreams: ' + soy.$$escapeHtml(opt_data.homeNavHelper.maxCustomStreams) + ', showOnbIntroModal: ' + soy.$$escapeHtml(opt_data.homeNavHelper.showOnbIntroModal) + ', sysDefaultHomeNavView: \'' + soy.$$escapeHtml(opt_data.homeNavHelper.systemDefaultHomeNavView) + '\', instanceName: \'' + soy.$$escapeHtml(opt_data.homeNavHelper.instanceName) + '\', userOriginType: \'' + soy.$$escapeHtml(opt_data.homeNavHelper.userOriginType) + '\', displayData: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.homeNavHelper.displayData).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '});});});'}, output);
  if (opt_data.homeNavHelper.invitationLink && opt_data.homeNavHelper.invitationLink.visibleButNotToExternalContributors) {
    jive.invitation.inviteLink(soy.$$augmentMap(opt_data.homeNavHelper.invitationLink, {containerId: opt_data.homeNavHelper.invitationLink.communityId, containerType: opt_data.homeNavHelper.invitationLink.communityObjectType, containerName: opt_data.homeNavHelper.invitationLink.communityName, allowUsers: false, maxInvite: opt_data.homeNavHelper.invitationLink.maxInvitationCount, invitePeriod: opt_data.homeNavHelper.invitationLink.invitationPeriodInHours, trackingID: 'sidebar'}), output);
  } else if (opt_data.homeNavHelper.tryJiveLink && opt_data.homeNavHelper.tryJiveLink.visible) {
    jive.try_jive.tryJiveLink(opt_data.homeNavHelper.tryJiveLink, output);
  }
  output.append('<!-- Powered by JIVE - mandated element  --><div class="j-poweredby-activity" id="j-pbj-act" role=\'img\' title=\'', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.poweredby'),[])), '\'></div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.streamNameEditForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="j-js-display-name-edit-controls j-edit-name j-form"><label for="', soy.$$escapeHtmlAttribute(opt_data.streamName), '-input-id" class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.name'),[])), '</label><input type="text" maxlength="36" class="j-stream-name-input j-js-stream-name-input j-rc3" value="', soy.$$escapeHtmlAttribute(opt_data.streamName), '" id="', soy.$$escapeHtmlAttribute(opt_data.streamName), '-input-id"/></form>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.homeSideNavLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.visible) {
    output.append('<li id="', soy.$$escapeHtmlAttribute(opt_data.id), '" class="j-js-side-nav-item j-homenav-item j-rc5 ', (opt_data.selected) ? 'selected' : '', ' ', (opt_data.pinned) ? 'pinned' : '', '" data-source="', soy.$$escapeHtmlAttribute(opt_data.source), '" ', (opt_data.hidden) ? 'style="display:none;"' : '', '><span class="jive-icon-med ', soy.$$escapeHtmlAttribute(opt_data.iconCss), ' j-homenav-icon"></span><a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url)), '" ', (opt_data.titleKey) ? 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.titleKey),[])) + '"' : '', ' class="j-homenav-link j-js-side-nav-link ', soy.$$escapeHtmlAttribute(opt_data.linkCss), '"><span class="nav-link lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.nameKey),[])), '</span>', (opt_data.canPin) ? '<span class="j-js-pin-stream jive-icon-sml j-stream-pin jive-glyph-pin-dark" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.home.set.default'),[])) + '"></span>' : '');
    if (opt_data.countType && opt_data.pollingEnabled) {
      jive.welcome.updateIndicator({type: opt_data.countType, count: 0, extraCssClasses: 'j-sidenav-count'}, output);
    }
    output.append('</a></li>');
  }
  return opt_sb ? '' : output.toString();
};


jive.welcome.getStartedNavLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.visible) {
    output.append('<li id="', soy.$$escapeHtmlAttribute(opt_data.id), '" class="j-js-side-nav-item j-homenav-item j-rc5 ', (opt_data.selected) ? 'selected' : '', ' ', (opt_data.pinned) ? 'pinned' : '', '" data-source="', soy.$$escapeHtmlAttribute(opt_data.source), '" role="tab"><span class="jive-icon-med ', soy.$$escapeHtmlAttribute(opt_data.iconCss), ' j-homenav-icon"></span><a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url)), '" ', (opt_data.titleKey) ? 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.titleKey),[])) + '"' : '', ' class="j-homenav-link j-js-side-nav-link ', soy.$$escapeHtmlAttribute(opt_data.linkCss), '"><span class="nav-link lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.nameKey),[])), '</span>');
    jive.welcome.onboardingNavProgress({percentComplete: opt_data.viewData.percentComplete, totalSteps: opt_data.viewData.totalSteps, totalStepsComplete: opt_data.viewData.totalStepsComplete}, output);
    output.append('</a></li>');
  }
  return opt_sb ? '' : output.toString();
};


jive.welcome.onboardingNavProgress = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-onb-nav-progress" title=""><strong class="j-complete ', (opt_data.percentComplete == 0) ? ' font-color-j-highlight j-notstarted' : 'font-color-meta j-started', '">', soy.$$escapeHtml(opt_data.totalStepsComplete), '/', soy.$$escapeHtml(opt_data.totalSteps), '</strong><div class="j-onb-progress j-rc5" ', (opt_data.percentComplete == 0) ? ' style="display:none"' : 'style="display:block"', '><div class="j-progress-bar"><span class="j-index-holder"><span style="width: ', soy.$$escapeHtmlAttribute(soy.$$filterCssValue(opt_data.percentComplete)), '%;" class="j-index"> </span></span></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.activityStreamNavItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="jive-nav-link-', soy.$$escapeHtmlAttribute(opt_data.source), (opt_data.source != 'connections' && opt_data.source != 'watches') ? '-' + soy.$$escapeHtmlAttribute(opt_data.id) : '', '" data-streamid="', soy.$$escapeHtmlAttribute(opt_data.id), '" data-source="', soy.$$escapeHtmlAttribute(opt_data.source), '" class="j-js-side-nav-item j-js-as-nav-item j-homenav-item j-rc5 j-custom-stream-item ', (opt_data.selectedLinkID && (opt_data.source == 'connections' && opt_data.selectedLinkID == 'jive-nav-link-connections' || opt_data.source == 'watches' && opt_data.selectedLinkID == 'jive-nav-link-watches' || opt_data.source == 'custom' && opt_data.selectedLinkID == 'jive-nav-link-custom-' + opt_data.id)) ? 'selected' : '', ' ', (opt_data.pinnedLinkID && (opt_data.source == 'connections' && opt_data.pinnedLinkID == 'jive-nav-link-connections' || opt_data.source == 'watches' && opt_data.pinnedLinkID == 'jive-nav-link-watches' || opt_data.source == 'custom' && opt_data.pinnedLinkID == 'jive-nav-link-custom-' + opt_data.id)) ? 'pinned' : '', '" ><span class="jive-icon-med jive-icon-activity-pulse-active j-homenav-icon"></span><a href="', (opt_data.source == 'connections' || opt_data.source == 'watches') ? soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/activity?streamSource=' + opt_data.source)) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl('/activity?streamSource=' + opt_data.source + '&streamID=' + opt_data.id)), '" class="j-homenav-link j-custom-stream-link j-js-side-nav-link j-js-as-nav-link j-stream-link"><span class="nav-link lnk j-js-nav-stream-name">', soy.$$escapeHtml(opt_data.name), '</span>');
  if (opt_data.pollingEnabled) {
    jive.welcome.updateIndicator({type: 'gauge', count: 0}, output);
  }
  output.append('</a>', (opt_data.source == 'connections') ? '<span class="j-homenav-link j-custom-stream-link js-conns-display-name j-stream-link" style="display:none;"><span class="nav-link lnk">' + soy.$$escapeHtml(opt_data.name) + '</span></span>' : '', '<a href="#" class="j-done-building j-js-done-building">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.activitystream.builder.done'),[])), '</a><a href="#" class="j-js-stream-options j-homenav-options jive-icon-med jive-icon-gear" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.activitystream.builder.stream_options'),[])), '"></a></li>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.navConfigMenuPopover = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-homenav-options-menu j-nav-menu j-menu j-pop-main"><ul><li><a href=\'#\' class="j-js-edit-stream"><span class="jive-icon-sml jive-glyph-edit"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('home.nav.config.menu.edit'),[])), '</a></li>', (opt_data.canPin) ? '<li><a href=\'#\' class="j-js-pin-stream"><span class="jive-icon-sml jive-glyph-pin"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('home.nav.config.menu.pin'),[])) + '</a></li>' : '', (opt_data.canDelete) ? '<li><a href=\'#\' class="j-js-delete-stream"><span class="jive-icon-sml jive-glyph-delete"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('home.nav.config.menu.delete'),[])) + '</a></li>' : '', '</ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.newActivityStreamItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="jive-nav-link-new" data-streamid="new" class="j-js-side-nav-item j-js-as-nav-item j-homenav-item j-custom-stream-item', (opt_data.disabled) ? ' j-max-streams-reached font-color-meta-light' : '', '"><span class="j-enabled"><span class="jive-icon-sml jive-glyph-plus j-newstream-icon"></span><label id="jive-nav-link-new-label" class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.streams.new_stream_label'),[])), '</label><a href="#" class="j-homenav-link j-custom-stream-link j-js-edit-stream j-new-stream" aria-labelledby="jive-nav-link-new-label" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.streams.new_stream_label'),[])), '"><span class="nav-link lnk j-js-nav-stream-name font-color-meta" aria-hidden="true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.streams.new_stream'),[])), '</span></a></span><span class="j-disabled">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.streams.max_reached'),[])), '</span></li>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.pinnedMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.home.pinned.message'),[opt_data.streamName])), '</div>');
  return opt_sb ? '' : output.toString();
};


jive.welcome.updateIndicator = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.type == 'count') ? ' <span data-count="' + soy.$$escapeHtmlAttribute(opt_data.count) + '" tabindex="0" class="j-js-update-indicator j-update-count ' + ((opt_data.count > 50) ? 'fiftyplus' : '') + ' ' + ((opt_data.extraCssClasses) ? soy.$$escapeHtmlAttribute(opt_data.extraCssClasses) : '') + '" ' + ((opt_data.count == 0) ? 'style="display:none;"' : '') + '>' + ((opt_data.count > 50) ? '50+' : soy.$$escapeHtml(opt_data.count)) + '</span>' : (opt_data.type == 'gauge') ? '<span role="img" data-count="' + soy.$$escapeHtmlAttribute(opt_data.count) + '" class="j-js-update-indicator j-update-gauge jive-icon-med ' + ((opt_data.count < 10) ? 'jive-icon-activity-gauge-low' : (opt_data.count < 40) ? 'jive-icon-activity-gauge-med' : 'jive-icon-activity-gauge-high') + '" ' + ((opt_data.count == 0) ? 'style="display:none;"' : '') + ' title="' + ((opt_data.count < 10) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.lessthanten'),[])) : (opt_data.count < 40) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.tenplus'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.fiftyplus'),[]))) + '" aria-label="' + ((opt_data.count < 10) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.lessthanten'),[])) : (opt_data.count < 40) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.tenplus'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.gauge.fiftyplus'),[]))) + '" tabindex="0" ></span>' : '');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("ActivityStream");define("apps/activity_stream/models/fill_in_the_gap_request",["jquery/jquery.oo"],function(a){jive.ActivityStream.FillInTheGapRequest=a.extend({init:function(b){this.originalIDs=b.originalIDs;this.timestamp=b.timestamp;this.fullContent=b.fullContent;this.pageSize=b.pageSize}});return jive.ActivityStream.FillInTheGapRequest});
;
jive.namespace("ActivityStream");define("apps/activity_stream/models/full_replies_request",["jquery/jquery.oo"],function(a){jive.ActivityStream.FullRepliesRequest=a.extend({init:function(b){this.originalIDs=b.originalIDs}});return jive.ActivityStream.FullRepliesRequest});
;
jive.namespace("ActivityStream");define("apps/activity_stream/models/activity_stream_source",["apps/shared/models/rest_service","lib/jiverscripts/src/conc/promise","apps/activity_stream/models/rtc_source"],function(a,b,c){jive.ActivityStream.StreamSource=a.extend(function(d){d.resourceType="activity-stream";d.pluralizedResourceType=d.resourceType;jive.conc.observable(this);this.initializeView=function(g,j,i,e,l,k){var f=this.RESOURCE_ENDPOINT+"/initializeView",h={objectType:e||3,objectID:l||window._jive_current_user.ID,streamSource:g,streamID:j||0,filterType:i||["all"],timestamp:0};d.displayGenericErrorMessages=false;if(!k){k=new b()}return this.commonAjaxRequest(k,"POST",{url:f,data:JSON.stringify(h)}).addErrback(function(n,m){if(m==401||m==403||m==4026||m===0){location.reload()}}).always(function(){d.displayGenericErrorMessages=true})};this.list=function(f,g){var e=this.RESOURCE_ENDPOINT+"/list";d.displayGenericErrorMessages=false;if(!g){g=new b()}return this.commonAjaxRequest(g,"POST",{url:e,data:JSON.stringify(f)}).addErrback(function(i,h){if(h==401||h==403||h==4026||h===0){location.reload()}}).always(function(){d.displayGenericErrorMessages=true})};this.getMore=function(f){var e=this.RESOURCE_ENDPOINT+"/list/before";return this.commonAjaxRequest(new b(),"POST",{url:e,data:JSON.stringify(f)})};this.saveActiveStreamTab=function(f){var e=this.RESOURCE_ENDPOINT+"/activetab/save";return this.commonAjaxRequest(new b(),"POST",{url:e,data:f})};this.saveActiveStreamFilter=function(f,g){var e=this.RESOURCE_ENDPOINT+"/activefilter/save/"+f;return this.commonAjaxRequest(new b(),"POST",{url:e,data:g})};this.saveActiveCommunicationsItem=function(e,g){var f=this.RESOURCE_ENDPOINT+"/activeitem/save/"+e+"/"+g;return this.commonAjaxRequest(new b(),"POST",{url:f})};this.saveRefreshTime=function(e){var f=this.RESOURCE_ENDPOINT+"/refreshtime/save";return this.commonAjaxRequest(new b(),"POST",{url:f,data:e})};this.newCount=function(){var e=this.RESOURCE_ENDPOINT+"/new/count";return this.commonAjaxRequest(new b(),"GET",{url:e})};this.getFullContent=function(e,h){var g=new b(),f=this.RESOURCE_ENDPOINT+"/fullcontent/"+e+"/"+h;if(e==1150305777){f=this.RESOURCE_ENDPOINT+"/acclaim"}return this.commonAjaxRequest(g,"GET",{url:f})};this.getFullReplies=function(e,h,g){var f=this.RESOURCE_ENDPOINT+"/fullreplies/"+e+"/"+h;return this.commonAjaxRequest(new b(),"POST",{url:f,data:JSON.stringify(g)},g)};this.fillInTheGaps=function(e,i,g){var h=new b();var f=this.RESOURCE_ENDPOINT+"/fillinthegaps/"+e+"/"+i;return this.commonAjaxRequest(h,"POST",{url:f,data:JSON.stringify(g)},g)};this.fillActivity=function(e,i,g,h){var f=this.RESOURCE_ENDPOINT+"/fillactivity/"+e+"/"+i;return this.commonAjaxRequest(h,"POST",{url:f,data:JSON.stringify(g)})};this.saveInboxViewType=function(e){var f=this.RESOURCE_ENDPOINT+"/inbox/viewtype/save";return this.commonAjaxRequest(new b(),"POST",{url:f,data:e})};this.saveInboxListHeight=function(e){var f=this.RESOURCE_ENDPOINT+"/inbox/listheight/save";return this.commonAjaxRequest(new b(),"POST",{url:f,data:JSON.stringify(e)})};this.getGlobalNavMenu=function(){var e=this.RESOURCE_ENDPOINT+"/global/nav/menu";return this.commonAjaxRequest(new b(),"GET",{url:e})}});return jive.ActivityStream.StreamSource});
;
jive.namespace("ReadTracking");define("apps/read_tracking/models/read_tracking_source",["apps/shared/models/rest_service"],function(a){jive.ReadTracking.ReadTrackingSource=a.extend(function(b,c){b.resourceType="readtracking";b.pluralizedResourceType=b.resourceType;this.save=function(e,h,g){var f=new jive.conc.Promise(),d="read";if(!g){d="unread"}$j.ajax({type:"POST",dataType:"json",url:this.RESOURCE_ENDPOINT+"/"+e+"/"+h+"/"+d,success:function(i){f.emitSuccess()}});return f};this.markAllRead=function(e){var d=this.RESOURCE_ENDPOINT+"/markallread";var e=e==null?"":e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify(e)})}});return jive.ReadTracking.ReadTrackingSource});
;
// This file was automatically generated from actions_view.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.actions.actionsContent');
goog.provide('jive.eae.actions.actionsDynamicPane');
goog.provide('jive.eae.actions.actionsTabCount');
goog.provide('jive.eae.actions.actionsTabs');
goog.provide('jive.eae.actions.jsI18nHelper');
goog.provide('jive.eae.actions.main');
goog.provide('jive.eae.actions.markedContent');
goog.provide('jive.eae.actions.markedContentItem');
goog.provide('jive.eae.actions.markedContentItemInner');
goog.provide('jive.eae.actions.markedContentList');
goog.provide('jive.eae.actions.markedContentListItems');
goog.provide('jive.eae.actions.markedItem');
goog.provide('jive.eae.actions.markedItemBadgeContainer');
goog.provide('jive.eae.actions.markedItemInner');
goog.provide('jive.eae.actions.markedItemInnerText');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.apps.v2.canvas.renderAppCanvas');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayName');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.resourceInlineJs');
goog.require('jive.skin.template.main');
goog.require('jive.welcome.homeSideNav');


jive.eae.actions.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param8 = new soy.StringBuilder('<div class="j-layout j-layout-sl clearfix j-contained j-rc5"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.nav'),[])), '">');
  jive.welcome.homeSideNav({homeNavHelper: opt_data.homeNavHelper, selectedLinkID: 'jive-nav-link-actions'}, param8);
  param8.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');
  jive.eae.actions.actionsDynamicPane(opt_data, param8);
  param8.append('</div></div></div>');
  jive.skin.template.main(soy.$$augmentMap(opt_data.templateView, {title: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.actions.link'),[])), metaDescription: jive.i18n.i18nText(jive.i18n.getMsg('eae.actions.description'),[]), selectedLinkID: 'jive-nav-link-home', bodyClass: 'j-body-home j-body-actions', bodyContent: param8.toString()}), output);
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.actionsDynamicPane = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.eae.actions.actionsTabs(opt_data, output);
  output.append('<!-- BEGIN main body --><div id="j-actions-page-content" class="j-stream j-actionStream" role="main" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.actions'),[])), '">');
  if (opt_data.currentTab == 'jive-aq-marked') {
    jive.eae.actions.actionsContent(opt_data, output);
  }
  if (opt_data.appInstanceView) {
    jive.apps.v2.canvas.renderAppCanvas({appInstanceView: opt_data.appInstanceView, launchContext: opt_data.appLaunchContextView, market: false}, output);
  }
  output.append('</div>');
  jive.shared.soy.resourceInlineJs({code: '$j(function(){require([\'apps/actions/actions_controller\'], function(ActionsMain) {if (jive.Actions && jive.Actions.Controller) {jive.Actions.Controller.init({currentTab: \'' + soy.$$escapeHtml(opt_data.currentTab) + '\'});}else {jive.Actions.Controller = new ActionsMain({currentTab: \'' + soy.$$escapeHtml(opt_data.currentTab) + '\'}); jive.Actions.Controller.attachGlobalEventListeners();}});});'}, output);
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.actionsTabs = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<header id="j-actions-page-tabs" class="clearfix"><div id="j-aq-filters" class="j-act-filter-bar j-rc4 j-rc-none-bottom"><a id="jive-aq-marked" class="filter ', (opt_data.currentTab == 'jive-aq-marked') ? 'j-sub-selected font-color-normal' : '', '" data-type="marked" href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/actions/marked')), '"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.show.marked.actions'),[])), '</span> <span class="count">');
  jive.eae.actions.actionsTabCount({count: opt_data.actionsCount}, output);
  output.append('</span></a>');
  if (opt_data.tasksEnabled == true) {
    output.append('<span id="j-tasks-nav" class="j-aq-tasks ', (opt_data.currentTab == 'jive-tasks') ? 'j-sub-selected font-color-normal' : '', '"><a id="jive-tasks" href="#"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.tasks.tab'),[])), '</span> <span class="count">');
    jive.eae.actions.actionsTabCount({count: opt_data.tasksCount}, output);
    output.append('</span></a></span>');
  }
  var itemList81 = opt_data.actionsTabLinks;
  var itemListLen81 = itemList81.length;
  for (var itemIndex81 = 0; itemIndex81 < itemListLen81; itemIndex81++) {
    var itemData81 = itemList81[itemIndex81];
    output.append((itemData81 && itemData81.appActionLink && itemData81.visible) ? '<span id="' + soy.$$escapeHtml(itemData81.id) + '-nav"  ><a id="' + soy.$$escapeHtml(itemData81.id) + '" href="' + soy.$$escapeHtml(jive.soy.func.buildUrl(itemData81.url,itemData81.urlParams)) + '" class="j-aq-tasks ' + ((opt_data.currentTab == itemData81.id) ? 'j-sub-selected font-color-normal' : '') + '"><span class="lnk">' + soy.$$escapeHtml(itemData81.label) + '</span> </a></span>' : '');
  }
  output.append('</div></header>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.actionsTabCount = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span data-count="', soy.$$escapeHtml(opt_data.count), '" class="j-js-update-indicator" ', (opt_data.count == 0) ? 'style="display:none;"' : '', '>', (opt_data.count > 50) ? '(50+)' : '(' + soy.$$escapeHtml(opt_data.count) + ')', '</span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.actionsContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-actions-list" class="j-aq-stream clearfix">');
  jive.eae.actions.markedContent({markedContentList: opt_data.actions}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-aq-marked-filters j-act-filter-bar j-sub-bar j-rc4 j-rc-none-bottom"><a class="js-aq-subfilter filter j-sub-selected j-toggle left" data-type="active" href="#"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.subfilter.active'),[])), '</span> </a><a class="js-aq-subfilter filter j-toggle right" data-type="resolved" href="#"><span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('actions.subfilter.resolved'),[])), '</span> </a></div><div id="j-marked-list-container" class="js-marked-list-container j-markedActionsList">');
  jive.eae.actions.markedContentList({markedContentList: opt_data.markedContentList, type: 'active'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedContentList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.markedContentList.length) ? '<h4 id="j-aq-marked-list-title">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.' + opt_data.type + '.title'),[])) + '</h4>' : '', '<ul id="', soy.$$escapeHtml(opt_data.type), '-content" class="j-markedActions js-marked-list" data-type="', soy.$$escapeHtml(opt_data.type), '">');
  jive.eae.actions.markedContentListItems({markedContentList: opt_data.markedContentList, type: opt_data.type, showMoreAfter: 5}, output);
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedContentListItems = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var jiveContentOutcomeList147 = opt_data.markedContentList;
  var jiveContentOutcomeListLen147 = jiveContentOutcomeList147.length;
  if (jiveContentOutcomeListLen147 > 0) {
    for (var jiveContentOutcomeIndex147 = 0; jiveContentOutcomeIndex147 < jiveContentOutcomeListLen147; jiveContentOutcomeIndex147++) {
      var jiveContentOutcomeData147 = jiveContentOutcomeList147[jiveContentOutcomeIndex147];
      if (jiveContentOutcomeIndex147 < opt_data.showMoreAfter) {
        jive.eae.actions.markedItem({item: jiveContentOutcomeData147, type: opt_data.type}, output);
      } else {
        output.append('<li><a href="#" class="js-show-more-marked"><span class="j-rc6 j-more-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.view.more'),[])), '</span></a></li>');
      }
    }
  } else {
    output.append('<li>', (opt_data.type == 'active') ? '<div class="j-actions-empty-callout"><h3>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.active.none.title'),[])) + '</h3><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.active.none.desc'),[])) + '</p></div>' : '<div class="j-actions-empty-callout"><h3>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.resolved.none.title'),[])) + '</h3><p>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.actionqueue.marked.resolved.none.desc'),[])) + '</p></div>', '</li>');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="js-marked-item j-aq-data j-aq-marked-item j-markedActionItem" data-id="', soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.typeThread ? opt_data.item.jiveObjectViewBean.threadID : opt_data.item.jiveObjectViewBean.id), '" data-type="', soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.typeThread ? 1 : opt_data.item.jiveObjectViewBean.objectType), '" data-modification-date="', soy.$$escapeHtml(opt_data.item.outcomeModificationTimestamp), '">');
  if (opt_data.renderLocation == 'globalNav') {
    output.append('<a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.item.jiveObjectViewBean.jiveObjectURL)), '" class="j-aq-marked-entry font-color-normal clearfix">');
    jive.eae.actions.markedItemInner(opt_data, output);
    output.append('</a>');
  } else {
    jive.eae.actions.markedItemInner(opt_data, output);
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedItemInner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.renderLocation != 'globalNav') {
    jive.eae.actions.markedItemBadgeContainer({item: opt_data.item, objectType: opt_data.item.jiveObjectViewBean.typeThread ? 1 : opt_data.item.jiveObjectViewBean.objectType, objectId: opt_data.item.jiveObjectViewBean.typeThread ? opt_data.item.jiveObjectViewBean.threadID : opt_data.item.jiveObjectViewBean.id, type: opt_data.type == 'active' ? 'pending' : 'resolved'}, output);
  }
  if (opt_data.renderLocation == 'globalNav') {
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.item.currentOutcomeOwner, {size: opt_data.renderLocation == 'globalNav' ? 32 : 46, currentUserPartner: opt_data.item.currentOutcomeOwner.partner, hideLink: true}), output);
  } else {
    output.append('<div class="j-act-avatar">');
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.item.currentOutcomeOwner, {size: 46, currentUserPartner: opt_data.item.currentOutcomeOwner.partner}), output);
    output.append('</div>');
  }
  if (opt_data.renderLocation == 'globalNav') {
    output.append('<div class="font-color-meta">');
    jive.eae.actions.markedItemInnerText(opt_data, output);
    output.append('</div>');
  } else {
    output.append('<p class="font-color-meta">');
    jive.eae.actions.markedItemInnerText(opt_data, output);
    output.append('</p>');
  }
  output.append('<div class="j-act-meta"><strong>', soy.$$escapeHtml(opt_data.item.outcomeModificationDate), '</strong></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedItemInnerText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.item.selfOwned) {
    var param248 = new soy.StringBuilder();
    jive.eae.actions.markedContentItem(opt_data, param248);
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.item.jiveObjectViewBean.typeComment) ? 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.comment' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : '') + '.you' : (opt_data.item.jiveObjectViewBean.typeMessage) ? 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.reply' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : '') + '.you' : 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.tlo' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : '') + '.you', arg0: param248.toString(), noAutoEscape: true}, output);
  } else {
    var param272 = new soy.StringBuilder();
    if (opt_data.renderLocation == 'globalNav') {
      jive.shared.displayutil.userDisplayName(opt_data.item.currentOutcomeOwner, param272);
    } else {
      jive.shared.displayutil.userDisplayNameLink(opt_data.item.currentOutcomeOwner, param272);
    }
    var param278 = new soy.StringBuilder();
    jive.eae.actions.markedContentItem(opt_data, param278);
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.item.jiveObjectViewBean.typeComment) ? 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.comment' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : '') : (opt_data.item.jiveObjectViewBean.typeMessage) ? 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.reply' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : '') : 'eae.actionqueue.marked.' + soy.$$escapeHtml(opt_data.type) + '.tlo' + soy.$$escapeHtml(opt_data.type == 'active' ? '.' + opt_data.item.pendingType : ''), arg0: param272.toString(), arg1: param278.toString(), noAutoEscape: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedContentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.renderLocation == 'globalNav') {
    output.append('<div class="title font-color-link">');
    jive.eae.actions.markedContentItemInner(opt_data, output);
    output.append('</div>');
  } else {
    output.append('<a href="', soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.item.jiveObjectViewBean.jiveObjectURL)), '" class="title">');
    jive.eae.actions.markedContentItemInner(opt_data, output);
    output.append('</a>');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedContentItemInner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.item.jiveObjectViewBean.jiveObjectIconLink) ? soy.$$filterNoAutoescape(opt_data.item.jiveObjectViewBean.jiveObjectIconLink) : '<span class="' + soy.$$escapeHtml(opt_data.item.jiveObjectViewBean.jiveObjectCSS) + '"></span>', '<span class="j-item">', soy.$$filterNoAutoescape(opt_data.item.jiveObjectViewBean.subject), '</span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.markedItemBadgeContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul id="js-outcome-badge-container-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), '" class="js-outcome-badge-container js-ed-', soy.$$escapeHtml(opt_data.objectType), '-', soy.$$escapeHtml(opt_data.objectId), ' j-badge-action" data-object-type="', soy.$$escapeHtml(opt_data.objectType), '" data-object-id="', soy.$$escapeHtml(opt_data.objectId), '" data-allowed-outcome-types="', soy.$$escapeHtml(['pending', 'resolved']), '" data-no-hydrate="true" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badgeContainer.ariaLabel'),[])), '" aria-live="polite"><li class="js-outcome-badge js-outcome-type-', soy.$$escapeHtml(opt_data.type), '" data-outcome="', soy.$$escapeHtml(jive.soy.func.buildUrl('/api/core/v3/outcomes/' + opt_data.item.outcomeId)), '" data-ed=\'{"type":', soy.$$escapeHtml(opt_data.objectType), ', "id": ', soy.$$escapeHtml(opt_data.objectId), '}\' data-outcome-type="', soy.$$escapeHtml(opt_data.type), '"><a href="#" aria-haspopup="true">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('outcomes.badge.actionqueue.' + opt_data.type),[])), '<span class="jive-icon-med jive-icon-arrow-down"></span></a></li></ul>');
  return opt_sb ? '' : output.toString();
};


jive.eae.actions.jsI18nHelper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from homemenu.soy.
// Please don't edit this file by hand.

goog.provide('jive.nav.menu.home.content');
goog.provide('jive.nav.menu.home.main');
goog.provide('jive.nav.menu.home.moderationItem');
goog.provide('jive.nav.menu.home.overdueTask');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.actions.markedItem');
goog.require('jive.shared.displayutil.icon');
goog.require('jive.shared.soy.i18nHelper');


jive.nav.menu.home.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-home-global-nav-menu" class="j-quick-menu j-badge-menu j-act">');
  if (opt_data.data) {
    jive.nav.menu.home.content(opt_data, output);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.home.content = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-nav-menu-scrollable js-nav-menu-scrollable j-globalNav-notification">');
  if (opt_data.data.inboxItems.activityContainerList.length) {
    output.append('<h4 class="j-badge-hd j-rc5 j-rc-none-bottom"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/inbox')), '" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.inbox'),[])), '"><span class="jive-icon-med jive-icon-communications"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.inbox'),[])), '</a>');
    if (opt_data.counts['inbox'] > 0) {
      output.append('<strong class="j-menu-count font-color-notify">');
      jive.shared.soy.i18nHelper({i18nKey: 'nav.bar.home.menu.unread', arg0: (opt_data.counts['inbox'] > 50) ? '50+' : soy.$$escapeHtml(opt_data.counts['inbox']), noAutoEscape: true}, output);
      output.append('</strong>');
    }
    output.append('</h4><ul id="j-home-nav-menu-inbox-list" class="j-badge-menu-list"></ul>');
  }
  if (opt_data.data.actionItems.outcomeList.length) {
    output.append('<h4 class="j-badge-hd"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/actions/marked')), '" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.actionitems'),[])), '"><span class="jive-icon-med jive-icon-actions"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.actionitems'),[])), '</a><strong class="j-menu-count font-color-notify">');
    jive.shared.soy.i18nHelper({i18nKey: 'nav.bar.home.menu.active', arg0: (opt_data.counts['actions'] > 50) ? '50+' : soy.$$escapeHtml(opt_data.counts['actions']), noAutoEscape: true}, output);
    output.append('</strong></h4><ul id="j-home-nav-menu-tasks-list" class="j-badge-menu-list">');
    var itemList54 = opt_data.data.actionItems.outcomeList;
    var itemListLen54 = itemList54.length;
    for (var itemIndex54 = 0; itemIndex54 < itemListLen54; itemIndex54++) {
      var itemData54 = itemList54[itemIndex54];
      if (itemIndex54 < 5) {
        jive.eae.actions.markedItem({item: itemData54, type: 'active', renderLocation: 'globalNav'}, output);
      }
    }
    output.append('</ul>');
  }
  if (opt_data.data.taskItems.taskList.length) {
    output.append('<h4 class="j-badge-hd"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/actions/tasks')), '" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.overduetasks'),[])), '"><span class="jive-icon-med jive-icon-actions"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.overduetasks'),[])), '</a><strong class="j-menu-count font-color-notify">');
    jive.shared.soy.i18nHelper({i18nKey: 'nav.bar.home.menu.overdue', arg0: (opt_data.counts['tasks'] > 50) ? '50+' : soy.$$escapeHtml(opt_data.counts['tasks']), noAutoEscape: true}, output);
    output.append('</strong></h4><ul id="j-home-nav-menu-tasks-list" class="j-badge-menu-list">');
    var taskList83 = opt_data.data.taskItems.taskList;
    var taskListLen83 = taskList83.length;
    for (var taskIndex83 = 0; taskIndex83 < taskListLen83; taskIndex83++) {
      var taskData83 = taskList83[taskIndex83];
      if (taskIndex83 < 5) {
        output.append('<li>');
        jive.nav.menu.home.overdueTask({task: taskData83}, output);
        output.append('</li>');
      }
    }
    output.append('</ul>');
  }
  if (opt_data.data.moderationItems.moderationList.length) {
    output.append('<h4 class="j-badge-hd"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/moderation')), '" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.moderation'),[])), '"><span class="jive-icon-med jive-icon-actions"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('nav.bar.moderation.link'),[])), '</a><strong class="j-menu-count font-color-notify">');
    jive.shared.soy.i18nHelper({i18nKey: 'nav.bar.home.menu.new', arg0: (opt_data.counts['moderations'] > 50) ? '50+' : soy.$$escapeHtml(opt_data.counts['moderations']), noAutoEscape: true}, output);
    output.append('</strong></h4><ul id="j-home-nav-menu-moderation-list" class="j-badge-menu-list">');
    var moderationItemList112 = opt_data.data.moderationItems.moderationList;
    var moderationItemListLen112 = moderationItemList112.length;
    for (var moderationItemIndex112 = 0; moderationItemIndex112 < moderationItemListLen112; moderationItemIndex112++) {
      var moderationItemData112 = moderationItemList112[moderationItemIndex112];
      if (5 > moderationItemIndex112) {
        output.append('<li>');
        jive.nav.menu.home.moderationItem({moderationItem: moderationItemData112}, output);
        output.append('</li>');
      }
    }
    output.append('<ul>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.home.overdueTask = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/actions/tasks')), '" class="j-aq-entry font-color-normal clearfix"><span class="jive-icon-big jive-icon-task acticon"></span><div class="title font-color-link">', soy.$$escapeHtml(opt_data.task.subject), '</div><div class="j-task-duedate font-color-danger">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.task.dueDate.date'),[opt_data.task.dueDate])), '</div></a>');
  return opt_sb ? '' : output.toString();
};


jive.nav.menu.home.moderationItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(jive.soy.func.buildUrl('/moderation')), '" class="j-aq-entry font-color-normal clearfix"><span class="acticon">');
  jive.shared.displayutil.icon({type: opt_data.moderationItem.contentCode, size: 'med'}, output);
  output.append('</span><div class="title font-color-link">', (opt_data.moderationItem.contentCode == 'profileimage') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('mod.profileimage.subj.text'),[])) : soy.$$escapeHtml(opt_data.moderationItem.contentDisplayName), ' <span class="font-color-meta">by</span> ', soy.$$escapeHtml(opt_data.moderationItem.user.displayName), '</div><div class="j-td-date font-color-meta">', soy.$$escapeHtml(opt_data.moderationItem.creationDate), '</div></a>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.defaults.deleted');
goog.provide('jive.eae.activitystream.item.activity_verb.defaults.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.defaults.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.' + opt_data.type),[])));
  return opt_sb ? '' : output.toString();
};


jive.eae.activitystream.item.activity_verb.defaults.deleted = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="font-color-meta j-act-deleted">', (opt_data.object.deletedType && opt_data.object.deletedType == 'mentioned') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.user.deleted.mention'),[])) + ' ' : (opt_data.type == 2) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.user.deleted.reply'),[])) + ' ' : (opt_data.type == 801) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.user.deleted.bookmark'),[])) + ' ' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.user.deleted.comment'),[])) + ' ', '</span>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.discussion.main');
goog.provide('jive.eae.activitystream.item.activity_verb.discussion.reply');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.activitystream.item.activity_verb.discussion.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.type == 'created') ? (opt_data.object.hasQuestion) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.asked'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.starteddiscussion'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.' + opt_data.type),[])));
  return opt_sb ? '' : output.toString();
};


jive.eae.activitystream.item.activity_verb.discussion.reply = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.type == 'correct_answer_set') {
    var param16 = new soy.StringBuilder();
    var param17 = new soy.StringBuilder();
    if (opt_data.displayAuthorLink) {
      jive.shared.displayutil.userDisplayNameLink(opt_data.object.user, param17);
    } else {
      param17.append(soy.$$escapeHtml(opt_data.object.user.displayName));
    }
    jive.shared.soy.escapeHelper({stringToEscape: param17.toString()}, param16);
    jive.shared.soy.i18nHelper({i18nKey: 'activity.type.replymarkedcorrect', arg0: param16.toString(), noAutoEscape: true}, output);
  } else if (! opt_data.againstObject) {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.replied'),[])), ' ');
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.replied.to'),[])), ' ');
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.comment.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.activitystream.item.activity_verb.comment.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.object.typeWallEntryComment) {
    var param6 = new soy.StringBuilder();
    var param7 = new soy.StringBuilder();
    if (opt_data.displayAuthorLink) {
      jive.shared.displayutil.userDisplayNameLink(opt_data.object.parentAuthor, param7);
    } else {
      param7.append(soy.$$escapeHtml(opt_data.object.parentAuthor.displayName));
    }
    jive.shared.soy.escapeHelper({stringToEscape: param7.toString()}, param6);
    jive.shared.soy.i18nHelper({i18nKey: 'activity.type.wallentrycomment', arg0: param6.toString(), noAutoEscape: true}, output);
  } else if (! opt_data.hideDetailedReplyTo) {
    var param25 = new soy.StringBuilder();
    var param26 = new soy.StringBuilder();
    if (opt_data.displayAuthorLink) {
      jive.shared.displayutil.userDisplayNameLink(opt_data.object.parentAuthor, param26);
    } else {
      param26.append(soy.$$escapeHtml(opt_data.object.parentAuthor.displayName));
    }
    jive.shared.soy.escapeHelper({stringToEscape: param26.toString()}, param25);
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.object.commentContentResource && opt_data.object.commentContentResource.objectType == 129) ? 'activity.type.authorcommentedinresponseto' : (opt_data.object.typeMessage) ? 'activity.type.repliedinresponseto' : 'activity.type.commentedinresponseto', arg0: param25.toString(), noAutoEscape: true}, output);
    output.append((opt_data.againstObject) ? ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity_stream.on_object'),[])) + ' ' : '');
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.outcome.comment');
goog.provide('jive.eae.activitystream.item.activity_verb.outcome.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.activitystream.item.activity_verb.outcome.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.outcome.' + opt_data.object.outcomeTypeName + '.tlo' + (opt_data.object.outcomeTypeName == 'pending' ? '.' + opt_data.object.pendingType : '')),[])));
  return opt_sb ? '' : output.toString();
};


jive.eae.activitystream.item.activity_verb.outcome.comment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param9 = new soy.StringBuilder();
  var param10 = new soy.StringBuilder();
  if (opt_data.displayAuthorLink) {
    jive.shared.displayutil.userDisplayNameLink(opt_data.object.targetObject.user, param10);
  } else {
    param10.append(soy.$$escapeHtml(opt_data.object.targetObject.user.displayName));
  }
  jive.shared.soy.escapeHelper({stringToEscape: param10.toString()}, param9);
  jive.shared.soy.i18nHelper({i18nKey: 'activity.type.outcome.' + soy.$$escapeHtml(opt_data.object.outcomeTypeName) + soy.$$escapeHtml(opt_data.object.outcomeTypeName == 'pending' ? '.' + opt_data.object.pendingType : ''), arg0: param9.toString(), arg1: (opt_data.object.targetObject.typeMessage) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.liking.message'),[])) : (opt_data.object.targetObject.typeComment) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.liking.comment'),[])) : '', noAutoEscape: true}, output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.share.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.share.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.object.commentContentResource && opt_data.object.commentContentResource.objectType == 129) ? (! opt_data.againstObject) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.authorcomment'),[])) + ' ' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.authorcommentto'),[])) + ' ' : (! opt_data.againstObject) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.commented'),[])) + ' ' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.commentedon'),[])) + ' ');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.we.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.activitystream.item.activity_verb.we.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.type == 'liked') {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.liked'),[])));
  } else if (opt_data.type == 'repost') {
    var param13 = new soy.StringBuilder();
    var param14 = new soy.StringBuilder();
    jive.shared.displayutil.userDisplayNameLink(opt_data.object.repostedUser, param14);
    jive.shared.soy.escapeHelper({stringToEscape: param14.toString()}, param13);
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.user && opt_data.object.repostedUser.id == opt_data.user.id) ? 'activity.type.status.repost.your' : 'activity.type.status.repost', arg0: param13.toString(), noAutoEscape: true}, output);
  } else if (opt_data.object.wallCreationSrc != '') {
    jive.shared.soy.i18nHelper({i18nKey: 'activity.type.status.with.source', arg0: soy.$$filterNoAutoescape(opt_data.object.wallCreationSrc), noAutoEscape: true}, output);
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.status'),[])));
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.project.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.project.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.updatedStatus'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.relationship.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');


jive.eae.activitystream.item.activity_verb.relationship.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param4 = new soy.StringBuilder();
  var param5 = new soy.StringBuilder();
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.object.relatedUser, {size: 32, currentUserPartner: opt_data.user.partner}), param5);
  jive.shared.displayutil.userDisplayNameLink(opt_data.object.relatedUser, param5);
  jive.shared.soy.escapeHelper({stringToEscape: param5.toString()}, param4);
  jive.shared.soy.i18nHelper({i18nKey: 'activity.type.' + opt_data.type, arg0: param4.toString(), noAutoEscape: true}, output);
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.tile_activity.external');
goog.provide('jive.eae.activitystream.item.activity_verb.tile_activity.tile');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.tile_activity.external = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$filterNoAutoescape(opt_data.object.text), ' ');
  return opt_sb ? '' : output.toString();
};


jive.eae.activitystream.item.activity_verb.tile_activity.tile = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.tileStreamEntry'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.rtc.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.rtc.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.user && opt_data.object.user.id == opt_data.user.id) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.directmessage.you.sent'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.directmessage'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from activity_verb.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.item.activity_verb.bookmarked.main');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.eae.activitystream.item.activity_verb.bookmarked.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.bookmarked'),[])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from include.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.activitystream.include.activityVerbPhrase');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.activitystream.item.activity_verb.bookmarked.main');
goog.require('jive.eae.activitystream.item.activity_verb.comment.main');
goog.require('jive.eae.activitystream.item.activity_verb.defaults.deleted');
goog.require('jive.eae.activitystream.item.activity_verb.defaults.main');
goog.require('jive.eae.activitystream.item.activity_verb.discussion.main');
goog.require('jive.eae.activitystream.item.activity_verb.discussion.reply');
goog.require('jive.eae.activitystream.item.activity_verb.outcome.comment');
goog.require('jive.eae.activitystream.item.activity_verb.outcome.main');
goog.require('jive.eae.activitystream.item.activity_verb.project.main');
goog.require('jive.eae.activitystream.item.activity_verb.relationship.main');
goog.require('jive.eae.activitystream.item.activity_verb.rtc.main');
goog.require('jive.eae.activitystream.item.activity_verb.share.main');
goog.require('jive.eae.activitystream.item.activity_verb.tile_activity.external');
goog.require('jive.eae.activitystream.item.activity_verb.tile_activity.tile');
goog.require('jive.eae.activitystream.item.activity_verb.we.main');


jive.eae.activitystream.include.activityVerbPhrase = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.object.deleted) {
    jive.eae.activitystream.item.activity_verb.defaults.deleted(opt_data, output);
  } else if (opt_data.object.typeThread) {
    jive.eae.activitystream.item.activity_verb.discussion.main(opt_data, output);
  } else if (opt_data.object.parentAuthor && (! opt_data.hideDetailedReplyTo || opt_data.object.typeWallEntryComment)) {
    jive.eae.activitystream.item.activity_verb.comment.main(opt_data, output);
  } else if (opt_data.object.typeMessage || opt_data.type == 'correct_answer_set') {
    jive.eae.activitystream.item.activity_verb.discussion.reply(opt_data, output);
  } else if (opt_data.object.typeOutcome) {
    if (opt_data.object.targetObject.typeMessage || opt_data.object.targetObject.typeComment) {
      jive.eae.activitystream.item.activity_verb.outcome.comment(opt_data, output);
    } else {
      jive.eae.activitystream.item.activity_verb.outcome.main(opt_data, output);
    }
  } else if (opt_data.object.typeComment || opt_data.type == 'share') {
    jive.eae.activitystream.item.activity_verb.share.main(opt_data, output);
  } else if (opt_data.object.typePoll && opt_data.type == 'created') {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.startedpoll'),[])));
  } else if ((opt_data.object.typeBlogPost || opt_data.object.typeDocument) && opt_data.type == 'created') {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.wrote'),[])));
  } else if (opt_data.object.typeWallEntry || opt_data.object.typeUserStatus) {
    jive.eae.activitystream.item.activity_verb.we.main(opt_data, output);
  } else if (opt_data.object.typeProjectStatus) {
    jive.eae.activitystream.item.activity_verb.project.main(opt_data, output);
  } else if (opt_data.object.typeUserRelationship && opt_data.user) {
    jive.eae.activitystream.item.activity_verb.relationship.main(opt_data, output);
  } else if (opt_data.object.typeExternalActivity) {
    jive.eae.activitystream.item.activity_verb.tile_activity.external(opt_data, output);
  } else if (opt_data.object.typeTileStreamEntry) {
    jive.eae.activitystream.item.activity_verb.tile_activity.tile(opt_data, output);
  } else if (opt_data.object.typeCollaboration) {
    jive.eae.activitystream.item.activity_verb.rtc.main(opt_data, output);
  } else if (opt_data.object.bookmarkedContent) {
    jive.eae.activitystream.item.activity_verb.bookmarked.main(opt_data, output);
  } else if (opt_data.type != '') {
    jive.eae.activitystream.item.activity_verb.defaults.main(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

goog.provide('jive.eae.common.activityAuthor');
goog.provide('jive.eae.common.activityAuthorNoVerb');
goog.provide('jive.eae.common.activityContainerJoSubject');
goog.provide('jive.eae.common.activityContentCommon');
goog.provide('jive.eae.common.activityContentText');
goog.provide('jive.eae.common.activityHeadingHref');
goog.provide('jive.eae.common.activityHeadingHrefWithReferringUser');
goog.provide('jive.eae.common.activityNavActions');
goog.provide('jive.eae.common.collapsedExcerptText');
goog.provide('jive.eae.common.contentTypeClassName');
goog.provide('jive.eae.common.contentTypeDisplayName');
goog.provide('jive.eae.common.contentTypeParentPreviewStylingClassName');
goog.provide('jive.eae.common.currentCountText');
goog.provide('jive.eae.common.digestSubItem');
goog.provide('jive.eae.common.displayParentAuthor');
goog.provide('jive.eae.common.embeddedPreview');
goog.provide('jive.eae.common.entryRepost');
goog.provide('jive.eae.common.formatMediaLinkUrl');
goog.provide('jive.eae.common.formatMediaLinkUrl__C2bf6');
goog.provide('jive.eae.common.generateUserMetaData');
goog.provide('jive.eae.common.groupedUsers');
goog.provide('jive.eae.common.jsI18nHelper');
goog.provide('jive.eae.common.loadingSpinner');
goog.provide('jive.eae.common.microRTEContainer');
goog.provide('jive.eae.common.parentPreviewLinks');
goog.provide('jive.eae.common.readingPaneBottomReplyLinkKey');
goog.provide('jive.eae.common.renderStreamAttachments');
goog.provide('jive.eae.common.repliedToIcon');
goog.provide('jive.eae.common.replyCountText');
goog.provide('jive.eae.common.replyingToText');
goog.provide('jive.eae.common.repostModal');
goog.provide('jive.eae.common.repostModalSuccess');
goog.provide('jive.eae.common.rtePanel');
goog.provide('jive.eae.common.rteTextArea');
goog.provide('jive.eae.common.sharedVia');
goog.provide('jive.eae.common.subactivity');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.acclaim.likeControl');
goog.require('jive.eae.activitystream.include.activityVerbPhrase');
goog.require('jive.eae.shared.subactivity.outcome');
goog.require('jive.outcomes.badge.badgeContainer');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.containerDisplayNameLink');
goog.require('jive.shared.displayutil.renderGuestDisplayName');
goog.require('jive.shared.displayutil.userDisplayName');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.escapeHelper');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.render');
goog.require('jive.shared.soy.resourceInlineJs');
goog.require('jive.soy.share.control');
goog.require('jive.statusinput.containers.microbloggingCommentStatusInput');
goog.require('jive.statusinput.containers.renderAttachmentsContainer');
goog.require('jive.statusinput.containers.repostStatusInput');


jive.eae.common.rteTextArea = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<textarea id="', soy.$$escapeHtmlAttribute(jive.soy.func.randomString()), '" class=\'wysiwygtext\' name="body" rows="15" cols="30" ></textarea>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.rtePanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-panel-rte-wrap clearfix"><div class="j-panel-rte-loading j-act-reply" style="display:none"><div class="j-rte-placeholder"></div></div><div class="j-panel-rte j-act-reply" style="display:none"><div class="j-reply-to j-js-reply-to"></div><div class="j-act-reply-form">', (opt_data.user.anonymous) ? '<div class="jive-reply-post-anonymous j-form"><div><label for="replyGuestName-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.name'),[])) + '<span class="font-color-meta-light"> ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.required.label'),[])) + '</span><input class="replyGuestName" type="text" name="replyGuestName" id="replyGuestName-id"></label></div><div><label for="replyGuestName-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.email_address'),[])) + '<span class="font-color-meta-light"> ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.rqdNotPblshd.label'),[])) + '</span><input class="replyGuestEmail" type="text" name="replyGuestEmail" id="replyGuestEmail-id"></label></div>' + ((! opt_data.hideGuestURLField) ? '<div><label for="replyGuestUrl-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.wsite_address.label'),[])) + '<input class="replyGuestUrl" type="text" name="replyGuestUrl" id="replyGuestUrl-id"></label></div>' : '') + '</div>' : '', '<p class="jive-error-text jive-comment-error" style="display:none"></p><form method="post" action="javascript:void(0);" name="jive-comment-post-form" class="j-panel-rte-view sammy-app-1288289329294-553-">');
  jive.eae.common.rteTextArea(null, output);
  output.append((opt_data.externallyVisible == 'true') ? '<div class="j-rte-message"><span class="jive-icon-med jive-icon-partner"></span><span class="font-color-meta-light j-browse-external-access"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.content.reply.warn.visible'),[])) + '</em></span></div>' : '', '<div class="jive-form-buttons"><input type="submit" name="post" class="j-btn-global j-btn-callout" value="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.minirte.comment.action.label'),[])), '" /><a href=\'#\' class=\'j-panel-hide-rte-link j-btn-global\'>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.cancel'),[])), '</a></div></form></div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.replyingToText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.type == 'user') {
    var param42 = new soy.StringBuilder();
    jive.shared.displayutil.userDisplayNameLink(opt_data.object, param42);
    jive.shared.soy.i18nHelper({i18nKey: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('cmnt.reply_to.gtitle'),[])), arg0: param42.toString(), noAutoEscape: true}, output);
  } else if (opt_data.type == 'content') {
    jive.shared.soy.i18nHelper({i18nKey: 'eae.inbox.comment.on.originalX', arg0: (opt_data.object.contentTypeName) ? soy.$$escapeHtml(String(opt_data.object.contentTypeName).toLowerCase()) : '', noAutoEscape: true}, output);
  }
  output.append(' <img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/inline-reply-arrow.png'))), '"/>', (opt_data.externallyVisible == 'true') ? '' : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.replyCountText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<strong class="j-act-replycount">', (opt_data.activityContainer.jiveObject.typeThread || opt_data.activityContainer.jiveObject.typeDirectMessage) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.activityContainer.jiveObject.jiveObjectURL)) + '" class="font-color-meta-light">' + ((opt_data.activityContainer.replyCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.reply.lc'),[opt_data.activityContainer.replyCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.replies.lc'),[opt_data.activityContainer.replyCount]))) + '</a>' : (opt_data.activityContainer.activityList[0] && opt_data.activityContainer.activityList[0].content.commentContentResource && opt_data.activityContainer.activityList[0].content.commentContentResource.objectType == 129) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.activityContainer.jiveObject.jiveObjectURL)) + '#comments" class="font-color-meta-light">' + ((opt_data.activityContainer.replyCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.authorcomment.lc'),[opt_data.activityContainer.replyCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.authorcomments.lc'),[opt_data.activityContainer.replyCount]))) + '</a>' : '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.activityContainer.jiveObject.jiveObjectURL)) + '#comments" class="font-color-meta-light">' + ((opt_data.activityContainer.replyCount == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.comment.lc'),[opt_data.activityContainer.replyCount])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.comments.lc'),[opt_data.activityContainer.replyCount]))) + '</a>');
  if (opt_data.showCurrentCount) {
    jive.eae.common.currentCountText(opt_data, output);
  }
  output.append('</strong>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.currentCountText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer.numCurrent) ? '<span class="j-new-count font-color-new">' + ((opt_data.activityContainer.numCurrentSubActivities) ? (opt_data.activityContainer.numCurrentSubActivities >= opt_data.activityContainer.maxUnread) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.newPlus'),[opt_data.activityContainer.maxUnread])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.new'),[opt_data.activityContainer.numCurrentSubActivities])) : (opt_data.streamType != 'communications') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.new'),[])) : '') + '</span>' : (opt_data.forceCount) ? '<span class="j-new-count font-color-new">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.new'),[1])) + '</span>' : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.collapsedExcerptText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.deletedType == 'reply') ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.reply.description'),[])) + '</em>' : (opt_data.deletedType == 'comment') ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.comment.description'),[])) + '</em>' : (opt_data.deletedType == 'mentioned') ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.mention.description'),[])) + '</em>' : (opt_data.deletedType == 'bookmarked') ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.bookmark.description'),[])) + '</em>' : (opt_data.deletedType == 'expertise') ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.expertise.description'),[])) + '</em>' : (opt_data.text) ? ((opt_data.moderated) ? '<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><span class="jive-icon-med jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.posts.waitingMod.text'),[])) + '</div>' : '') + soy.$$filterNoAutoescape(opt_data.text) + ((opt_data.hasMoreText) ? '&hellip;' : '') : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.subactivity = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.activityContainer.jiveObject.activityContentExcerptTemplate) {
    jive.shared.soy.render({templateName: opt_data.activityContainer.jiveObject.activityContentExcerptTemplate, data: (function() { var map = {}; var pairs = [['activityContainer', opt_data.activityContainer], ['activity', opt_data.activity], ['streamType', opt_data.streamType], ['filterData', opt_data.filterData], ['user', opt_data.user], ['canCreateMbImage', opt_data.canCreateMbImage], ['canCreateMbVideo', opt_data.canCreateMbVideo], ['isHidden', opt_data.isHidden], ['addedInline', opt_data.addedInline], ['hideStub', opt_data.hideStub], ['forceCurrent', opt_data.forceCurrent]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
  } else {
    if (opt_data.activity.content.typeOutcome) {
      jive.eae.shared.subactivity.outcome(opt_data, output);
    } else {
      output.append('<div id="node-collapsed-', soy.$$escapeHtmlAttribute(opt_data.activity.content.domIDPostfix), '" class="j-act-node', (opt_data.addedInline) ? ' j-js-addedInline' : '', (opt_data.activityContainer.canReply) ? ' j-act-rte-replyable' : '', (opt_data.streamType == 'communications' && (opt_data.activity.current || opt_data.forceCurrent)) ? ' j-current' : '', (opt_data.streamType == 'communications' && (opt_data.activity.content.typeMention || opt_data.activity.containsMention)) ? ' j-act-contains-mention' : '', '" data-extVisible="', soy.$$escapeHtmlAttribute(opt_data.activity.visibleToExtCollaborator), '" data-objectID="', (opt_data.activity.content.typeMention) ? soy.$$escapeHtmlAttribute(opt_data.activity.content.context.id) : soy.$$escapeHtmlAttribute(opt_data.activity.targetObjectID), '" data-objectType="', (opt_data.activity.content.typeMention) ? soy.$$escapeHtmlAttribute(opt_data.activity.content.context.objectType) : soy.$$escapeHtmlAttribute(opt_data.activity.targetObjectType), '" data-current="', (opt_data.activity.current || opt_data.forceCurrent) ? 'true' : '', '" style="', (opt_data.isHidden) ? 'display:none;' : '', '"><div id="excerpt_', soy.$$escapeHtmlAttribute(opt_data.activity.content.domIDPostfix), '" class="', (opt_data.activity.content.deleted) ? 'j-mod font-color-meta-light' : 'reply j-act-comment', '">');
      if (opt_data.activity.content.deleted) {
        jive.eae.common.collapsedExcerptText({text: '', hasMoreText: false, deletedType: opt_data.activity.content.deletedType != null ? opt_data.activity.content.deletedType : 'comment', moderated: false}, output);
        output.append(' ', (opt_data.activity.creationTime) ? soy.$$escapeHtml(opt_data.activity.creationTime) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.less_than_a_minute_ago'),[])));
      } else {
        output.append((opt_data.streamType == 'communications' && (opt_data.activity.content.typeMention || opt_data.activity.containsMention)) ? '<div class="j-act-mentioned font-color-okay"><span class="jive-icon-med jive-icon-mention-label"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.mention.you.were.incontext'),[])) + '</div>' : '', '<div class="j-act-avatar">');
        jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.activity.activityUser, {size: 32, currentUserPartner: opt_data.user.partner}), output);
        output.append('</div><div class="j-excerpt', (! opt_data.activity.content.summaryIsExcerpt) ? ' j-non-excerpt' : '', ' clearfix" ', (opt_data.hideStub) ? 'style="display:none;"' : '', '>');
        if (! opt_data.hideStub) {
          var param245 = new soy.StringBuilder();
          jive.eae.common.activityContentText({activity: opt_data.activity, noAutoescape: true}, param245);
          jive.eae.common.activityContentCommon({contentTxt: param245.toString(), hasMoreText: opt_data.activity.hasMoreText}, output);
        }
        output.append('</div><div class="j-act-sub-preview" ', (! opt_data.hideStub) ? 'style="display:none;"' : '', '>');
        if (opt_data.activity.content.deleted) {
          output.append('<div class="j-excerpt-full-html-content">');
          if (opt_data.hideStub) {
            jive.eae.common.activityContentText({activity: opt_data.activity, noAutoescape: true}, output);
          }
          output.append('</div><div class="j-author-act font-color-meta-light">', (opt_data.activity.creationTime) ? soy.$$escapeHtml(opt_data.activity.creationTime) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.less_than_a_minute_ago'),[])), '</div>');
        } else {
          output.append('<div class="j-author-act font-color-meta-light">');
          jive.eae.common.activityAuthorNoVerb({activityUser: opt_data.activity.activityUser, object: opt_data.activity.content}, output);
          output.append(' ', (opt_data.activity.type == 'mentioned' && opt_data.activity.content.context.jiveObjectURL) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.activity.content.context.jiveObjectURL)) + '" class="font-color-meta-light">' : (opt_data.activity.content.jiveObjectURL) ? '<a href="' + soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.activity.content.jiveObjectURL)) + '" class="font-color-meta-light">' : '', (opt_data.activity.creationTime) ? soy.$$escapeHtml(opt_data.activity.creationTime) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.less_than_a_minute_ago'),[])), (opt_data.activity.type == 'mentioned' && opt_data.activity.content.context.jiveObjectURL || opt_data.activity.content.jiveObjectURL) ? '</a>' : '', '</div><div class="j-excerpt-full-html-content">');
          if (opt_data.hideStub) {
            jive.eae.common.activityContentText({activity: opt_data.activity, noAutoescape: true}, output);
          }
          output.append('</div>');
          jive.eae.common.renderStreamAttachments({idPrefix: 'expanded', object: opt_data.activity.content, domIDPostfix: opt_data.activity.domIDPostfix}, output);
          jive.outcomes.badge.badgeContainer({objectType: opt_data.activity.targetObjectType, objectId: opt_data.activity.targetObjectID}, output);
          output.append('<div class="j-meta-actions font-color-meta">');
          jive.eae.common.activityNavActions({object: opt_data.activity.parentActivity ? opt_data.activityContainer.jiveObject : opt_data.activity.content, activityContainer: opt_data.activityContainer, amAnAuthor: opt_data.user.id == opt_data.activity.activityUser.id, objectType: opt_data.activity.content.typeMention ? opt_data.activity.content.context.objectType : opt_data.activity.content.objectType, objectId: opt_data.activity.content.typeMention ? opt_data.activity.content.context.id : opt_data.activity.content.id, liked: opt_data.activity.liked, likeCount: opt_data.activity.likeCount, likable: opt_data.activity.likable, user: opt_data.user, location: 'subActivity', streamType: opt_data.streamType, filterData: opt_data.filterData}, output);
          output.append('</div>');
        }
        output.append('</div>');
      }
      output.append('</div></div>');
    }
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityAuthor = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.activityUser.anonymous) {
    if (opt_data.displayAuthorLink) {
      jive.shared.displayutil.userDisplayNameLink(soy.$$augmentMap(opt_data.activityUser, {renderInvisible: opt_data.object.typeExternalActivity}), output);
    } else if (opt_data.deleted) {
    } else {
      output.append(soy.$$escapeHtml(opt_data.activityUser.displayName));
    }
  } else {
    jive.shared.displayutil.renderGuestDisplayName({message: opt_data.activityUser}, output);
  }
  if (! opt_data.object.typeShare) {
    output.append(' ');
    jive.eae.activitystream.include.activityVerbPhrase(opt_data, output);
  } else {
    output.append(' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.type.shared'),[])), ' ');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityAuthorNoVerb = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.activityUser.anonymous) {
    jive.shared.displayutil.userDisplayNameLink(opt_data.activityUser, output);
  } else {
    jive.shared.displayutil.renderGuestDisplayName({message: opt_data.activityUser}, output);
  }
  output.append(' ');
  if (opt_data.object.parentAuthor && ! opt_data.object.typeWallEntryComment) {
    jive.eae.common.displayParentAuthor({parentAuthor: opt_data.object.parentAuthor}, output);
  } else if (opt_data.object.context && opt_data.object.context.parentAuthor && ! opt_data.object.context.typeWallEntryComment) {
    jive.eae.common.displayParentAuthor({parentAuthor: opt_data.object.context.parentAuthor}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.displayParentAuthor = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.parentAuthor.username != 'SYSTEM') {
    var param374 = new soy.StringBuilder();
    var param375 = new soy.StringBuilder();
    jive.shared.displayutil.userDisplayNameLink(opt_data.parentAuthor, param375);
    jive.shared.soy.escapeHelper({stringToEscape: param375.toString()}, param374);
    jive.shared.soy.i18nHelper({i18nKey: 'activity.type.toX', arg0: param374.toString(), noAutoEscape: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityNavActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.location != 'subActivity') {
    if (opt_data.activityContainer.container.type && opt_data.activityContainer.container.type != -2) {
      output.append(' <span class="j-bullet">&#8226;</span> ');
      if (opt_data.activityContainer.container.type == 2020) {
        var param389 = new soy.StringBuilder();
        jive.shared.displayutil.userDisplayNameLink(opt_data.activityContainer.originalAuthor, param389);
        jive.shared.soy.i18nHelper({i18nKey: 'main.in_user_container.label', arg0: param389.toString(), arg1: String(opt_data.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(), noAutoEscape: true}, output);
      } else {
        var param396 = new soy.StringBuilder();
        jive.shared.displayutil.containerDisplayNameLink({container: opt_data.activityContainer.container}, param396);
        jive.shared.soy.i18nHelper({i18nKey: 'eae.container.in', arg0: param396.toString(), noAutoEscape: true}, output);
      }
    }
  }
  output.append((opt_data.object.canRepost) ? ' <span class="j-bullet">&#8226;</span> <span class="j-repost-item" id="j-repost-item-' + soy.$$escapeHtmlAttribute(jive.soy.func.randomString()) + '-' + soy.$$escapeHtmlAttribute(opt_data.object.id) + '"><a href="#" class="j-repost" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.repost.link.title'),[])) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.repost'),[])) + '</a></span>' : '');
  if (opt_data.user && ! opt_data.user.anonymous && opt_data.activityContainer.sharable && ! opt_data.object.typeExternalActivity && (opt_data.location == 'Title' || opt_data.location == 'parentPreview')) {
    output.append(' <span class="j-bullet">&#8226;</span> ');
    jive.soy.share.control({objectId: soy.$$escapeHtml(opt_data.activityContainer.jiveObject.typeThread ? opt_data.activityContainer.jiveObject.threadID : opt_data.objectId), objectType: soy.$$escapeHtml(opt_data.activityContainer.jiveObject.typeThread ? 1 : opt_data.objectType), type: 'text'}, output);
  }
  if (opt_data.user && ! opt_data.user.anonymous && opt_data.object.typeExternalActivity && opt_data.activityContainer.sharable) {
    output.append(' <span class="j-bullet">&#8226;</span> ');
    jive.soy.share.control({objectId: opt_data.objectId, objectType: opt_data.objectType, type: 'text'}, output);
  }
  output.append((opt_data.activityContainer.canReply && ! opt_data.object.deleted && ! opt_data.activityContainer.jiveObject.typeWallEntry && ! opt_data.activityContainer.jiveObject.typeDirectMessage && ! opt_data.activityContainer.jiveObject.typeShare && ! opt_data.object.bookmarkedContent) ? ' <span class="j-bullet">&#8226;</span> <a class="j-reply-rte" href="javascript:void(0);">' + ((opt_data.object.typeDocument && ! (opt_data.activityContainer.activityList[0] && opt_data.activityContainer.activityList[0].content.commentContentResource && opt_data.activityContainer.activityList[0].content.commentContentResource.objectType == 129) || opt_data.object.typeBlogPost || opt_data.object.typeExternalActivity || opt_data.object.typeTileStreamEntry || opt_data.object.typeExternalURL || opt_data.object.typePoll) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.comment'),[])) : (opt_data.object.typeDocument && (opt_data.activityContainer.activityList[0] && opt_data.activityContainer.activityList[0].content.commentContentResource && opt_data.activityContainer.activityList[0].content.commentContentResource.objectType == 129)) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.addauthorcomment'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.reply'),[]))) + '</a>' : '', (opt_data.object.typeWallEntry && opt_data.activityContainer.canReply && ! opt_data.object.deleted && opt_data.streamType != 'communications' && opt_data.location == 'parentPreview') ? ' <span class="j-bullet">&#8226;</span> <a id="showMicroRTE_' + soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.domIDPostfix) + '" class="j-reply-micro" href="#">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.comment'),[])) + '</a>' : '');
  if (opt_data.likable && ! opt_data.object.deleted && ! opt_data.activityContainer.jiveObject.typeDirectMessage) {
    output.append(' <span class="j-bullet">&#8226;</span> <span class="j-js-liking-control">');
    jive.eae.acclaim.likeControl({canLike: opt_data.user && ! opt_data.user.anonymous && (! opt_data.object.typeWallEntry || opt_data.object.canRate) && ! opt_data.amAnAuthor, liked: opt_data.liked, likeCount: opt_data.likeCount, objectId: opt_data.objectId, objectType: opt_data.objectType, showIcon: false, type: 'mini'}, output);
    output.append('</span>');
  }
  output.append(((opt_data.location == 'Title' || opt_data.location == 'parentPreview') && opt_data.streamType != 'all' && opt_data.streamType != 'profile' && opt_data.streamType != 'context' && opt_data.streamType != 'communications' && (opt_data.filterData.selectedFilter.type == 'all' && ! opt_data.filterData.excluding)) ? ' <span class="j-bullet">&#8226;</span> <a href="#" class="js-act-hidemenu" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.hide.link.title'),[])) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.hide'),[])) + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.repostModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal j-repost-modal" id="jive-js-repost-modal"><header><h2>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.mb.repost.default.text'),[])), '</h2></header><label class="j-508-label" id="close-modal-508">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close'),[])), '<span class="j-close-icon j-ui-elem" role="img"></span></a><div class="j-act-mb"><div class="jive-modal-content clearfix">', (opt_data.mbCreationModerated) ? '<div class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('mod.content.create'),[])) + '</div>' : '');
  jive.eae.common.entryRepost(opt_data, output);
  output.append('<h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('we.repost.comment'),[])), '</h4>');
  jive.statusinput.containers.repostStatusInput({statusID: 'eae-editor-repost-' + opt_data.object.domIDPostfix, jiveObject: opt_data.object, canCreateMbImage: opt_data.canCreateMbImage, canCreateMbVideo: opt_data.canCreateMbVideo, canAtMention: opt_data.canAtMention}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.repostModalSuccess = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', (opt_data.wallentry.status != 'AWAITING_MODERATION') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('we.repost.success'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('we.form.posted.moderation'),[])), '</p>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.entryRepost = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-wall-repost-content"><div class="j-wall-repost-header">');
  var param504 = new soy.StringBuilder();
  if (! opt_data.author.anonymous) {
    jive.shared.displayutil.userDisplayNameLink(opt_data.author, param504);
  } else {
    jive.shared.displayutil.renderGuestDisplayName({message: opt_data.object}, param504);
  }
  jive.shared.soy.i18nHelper({i18nKey: 'eae.mb.repost.originally_posted_by', arg0: param504.toString(), noAutoEscape: 'true'}, output);
  output.append('</div>', (opt_data.object && opt_data.object.text) ? soy.$$filterNoAutoescape(opt_data.object.text) : '');
  jive.eae.common.renderStreamAttachments({idPrefix: 'reposted-attachments', object: opt_data.object, domIDPostfix: opt_data.object.domIDPostfix}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.parentPreviewLinks = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="font-color-meta-light paren">(</span><a href=\'#\' class="j-js-show-full-content j-act-preview font-color-meta" data-extVisible="', soy.$$escapeHtmlAttribute(opt_data.activityContainer.visibleToExtCollaborator), '" data-objectID="', soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.id), '" data-objectType="', soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.objectType), '" ', (opt_data.activityContainer.jiveObject.typePoll) ? 'data-containerID="' + soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.id) + '" data-containerType="' + soy.$$escapeHtmlAttribute(opt_data.activityContainer.container.type) + '" ' : '', ' aria-hidden="false" ', (opt_data.activityContainer.jiveObject.typeTask || opt_data.activityContainer.jiveObject.typeExternalActivity) ? 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.show_details'),[])) + '">' : 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.show.full.link.title'),[])) + '">', '<span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.show.full.more'),[])), '</span></a><a href=\'#\' class="j-js-hide-full-content j-act-preview font-color-meta" style="display:none;" aria-hidden="true" ', (opt_data.activityContainer.jiveObject.typeTask || opt_data.activityContainer.jiveObject.typeExternalActivity) ? 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.show_details'),[])) + '">' : 'title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.hide.full'),[])) + '">', '<span class="lnk">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.menu.show.full.less'),[])), '</span></a><span class="font-color-meta-light paren">)</span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.microRTEContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.activityContainer.jiveObject && (opt_data.activityContainer.canReply || opt_data.activityContainer.jiveObject.typeCollaboration || opt_data.activityContainer.jiveObject.typeWallEntry && opt_data.activityContainer.jiveObject.canComment && opt_data.activityContainer.jiveObject.id == opt_data.object.id)) {
    output.append('<div id="microRTEContainer_', soy.$$escapeHtmlAttribute(opt_data.object.domIDPostfix), '" class="j-act-reply j-act-micro-rte" ', (! opt_data.showOnLoad) ? 'style="display:none;"' : '', '><div class="r-active">');
    if (! opt_data.activityContainer.jiveObject.typeCollaboration && ! opt_data.activityContainer.jiveObject.typeShare && ! opt_data.activityContainer.jiveObject.typeWallEntry) {
      output.append('<div class="j-act-replyinfo">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('activity.collapsed.commenting_on'),[])), ' <span class="jive-icon-sml ', soy.$$escapeHtmlAttribute(opt_data.activityContainer.jiveObject.jiveObjectCSS), '"></span><strong>');
      jive.eae.common.activityContainerJoSubject(opt_data, output);
      output.append('</strong></div>');
    }
    output.append((opt_data.user.anonymous) ? '<div class="jive-reply-post-anonymous j-form"><div><label for="replyGuestName-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.name'),[])) + '<span class="font-color-meta-light"> ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.required.label'),[])) + '</span><input class="replyGuestName" type="text" name="replyGuestName" id="replyGuestName-id"></label></div><div><label for="replyGuestEmail-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.email_address'),[])) + '<span class="font-color-meta-light"> ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.rqdNotPblshd.label'),[])) + '</span><input class="replyGuestEmail" type="text" name="replyGuestEmail" id="replyGuestEmail-id"></label></div><div><label for="replyGuestUrl-id">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.vwpst.wsite_address.label'),[])) + '<input class="replyGuestUrl" type="text" name="replyGuestUrl" id="replyGuestUrl-id"></label></div></div>' : '');
    if (opt_data.activityContainer.jiveObject.typeWallEntry && opt_data.activityContainer.jiveObject.canComment || opt_data.activityContainer.jiveObject.typeCollaboration || opt_data.activityContainer.jiveObject.typeShare && opt_data.activityContainer.canReply) {
      jive.statusinput.containers.microbloggingCommentStatusInput({statusID: 'eae-mb-comment-editor-' + opt_data.object.domIDPostfix, jiveObject: opt_data.activityContainer.jiveObject, canAtMention: opt_data.canAtMention, addCssClass: opt_data.addCssClass, showOnLoad: opt_data.showOnLoad, hideAtMentionBtn: opt_data.hideAtMentionBtn, visibleToExtCollaborator: opt_data.object.visibleToExtCollaborator, hideCancelBtn: opt_data.activityContainer.jiveObject.typeCollaboration, i18nSubmitKey: opt_data.i18nSubmitKey, defaultTextKey: opt_data.defaultTextKey}, output);
    }
    output.append('</div></div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.repliedToIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="jive-icon-sml jive-icon-arrow-top"></span>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityContentCommon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.contentTxt != '') ? '<p>' + soy.$$filterNoAutoescape(opt_data.contentTxt) + ((opt_data.hasMoreText) ? '&hellip;' : '') + '</p>' : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.generateUserMetaData = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('{anonymous: ', soy.$$escapeHtml(opt_data.user.anonymous), ', avatarID: ', soy.$$escapeHtml(opt_data.user.avatarID), ', displayName: \'', soy.$$escapeHtml(opt_data.user.displayName), '\', email: \'', soy.$$escapeHtml(opt_data.user.email), '\', enabled: ', soy.$$escapeHtml(opt_data.user.enabled), ', entitled: ', soy.$$escapeHtml(opt_data.user.entitled), ', id: ', soy.$$escapeHtml(opt_data.user.id), ', objectType: ', soy.$$escapeHtml(opt_data.user.objectType), ', username: \'', soy.$$escapeHtml(opt_data.user.username), '\'}');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.renderStreamAttachments = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.object.meta && opt_data.object.meta.length > 0) {
    jive.statusinput.containers.renderAttachmentsContainer({id: (opt_data.idPrefix) ? soy.$$escapeHtml(opt_data.idPrefix + '-attachmentContainer-' + opt_data.domIDPostfix) : soy.$$escapeHtml('attachmentContainer-' + opt_data.domIDPostfix), entry: opt_data.object, visible: true}, output);
    jive.shared.soy.resourceInlineJs({code: 'require([\'apps/microblogging/views/attachment_view\'],function(AttachmentView){var id = \'' + ((opt_data.idPrefix) ? soy.$$escapeHtml(opt_data.idPrefix + '-attachmentContainer-' + opt_data.domIDPostfix) : soy.$$escapeHtml('attachmentContainer-' + opt_data.domIDPostfix)) + '\', attachmentView = new AttachmentView({selector:\'#\' + id}); attachmentView.postRender(); AttachmentView.views[id] = attachmentView;});'}, output);
  } else if (opt_data.object.typeExternalActivity && opt_data.object.mediaLink) {
    output.append('<div class="j-act-attachment"><a href="');
    jive.eae.common.formatMediaLinkUrl__C2bf6(opt_data.object, output);
    output.append('" target="_blank" title="', soy.$$escapeHtmlAttribute(opt_data.object.mediaLink.filename ? opt_data.object.mediaLink.filename : ''), '">', (opt_data.object.mediaLink.thumbnailUrl) ? '<div class="j-media-attachment"><img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.object.mediaLink.thumbnailUrl)) + '" title="' + soy.$$escapeHtmlAttribute(opt_data.object.mediaLink.title) + '" alt="" width="' + soy.$$escapeHtmlAttribute(opt_data.object.mediaLink.thumbnailWidth) + '" height="' + soy.$$escapeHtmlAttribute(opt_data.object.mediaLink.thumbnailHeight) + '"/></div>' : (opt_data.object.mediaLink.iconClass) ? '<span class="jive-icon-med ' + soy.$$escapeHtmlAttribute(opt_data.object.mediaLink.iconClass) + '"></span><span>' + soy.$$escapeHtml(opt_data.object.mediaLink.title) + '</span>' : '', '</a></div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.formatMediaLinkUrl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.mediaLink.contentUrl) ? (((opt_data.mediaLink.contentUrl).match(new RegExp('/^https?:\\/\\//', '')) || [])) ? soy.$$filterNoAutoescape(opt_data.mediaLink.contentUrl) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.mediaLink.contentUrl)) : (((opt_data.mediaLink.imageUrl).match(new RegExp('/^https?:\\/\\//', '')) || [])) ? soy.$$filterNoAutoescape(opt_data.mediaLink.imageUrl) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.mediaLink.imageUrl)));
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityContainerJoSubject = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer && opt_data.activityContainer.jiveObject && opt_data.activityContainer.jiveObject.subject) ? soy.$$filterNoAutoescape(opt_data.activityContainer.jiveObject.subject) : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityContentText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activity && opt_data.activity.content) ? (opt_data.activity.content.deleted) ? (opt_data.activity.content.typeThread) ? '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.reply.description'),[])) + '</em>' : '<em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('error.deleted.reply.description'),[])) + '</em>' : (opt_data.activity.content.typeExternalActivity) ? (opt_data.activity.content.summary) ? (opt_data.noAutoescape) ? soy.$$filterNoAutoescape(opt_data.activity.content.summary) : soy.$$escapeHtml(opt_data.activity.content.summary) : '' : ((opt_data.activity.moderated) ? '<div class="jive-warn-box" aria-live="polite" aria-atomic="true"><span class="jive-icon-med jive-icon-warn"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('blogs.posts.waitingMod.text'),[])) + '</div>' : '') + ((opt_data.activity.content.html) ? (opt_data.noAutoescape) ? soy.$$filterNoAutoescape(opt_data.activity.content.html) : soy.$$escapeHtml(opt_data.activity.content.html) : (opt_data.activity.content.text) ? (opt_data.noAutoescape) ? soy.$$filterNoAutoescape(opt_data.activity.content.text) : soy.$$escapeHtml(opt_data.activity.content.text) : '') : '');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.jsI18nHelper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.key),[])));
  return opt_sb ? '' : output.toString();
};


jive.eae.common.groupedUsers = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var noOverflow__soy757 = opt_data.groupedUserList.length <= opt_data.groupAfterNum;
  var singleUserOverflow__soy758 = opt_data.groupedUserList.length == opt_data.groupAfterNum + 1;
  var multiUserOverflow__soy759 = opt_data.groupedUserList.length > opt_data.groupAfterNum + 1;
  var singleUser__soy760 = opt_data.groupedUserList.length == 1;
  var multipleUsers__soy761 = opt_data.groupedUserList.length != 1;
  var groupedUserList762 = opt_data.groupedUserList;
  var groupedUserListLen762 = groupedUserList762.length;
  for (var groupedUserIndex762 = 0; groupedUserIndex762 < groupedUserListLen762; groupedUserIndex762++) {
    var groupedUserData762 = groupedUserList762[groupedUserIndex762];
    var userIsNextToLastGrouped__soy763 = groupedUserIndex762 == opt_data.groupAfterNum - 1;
    var userIsLastGrouped__soy764 = groupedUserIndex762 == opt_data.groupAfterNum;
    var userIsNotLastGrouped__soy765 = groupedUserIndex762 < opt_data.groupAfterNum;
    var userIsLastTotal__soy766 = groupedUserIndex762 == opt_data.groupedUserList.length - 1;
    if (groupedUserData762 && (userIsNotLastGrouped__soy765 || userIsLastGrouped__soy764 && singleUserOverflow__soy758)) {
      output.append((groupedUserIndex762 == groupedUserListLen762 - 1 && opt_data.groupedUserList.length > 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.and'),[])) + ' ' : '');
      if (((groupedUserData762.username).match(new RegExp('^__invited__', '')) || []).length) {
        output.append(soy.$$escapeHtml(groupedUserData762.email));
      } else if (! groupedUserData762.anonymous) {
        if (! opt_data.hideLinks) {
          jive.shared.displayutil.userDisplayNameLink(groupedUserData762, output);
        } else {
          jive.shared.displayutil.userDisplayName(groupedUserData762, output);
        }
      } else {
        jive.shared.displayutil.renderGuestDisplayName({message: groupedUserData762}, output);
      }
      output.append((multipleUsers__soy761 && (noOverflow__soy757 && ! userIsLastTotal__soy766 || singleUserOverflow__soy758 && ! userIsLastGrouped__soy764 || multiUserOverflow__soy759 && ! userIsNextToLastGrouped__soy763)) ? ((opt_data.groupedUserList.length > 2) ? ',' : '') + ' ' : '');
    }
  }
  if (opt_data.groupedUserList.length > opt_data.groupAfterNum + 1) {
    output.append(' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.and'),[])), ' ', (! opt_data.hideLinks) ? '<a href=\'#\' class="js-show-grouped-users jive-username-link">' : '', soy.$$escapeHtml(opt_data.groupedUserList.length - opt_data.groupAfterNum), ' ', (opt_data.groupedUserList.length > opt_data.groupAfterNum + 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.others'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.other'),[])));
    if (! opt_data.hideLinks) {
      output.append('</a><div class="js-grouped-users-popover j-grouped-users-popover" style="display:none"><ul class="j-grouped-user-list j-simple-list">');
      var groupedUserList810 = opt_data.groupedUserList;
      var groupedUserListLen810 = groupedUserList810.length;
      for (var groupedUserIndex810 = 0; groupedUserIndex810 < groupedUserListLen810; groupedUserIndex810++) {
        var groupedUserData810 = groupedUserList810[groupedUserIndex810];
        if (groupedUserData810 && groupedUserIndex810 >= opt_data.groupAfterNum) {
          if (((groupedUserData810.displayName).match(new RegExp('^__invited__', '')) || []).length) {
            output.append(soy.$$escapeHtml(groupedUserData810.email));
          } else if (! groupedUserData810.anonymous) {
            output.append('<li class="j-grouped-user">');
            jive.shared.displayutil.userDisplayNameLink(groupedUserData810, output);
            output.append('</li>');
          } else {
            output.append('<li class="j-grouped-user">');
            jive.shared.displayutil.renderGuestDisplayName({message: groupedUserData810}, output);
            output.append('</li>');
          }
        }
      }
      output.append('</ul></div>');
    }
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.contentTypeClassName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer.jiveObject.typeExternalActivity) ? 'j-act-app' : (opt_data.activityContainer.jiveObject.typeCollaboration) ? 'j-act-collaboration' : (opt_data.activityContainer.jiveObject.typeAnnouncement) ? 'j-act-announcement' : (opt_data.activityContainer.jiveObject.typeMention) ? 'j-act-mention' : (opt_data.activityContainer.jiveObject.typeShare) ? 'j-act-share' : (opt_data.activityContainer.jiveObject.typeExternalURL) ? 'j-act-bookmark' : (opt_data.activityContainer.jiveObject.typeThread) ? 'j-act-discussion j-thread-post' : (opt_data.activityContainer.jiveObject.typeDocument) ? 'j-act-document' : (opt_data.activityContainer.jiveObject.typeBlogPost) ? 'j-act-blog' : (opt_data.activityContainer.jiveObject.typePoll) ? 'j-act-poll' : (opt_data.activityContainer.jiveObject.typeTask) ? 'j-act-task' : 'j-act-generic');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.contentTypeDisplayName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer.jiveObject.typeExternalActivity) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.app'),[])) : (opt_data.activityContainer.jiveObject.typeDirectMessage) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.direct_message'),[])) : (opt_data.activityContainer.jiveObject.typeAnnouncement) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.announcement'),[])) : (opt_data.activityContainer.jiveObject.typeMention) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.mention'),[])) : (opt_data.activityContainer.jiveObject.typeShare) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.share'),[])) : (opt_data.activityContainer.jiveObject.typeExternalURL) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.bookmark'),[])) : (opt_data.activityContainer.jiveObject.typeThread) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.discussion'),[])) : (opt_data.activityContainer.jiveObject.typeDocument) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.document'),[])) : (opt_data.activityContainer.jiveObject.typeBlogPost) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.blog'),[])) : (opt_data.activityContainer.jiveObject.typePoll) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.poll'),[])) : (opt_data.activityContainer.jiveObject.typeTask) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.task'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.activity'),[])));
  return opt_sb ? '' : output.toString();
};


jive.eae.common.contentTypeParentPreviewStylingClassName = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer.jiveObject.typeThread) ? 'j-thread-post' : (opt_data.activityContainer.jiveObject.typeDocument) ? 'j-doc jive-content' : (opt_data.activityContainer.jiveObject.typeBlogPost) ? 'jive-content' : (opt_data.activityContainer.jiveObject.typeTask) ? 'j-task' : (opt_data.activityContainer.activityList[0].content.typeExternalActivity && opt_data.activityContainer.activityList[0].content.verb == 'uri:jiveName:app_install') ? 'jive-content j-appinstall  j-rc5' : 'jive-content j-rc5');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.loadingSpinner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/jive-icon-working-16x16.gif'))), '" class="j-eae-spinner js-loading-spinner" width="16" height="16" border="0"/>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.digestSubItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.activity.content.deleted) {
    output.append('<div class="font-color-meta-light">');
    jive.eae.common.collapsedExcerptText({text: '', hasMoreText: false, deletedType: 'expertise', moderated: false}, output);
    output.append('</div>');
  } else if (opt_data.activity.content.activityTemplate) {
    if (opt_data.user) {
      jive.shared.soy.render({templateName: opt_data.activity.content.activityTemplate, data: (function() { var map = {}; var pairs = [['activity', opt_data.activity], ['activityContainer', opt_data.activityContainer], ['user', opt_data.user], ['streamType', opt_data.streamType], ['filterData', opt_data.filterData], ['fromTemplate', opt_data.fromTemplate]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
    } else {
      jive.shared.soy.render({templateName: opt_data.activity.content.activityTemplate, data: (function() { var map = {}; var pairs = [['activity', opt_data.activity], ['activityContainer', opt_data.activityContainer], ['streamType', opt_data.streamType], ['filterData', opt_data.filterData], ['fromTemplate', opt_data.fromTemplate]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
    }
  } else {
    output.append('<div>');
    jive.eae.common.subactivity({activity: opt_data.activity, activityContainer: opt_data.activityContainer, user: opt_data.user, isHidden: false, streamType: opt_data.streamType, filterData: opt_data.filterData, canCreateMbImage: opt_data.canCreateMbImage, canCreateMbVideo: opt_data.canCreateMbVideo, addedInline: false, hideStub: false, forceCurrent: false}, output);
    output.append('</div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.readingPaneBottomReplyLinkKey = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.activityContainer.jiveObject.typeDocument || opt_data.activityContainer.jiveObject.typeBlogPost || opt_data.activityContainer.jiveObject.typeExternalURL || opt_data.activityContainer.jiveObject.typePoll) ? 'eae.inbox.comment.on.originalX' : 'eae.inbox.reply.to.originalX');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.embeddedPreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="emb-preview-', soy.$$escapeHtmlAttribute(opt_data.domIDPostfix), '" class="j-act-tile ', (opt_data.imageURL) ? 'hasImg' : '', ' clearfix">', (opt_data.imageURL) ? ((opt_data.externalURL) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL)) + '" class="j-act-tile-img j-rc3">' : '<span class="j-act-tile-img j-rc3">') + '<img class="act-tile-image" src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.imageURL)) + '" />' + ((opt_data.externalURL) ? '</a>' : '</span>') : '', '<div class="j-act-tile-text">', (opt_data.subject) ? ((opt_data.externalURL) ? '<a class="tileTitle" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL)) + '">' : '') + soy.$$filterNoAutoescape(opt_data.subject) + ((opt_data.externalURL) ? '</a>' : '') : '', (opt_data.textContent) ? '<div class="tileContent">' + soy.$$filterNoAutoescape(opt_data.textContent) + '</div>' : '', (opt_data.externalURLHost && opt_data.externalURLRoot) ? '<p class="j-act-tile-url"><a class="font-color-meta-light" href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURLRoot)) + '">' + soy.$$filterNoAutoescape(opt_data.externalURLHost) + '</a></p>' : '', '</div>');
  jive.eae.common.sharedVia(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.sharedVia = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="act-tile-shared-via font-color-meta"><img class="jive-icon-med jive-ext-icon-16" src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.viaIconURL ? opt_data.viaIconURL : jive.soy.func.buildUrl('/images/transparent.png'))), '"/>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('tse.sharedviaX'),[opt_data.viaName])), '</div>');
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityHeadingHref = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.activityContainer.activityList && opt_data.activityContainer.activityList.length) {
    if (opt_data.user) {
      if (opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length - 1].activityUser.id != opt_data.user.id) {
        jive.eae.common.activityHeadingHrefWithReferringUser({url: opt_data.url, source: opt_data.source, referringUserId: opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length - 1].activityUser.id}, output);
      } else {
        output.append(soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url,{'sr':opt_data.source})));
      }
    } else {
      jive.eae.common.activityHeadingHrefWithReferringUser({url: opt_data.url, source: opt_data.source, referringUserId: opt_data.activityContainer.activityList[opt_data.activityContainer.activityList.length - 1].activityUser.id}, output);
    }
  } else if (opt_data.activityContainer.latestAuthor) {
    if (opt_data.user) {
      if (opt_data.activityContainer.latestAuthor.id != opt_data.user.id) {
        jive.eae.common.activityHeadingHrefWithReferringUser({url: opt_data.url, source: opt_data.source, referringUserId: opt_data.activityContainer.latestAuthor.id}, output);
      } else {
        output.append(soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url,{'sr':opt_data.source})));
      }
    } else {
      jive.eae.common.activityHeadingHrefWithReferringUser({url: opt_data.url, source: opt_data.source, referringUserId: opt_data.activityContainer.latestAuthor.id}, output);
    }
  } else {
    output.append(soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url,{'sr':opt_data.source})));
  }
  return opt_sb ? '' : output.toString();
};


jive.eae.common.activityHeadingHrefWithReferringUser = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((((opt_data.url).match(new RegExp('#', 'g')) || []).length == 0) ? soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url,{'sr':opt_data.source,'ru':opt_data.referringUserId})) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.url)));
  return opt_sb ? '' : output.toString();
};


jive.eae.common.formatMediaLinkUrl__C2bf6 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.mediaLink.contentUrl) ? (((opt_data.mediaLink.contentUrl).match(new RegExp('/^https?:\\/\\//', '')) || [])) ? soy.$$filterNoAutoescape(opt_data.mediaLink.contentUrl) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.mediaLink.contentUrl)) : (((opt_data.mediaLink.imageUrl).match(new RegExp('/^https?:\\/\\//', '')) || [])) ? soy.$$filterNoAutoescape(opt_data.mediaLink.imageUrl) : soy.$$filterNoAutoescape(jive.soy.func.buildUrl(opt_data.mediaLink.imageUrl)));
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Navbar.Menu.Home");define("apps/navbar/menu/home/navbar_menu_home_main",["jquery","apps/activity_stream/models/activity_stream_source","apps/read_tracking/models/read_tracking_source","soy!jive.nav.menu.home.main","soy!jive.nav.menu.home.content"],function(e,a,b,d,c){jive.Navbar.Menu.Home.Main=jive.oo.Class.extend(function(f){this.init=function(h){var g=this;g.$button=$j(h);g.menuSource=new a();g.readTrackingSource=new b();g.counts={inbox:0,tasks:0,moderations:0};g.unreadItems={};g.pendingActionsCount=0;$j(h).on("click keypress",".j-js-update-indicator",function(m){if(m.type=="click"||(m.which&&$j.keyIs("enter",m.which))){var i=$j(this),k=$j("#j-home-global-nav-menu"),j=$j("#j-globalNav-bg").data("mode")==="simple";if(!k.length){var l=$j(this);g.$menu=$j(d({data:"",counts:""}));g.spinner=new jive.loader.LoaderView();g.$menu.html(g.spinner.getContent());g.$menu.popover({context:l,container:$j("#jive-nav-link-home"),flip:false,darkPopover:false,destroyOnClose:true,containWithinViewport:true,putBack:false,onLoad:function(){g.menuSource.getGlobalNavMenu().addCallback(function(p){var n=p.inboxItems.activityContainerList.length;if(n||p.taskItems.taskList.length||p.moderationItems.moderationList.length){var o=$j(c({data:p,counts:g.counts}));if(n){require(["lazy!apps/home/views/badge_menu_template_loader"],function(r){for(var s=0;s<n&&s<5;s++){var t=p.inboxItems.activityContainerList[s],w=t.activityList[t.activityList.length-1],q="";if(t.jiveObject.groupedCommActivityTemplate=="jive.eae.inbox.item.grouped.collaboratorNotification"){q="collaboratorNotification"}else{if(t.jiveObject.groupedCommActivityTemplate=="jive.eae.inbox.item.grouped.mention"||(w&&w.content.typeMention)){q="mention"}else{if(t.jiveObject.commListItemViewTemplate){var v=t.jiveObject.commListItemViewTemplate.lastIndexOf(".");q=t.jiveObject.commListItemViewTemplate.substring(v+1)}}}var u=$j(home.nav.drop.down.generic({activityContainer:t,user:p.inboxItems.viewingUser,objDescriptor:q}));o.find("#j-home-nav-menu-inbox-list").append(u)}g.$menu.trigger("updatePopoverHTML",[o]);g.spinner.destroy()})}else{g.$menu.trigger("updatePopoverHTML",[o]);g.spinner.destroy()}}else{g.spinner.destroy();g.$menu.trigger("close");i.hide();i.data("count",0);i.html("0");$j("#jive-nav-link-communications .j-js-update-indicator").hide().data("count",0).html("0")}})}})}else{k.trigger("close")}m.preventDefault()}});jive.ActivityStream.activityNotifier.addListener("activityStream.poll",function(i){g.updateCount(i)});jive.ActivityStream.activityNotifier.addListener("activityStream.push",function(i){g.pushCount(i)});jive.localexchange.addListener("inbox.read",function(j,i){g.removeUnreadItem({objectType:j,id:i});g.decrementNewCount("inbox",1)}).addListener("inbox.unread",function(j,i){g.addUnreadItem({objectType:j,id:i});g.decrementNewCount("inbox",-1)});jive.switchboard.addListener("inbox.read",function(j,i){g.removeUnreadItem({objectType:j,id:i});g.decrementNewCount("inbox",1)}).addListener("inbox.unread",function(j,i){g.addUnreadItem({objectType:j,id:i});g.decrementNewCount("inbox",-1)}).addListener("inbox.markAllRead",function(){g.unreadItems={};g.decrementNewCount("inbox",10000)}).addListener("tasks.taskComplete",function(){g.decrementNewCount("tasks",1)}).addListener("tasks.taskIncomplete",function(){g.decrementNewCount("tasks",-1)})};this.updateCount=function(i){var g=this;g.counts.inbox=i.fullCounts.communications.unreadCount;g.counts.actions=i.fullCounts.actions;g.counts.tasks=i.fullCounts.overdueTasks;g.counts.moderations=i.fullCounts.moderations;var h=i.fullCounts.communications.unreadItems;$j.each(h,function(j,k){g.addUnreadItem(k)});g.renderCounts()};this.pushCount=function(m){var g=this;var h=g.$button.find(".j-js-update-indicator"),i=h.data("count"),l,k=m.parent;if(m.counts.tasks){l=i+1;var j=$j(jive.welcome.updateIndicator({type:"count",count:l,extraCssClasses:"j-navbadge-count j-ui-elem"}));if(h.length){h.replaceWith(j)}else{g.$button.append(j)}if(g.$button.hasClass("active")){g.updateTitleCount(l)}}else{if(m.counts.communications&&!g.isItemPreviouslyUnread(k)){jive.localexchange.emit("inbox.unread",k.objectType,k.id)}else{if(!m.counts.communications&&m.updateCommsData&&g.isItemPreviouslyUnread(k)){jive.localexchange.emit("inbox.read",k.objectType,k.id)}}}};this.addUnreadItem=function(g){var i=this.hashUnreadItem(g);var h=this.unreadItems[i];if(h===undefined){this.unreadItems[i]=g}};this.removeUnreadItem=function(g){var i=this.hashUnreadItem(g);var h=this.unreadItems[i];if(h!==undefined){delete this.unreadItems[i]}};this.getUnreadItems=function(){return this.unreadItems};this.isItemPreviouslyUnread=function(h){var i=this.hashUnreadItem(h);var g=this.unreadItems[i];if(g===undefined){return false}return true};this.hashUnreadItem=function(g){return g.objectType+"-"+g.id};this.decrementNewCount=function(h,i){var g=this;if(g.counts[h]<=50||i>1000){g.counts[h]=g.counts[h]-i;if(g.counts[h]<0){g.counts[h]=0}g.renderCounts()}};this.renderCounts=function(){var g=this,j=g.counts.inbox+g.counts.moderations,i=$j(jive.welcome.updateIndicator({type:"count",count:j,extraCssClasses:"j-navbadge-count j-ui-elem"}));var h=g.$button.find(".j-js-update-indicator");if(h.length){h.replaceWith(i)}else{g.$button.append(i)}if(g.$button.hasClass("active")){g.updateTitleCount(j)}};this.updateTitleCount=function(h){var j=document.title,i=j.indexOf(")");if(i!=-1){j=j.substring(j.indexOf(")")+2)}var g="";if(h>0){g="("+(h>50?"50+":h)+")"}document.title=g+" "+j};this.markRead=function(g,j){var h=this,i={objectType:g,id:j};h.readTrackingSource.save(g,j,true);if(h.isItemPreviouslyUnread(i)){jive.switchboard.emit("inbox.read",g,j)}}});return jive.Navbar.Menu.Home.Main});
;
define("jive.component.PopupView",["jquery"],function(b){var a=jive.oo.Class.extend(function(c){c.init=function(d){this.$element=b(d)};this.toString=function(){return"[object PopupView]"};this.show=function(f,e,h,d,g){e=e?e:f;h=h!=null?h:true;d=d!=null?d:false;this.trigger=f;this.$element.popover({container:"#j-spotlight-search",context:e,closeOnClick:true,closeOtherPopovers:h,destroyOnClose:false,flip:false,focusPopover:d,additionalContainerSelector:"#j-spotlight-search, .j-spotlight-search, .jive-spotlight-search-result"})};this.hide=function(){this.$element.trigger("close")};this.getTrigger=function(){return this.trigger};this.getState=function(){return this.$element.is(":visible")?"visible":"hidden"};this.getTopMargin=function(){return this.$element.closest(".js-pop").offset().top-b(window).scrollTop()};this.getOuterHeight=function(){return this.$element.closest(".js-pop").outerHeight()};this.scrollTo=function(d){var g=this.$element.find(".j-spotlight-find");if(g.length<1){return}var h=g.height();var n=g.offset().top;var e=n+h;var k=d.outerHeight();var m=d.offset().top;var l=m+k;var j=g.find("h4").outerHeight()||32;var i=m<n+j;var f=l>e-j;if(i){g.scrollTo(d,{offset:0-j})}else{if(f){g.scrollTo(d,{offset:0-(h-k-j)})}}}});a.toString=function(){return"[wrapper PopupView]"};a.getBindName=function(){return"PopupView"};return a});
;
define("jive.component.ProgressMeterView",["jquery"],function(a){var b=jive.oo.Class.extend(function(c){c.init=function(d){this.$element=a(d)};this.toString=function(){return"[object ProgressMeterView]"};this.start=function(){if(!this.spinner){this.spinner=new jive.loader.LoaderView({inline:true,showLabel:false,size:this.$element.attr("data-size")});this.spinner.appendTo(this.$element);this.$element.attr("data-active",true)}};this.stop=function(){if(this.spinner){this.spinner.getContent().remove();this.spinner.destroy();this.$element.attr("data-active",false)}};this.getMode=function(){var d=this.$element.data("mode");return d?d:"undetermined"};this.isActive=function(){var d=this.$element.data("active");return d?d:false}});b.toString=function(){return"[wrapper ProgressMeterView]"};b.getBindName=function(){return"ProgressMeterView"};return b});
;
(function(a){a.fn.view=function(b,c){if(!jQuery.isFunction(b)){throw"IllegalViewParameterException"}if(!c&&b.getBindName){c=b.getBindName()}if(!c){throw"IllegalBindParameterException"}var e;if(this.length){var d=this.first();e=d.data(c);if(e==null){e=new b(d.get(0));d.data(c,e)}else{if(!(e instanceof b)){throw"PropertyAlreadyBoundException"}}}return e}})(jQuery);
;
define("jive.component.list",["jquery"],function(b){var a={};a.ListView=jive.oo.Class.extend(function(c){this.init=function(d){this.$element=b(d)};this.toString=function(){return"[object ListView]"};this.allowWrap=function(){return this.$element.data("wrap")==true};this.getListItemElements=function(){return this.$element.find("[data-component='listitem']:visible").get()};this.getListItems=function(){var d=[];b(this.getListItemElements()).each(function(e,f){d.push(b(f).view(a.ListItemView))});return d};this.getSelectedElement=function(){return b(this.getListItemElements()).filter(".j-selected").get(0)};this.getSelectedIndex=function(){var d=this.getSelectedElement();if(d){return b(this.getListItemElements()).index(d)}else{return -1}};this.select=function(e){var d=this.getListItemElements();if(b.isNumeric(e)){if(this.allowWrap()){e=this.wrapIndex(e)}e=d[e]}b(d).filter(".j-selected").removeClass("j-selected");b(e).addClass("j-selected")};this.incriment=function(e){if(e==0){return}var d=this.getSelectedIndex();if(e<0&&d==-1){e++}e=d+e;this.select(e)};c.wrapIndex=function(e){var d=this.getListItemElements().length;e=e%d;e=e<0?d+e:e;return e}});a.ListView.toString=function(){return"[wrapper ListView]"};a.ListView.getBindName=function(){return"ListView"};a.ListItemView=jive.oo.Class.extend(function(c){this.init=function(d){this.$element=b(d)};this.toString=function(){return"[object ListItemView]"};this.getListElement=function(){return this.$element.closest("[data-component='list']").get()};this.getList=function(){return b(this.getListElement()).view(item.ListView)};this.select=function(){this.getList().select(this.$element.get())}});a.ListItemView.toString=function(){return"[wrapper ListItemView]"};a.ListItemView.getBindName=function(){return"ListItemView"};return a});
;
define("apps/share/models/deferred_rest_service",function(){jive.DeferredRestService=jive.oo.Class.extend(function(a){var b=jQuery;a.resourceType="abstract";a.displayGenericErrorMessages=true;a.putOnUpdate=false;a.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};a.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}b.ajax(b.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.resolve(k)},error:this.errorCallback(j,c),timeout:30000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new b.Deferred(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new b.Deferred(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=b.extend({},this.defaultParams,e);return this.commonAjaxRequest(new b.Deferred(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new b.Deferred(),c=this;if(e.hasOwnProperty("id")){e=e.id}b.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};a.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};a.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};a.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.reject.apply(e,d)};a.displayError=function(c){b(c).message({style:"error"})};a.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};a.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};a.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};a.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};a.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};a.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};a.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});return jive.DeferredRestService});
;
define("jive.component.autosearch.SearchSource",["jquery"],function(a){return jive.DeferredRestService.extend(function(b){b.resourceType="search";this.init=function(c){this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/search"};this.createParams=function(d,h,c,f,g,j){var i={};i.startIndex=j;i.sort=f;i.origin="spotlight";i.highlight=false;i.count=g;i.filter=[];if(c){i.fields=a.isArray(c)?c.join(","):c}if(h){for(var e in h){i.filter.push(e+"("+h[e]+")")}}if(d){i.filter.push("search("+d+")")}return i};this.query=function(j,e,d,h,g,i,k){var f=this.createParams(e,d,h,g,i,k);if(j==="contents"){f.collapse=true;f.directive=["include_rtc"]}var c=this.RESOURCE_ENDPOINT+"/"+j;return this.commonAjaxRequest(new a.Deferred(),"GET",{url:c,data:f})}})});
;
define("jive.component.autosearch.ActivitySource",["jquery"],function(a){return jive.DeferredRestService.extend(function(b){b.resourceType="search";this.init=function(c){this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/activities/"};this.queryFrequent=function(e,c,f){var g={};g.count=f;if(c){g.fields=a.isArray(c)?c.join(","):c}var d=this.RESOURCE_ENDPOINT+"frequent/"+e;return this.commonAjaxRequest(new a.Deferred(),"GET",{url:d,data:g})};this.queryRecent=function(e,c,f){var g={};g.count=f;if(c){g.fields=a.isArray(c)?c.join(","):c}var d=this.RESOURCE_ENDPOINT+"recent/"+e;return this.commonAjaxRequest(new a.Deferred(),"GET",{url:d,data:g})}})});
;
define("apps/autosearch/content_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/contents"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/autosearch/people_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/people"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/autosearch/place_source",["jquery","apps/shared/models/rest_service"],function(b,a){return a.extend(function(c){c.resourceType="search";this.init=function(d){this.suppressGenericErrorMessages();this.RESOURCE_ENDPOINT=_jive_base_url+"/api/core/v3/places"};this.query=function(g,f){var h={};h.count=f;h.origin="spotlight";h.filter=[];if(g){for(var e in g){h.filter.push(e+"("+g[e]+")")}}var d=this.RESOURCE_ENDPOINT;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:h})}})});
;
define("apps/shared/models/bookmark_source",["apps/shared/models/rest_service"],function(a){jive.BookmarkSource=a.extend(function(b){b.resourceType="bookmark"});return jive.BookmarkSource});
;
jive.namespace("search");jive.search.arrived=new Date().getTime();jive.search.SearchMetrics=jive.oo.Class.extend(function(a){var b=jQuery;a.init=function(d){this.data={name:d,referrer:document.referrer,pageArriveDate:jive.search.arrived,pageLeftDate:undefined,queries:[]};this.byName={};var c=this;b(window).on("beforeunload",function(){c.data.pageLeftDate=new Date().getTime();if(c.data.queries.length){c.commit(true)}})};this.commit=function(c){var d=JSON.stringify(this);return b.ajax({type:"POST",url:jive.app.url({path:"/api/core/v3/search/monitor"}),data:d,async:!c,contentType:"application/json",dataType:"json"})};this.addQuery=function(d,c){this.data.queries.push(d);if(c){this.byName[c]=d;if(c.slice(0,3)==="alt"){d.isAlternate=true}}return this};this.getQuery=function(c){return this.byName[c]};this.forEachCurrent=function(d){for(var c in this.byName){if(this.byName.hasOwnProperty(c)){d(this.byName[c],c)}}return this};this.setChoice=function(f,e,d){var g=this.byName[f],c=g.getResult(e);if(_.isObject(c)){g.setChoice({index:e,item:c,clickedUrl:d,date:new Date().getTime()})}return this};this.toJSON=function(){return this.data}});jive.search.SearchMetricsQuery=jive.oo.Class.extend(function(a){a.init=function(c,b){this.data={query:c||"",sentDate:b||new Date().getTime(),returnedDate:undefined,results:[]}};this.addResults=function(b){var c=this.data.results;c.push.apply(c,b);return this};this.getResult=function(b){return this.data.results[b]};this.forEachResult=function(d){var c=this.data.results;for(var b in c){if(c.hasOwnProperty(b)){d(c[b],b)}}return this};this.setReturnedDate=function(b){this.data.returnedDate=b;return this};this.incPage=function(){this.data.pagesLoaded=(this.data.pagesLoaded||0)+1;return this};this.abort=function(){this.data.aborted=new Date().getTime();return this};this.setChoice=function(b){this.data.choice=b;return this};this.toJSON=function(){return this.data}});
;
jive.namespace("search");(function(d){var l=jive.search,k=jive.app.url({path:"/api/core/v3"}),h={content:{url:k+"/search/contents",validParams:["count","startIndex","sort"],validFilters:["search","type","tag","author","place","after","language"],defaults:{collapse:"true",fields:"rootType,type,subject,author,question,answer,helpful,parentPlace,parentContent,highlightSubject,highlightBody,highlightTags,outcomeCounts,published,updated,replyCount,likeCount,viewCount,visibleToExternalContributors,binaryURL,iconCss",directive:["include_rtc"]}},people:{url:k+"/search/people",validParams:["count","startIndex","sort"],validFilters:["search","nameonly"],defaults:{}},places:{url:k+"/search/places",validParams:["count","startIndex","sort"],validFilters:["search","type","tag"],defaults:{}}};function e(){return k}function j(m){return h[m].url}function b(m,o){var n=d.getJSON(m,o).then(function(p){if(p.links&&p.links.next){p.next=b.bind(this,p.links.next,{})}p.returnedDate=new Date().getTime();return p});n.query=m+"?"+d.param(o);n.sentDate=new Date().getTime();return n}function i(r,q){if(!h.hasOwnProperty(r)){throw new Error("Invalid type, must be content, people, or places")}if(!q){throw new Error("Must provide params to query")}var p=d.extend({},h[r].defaults),m=h[r].validParams;var n=l.getUrl(r);m.forEach(function(s){if(q[s]){p[s]=q[s]}});var o=q.filter;if(o instanceof Array){o=o.map(function(s){if(s==="type(dm)"){return"type(dm,collaboration,interaction)"}else{return s.replace(/^after\((.*)\)$/,function(t,u){return"after("+g(u)+")"})}})}p.filter=o;return b(n,p)}function a(n,m){var o=JSON.stringify(n);return d.ajax({type:"POST",url:k+"/search/monitor",data:o,async:!m,contentType:"application/json",dataType:"json"})}function c(o,n,m){if(!o.hasOwnProperty("filter")){o.filter=[]}if(d.isArray(m)){m=m.join(",")}o.filter.push(n+"("+m+")")}var f={day:1,week:7,month:30,quarter:90,year:365};function g(r){var n=86400000;var o=new Date();var m=new Date(o.getFullYear(),o.getMonth(),o.getDate());var q=m.getTime();var s=f[r];if(!s){return false}var p=new Date(q-n*s).toISOString();return p.replace(/Z$/,"+0000")}if(!Date.prototype.toISOString){(function(){function m(o){var n=String(o);if(n.length===1){n="0"+n}return n}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+m(this.getUTCMonth()+1)+"-"+m(this.getUTCDate())+"T"+m(this.getUTCHours())+":"+m(this.getUTCMinutes())+":"+m(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+"Z"}}())}l.query=i;l.logMonitoring=a;l.getBaseUrl=e;l.getUrl=j})(jQuery);
;
define("apps/autosearch/autosearch",["jquery","jive.component.autosearch.SearchSource","jive.component.autosearch.ActivitySource","apps/autosearch/content_source","apps/autosearch/people_source","apps/autosearch/place_source","jive.component.list","jive.component.PopupView","jive.component.ProgressMeterView"],function(c,b,h,k,a,d,e,f,g){var j={};j.init=function(){var l=c(document);c("input[data-component='autosearch']").placeHeld();l.on("focus.autosearchview","input[data-component='autosearch']",function(m){c(this).view(i)});jive.switchboard.addListener("bookmark.create",function(o){var n=c("#j-spotlight-search");n.addClass("j-bookmark-created");n.append(jive.autosearch.overlay({type:"bookmark"}));var m=n.find(".j-tooltip");m.fadeIn(250);setTimeout(function(){n.removeClass("j-bookmark-created");m.fadeOut(250,function(){c(this).remove()})},1500)})};var i=jive.oo.Class.extend(function(l){l.init=function(u,x){x=x||{};this.$element=c(u);this.resultsView=this.$element.data("resultsView")||f;this.searchSource=new b();this.activitySource=new h();this.contentSource=new k();this.peopleSource=new a();this.placeSource=new d();this.bookmarkSource=new jive.BookmarkSource();this.metrics=new jive.search.SearchMetrics("spotlight-search");this.$element.attr("maxlength",250);if(this.$element.data("container")){var w=this.$element.data("container").split(":");this.containerType=parseInt(w[0]);this.containerId=parseInt(w[1]);this.containerBrowseId=parseInt(this.$element.data("container-browseid"));this.filterType="place";this.filter=["/places/"+this.containerBrowseId];this.additionalFilters={depth:"ALL"};this.displayName=this.$element.data("container-name");this.forceFiltered=true}else{this.containerType=jive.global.containerType;this.containerId=jive.global.containerID;this.containerBrowseId=jive.global.containerBrowseId}this.deferreds=[];if(this.containerType==3){this.peopleSource.get(this.containerId).addCallback(function(y){if(y){o("people",y);this.filterType="author";this.filter=new RegExp("/[^/]*/[^/]*$").exec(y.resources.self.ref);this.displayName=y.displayName}}.bind(this))}else{if(this.containerType!=2020&&this.containerBrowseId!=-1){this.placeSource.get(this.containerBrowseId).addCallback(function(y){if(y&&!(y.type=="space"&&y.parent==null)){this.filterType="place";this.filter=new RegExp("/[^/]*/[^/]*$").exec(y.resources.self.ref);this.additionalFilters={depth:"ALL"};this.displayName=y.name}}.bind(this))}}var t=this;var s=c("[data-type='clear'][data-field='"+this.$element.get(0).id+"']");s.on("click",function(y){t.$element.focus();t.$element.val("");t.setView(null);t.renderView();t.loadViewContent();c(this).removeClass("j-active")});function v(y){var z=y.find("[data-component='button'][data-command='remove']").data("id");t.deleteBookmark(z).addCallback(function(){y.fadeOut("fast",function(){y.remove()})})}this.$element.typeAhead({keystrokeWait:400,suppressBlurEvent:(/iPhone|iPod|iPad/).test(navigator.userAgent),itemSelector:"li.j-listitem:visible",tabSelector:"nav a[data-component='button'][data-view]:visible",deselectOnMouseOut:true}).on("keystroke",function r(z){var A=t.getSearchTerm();if(A){t.change()}else{t.clear()}var y=t.getPopup();if(y.getState()=="visible"){if(A.length){s.addClass("j-active")}else{s.removeClass("j-active")}}}).on("focusWaitFinished",function(y){c(this).closest("[role=search]").addClass("focused");var z=c(this).view(i);if(z.getPopup().getState()!="visible"){z.renderView();z.loadViewContent()}}).on("blurWaitFinished",function(y){c(this).closest("[role=search]").removeClass("focused").end().trigger("close")}).on("selectionChosen",function(E,C,z,F){var B=z.find("a:first"),A=B.attr("href");if(B.is("[data-component='button']")){if(B.is("[data-command='more']")){var y=B.closest("ol").find("li.j-inactive").removeClass("j-inactive").first();C.setSelected(y);B.closest("li").addClass("j-inactive")}t.activateItem(z)}else{if(c(F.target).is("[data-component='button']")){var D=c(F.target);if(D.is("[data-command='remove']")){v(z)}t.activateItem(z)}else{if(F.type=="click"){F.noPreventDefault();t.activateItem(z)}else{setTimeout(function(){if(!E.isDefaultPrevented()){window.location=A}},0)}}}}).on("otherClick",function(A,z,y){if(y.is("[data-component='button'][data-view]")){t.setView(y.data("view"));t.renderView();t.loadViewContent()}}).on("otherEnter",function(){t.navigateToSearchPage()}).on("close",function(){t.hidePopup()}).on("selectionChanged",function(A,B,z,C){var y=t.getPopup();if(C!=="mouse"&&y.scrollTo){y.scrollTo(z)}}).attr("aria-autocomplete","list").attr("role","combobox");c("[data-type='search'][data-field='"+this.$element.get(0).id+"']").on("click",function(y){t.navigateToSearchPage()})};this.toString=function(){return"[object AutoSearchView]"};l.getCurrentView=function(){var r=this.currentView;if(!r){r=this.getDefaultView()}return r};l.getDefaultView=function(){var r=this.getAvailableViews();if(r.frequent){return"frequent"}else{if(r.bookmarks){return"bookmarks"}else{return null}}};this.getPopupElement=function(){var t=this.$element.data("popupElement");if(!t){var r=this.$element.data("popup");var s;if(r){s=c("#"+r)}else{s=c(jive.autosearch.spotlightPopup());this.$element.after(s)}t=s.get(0);this.$element.data("popupElement",t)}return t};l.getSearchTerm=function(){var r=this.$element.placeHeldVal();if((r.match(/[^\s]/g)||[]).length>=2){r=c.trim(r).replace(/\s+/g," ");if(r.length>=2){return r}}return""};this.activateItem=function(u){var r=c(u);if(!r.children().andSelf().hasClass("more")&&this.getCurrentView()=="all"||this.getCurrentView()=="filtered"){var s=r.closest("[data-component='listitem']").prevAll("[data-component='listitem']").length;var t=r.closest("div[data-type]").attr("data-type");this.metrics.setChoice(t,s,r.get(0).href)}};this.getPopup=function(){return c(this.getPopupElement()).view(this.resultsView)};this.hidePopup=function(){this.getPopup().hide()};this.showPopup=function(){var r=this.getPopup();if(!c(this.getPopupElement()).is(":visible")){var s=this.anchor?c(this.anchor):null;if(!s){s=this.$element.data("popup-anchor");s=s?c("#"+s):this.$element}this.getPopup().show(this.$element.get(0),s);this.$element.data("typeAhead").setSuggestElement(this.getPopupElement())}};this.setAnchor=function(r){this.anchor=r};l.getListElement=function(){var r=c(this.getPopupElement());return r.find("[data-component='list']").get(0)};l.specify=function(r,t,s){this.deferreds.push(t);return t.pipe(function(u){return{type:r,params:s,data:u}})};l.fieldsFor=function(r){if(r=="content"){return["type","id","author","subject","visibleToExternalContributors","published","updated","question","answer","helpful"]}else{if(r=="people"){return["type","id","name","displayName","thumbnailId","jive"]}else{if(r=="places"){return["type","id","name","displayName","visibleToExternalContributors"]}}}return[]};l.loadFrequentlyViewed=function(){var r=[];r.push(this.specify("content",this.activitySource.queryFrequent("content",this.fieldsFor("content"),10)));r.push(this.specify("people",this.activitySource.queryFrequent("people",this.fieldsFor("people"),10)));r.push(this.specify("places",this.activitySource.queryFrequent("places",this.fieldsFor("places"),10)));return r};l.loadBookmarks=function(){var r=new c.Deferred();this.contentSource.query({type:"favorite",author:"/people/"+_jive_current_user.ID},10).then(function(s){r.resolve(s)});return[this.specify("content",r)]};l.loadHistory=function(){var r=[];r.push(this.specify("content",this.activitySource.queryRecent("content",this.fieldsFor("content"),10)));r.push(this.specify("people",this.activitySource.queryRecent("people",this.fieldsFor("people"),10)));r.push(this.specify("places",this.activitySource.queryRecent("places",this.fieldsFor("places"),10)));return r};l.executeSearch=function(){var r=[];r.push(this.performSearchQuery("content",this.fieldsFor("content")));if(this.getCurrentView()!="filtered"){r.push(this.performSearchQuery("people",this.fieldsFor("people")));r.push(this.performSearchQuery("places",this.fieldsFor("places")))}return r};l.performSearchQuery=function(v,s){var t=n(c.trim(this.getSearchTerm())),u=null;if(this.getCurrentView()=="filtered"){u={};u[this.filterType]=this.filter;if(this.filterType=="place"){c.extend(u,this.additionalFilters)}}var r=v=="content"?"contents":v;var y=this.searchSource.createParams(t,u,s,"relevanceDesc",10);var w=new jive.search.SearchMetricsQuery("/api/core/v3/search/"+r+"?"+c.param(y));this.metrics.addQuery(w,r);var x=this.searchSource.query(r,t,u,s,"relevanceDesc",10);x.then(this.processSearchResult.bind(this,w));return this.specify(v,x,{searchTerm:t,filterType:this.filterType,filter:this.filter})};l.processSearchResult=function(s,r){s.setReturnedDate(new Date().getTime());s.addResults(r.list.map(p))};function n(t){if(t.length<2){return t}var s=t.split(" ");var r=s[s.length-1];if(r.length>1){return t+"*"}else{if(r.length==1&&m(r)){return t}else{return n(c.trim(t.substring(0,t.length-2)))}}}function m(s){var r=/^\d$/;return r.test(s)}function p(r){return{id:r.id,type:r.type}}this.deleteBookmark=function(s){var r=new jive.conc.Promise();this.bookmarkSource.destroy(s).addCallback(function(){jive.switchboard.emit("bookmark.destroy",jQuery.extend({},{id:s}));r.emitSuccess()});return r};function o(s,r){if(r.type=="favorite"&&r.favoriteObject.type!="url"){r=r.favoriteObject;r.displayExternalAccess=(!_jive_current_user.partner)&&r.visibleToExternalContributors}if(s=="content"){if(r.published){r.publishedDate=q(r.published).getTime()}if(r.updated){r.updatedDate=q(r.updated).getTime()}if(r.author&&!r.author.displayName){r.author.displayName=r.author.name.formatted||r.author.jive.username}if(r.type=="file"&&r.binaryURL){r.extension=r.binaryURL.split(".").slice(-1).join(".").toLowerCase()}if(!r.subject&&r.highlightSubject){r.subject=r.highlightSubject}if(!r.subject&&r.parentContent){r.subject=r.parentContent.name}r.subject=c("<div>"+r.subject+"</div>").text();r.displayExternalAccess=(!_jive_current_user.partner)&&r.visibleToExternalContributors}else{if(s=="people"){if(r.jive&&r.jive.profile&&r.jive.profile instanceof Array){c(r.jive.profile).each(function(t,u){if(u.jive_label=="Title"){r.title=u.value}else{if(u.jive_label=="Department"){r.department=u.value}}})}if(!r.displayName){r.displayName=r.name.formatted||r.jive.username}r.displayExternalContributor=(!_jive_current_user.partner)&&r.jive&&r.jive.externalContributor}else{r.displayExternalAccess=(!_jive_current_user.partner)&&r.visibleToExternalContributors}}}function q(u){var r=u.replace(/\+\d+/,"Z");var t=new Date(r);if(isNaN(t.getTime())){var s=r.replace(/-/,"/").replace("T"," ").replace(/\.\d+Z/," GMT");t=new Date(s)}return t}l.getAvailableViews=function(){var r=this.$element.data("hidetypes");return{bookmarks:s("bookmarks"),frequent:s("frequent"),recent:s("recent"),all:s("all"),filtered:this.filterType?s("filtered"):false,content:s("content"),places:s("places"),people:s("people")};function s(t){return r.indexOf(t)<0}};this.renderView=function(){var s=this.getCurrentView();if(s){var r=c(this.getPopupElement());r.empty();r.append(jive.autosearch.spotlightView({view:s,availableViews:this.getAvailableViews(),filterDisplayName:this.displayName,communityName:this.$element.attr("data-community-name")}));this.showPopup();if(s=="bookmarks"||s=="frequent"||s=="recent"||s=="all"){jive.Accessibility.speak(jive.i18n.getMsg("search.view.default.title"))}else{jive.Accessibility.speak(jive.i18n.getMsg("search.view.search.title"))}}else{this.hidePopup()}};l.startLoad=function(){var r=c(this.getPopupElement());r.attr("aria-busy","true");var s=r.find("[data-component='loadingpanel']");var t=r.find("[data-component='progressmeter']");if(s.length){t=s.find("[data-component='progressmeter']")}t.each(function(u,v){c(v).view(g).start()})};l.endLoad=function(){var r=c(this.getPopupElement());var s=r.find("[data-component='progressmeter']");s.each(function(t,u){c(u).view(g).stop()});r.attr("aria-busy","false")};this.loadViewContent=function(){var u=this.getCurrentView(),t;while(this.deferreds.length){this.deferreds[0].reject();this.deferreds.shift()}this.startLoad();switch(u){case"frequent":t=this.loadFrequentlyViewed();break;case"recent":t=this.loadHistory();break;case"bookmarks":t=this.loadBookmarks();break;case"all":case"filtered":t=this.executeSearch();break}if(t&&t.length){var s=this,r=c.trim(s.getSearchTerm())+"*";c.when.apply(c,t).done(function(){s.processResult(u,r,Array.prototype.slice.call(arguments))})}};l.processResult=function(t,u,v){if(t==this.getCurrentView()){this.endLoad();var s=this.getAvailableViews();var w={view:t,searchTerm:u,filterType:this.filterType,filter:this.filter,results:{}};if(v){v.forEach(function(y){if(y&&y.data&&y.data.list){y.data.list.forEach(function(z){o(y.type,z)});if(s[y.type]){w.results[y.type]=y.data.list}}})}var r=c(jive.autosearch.results(w)),x=r.find("li[data-type][data-id]");(v||[]).forEach(function(y){(y.data&&y.data.list||[]).forEach(function(z){x.filter(function(){var A=c(this);return A.attr("data-type")==z.type&&A.attr("data-id")==z.id}).data("item",z)})});c(this.getListElement()).empty().append(r);this.calculateResultsMaxHeight()}};this.setView=function(r){this.currentView=r};l.change=function(){var r=this.getCurrentView();if(r!="all"&&r!="filtered"){if(this.forceFiltered){this.setView("filtered")}else{this.setView("all")}this.renderView()}this.loadViewContent()};l.clear=function(){var r=this.getCurrentView();if(r=="all"||r=="filtered"){this.setView(null);this.renderView()}this.loadViewContent()};l.calculateResultsMaxHeight=function(){var v=this.getPopup().getOuterHeight(),s=this.getPopup().getTopMargin(),x=c(window).height(),t=c(this.getListElement());if(v+s<x){this.setResultsMaxHeight("auto")}else{var w=10,u=x-s-w,r=v-t.removeAttr("maxHeight").height();this.setResultsMaxHeight(u-r)}};l.setResultsMaxHeight=function(s){var t=40,r=c(this.getListElement());if(!isNaN(s)&&s>t){r.css("maxHeight",s)}else{r.removeAttr("maxHeight")}};this.navigateToSearchPage=function(){var r={};if(this.getSearchTerm().length>0){r.q=this.getSearchTerm()}if(this.getCurrentView()=="filtered"){r[this.filterType]=this.filter;if(this.filterType=="place"){c.extend(r,this.additionalFilters)}}window.location=_jive_base_url+"/search.jspa?"+c.param(r)}});i.toString=function(){return"[wrapper AutoSearchView]"};i.getBindName=function(){return"AutoSearchView"};c(document).ready(function(){j.init()});return i});
;
define("libRange",["jquery"],function(g){function p(v){var u=0;while(v=v.previousSibling){++u}return u}function o(v,u){u.parentNode.insertBefore(v,u.nextSibling)}function s(w,u){var x=w,v;while(x){v=u;while(v&&x!=v){v=v.parentNode}if(x==v){break}x=x.parentNode}if(!x&&w.ownerDocument){return w.ownerDocument.documentElement}return x}var f=(function(){function u(C,B){var x=this;function v(){return C.selection.createRange()}function w(){return new B(C)}function A(){var D=v();if(!D||D.item){return false}return D.compareEndPoints("StartToEnd",D)===0}function y(D,E){var F,O=0,L,I,H,G,J,M,K=-1,N;F=D.duplicate();F.collapse(E);N=F.parentElement();if(N.ownerDocument!==C){return}while(N.contentEditable==="false"){N=N.parentNode}if(!N.hasChildNodes()){return{node:N,inside:1}}H=N.children;L=H.length-1;while(O<=L){M=Math.floor((O+L)/2);G=H[M];F.moveToElementText(G);K=F.compareEndPoints(E?"StartToStart":"EndToEnd",D);if(K>0){L=M-1}else{if(K<0){O=M+1}else{return{node:G}}}}if(K<0){if(!G){F.moveToElementText(N);F.collapse(true);G=N;I=true}else{F.collapse(false)}F.setEndPoint(E?"EndToStart":"EndToEnd",D);if(F.compareEndPoints(E?"StartToStart":"StartToEnd",D)>0){F=D.duplicate();F.collapse(E);J=-1;while(N==F.parentElement()){if(F.move("character",-1)==0){break}J++}}J=J||F.text.replace("\r\n"," ").length}else{F.collapse(true);F.setEndPoint(E?"StartToStart":"StartToEnd",D);J=F.text.replace("\r\n"," ").length}return{node:G,position:K,offset:J,inside:I}}function z(){var D=v(),M=w(),G,F,K,L,H,E;G=D.item?D.item(0):D.parentElement();if(G.ownerDocument!=C){return M}F=A();if(D.item){M.setStart(G.parentNode,p(G));M.setEnd(M.startContainer,M.startOffset+1);return M}function J(U){var P=y(D,U),N,S,T=0,R,Q,O;N=P.node;S=P.offset;if(P.inside&&!N.hasChildNodes()){M[U?"setStart":"setEnd"](N,0);return}if(S===Q){M[U?"setStartBefore":"setEndAfter"](N);return}if(P.position<0){R=P.inside?N.firstChild:N.nextSibling;if(!R){M[U?"setStartAfter":"setEndAfter"](N);return}if(!S){if(R.nodeType==3){M[U?"setStart":"setEnd"](R,0)}else{M[U?"setStartBefore":"setEndBefore"](R)}return}while(R){O=R.nodeValue;T+=O.length;if(T>=S){N=R;T-=S;T=O.length-T;break}R=R.nextSibling}}else{R=N.previousSibling;if(!R){return M[U?"setStartBefore":"setEndBefore"](N)}if(!S){if(N.nodeType==3){M[U?"setStart":"setEnd"](R,N.nodeValue.length)}else{M[U?"setStartAfter":"setEndAfter"](R)}return}while(R){T+=R.nodeValue.length;if(T>=S){N=R;T-=S;break}R=R.previousSibling}}M[U?"setStart":"setEnd"](N,T)}try{J(true);if(!F){J()}}catch(I){if(I.number==-2147024809){H=x.getBookmark(2);K=D.duplicate();K.collapse(true);G=K.parentElement();if(!F){K=D.duplicate();K.collapse(false);L=K.parentElement();L.innerHTML=L.innerHTML}G.innerHTML=G.innerHTML;x.moveToBookmark(H);D=v();J(true);if(!F){J()}}else{throw I}}return M}this.addRange=function(D){var J,G,F,L,N,M,I=C.body;function H(O){O.parentNode.removeChild(O)}function E(T){var P,S,O,R,Q;O=C.createElement("a");P=T?F:N;S=T?L:M;R=J.duplicate();if(P==C||P==C.documentElement){P=I;S=0}if(P.nodeType==3){P.parentNode.insertBefore(O,P);R.moveToElementText(O);R.moveStart("character",S);H(O);J.setEndPoint(T?"StartToStart":"EndToEnd",R)}else{Q=P.childNodes;if(Q.length){if(S>=Q.length){o(O,Q[Q.length-1])}else{P.insertBefore(O,Q[S])}R.moveToElementText(O)}else{O=C.createTextNode("\uFEFF");P.appendChild(O);R.moveToElementText(O.parentNode);R.collapse(true)}J.setEndPoint(T?"StartToStart":"EndToEnd",R);H(O)}}F=D.startContainer;L=D.startOffset;N=D.endContainer;M=D.endOffset;J=I.createTextRange();if(F==N&&F.nodeType==1&&L==M-1){if(L==M-1){try{G=I.createControlRange();G.addElement(F.childNodes[L]);G.select();return}catch(K){}}}E(true);E();J.select()};this.getRangeAt=z}return u})();var l=(function(){function u(x){var ac=this,ag=0,T=1,C=2,ah="startOffset",A="startContainer",ae="endContainer",P="endOffset",D=g.extend;D(ac,{startContainer:x,startOffset:0,endContainer:x,endOffset:0,collapsed:true,commonAncestorContainer:x,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:I,setEnd:K,setStartBefore:z,setStartAfter:X,setEndBefore:Y,setEndAfter:L,collapse:Q,selectNode:N,selectNodeContents:U,compareBoundaryPoints:M,deleteContents:H,extractContents:W,cloneContents:w,insertNode:S,surroundContents:ab,cloneRange:Z});ac.toString=v;function v(){var ak=this.cloneContents();var aj=[];var al=ak.firstChild;while(al){if(al.nodeType==3){aj.push(al.nodeValue)}else{if(al.nodeType==1){if(al.innerText!=null){aj.push(al.innerText)}else{aj.push(al.textContent)}}}al=al.nextSibling}return aj.join("")}function I(ak,aj){R(true,ak,aj)}function K(ak,aj){R(false,ak,aj)}function z(aj){I(aj.parentNode,p(aj))}function X(aj){I(aj.parentNode,p(aj)+1)}function Y(aj){K(aj.parentNode,p(aj))}function L(aj){K(aj.parentNode,p(aj)+1)}function Q(aj){if(aj){ac[ae]=ac[A];ac[P]=ac[ah]}else{ac[A]=ac[ae];ac[ah]=ac[P]}ac.collapsed=true;ac.commonAncestorContainer=ac[A]}function N(aj){z(aj);L(aj)}function U(aj){I(aj,0);K(aj,aj.nodeType===1?aj.childNodes.length:aj.nodeValue.length)}function M(an,aj){var aq=ac[A],al=ac[ah],ap=ac[ae],ak=ac[P],ao=aj.startContainer,at=aj.startOffset,am=aj.endContainer,ar=aj.endOffset;if(an===0){return V(aq,al,ao,at)}if(an===1){return V(ap,ak,ao,at)}if(an===2){return V(ap,ak,am,ar)}if(an===3){return V(aq,al,am,ar)}}function H(){F(C)}function W(){return F(ag)}function w(){return F(T)}function S(an){var ak=this[A],aj=this[ah],am,al;if((ak.nodeType===3||ak.nodeType===4)&&ak.nodeValue!=null){if(!aj){ak.parentNode.insertBefore(an,ak)}else{if(aj>=ak.nodeValue.length){o(an,ak)}else{am=ak.splitText(aj);ak.parentNode.insertBefore(an,am)}}}else{if(ak.childNodes.length>0){al=ak.childNodes[aj]}if(al){ak.insertBefore(an,al)}else{ak.appendChild(an)}}}function ab(ak){var aj=ac.extractContents();ac.insertNode(ak);ak.appendChild(aj);ac.selectNode(ak)}function Z(){return D(new u(x),{startContainer:ac[A],startOffset:ac[ah],endContainer:ac[ae],endOffset:ac[P],collapsed:ac.collapsed,commonAncestorContainer:ac.commonAncestorContainer})}function ad(aj,ak){var al;if(aj.nodeType==3){return aj}if(ak<0){return aj}al=aj.firstChild;while(al&&ak>0){--ak;al=al.nextSibling}if(al){return al}return aj}function E(){return(ac[A]==ac[ae]&&ac[ah]==ac[P])}function V(am,ao,ak,an){var ap,al,aj,aq,at,ar;if(am==ak){if(ao==an){return 0}if(ao<an){return -1}return 1}ap=ak;while(ap&&ap.parentNode!=am){ap=ap.parentNode}if(ap){al=0;aj=am.firstChild;while(aj!=ap&&al<ao){al++;aj=aj.nextSibling}if(ao<=al){return -1}return 1}ap=am;while(ap&&ap.parentNode!=ak){ap=ap.parentNode}if(ap){al=0;aj=ak.firstChild;while(aj!=ap&&al<an){al++;aj=aj.nextSibling}if(al<an){return -1}return 1}aq=s(am,ak);at=am;while(at&&at.parentNode!=aq){at=at.parentNode}if(!at){at=aq}ar=ak;while(ar&&ar.parentNode!=aq){ar=ar.parentNode}if(!ar){ar=aq}if(at==ar){return 0}aj=aq.firstChild;while(aj){if(aj==at){return -1}if(aj==ar){return 1}aj=aj.nextSibling}}function R(ak,an,am){var aj,al;if(ak){ac[A]=an;ac[ah]=am}else{ac[ae]=an;ac[P]=am}aj=ac[ae];while(aj.parentNode){aj=aj.parentNode}al=ac[A];while(al.parentNode){al=al.parentNode}if(al==aj){if(V(ac[A],ac[ah],ac[ae],ac[P])>0){ac.collapse(ak)}}else{ac.collapse(ak)}ac.collapsed=E();ac.commonAncestorContainer=s(ac[A],ac[ae])}function F(aq){var ap,am=0,at=0,ak,ao,al,an,aj,ar;if(ac[A]==ac[ae]){return y(aq)}for(ap=ac[ae],ak=ap.parentNode;ak;ap=ak,ak=ak.parentNode){if(ak==ac[A]){return J(ap,aq)}++am}for(ap=ac[A],ak=ap.parentNode;ak;ap=ak,ak=ak.parentNode){if(ak==ac[ae]){return ai(ap,aq)}++at}ao=at-am;al=ac[A];while(ao>0){al=al.parentNode;ao--}an=ac[ae];while(ao<0){an=an.parentNode;ao++}for(aj=al.parentNode,ar=an.parentNode;aj!=ar;aj=aj.parentNode,ar=ar.parentNode){al=aj;an=ar}return G(al,an,aq)}function y(ao){var aq,an,am,ap,aj,al,ak;if(ao!=C){aq=x.createDocumentFragment()}if(ac[ah]==ac[P]){return aq}if(ac[A].nodeType==3){an=ac[A].nodeValue;am=an.substring(ac[ah],ac[P]);if(ao!=T){ac[A].deleteData(ac[ah],ac[P]-ac[ah]);ac.collapse(true)}if(ao==C){return}aq.appendChild(x.createTextNode(am));return aq}ap=ad(ac[A],ac[ah]);aj=ac[P]-ac[ah];while(aj>0){al=ap.nextSibling;ak=O(ap,ao);if(aq){aq.appendChild(ak)}--aj;ap=al}if(ao!=T){ac.collapse(true)}return aq}function J(aq,an){var ap,ao,ak,aj,am,al;if(an!=C){ap=x.createDocumentFragment()}ao=B(aq,an);if(ap){ap.appendChild(ao)}ak=p(aq);aj=ak-ac[ah];if(aj<=0){if(an!=T){ac.setEndBefore(aq);ac.collapse(false)}return ap}ao=aq.previousSibling;while(aj>0){am=ao.previousSibling;al=O(ao,an);if(ap){ap.insertBefore(al,ap.firstChild)}--aj;ao=am}if(an!=T){ac.setEndBefore(aq);ac.collapse(false)}return ap}function ai(ao,an){var aq,ak,ap,aj,am,al;if(an!=C){aq=x.createDocumentFragment()}ap=af(ao,an);if(aq){aq.appendChild(ap)}ak=p(ao);++ak;aj=ac[P]-ak;ap=ao.nextSibling;while(aj>0){am=ap.nextSibling;al=O(ap,an);if(aq){aq.appendChild(al)}--aj;ap=am}if(an!=T){ac.setStartAfter(ao);ac.collapse(true)}return aq}function G(ao,aj,ar){var al,au,an,ap,aq,ak,at,am;if(ar!=C){au=x.createDocumentFragment()}al=af(ao,ar);if(au){au.appendChild(al)}an=ao.parentNode;ap=p(ao);aq=p(aj);++ap;ak=aq-ap;at=ao.nextSibling;while(ak>0){am=at.nextSibling;al=O(at,ar);if(au){au.appendChild(al)}at=am;--ak}al=B(aj,ar);if(au){au.appendChild(al)}if(ar!=T){ac.setStartAfter(ao);ac.collapse(true)}return au}function B(ap,aq){var al=ad(ac[ae],ac[P]-1),ar,ao,an,aj,ak,am=al!=ac[ae];if(al==ap){return aa(al,am,false,aq)}ar=al.parentNode;ao=aa(ar,false,false,aq);while(ar){while(al){an=al.previousSibling;aj=aa(al,am,false,aq);if(aq!=C){ao.insertBefore(aj,ao.firstChild)}am=true;al=an}if(ar==ap){return ao}al=ar.previousSibling;ar=ar.parentNode;ak=aa(ar,false,false,aq);if(aq!=C){ak.appendChild(ao)}ao=ak}}function af(ap,aq){var am=ad(ac[A],ac[ah]),an=am!=ac[A],ar,ao,al,aj,ak;if(am==ap){return aa(am,an,true,aq)}ar=am.parentNode;ao=aa(ar,false,true,aq);while(ar){while(am){al=am.nextSibling;aj=aa(am,an,true,aq);if(aq!=C){ao.appendChild(aj)}an=true;am=al}if(ar==ap){return ao}am=ar.nextSibling;ar=ar.parentNode;ak=aa(ar,false,true,aq);if(aq!=C){ak.appendChild(ao)}ao=ak}}function aa(aj,an,aq,ar){var am,al,ao,ak,ap;if(an){return O(aj,ar)}if(aj.nodeType==3){am=aj.nodeValue;if(aq){ak=ac[ah];al=am.substring(ak);ao=am.substring(0,ak)}else{ak=ac[P];al=am.substring(0,ak);ao=am.substring(ak)}if(ar!=T){aj.nodeValue=ao}if(ar==C){return}ap=aj.cloneNode(false);ap.nodeValue=al;return ap}if(ar==C){return}return aj.cloneNode(false)}function O(ak,aj){if(aj!=C){return aj==T?ak.cloneNode(true):ak}ak.parentNode.removeChild(ak)}}return u})();function e(){if(window.getSelection){return function u(x){if(!x){x=window}return x.getSelection()}}else{if(window.document.getSelection){return function w(x){if(!x){x=window}return x.document.getSelection()}}else{return function v(x){if(!x){x=window}return new f(x.document,l)}}}}function j(){if(window.document.createRange){return function v(w){if(!w){w=window.document}return w.createRange()}}else{return function u(w){if(!w){w=window.document}return new l(w)}}}var h=e();var t=j();function c(u){if(!u){u=window}this.doc=u.document;this.selection=h(u)}c.prototype.getSelection=function(){return this.selection};c.prototype.getRange=function(){return t(this.doc)};c.prototype.getSelectedRange=function(){var u;if(this.selection.rangeCount===0){u=null}else{u=this.selection.getRangeAt(0)}if(!u){u=this.getRange();u.setStart(this.doc,0);this.setSelectedRange(u)}return u};c.prototype.setSelectedRange=function(u){if(this.selection.rangeCount&&this.selection.getRangeAt(0)==u){return}if(this.selection.removeAllRanges){this.selection.removeAllRanges()}this.selection.addRange(u)};function r(u){return{c:u.startContainer,off:u.startOffset}}function q(){}q.prototype.selectWord=function i(u,B){u.collapse(B);var A=r(u);var z=this.prevCharPos(A),y=A,w;var x=/[^\s\u00a0]/;while(z&&(w=this.charAt(z))&&x.test(w)){y=z;z=this.prevCharPos(z)}z=y;var v=A;y=v;while((w=this.charAt(v))&&x.test(w)){y=v;v=this.nextCharPos(v)}if(!v){v=y;if((v.nodeType==1&&v.childNodes.length>v.off)||(v.nodeType==3&&v.nodeValue.length>v.off)){++v.off}}u.setStart(z.c,z.off);u.setEnd(v.c,v.off);if(u.collapsed){return""}return u.toString()};q.prototype.prevCharPos=function(u){if(u.c.nodeType==3){if(u.off>0){return{c:u.c,off:u.off-1}}else{return this.prevCharPos({c:u.c.parentNode,off:p(u.c)})}}else{if(u.c.nodeType==1){if(u.off>0){var v=u.c.childNodes[u.off-1];if(v.nodeType==3){return this.prevCharPos({c:v,off:v.nodeValue.length})}}}}return null};q.prototype.nextCharPos=function(u){if(u.c.nodeType==3){if(u.off<u.c.nodeValue.length-1){return{c:u.c,off:u.off+1}}else{if(u.off==u.c.nodeValue.length-1){return this.nextCharPos({c:u.c,off:u.off+1})}else{return this.nextCharPos({c:u.c.parentNode,off:p(u.c)+1})}}}else{if(u.c.nodeType==1){if(u.off<u.c.childNodes.length){var v=u.c.childNodes[u.off];if(v.nodeType==3){if(v.nodeValue.length>0){return{c:v,off:0}}else{return this.nextCharPos({c:v,off:0})}}}}}return null};q.prototype.charAt=function(u){if(u&&u.c.nodeType==3){return u.c.nodeValue.substr(u.off,1)}return null};function d(y,v,u,x){var w=y.ownerDocument.createRange();if(y&&v){w.setStart(y,v)}if(u&&x){w.setEnd(u,x)}else{w.collapse(true)}return w}function m(u){if(u.anchorNode==null||u.focusNode==null){return true}var w=d(u.anchorNode,u.anchorOffset);var v=d(u.focusNode,u.focusOffset);return w.compareBoundaryPoints(w.START_TO_START,v)<=0}function a(v){var u=v.nodeName;if(u=="#text"){u="#"+v.nodeValue}return u}function k(w,v){var u="";if(w.parentNode&&w.parentNode.nodeName!="HTML"){u=k(w.parentNode,p(w))+"/"}return u+a(w)+(v!=null?"["+v+"]":"")}function b(y,v){if(!v){v=new c()}var w=v.getSelection();var u=v.getSelectedRange();if(!y){y=""}else{if(!/ $/.test(y)){y=y+": "}}if(w.rangeCount==0){console.log(y+"No selection.")}else{if(u.collapsed){console.log(y+"current selection position: "+k(u.startContainer,u.startOffset)+" (collapsed)")}else{var x=m(w)?"->":"<-";console.log(y+"current selection range: "+k(u.startContainer,u.startOffset)+"\n\t- "+k(u.endContainer,u.endOffset)+" Direction "+x,u);if(w.anchorNode){console.log("Anchor-focus"+(w.baseNode!=null?", base-extent: ":": ")+k(w.anchorNode,w.anchorOffset)+" - "+k(w.focusNode,w.focusOffset)+(w.baseNode!=null?", "+k(w.baseNode,w.baseOffset)+" - "+k(w.extentNode,w.extentOffset):""))}}}}function n(v,u){if(!v){v=""}else{if(!/ $/.test(v)){v=v+": "}}if(u.collapsed){console.log(v+k(u.startContainer,u.startOffset)+" (collapsed)")}else{console.log(v+k(u.startContainer,u.startOffset)+" - "+k(u.endContainer,u.endOffset),u)}}return{RangeContext:c,RangeUtils:new q(),logSelection:b,logRange:n}});
;
// This file was automatically generated from onboarding.soy.
// Please don't edit this file by hand.

goog.provide('jive.onboarding.dynamicPaneContents');
goog.provide('jive.onboarding.introModal');
goog.provide('jive.onboarding.jsInit');
goog.provide('jive.onboarding.msgFormatHelper');
goog.provide('jive.onboarding.onboardingProgress');
goog.provide('jive.onboarding.page');
goog.provide('jive.onboarding.postExploreOnMyOwnTip');
goog.provide('jive.onboarding.postHideViewTip');
goog.provide('jive.onboarding.questSection');
goog.provide('jive.onboarding.vcSelectModal');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.render');
goog.require('jive.shared.soy.resourceInlineJs');
goog.require('jive.skin.template.main');
goog.require('jive.welcome.homeSideNav');


jive.onboarding.jsInit = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: 'require([\'apps/onboarding/onboarding_main\'], function(OnboardingMain) {$j(function(){jive.Onboarding.Controller = new OnboardingMain({trialBean: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.trialBean).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + ', instanceInfoView: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.instanceInfoView).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) + '});});});'}, output);
  return opt_sb ? '' : output.toString();
};


jive.onboarding.page = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param17 = new soy.StringBuilder('<!-- BEGIN layout --><div class="j-layout j-layout-sl clearfix j-contained j-rc5"><div class="j-column-wrap-s"><nav class="j-column j-column-s" role="navigation" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.stream.nav'),[])), '">');
  jive.welcome.homeSideNav({homeNavHelper: opt_data.homeNavHelper, selectedLinkID: 'jive-nav-link-get-started'}, param17);
  param17.append('</nav></div><!-- BEGIN large column --><div class="j-column-wrap-l"><div id="j-dynamic-pane" class="j-column j-column-l">');
  jive.onboarding.dynamicPaneContents(opt_data, param17);
  param17.append('</div></div></div>');
  jive.skin.template.main(soy.$$augmentMap(opt_data.templateView, {title: soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.page.title'),[])), selectedLinkID: 'jive-nav-link-get-started', bodyClass: 'j-body-home j-body-onboarding', bodyContent: param17.toString()}), output);
  return opt_sb ? '' : output.toString();
};


jive.onboarding.dynamicPaneContents = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: '$j(function() {jive.conc.nextTick(function() {if (jive.Onboarding && jive.Onboarding.Controller) {jive.Onboarding.Controller.postPageRender({valueCaseName: \'' + soy.$$escapeHtml(opt_data.viewData.valueCaseName) + '\', instanceName: \'' + soy.$$escapeHtml(opt_data.viewData.instanceName) + '\'' + ((opt_data.viewData.valueCaseName != 'trial') ? ', videoID: \'' + soy.$$escapeHtml(opt_data.viewData.valueCase.i18nData.video) + '\'' : '') + '});}});});'}, output);
  output.append('<div id="j-onboarding" role="main" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.header.text.onboarding'),[])), '"><div class="j-onb-quests ', (opt_data.viewData.valueCaseName == 'trial') ? 'j-onb-quests-trial' : '', ' ', (opt_data.viewData.valueCaseName != 'ob') ? ' j-onb-quests-vc' : '', '"><div class="j-onb-quest-header j-onb-deco-header"><h2 class="font-face-deco">', (opt_data.viewData.valueCaseName == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.getstarted_name'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.valueCase.i18nData.getstarted_name,[])), '</h2><div class="j-onb-intro">', (opt_data.viewData.valueCaseName == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.getstarted_desc'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.valueCase.i18nData.getstarted_desc,[opt_data.viewData.instanceName])), '</div><div class="j-onb-post"><a href="#" class="js-onb-show-intro-modal font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.explore.other_ways'),[])), '</a></div></div>', (opt_data.viewData.valueCaseName == 'ob') ? '<div class="j-hdicon j-hdicon-abc" role="img" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.getstarted_name'),[])) + '"></div>' : (opt_data.viewData.valueCaseName != 'trial' && opt_data.viewData.valueCase.i18nData.video != 'video') ? '<div id="wistia_' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.valueCase.i18nData.video,[])) + '" class="j-qvideo-hd" style="width:325px;height:208px;" data-video-width="328" data-video-height="208">&nbsp;</div>' : '', '<div id="j-onboarding-quests-container" class="j-onb-qlist">');
  if (opt_data.viewData.valueCaseName == 'trial') {
    output.append('<nav class="clearfix j-rc4 j-rc-none-bottom">');
    var questList81 = opt_data.viewData.quests;
    var questListLen81 = questList81.length;
    for (var questIndex81 = 0; questIndex81 < questListLen81; questIndex81++) {
      var questData81 = questList81[questIndex81];
      jive.shared.soy.render({templateName: questData81.soyNamespace + '.panelTitle', data: (function() { var map = {}; var pairs = [['panelData', opt_data.viewData], ['questData', questData81]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
    }
    output.append('</nav>');
    var questList88 = opt_data.viewData.quests;
    var questListLen88 = questList88.length;
    for (var questIndex88 = 0; questIndex88 < questListLen88; questIndex88++) {
      var questData88 = questList88[questIndex88];
      jive.shared.soy.render({templateName: questData88.soyNamespace + '.panelContent', data: (function() { var map = {}; var pairs = [['panelData', opt_data.viewData], ['questData', questData88]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
    }
  } else {
    var questList95 = opt_data.viewData.quests;
    var questListLen95 = questList95.length;
    for (var questIndex95 = 0; questIndex95 < questListLen95; questIndex95++) {
      var questData95 = questList95[questIndex95];
      jive.onboarding.questSection({viewData: opt_data.viewData, questData: questData95}, output);
    }
  }
  output.append('</div><p class="j-onb-post"><a href="#" class="js-onb-show-welcome-modal font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.showwelcome.text'),[])), '</a></p><p class="j-onb-post"><a href="#" class="js-hide-onb font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.dontshow.text'),[])), '</a></p></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.questSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="', soy.$$escapeHtml(opt_data.questData.name), '" data-id="', soy.$$escapeHtml(opt_data.questData.name), '" class="j-quest-block j-rc5"><div class="j-quest-header js-quest-header"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(opt_data.questData.i18nData.title,[])), '</h4><p class="j-quest-text">', soy.$$escapeHtml(jive.i18n.i18nText(opt_data.questData.i18nData.desc,[])), '</p></div><div class="js-quest-body j-quest-body">');
  var stepList115 = opt_data.questData.steps;
  var stepListLen115 = stepList115.length;
  for (var stepIndex115 = 0; stepIndex115 < stepListLen115; stepIndex115++) {
    var stepData115 = stepList115[stepIndex115];
    jive.shared.soy.render({templateName: opt_data.questData.soyNamespace + '.startStep.' + stepData115.type, data: (function() { var map = {}; var pairs = [['stepData', stepData115], ['viewData', opt_data.viewData]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.onboardingProgress = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-onboarding-progress" class="j-onb-progress j-rc5"><div class="j-complete font-face-deco">');
  jive.shared.soy.i18nHelper({i18nKey: 'onboarding.percent.complete', arg0: soy.$$escapeHtml(opt_data.percentComplete), noAutoEscape: true}, output);
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.postHideViewTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-tips j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.getstarted.removed.title'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.getstarted.removed.body'),[])), '</p></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.postExploreOnMyOwnTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-onboarding-tip j-tips j-pop-main"><h4 class="font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.tip.learnmore.title'),[])), '</h4><p>');
  jive.shared.soy.i18nHelper({i18nKey: 'onboarding.welcome.tip.learnmore.text', arg0: soy.$$escapeHtml(opt_data.instanceName), noAutoEscape: true}, output);
  output.append('</p></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.introModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.redisplay) {
    output.append('<div class="jive-modal j-modal j-modal-notitle j-onb-intro-modal j-vc-modal" id="onboarding-welcome" data-curvcid="', soy.$$escapeHtml(opt_data.currentVC.name), '"><header><a href="#" class="j-modal-close-top close" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '" aria-label="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '"><span class="j-close-icon j-ui-elem"></span></a></header><section class="jive-modal-content clearfix j-onboarding-modal"><div class="j-vc-img ', (opt_data.type == 'invited' && opt_data.displayData && opt_data.displayData.inviter) ? 'j-vc-invited' : '', '" style="background: transparent url(', (opt_data.currentVC.name == 'trial') ? '/images/trial/vc-JiveForTeams715x255.jpg' : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.currentVC.i18nData.intro_image,[])), ') no-repeat; background-size:100%"><p>');
    if (opt_data.type == 'invited' && opt_data.displayData && opt_data.displayData.inviter) {
      jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.displayData.inviter, {hideLink: true, size: 46}), output);
      output.append('<span class="j-inviter">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.Xinvitedyou'),[opt_data.displayData.inviter.displayName])), '</span>');
    } else {
      output.append('<span class="j-inviter">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.general'),[])), '</span>');
    }
    output.append('<strong class="font-color-white">', (opt_data.currentVC.name == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.intro_name'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.currentVC.i18nData.intro_name,[])), '</strong><a href="#" id="j-show-vc-selector" class="j-oways-lnk font-face-deco font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.other_ways'),[])), ' <span class="j-hdicon j-oways-arrow"></span></a></p></div><div class="j-vc-intro-bottom clearfix"><div class="j-vc-intro-text" ', (opt_data.currentVC.otherUsers.length == 0) ? 'style="width:auto;"' : '', '>', (opt_data.currentVC.name == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.intro_desc'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.currentVC.i18nData.intro_desc,[])), '</div>');
    if (opt_data.currentVC.otherUsers.length) {
      output.append('<div class="j-vc-other-colleagues"><h4 class="font-color-meta">');
      jive.shared.soy.i18nHelper({i18nKey: 'onboarding.welcome.colleagues.already.usingX', arg0: (opt_data.currentVC.name == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.intro_name'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.currentVC.i18nData.intro_name,[])), noAutoEscape: true}, output);
      output.append('</h4><ul>');
      var userList212 = opt_data.currentVC.otherUsers;
      var userListLen212 = userList212.length;
      for (var userIndex212 = 0; userIndex212 < userListLen212; userIndex212++) {
        var userData212 = userList212[userIndex212];
        output.append('<li>');
        jive.shared.displayutil.avatar(soy.$$augmentMap(userData212, {hideLink: true, size: 46}), output);
        output.append('<strong>', soy.$$escapeHtml(userData212.displayName), '</strong></li>');
      }
      output.append('</ul></div>');
    }
    output.append('</div><div class="j-vc-intro-buttons"><a href="#" class="js-onb-accept j-btn-global j-btn-callout" data-id="', soy.$$escapeHtml(opt_data.currentVC.name), '" data-context="welcome">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.get.started.btn.text'),[])), '</a></div></section></div>');
  } else {
    jive.onboarding.vcSelectModal(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.onboarding.vcSelectModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="onboarding-welcome" class="jive-modal j-modal j-modal-notitle j-onb-intro-modal j-vc-modal" data-curvcid="', soy.$$escapeHtml(opt_data.currentVC.name), '"><header><h3 class="font-color-white font-face-deco j-vc-select-hd">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.other_ways'),[])), '</h3><a href="#" class="j-modal-close-top close" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.close.modal'),[])), '"><span class="j-close-icon j-ui-elem"></span></a></header><section class="jive-modal-content clearfix j-onboarding-modal"><div class="j-vc-selector j-rc4 clearfix"><ul class="j-vc-select">');
  var vcGroupList239 = opt_data.vcGroups;
  var vcGroupListLen239 = vcGroupList239.length;
  for (var vcGroupIndex239 = 0; vcGroupIndex239 < vcGroupListLen239; vcGroupIndex239++) {
    var vcGroupData239 = vcGroupList239[vcGroupIndex239];
    var vcList240 = vcGroupData239.valueCaseReferences;
    var vcListLen240 = vcList240.length;
    for (var vcIndex240 = 0; vcIndex240 < vcListLen240; vcIndex240++) {
      var vcData240 = vcList240[vcIndex240];
      output.append('<li><a href="#" class="js-vc-name', (vcData240.active) ? ' active' : '', '" data-id="', soy.$$escapeHtml(vcData240.name), '">', (vcData240.name == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.select_name'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(vcData240.i18nData.select_name,[])), '<span class="selected-arrow"></span></a></li>');
    }
  }
  output.append('</ul><div class="j-vc-display">');
  var vcGroupList257 = opt_data.vcGroups;
  var vcGroupListLen257 = vcGroupList257.length;
  for (var vcGroupIndex257 = 0; vcGroupIndex257 < vcGroupListLen257; vcGroupIndex257++) {
    var vcGroupData257 = vcGroupList257[vcGroupIndex257];
    var vcList258 = vcGroupData257.valueCaseReferences;
    var vcListLen258 = vcList258.length;
    for (var vcIndex258 = 0; vcIndex258 < vcListLen258; vcIndex258++) {
      var vcData258 = vcList258[vcIndex258];
      output.append('<div class="js-vc-info" ', (! vcData258.active) ? 'style="display:none;"' : '', ' data-id="', soy.$$escapeHtml(vcData258.name), '"><div class="j-vc-image"><img src="', (vcData258.name == 'trial') ? 'https://static.jiveon.com/vc/vc-JiveForTeams350x200.jpg' : soy.$$escapeHtml(jive.i18n.i18nText(vcData258.i18nData.select_image,[])), '" /></div><p>', (vcData258.name == 'trial') ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.trialvc.select_desc'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(vcData258.i18nData.select_desc,[])), '</p><a href="#" class="js-onb-accept j-btn-global j-btn-callout" data-id="', soy.$$escapeHtml(vcData258.name), '" data-context="selector">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('onboarding.welcome.get.started.btn.text'),[])), '</a></div>');
    }
  }
  output.append('</div></div></section></div>');
  return opt_sb ? '' : output.toString();
};


jive.onboarding.msgFormatHelper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.noAutoEscape) ? soy.$$escapeHtml(jive.i18n.i18nText(opt_data.i18nKey,[new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg0),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg1),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg2),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg3),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg4),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg5),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg6),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg7),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg8),new soydata.VERY_UNSAFE.ordainSanitizedHtml(opt_data.arg9)])) : soy.$$escapeHtml(jive.i18n.i18nText(opt_data.i18nKey,[opt_data.arg0,opt_data.arg1,opt_data.arg2,opt_data.arg3,opt_data.arg4,opt_data.arg5,opt_data.arg6,opt_data.arg7,opt_data.arg8,opt_data.arg9])));
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from trial.soy.
// Please don't edit this file by hand.

goog.provide('jive.trial.banner');
goog.provide('jive.trial.chatFrame');
goog.provide('jive.trial.closeHelp');
goog.provide('jive.trial.modal');
goog.provide('jive.trial.modalContent');
goog.provide('jive.trial.openHelp');
goog.provide('jive.trial.panel');
goog.provide('jive.trial.recentlyCompleted');
goog.provide('jive.trial.renderProgressTip');
goog.provide('jive.trial.titleProgressBar');
goog.provide('jive.trial.trialAdminQueryParams');
goog.provide('jive.trial.trialModal');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.render');
goog.require('jive.shared.soy.resourceInlineJs');


jive.trial.banner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: '$j(function() {require([\'apps/trial/views/trial_help_view\'], function(HelpView) {jive.Trial.HelpView = new HelpView();});});'}, output);
  if (opt_data.trial.showDaysRemaining) {
    output.append('<div id="jive-trial-banner" class="j-banner trial clearfix"><span class="j-time-remaining font-color-white">');
    jive.shared.soy.i18nHelper({i18nKey: (opt_data.trial.daysRemaining == 1) ? 'trial.header.time.remaining.text.singular' : 'trial.header.time.remaining.text.plural', arg0: (opt_data.trial.daysRemaining == 1) ? '<strong>' + soy.$$escapeHtml(opt_data.trial.daysRemaining) + ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.time.remaining.units.singular'),[])) + '</strong>' : '<strong>' + soy.$$escapeHtml(opt_data.trial.daysRemaining) + ' ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.time.remaining.units.plural'),[])) + '</strong>', noAutoEscape: true}, output);
    output.append((opt_data.trial.trialAdmin) ? '<a href="http://www.jiveon.com/purchase" class="j-btn-global j-btn-callout j-buynow">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.panel.buy_jive.link'),[])) + '</a>' : '', '</span></div>');
  }
  output.append('<a href="#" id="jive-trial-help-link" class="j-help j-feedback-corner j-feedback-button j-rc3 noprint"><span class="j-js-chat-indicator j-chat-indicator j-navbadge-count j-ui-elem" style="display: none;"></span><strong class="j-js-title">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.jive_help.link'),[])), '</strong></a><div id="jive-trial-alert" class="j-rc5 j-rc-none-top" style="display: none;"></div><div id="jive-trial-curtain" class="j-curtain trial"></div><div id="jive-trial-panel" class="j-panel trial"></div><div id="jive-trial-help-panel" class="j-panel help j-feedback-corner j-rc5"><header class="clearfix"><h3>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.jive_help.link'),[])), '</h3><span class="close j-ui-elem j-close-icon">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.jive_help.link'),[])), '</span></header>', (opt_data.trial.chat.showLiveChat) ? '<div class="j-help-container j-chat-container j-js-chat-container"><iframe id="chatFrame" src="' + soy.$$escapeHtml(jive.soy.func.buildUrl('/live-chat.jspa')) + '" style="width:100%; min-height:250px;" frameBorder="0"></iframe></div>' : '', '<div class="j-help-container font-color-meta"><p>');
  jive.shared.soy.i18nHelper({i18nKey: 'trial.help.docs_copy', arg0: (opt_data.trial.trialAdmin) ? soy.$$escapeHtml(opt_data.info.adminDocumentationLink) : soy.$$escapeHtml(opt_data.info.documentationLink), arg1: soy.$$escapeHtml(opt_data.info.supportCommunityLink), noAutoEscape: true}, output);
  output.append('</p><p><span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.help.number'),[])), '<strong>', soy.$$escapeHtml(opt_data.info.telephoneNumber), '</strong></span></p></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.openHelp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.jive_help.link'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.closeHelp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.header.jive_help.link.close'),[])));
  return opt_sb ? '' : output.toString();
};


jive.trial.chatFrame = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<!DOCTYPE html><html><body data-chat-key=', soy.$$escapeHtml(opt_data.chatKey), ' data-user="', soy.$$escapeHtml(JSON.stringify(opt_data.user).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')), '"><link rel="stylesheet" type="text/css" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive-base.css')), '" /><link rel="stylesheet" type="text/css" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/jive.css')), '" /><link rel="stylesheet" type="text/css" href="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/styles/livechat.css')), '" /><script src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/resources/scripts/jquery/jquery.js')), '"><\/script><script src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/resources/scripts/live_chat/vendor.js')), '"><\/script><script src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/resources/scripts/live_chat/controller.js')), '"><\/script></body></html>');
  return opt_sb ? '' : output.toString();
};


jive.trial.panel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-panel-header clearfix"><h2 class="j-panel-logo">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.panel.discover_jive.title'),[])), '</h2>');
  if (opt_data.data.trialAdmin) {
    output.append('<a href="http://www.jiveon.com/purchase');
    jive.trial.trialAdminQueryParams({trialAdminData: opt_data.data.trialAdminData, instanceURL: opt_data.data.instanceURL}, output);
    output.append('" class="j-buy j-rc2">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.panel.buy_jive.link'),[])), '</a>');
  }
  output.append('</div><div class="j-goal-nav clearfix"><ul>');
  var questList103 = opt_data.data.quests;
  var questListLen103 = questList103.length;
  for (var questIndex103 = 0; questIndex103 < questListLen103; questIndex103++) {
    var questData103 = questList103[questIndex103];
    jive.shared.soy.render({templateName: questData103.soyNamespace + '.panelTitle', data: (function() { var map = {}; var pairs = [['panelData', opt_data.data]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
  }
  output.append('</ul><span class="selectedArrow"></span></div><div class="j-goal-container"><div class="j-goals">');
  var questList110 = opt_data.data.quests;
  var questListLen110 = questList110.length;
  for (var questIndex110 = 0; questIndex110 < questListLen110; questIndex110++) {
    var questData110 = questList110[questIndex110];
    jive.shared.soy.render({templateName: questData110.soyNamespace + '.panelContent', data: (function() { var map = {}; var pairs = [['questData', questData110]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.trialAdminQueryParams = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('?', (opt_data.trialAdminData.email) ? 'email=' + soy.$$escapeUri(opt_data.trialAdminData.email) + '&amp;' : '', (opt_data.trialAdminData.prop.firstName) ? 'firstName=' + soy.$$escapeUri(opt_data.trialAdminData.prop.firstName) + '&amp;' : '', (opt_data.trialAdminData.prop.lastName) ? 'lastName=' + soy.$$escapeUri(opt_data.trialAdminData.prop.lastName) + '&amp;' : '', (opt_data.trialAdminData.prop.profile.primaryPhoneNumber) ? 'phone=' + soy.$$escapeUri(opt_data.trialAdminData.prop.profile.primaryPhoneNumber.phoneNumber) + '&amp;' : '', (opt_data.instanceURL) ? 'instanceURL=' + soy.$$escapeUri(opt_data.instanceURL) : '');
  return opt_sb ? '' : output.toString();
};


jive.trial.titleProgressBar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-progress-bar-container"><div class="j-progress-bar"><span class="j-index-holder"><span title="', soy.$$escapeHtml(opt_data.percentComplete), '%" style="width: ', soy.$$escapeHtml(opt_data.percentComplete), '%;" class="j-index"></span></span></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.recentlyCompleted = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.users.length > 0) {
    output.append('<div class="j-recently-completed">');
    var userList158 = opt_data.users;
    var userListLen158 = userList158.length;
    for (var userIndex158 = 0; userIndex158 < userListLen158; userIndex158++) {
      var userData158 = userList158[userIndex158];
      jive.shared.displayutil.avatar(soy.$$augmentMap(userData158, {size: 46}), output);
    }
    output.append('</div>');
  } else {
    output.append('<div class="j-nobody"><div class="j-tumbleweeds"></div><div class="j-befirst font-face-deco">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.befirst.label'),[])), '</div><div class="j-arrow-neltgray"></div></div>');
  }
  return opt_sb ? '' : output.toString();
};


jive.trial.renderProgressTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.render({templateName: opt_data.template, data: (function() { var map = {}; var pairs = [['nextQuestID', opt_data.nextQuestID]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: true}, output);
  return opt_sb ? '' : output.toString();
};


jive.trial.trialModal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.shared.soy.resourceInlineJs({code: 'require([\'apps/trial/trial_modal\'], function(Modal) {jive.Trial.ModalController = new Modal({trialAdmin : ' + soy.$$escapeHtml(opt_data.trialAdmin) + ((opt_data.invitation) ? ', invitation: ' + soy.$$filterNoAutoescape(JSON.stringify(opt_data.invitation).replace(/</g, '\\u003C').replace(/>/g, '\\u003E').replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029')) : '') + '});});'}, output);
  return opt_sb ? '' : output.toString();
};


jive.trial.modal = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jive-modal" id="jive-modal-trial-teams"><header><h2 class="jive-modal-title jive-modal-trial-teams-title">Welcome</h2></header>');
  jive.trial.modalContent(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.trial.modalContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section id="trial-teams-modal" class="jive-modal-content jive-modal-trial-teams-content clearfix"><h2 class="font-color-white">', (opt_data.trialAdmin) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.header.admin'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.header'),[])), '</h2><p class="font-color-white ', (opt_data.trialAdmin) ? 'j-trial-p-admin' : '', '">', (opt_data.trialAdmin) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.text.admin'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.text'),[])), '</p><div class="j-trial-benefits"><div class="j-team font-color-white"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.work_together.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.work_together.text'),[])), '</p></div><div class="j-connect font-color-white"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.connect.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.connect.text'),[])), '</p></div><div class="j-secure font-color-white"><h4>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.secure.label'),[])), '</h4><p>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.secure.text'),[])), '</p></div></div><div class="j-form-row j-form-buttons j-rc4 j-rc-none-top"><input type="submit" id="jive-trial-modal-more" class="close jive-form-button jive-form-button-submit j-btn-callout" value="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.get_started.button'),[])), '" /><input type="submit" class="close jive-form-button jive-form-button-cancel" value="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.welcome.explore.button'),[])), '" /></div></section>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from generic.soy.
// Please don't edit this file by hand.

goog.provide('jive.onbStep.startStep.completedAriaLabel');
goog.provide('jive.onbStep.startStep.generic');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.onbStep.startStep.generic = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="js-quest-step j-quest-step"><a href="', soy.$$escapeHtml(opt_data.url), '" class="j-do-step', (opt_data.url == '#') ? ' js-do-step' : '', (opt_data.stepData.state == 'completed') ? ' font-color-meta completed' : '', '" data-type="', soy.$$escapeHtml(opt_data.stepData.type), '" data-id="', soy.$$escapeHtml(opt_data.stepData.name), '">');
  if (opt_data.stepData.state == 'completed') {
    jive.onbStep.startStep.completedAriaLabel(null, output);
  }
  output.append('<strong class="j-steptext">', soy.$$escapeHtml(jive.i18n.i18nText(opt_data.stepData.i18nData.name,[])), '</strong><div class="js-step-complete j-step-complete"></div></a></div>');
  return opt_sb ? '' : output.toString();
};


jive.onbStep.startStep.completedAriaLabel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="j-508-label">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('trial.quest.completed.label'),[])), ': </span>');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Onboarding");define("apps/onboarding/models/onboarding_source",["jquery","underscore","apps/shared/models/rest_service","apps/shared/models/core_deferred","apps/browse/container/model/container_source"],function(e,d,b,a,c){jive.Onboarding.Source=b.extend(function(f,g){f.resourceType="container";f.init=function(h){h=h||{};g.init.call(this,h);this.RESOURCE_ENDPOINT=jive.rest.url("/onboarding");this.placeSource=new c()};this.core=a;this.initializeView=function(i){var h=this.RESOURCE_ENDPOINT;if(!i){i=new jive.conc.Promise()}return this.commonAjaxRequest(i,"GET",{url:h})};this.getStepData=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:h})};this.markStepComplete=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i+"/complete",j=new jive.conc.Promise();j.addCallback(function(k){jive.switchboard.emit("onboarding.state.update",k)});return this.commonAjaxRequest(j,"POST",{url:h})};this.setOnboardingVisible=function(i){var h=this.RESOURCE_ENDPOINT+"/"+i.toString();return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.newUserExploreOnOwn=function(){var h=this.RESOURCE_ENDPOINT+"/exploreOnOwn";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.saveLastViewedQuest=function(h){var i=this.RESOURCE_ENDPOINT+"/lastViewedQuest?q="+h;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:i,data:h})};this.getValueCases=function(i){var h=this.RESOURCE_ENDPOINT+"/valueGroup";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:h,data:i})};this.setValueCase=function(i){var h=this.RESOURCE_ENDPOINT+"/valueCase/"+i;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:h})};this.getSuggestedPlaces=function(m,j,r){var h=this,k,q,o,p=e.trim(j),l=false;if(j){j=j.replace(/[\'\"\?\@\*\n\.,-\/\\#!$%\^&\;:\+{}\[\]\|=\-_`~()<>]/g," ");j=e.trim(j);j=j.replace(/\s{2,}/g," ")}k=j.split(" ");q=d.flatten(d.map(m,function(s){return s.split(" ")}));o=d.without(q.concat(k),"");if(o.length>0){var n={type:["group","space"],limit:20};n.q=o.join(" OR ");var i=jive.app.url({path:"/api/core/v2"});i+="/search/places";i=e.param.querystring(i,n);h.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:i}).addCallback(function(u){var t=[];if(u&&u.data&&u.data.length){l=true;t=e.map(u.data,function(v){return{readableType:v.type,id:v.id}})}if(t.length>0){var s=h.RESOURCE_ENDPOINT+"/suggestedPlaces";h.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:s,data:JSON.stringify({profileData:{bio:p},entities:t})}).addCallback(function(v){var w={suggestedPlaces:v,suggestedPlacesExist:l};r.emitSuccess(w)})}else{r.emitSuccess({suggestedPlacesExist:false})}})}};this.updateUserProfile=function(n,o,k,q){var h=this,p=e.trim(k),j=h.RESOURCE_ENDPOINT+"/profile",m=new jive.conc.Promise(),l=d.map(o,function(r){return function(s){return s.jive.corev3.people.expertise.deleteExpertiseTag({personID:_jive_current_user.ID,tagName:r})}}),i=this.core.runAll([function(r){return r.jive.corev3.people.expertise.endorse(n,{personID:_jive_current_user.ID})}].concat(l));h.commonAjaxRequest(m,"POST",{url:j,data:JSON.stringify({profileData:{bio:p},entities:[]})});e.when(m,i).then(function(){q.emitSuccess()})}});return jive.Onboarding.Source});
;
// This file was automatically generated from item_grid.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.grid.hierarchyItems');
goog.provide('jive.browse.grid.hierarchyView');
goog.provide('jive.browse.grid.itemGrid');
goog.provide('jive.browse.grid.jiveGenius');
goog.provide('jive.browse.grid.listGrid');
goog.provide('jive.browse.grid.maxPageReached');
goog.provide('jive.browse.grid.moreSearchResultsAvailable');
goog.provide('jive.browse.grid.moreSearchResultsAvailableBody');
goog.provide('jive.browse.grid.moreSearchResultsAvailableHolder');
goog.provide('jive.browse.grid.thumbGrid');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.browse.container.hierarchyContainerItem');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.shared.soy.render');


jive.browse.grid.itemGrid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.maxPageReached) {
    jive.browse.grid.maxPageReached(opt_data, output);
  } else if (opt_data.items.length < 1 && opt_data.noResultTemplateConfig) {
    jive.shared.soy.render(soy.$$augmentMap(opt_data.noResultTemplateConfig, {failGracefully: false}), output);
  } else if (opt_data.itemViewID == null || opt_data.itemViewID == 'thumb') {
    jive.browse.grid.thumbGrid(opt_data, output);
  } else if (opt_data.itemViewID == 'hierarchy' && opt_data.hierarchyViewSupported) {
    jive.browse.grid.hierarchyView(opt_data, output);
  } else {
    jive.browse.grid.listGrid(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.thumbGrid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="temp j-browse-thumbnails j-thumb-view">');
  var itemList17 = opt_data.items;
  var itemListLen17 = itemList17.length;
  if (itemListLen17 > 0) {
    for (var itemIndex17 = 0; itemIndex17 < itemListLen17; itemIndex17++) {
      var itemData17 = itemList17[itemIndex17];
      output.append('<li class="js-browse-thumbnail" data-object-type="', soy.$$escapeHtml(itemData17.type), '" data-object-id="', soy.$$escapeHtml(itemData17.id), '" aria-labelledby="label-', soy.$$escapeHtml(itemData17.type), '-', soy.$$escapeHtml(itemData17.id), '">');
      if (opt_data.browseViewID) {
        jive.shared.soy.render({templateName: itemData17.thumbnailTemplate, data: jQuery.extend({}, itemData17, (function() { var map = {}; var pairs = [['browseViewID', opt_data.browseViewID], ['columns', opt_data.itemGridDetailsColumns]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()), failGracefully: false}, output);
      } else {
        jive.shared.soy.render({templateName: itemData17.thumbnailTemplate, data: itemData17, failGracefully: false}, output);
      }
      output.append('</li>');
    }
  } else {
    output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.noresults'),[])));
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.listGrid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-browse-details"><table class="j-browse-list" cellspacing="0" cellpadding="0">');
  if (opt_data.itemGridDetailsHeaderTemplate) {
    jive.shared.soy.render({templateName: opt_data.itemGridDetailsHeaderTemplate, data: (function() { var map = {}; var pairs = [['columns', opt_data.itemGridDetailsColumns]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })(), failGracefully: false}, output);
  }
  output.append('<tbody class="j-browse-details-tbody">');
  var itemList52 = opt_data.items;
  var itemListLen52 = itemList52.length;
  if (itemListLen52 > 0) {
    for (var itemIndex52 = 0; itemIndex52 < itemListLen52; itemIndex52++) {
      var itemData52 = itemList52[itemIndex52];
      if (opt_data.browseViewID) {
        jive.shared.soy.render({templateName: itemData52.detailTemplate, data: jQuery.extend({}, itemData52, (function() { var map = {}; var pairs = [['browseViewID', opt_data.browseViewID], ['columns', opt_data.itemGridDetailsColumns], ['currentUserPartner', opt_data.currentUserPartner]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()), failGracefully: false}, output);
      } else {
        jive.shared.soy.render({templateName: itemData52.detailTemplate, data: jQuery.extend({}, itemData52, (function() { var map = {}; var pairs = [['currentUserPartner', opt_data.currentUserPartner]]; for (var i = 0; i < pairs.length; i += 1) { map[pairs[i][0]] = pairs[i][1]; } return map; })()), failGracefully: false}, output);
      }
    }
  } else {
    output.append('<tr><td colspan="10">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.noresults'),[])), '</td></tr>');
  }
  output.append('</tbody></table></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.hierarchyView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-browse-details"><ul class="j-browse-hierarchy">');
  jive.browse.grid.hierarchyItems(opt_data, output);
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.hierarchyItems = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var itemList75 = opt_data.items;
  var itemListLen75 = itemList75.length;
  if (itemListLen75 > 0) {
    for (var itemIndex75 = 0; itemIndex75 < itemListLen75; itemIndex75++) {
      var itemData75 = itemList75[itemIndex75];
      jive.browse.container.hierarchyContainerItem(soy.$$augmentMap(itemData75, {omitIcon: opt_data.omitIcons}), output);
    }
  } else {
    output.append('<li>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.noresults'),[])), '</li>');
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.jiveGenius = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<section class="j-browse-recommendations"><header class="font-color-meta-light j-recommendation-container-title">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.home.trending.trendingAndPopularNow'),[])), '</header>');
  jive.browse.grid.listGrid({itemGridDetailsHeaderTemplate: opt_data.header, items: opt_data.items.trendingContent, itemGridDetailsColumns: opt_data.columnDetails}, output);
  output.append('</section>');
  if (opt_data.items.recommendations) {
    output.append('<section class="j-browse-recommendations"><header class="font-color-meta-light j-recommendation-container-title">');
    switch (opt_data.type) {
      case 'people':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.home.recommendations.people'),[])));
        break;
      case 'places':
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.home.recommendations.places'),[])));
        break;
      default:
        output.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('eae.home.recommendations.heading'),[])));
    }
    output.append('</header>');
    jive.browse.grid.listGrid({itemGridDetailsHeaderTemplate: opt_data.header, items: opt_data.items.recommendations, itemGridDetailsColumns: opt_data.columnDetails}, output);
    output.append('</section>');
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.maxPageReached = function(opt_data, opt_sb) {
  opt_data = opt_data || {};
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-browse-info j-empty font-color-meta">', (opt_data.archetypeID) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.' + opt_data.archetypeID + '.max.pages.message'),[])) : 'No archetype specified.', '</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.moreSearchResultsAvailableHolder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="j-more-search-results-available">');
  jive.browse.grid.moreSearchResultsAvailable(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.moreSearchResultsAvailable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.searchResultsInfo) {
    jive.browse.grid.moreSearchResultsAvailableBody(opt_data.searchResultsInfo, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.grid.moreSearchResultsAvailableBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="font-color-meta">');
  jive.shared.soy.i18nHelper({i18nKey: 'browse.moresearchresults', arg0: '<a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl('/search.jspa?view=' + opt_data.searchArchetype + '&q=' + opt_data.searchQuery)) + '">', arg1: '</a>', noAutoEscape: 'true'}, output);
  output.append('</span>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from item_user.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.user.detailExternalUserItem');
goog.provide('jive.browse.user.detailUserItem');
goog.provide('jive.browse.user.flippable');
goog.provide('jive.browse.user.flippable__Cce8');
goog.provide('jive.browse.user.flipperControl');
goog.provide('jive.browse.user.thumbnailExternalUserItem');
goog.provide('jive.browse.user.thumbnailUserItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.browse.user.labelDot');
goog.require('jive.browse.user.userProfileImage');
goog.require('jive.eae.acclaim.count');
goog.require('jive.people.profile.followLink');
goog.require('jive.people.profile.statusLevel');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.getCountTextByType');
goog.require('jive.shared.soy.i18nHelper');


jive.browse.user.detailUserItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="js-browse-row j-people-row ', (! opt_data.enabled) ? 'disabled' : '', '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"  data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '"><td class="j-td-avatar ', (opt_data.currentUserPartner) ? 'SPECIAL' : '', '">');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data, {size: 32, currentUserPartner: opt_data.currentUserPartner, hidePartnerBadge: true}), output);
  output.append('</td><td class="j-td-user-info"><strong>');
  jive.shared.displayutil.userDisplayNameLink(opt_data, output);
  output.append('</strong> ', (! opt_data.enabled) ? ' <span class="font-color-meta-light">(' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.user.deactivated'),[])) + ')</span>' : '');
  if (opt_data.prop.connections && opt_data.prop.connections.labelsShown) {
    output.append('<ul class="j-label-dot-list">');
    var listList31 = opt_data.prop.connections.friendLists;
    var listListLen31 = listList31.length;
    for (var listIndex31 = 0; listIndex31 < listListLen31; listIndex31++) {
      var listData31 = listList31[listIndex31];
      if (listData31.targetUserAMember) {
        jive.browse.user.labelDot(listData31, output);
      }
    }
    output.append('</ul>');
  }
  output.append((opt_data.prop.isVisibleToPartner) ? '<p class="font-color-meta-light j-browse-external-access"><em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.external.contributor'),[])) + '</em></p>' : '', '</td>');
  if (opt_data.prop.connections) {
    if (! opt_data.prop.connections.bidirectional) {
      output.append('<td class="j-td-followers center">');
      if (! opt_data.prop.connections.bidirectional && opt_data.prop.connections.followerCount >= 0 && opt_data.enabled && opt_data.prop.connections.linkFollowCounts) {
        var param56 = new soy.StringBuilder();
        jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param56);
        jive.eae.acclaim.count({command: 'showFollowers', count: soy.$$escapeHtml(opt_data.prop.connections ? opt_data.prop.connections.followerCount : 0), objectId: opt_data.id, objectType: opt_data.type, classes: 'j-user-follow-info', accessibilityLinkLabel: param56.toString()}, output);
      } else {
        output.append('&nbsp;');
      }
      output.append('</td>');
    }
    output.append('<td class="j-td-following center">');
    if (opt_data.prop.connections.followingCount >= 0 && opt_data.enabled && opt_data.prop.connections.linkFollowCounts) {
      var param78 = new soy.StringBuilder();
      jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.connections ? opt_data.prop.connections.followingCount : 0), type: 'showconnectioncount'}, param78);
      jive.eae.acclaim.count({command: 'showConnections', count: soy.$$escapeHtml(opt_data.prop.connections ? opt_data.prop.connections.followingCount : 0), objectId: opt_data.id, objectType: opt_data.type, classes: 'j-user-follow-info', accessibilityLinkLabel: param78.toString()}, output);
    } else {
      output.append('&nbsp;');
    }
    output.append('</td>');
  }
  output.append((opt_data.columns.latestActivity) ? '<td class="j-td-activity font-color-meta j-act">' + ((opt_data.prop.latestActivity) ? ((opt_data.prop.latestActivity.creationTime) ? ' <span class="font-color-meta-light">' + soy.$$escapeHtml(opt_data.prop.latestActivity.creationTime) + '</span> ' : '') + '</span>' : '&nbsp;') + '</td>' : '');
  if (opt_data.columns.statuslevel) {
    output.append('<td class="j-td-statuslevel font-color-meta">');
    if (opt_data.prop.statuslevel && opt_data.prop.statuslevel.enabled) {
      jive.people.profile.statusLevel(soy.$$augmentMap(opt_data.prop.statuslevel, {showPoints: true}), output);
    } else {
      output.append('&nbsp;');
    }
    output.append('</td>');
  }
  output.append((opt_data.columns.dateJoined) ? '<td class="j-td-date font-color-meta">' + ((opt_data.prop.membership) ? soy.$$escapeHtml((opt_data.prop.membership.memberDate ? _jive_moment((parseFloat(opt_data.prop.membership.memberDate) ? parseFloat(opt_data.prop.membership.memberDate) : opt_data.prop.membership.memberDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) : (opt_data.creationDate) ? soy.$$escapeHtml((opt_data.creationDate ? _jive_moment((parseFloat(opt_data.creationDate) ? parseFloat(opt_data.creationDate) : opt_data.creationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) : '') + '</td>' : '', '<td class="j-td-actions">');
  if (opt_data.prop.connections && opt_data.prop.connections.followLinkShown) {
    jive.people.profile.followLink(soy.$$augmentMap(opt_data.prop.connections, {targetUserID: opt_data.id, targetUserDisplayName: opt_data.subject, hideFollowingCount: true, renderLocation: 'browse', streamsAssociatedCount: opt_data.prop.connections.streamsAssociatedBean ? opt_data.prop.connections.streamsAssociatedBean.streamIDs.length : 0}), output);
  }
  output.append((opt_data.prop.directMessageActionLinkShown || opt_data.prop.discussionActionInfo && opt_data.prop.discussionActionInfo.linkShown) ? '<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])) + '"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.btn'),[])) + '</span></span></a>' : '', '<div class="j-menu j-action-popover j-js-browse-actions-container" style="display: none"><ul>', (opt_data.prop.directMessageActionLinkShown) ? '<li><a href="#" class="j-js-create-direct-message" onclick="require([\'apps/direct_messaging/factory\'], function(DirectMessaging) {DirectMessaging.sendMessageToUserIds([' + soy.$$escapeHtmlAttribute(soy.$$escapeJsValue(opt_data.id)) + ']);});return false;"><span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.sendmessage'),[])) + '</span></a></li>' : '', (opt_data.prop.discussionActionInfo && opt_data.prop.discussionActionInfo.linkShown) ? '<li><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.discussionActionInfo.link))) + '" class="js-link-cur-loc-param" data-cur-loc-param-name="cancelURL"><span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.startdiscussion'),[])) + '</span></a></li>' : '', '</ul></div></td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.browse.user.thumbnailUserItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-thumb j-people-thumb j-rc4 face card-front js-browse-item ', (! opt_data.enabled) ? 'disabled' : '', ' ');
  jive.browse.user.flippable__Cce8(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"><header class="js-thumb-header"><h4><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '" title="', soy.$$escapeHtmlAttribute(opt_data.subject), '">', soy.$$escapeHtml(opt_data.subject), '</a></h4></header><section>');
  jive.browse.user.userProfileImage(opt_data, output);
  output.append('<div class="j-user-info clearfix">');
  if (opt_data.prop.connections) {
    if (! opt_data.prop.connections.bidirectional && opt_data.prop.connections.followerCount >= 0 && opt_data.enabled) {
      output.append('<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followers.plural'),[])), '</span><br/>');
      if (opt_data.prop.connections.linkFollowCounts) {
        var param187 = new soy.StringBuilder();
        jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param187);
        jive.eae.acclaim.count({command: 'showFollowers', count: opt_data.prop.connections.followerCount, objectId: opt_data.id, objectType: opt_data.type, classes: 'j-user-follow-info', accessibilityLinkLabel: param187.toString()}, output);
      }
      output.append('</div>');
    }
    if (opt_data.prop.connections.followingCount >= 0 && opt_data.enabled) {
      output.append('<div><span class="font-color-meta-light">', (opt_data.prop.connections.bidirectional) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.friends'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.following'),[])), '</span><br/>');
      if (opt_data.prop.connections.linkFollowCounts) {
        var param214 = new soy.StringBuilder();
        jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.connections ? opt_data.prop.connections.followingCount : 0), type: 'showconnectioncount'}, param214);
        jive.eae.acclaim.count({command: 'showConnections', count: opt_data.prop.connections.followingCount, objectId: opt_data.id, objectType: opt_data.type, classes: 'j-user-follow-info', accessibilityLinkLabel: param214.toString()}, output);
      }
      output.append('</div>');
    }
  }
  output.append((! opt_data.enabled) ? '<strong class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.user.deactivated'),[])) + '</strong>' : '', '<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('profile.friends.labels.title'),[])), '</span><br/>');
  if (opt_data.prop.connections && opt_data.prop.connections.labelsShown) {
    if (opt_data.prop.connections.labelCount > 4) {
      output.append('<a href=\'#\' class="js-label-count">', soy.$$escapeHtml(opt_data.prop.connections.labelCount), '</a><div class="js-label-details" style="display: none; padding:7px 15px;"><ul class="j-label-dot-list j-quick-menu">');
      var listList236 = opt_data.prop.connections.friendLists;
      var listListLen236 = listList236.length;
      for (var listIndex236 = 0; listIndex236 < listListLen236; listIndex236++) {
        var listData236 = listList236[listIndex236];
        if (listData236.targetUserAMember) {
          jive.browse.user.labelDot(listData236, output);
        }
      }
      output.append('</ul></div>');
    } else {
      output.append('<ul class="j-label-dot-list j-td-user-info">');
      var listList244 = opt_data.prop.connections.friendLists;
      var listListLen244 = listList244.length;
      for (var listIndex244 = 0; listIndex244 < listListLen244; listIndex244++) {
        var listData244 = listList244[listIndex244];
        if (listData244.targetUserAMember) {
          jive.browse.user.labelDot(listData244, output);
        }
      }
      output.append('</ul>');
    }
  } else {
    output.append('<a href=\'#\' class="js-label-count">0</a>');
  }
  output.append('</div></div>', (opt_data.prop.title) ? ' <strong class="j-user-title font-color-meta-light" title="' + soy.$$escapeHtmlAttribute(opt_data.prop.title) + '">' + soy.$$escapeHtml(opt_data.prop.title) + '</strong>' : '', '</section><footer><div>');
  if (opt_data.columns.dateJoined) {
    if (opt_data.prop.membership || opt_data.creationDate) {
      output.append('<span class="font-color-meta">');
      jive.shared.soy.i18nHelper({i18nKey: 'browse.joined.date', arg0: '<strong>', arg1: (opt_data.prop.membership) ? soy.$$escapeHtml((opt_data.prop.membership.memberDate ? _jive_moment((parseFloat(opt_data.prop.membership.memberDate) ? parseFloat(opt_data.prop.membership.memberDate) : opt_data.prop.membership.memberDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LL') : '')) : (opt_data.creationDate) ? soy.$$escapeHtml((opt_data.creationDate ? _jive_moment((parseFloat(opt_data.creationDate) ? parseFloat(opt_data.creationDate) : opt_data.creationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LL') : '')) : '', arg2: '</strong>', noAutoEscape: true}, output);
      output.append('</span>');
    }
  }
  if (opt_data.columns.statuslevel && opt_data.prop.statuslevel && opt_data.prop.statuslevel.enabled) {
    output.append('<span class="font-color-meta">');
    jive.people.profile.statusLevel(soy.$$augmentMap(opt_data.prop.statuslevel, {showPoints: true}), output);
    output.append('</span>');
  }
  output.append('</div></footer>');
  jive.browse.user.flipperControl(opt_data.prop, output);
  output.append('</div>');
  var param290 = new soy.StringBuilder('<div class="j-thumb-back face card-back" aria-hidden="true"><h4 class="font-color-white">', soy.$$escapeHtml(opt_data.subject), '</h4><ul class="j-social-actions">');
  if (opt_data.prop.connections && opt_data.prop.connections.followLinkShown) {
    param290.append('<li>');
    jive.people.profile.followLink(soy.$$augmentMap(opt_data.prop.connections, {targetUserID: opt_data.id, targetUserDisplayName: opt_data.subject, hideFollowingCount: true, darkButton: true, renderLocation: 'browse', streamsAssociatedCount: opt_data.prop.connections.streamsAssociatedBean ? opt_data.prop.connections.streamsAssociatedBean.streamIDs.length : 0}), param290);
    param290.append('</li>');
  }
  param290.append((opt_data.prop.directMessageActionLinkShown) ? '<li><a href="#" class="js-create-direct-message j-social-action"><span><span class="jive-icon-med jive-icon-direct-message"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.sendmessage'),[])) + '</span></a></li>' : '', (opt_data.prop.discussionActionInfo && opt_data.prop.discussionActionInfo.linkShown) ? '<li><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.discussionActionInfo.link))) + '" class="j-social-action js-link-cur-loc-param" data-cur-loc-param-name="cancelURL"><span><span class="jive-icon-med jive-icon-discussion"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.startdiscussion'),[])) + '</span></a></li>' : '', '</ul><a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.back.button'),[])), '</span></a></div>');
  jive.browse.user.flippable(soy.$$augmentMap(opt_data.prop, {body: param290.toString()}), output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.user.detailExternalUserItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="js-browse-row j-people-row" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"  data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '"><td class="j-td-avatar"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/jive-avatar-invited.png'))), '" width="32" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('avatar.invited.user'),[])), '"></td><td class="j-td-user-info font-color-meta"><strong class="jive-username-link">', soy.$$escapeHtml(opt_data.subject), '</strong></td><td class="j-td-user-info font-color-meta" colspan="4">', (opt_data.prop.invitationDate) ? 'This user was invited on ' + soy.$$escapeHtml((opt_data.prop.invitationDate ? _jive_moment((parseFloat(opt_data.prop.invitationDate) ? parseFloat(opt_data.prop.invitationDate) : opt_data.prop.invitationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) + '.' : '', '</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.browse.user.thumbnailExternalUserItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-thumb j-people-thumb j-rc4 face card-front js-browse-item" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"><header class="js-thumb-header"><h4><span class="j-thumb-subject font-color-meta" title="', soy.$$escapeHtmlAttribute(opt_data.subject), '">', soy.$$escapeHtml(opt_data.subject), '</span></h4></header><section><a class="j-user-photo"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/jive-profile-invited.png'))), '" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('profilephoto.invited.user'),[])), '" width="200"/></a><div class="j-user-info clearfix">', (opt_data.prop.invitationDate) ? '<p class="font-color-meta j-user-info-text">This user was invited on <br>' + soy.$$escapeHtml((opt_data.prop.invitationDate ? _jive_moment((parseFloat(opt_data.prop.invitationDate) ? parseFloat(opt_data.prop.invitationDate) : opt_data.prop.invitationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) + '.</p>' : '', '</div><strong class="j-user-title font-color-meta-light" title=""></strong></section><footer><div></div></footer></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.user.flippable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((! opt_data.flipperHidden && (opt_data.connections && opt_data.connections.followLinkShown || opt_data.directMessageActionLinkShown || opt_data.discussionActionInfo && opt_data.discussionActionInfo.linkShown)) ? soy.$$filterNoAutoescape(opt_data.body) : '');
  return opt_sb ? '' : output.toString();
};


jive.browse.user.flipperControl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.user.flippable(soy.$$augmentMap(opt_data, {body: '<a href="#" class="j-card-flipper j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])) + '</a>'}), output);
  return opt_sb ? '' : output.toString();
};


jive.browse.user.flippable__Cce8 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((! opt_data.flipperHidden && (opt_data.connections && opt_data.connections.followLinkShown || opt_data.directMessageActionLinkShown || opt_data.discussionActionInfo && opt_data.discussionActionInfo.linkShown)) ? soy.$$filterNoAutoescape(opt_data.body) : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from item_container.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.container.cardBack');
goog.provide('jive.browse.container.detailContainerItem');
goog.provide('jive.browse.container.flippable');
goog.provide('jive.browse.container.flipperControl');
goog.provide('jive.browse.container.hierarchyContainerItem');
goog.provide('jive.browse.container.projectStatusMessage');
goog.provide('jive.browse.container.thumbnailBlogItem');
goog.provide('jive.browse.container.thumbnailProjectItem');
goog.provide('jive.browse.container.thumbnailSocialGroupItem');
goog.provide('jive.browse.container.thumbnailSpaceItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.acclaim.count');
goog.require('jive.people.profile.followingAssociatedStreamCount');
goog.require('jive.shared.soy.getCountTextByType');
goog.require('jive.soy.share.control');


jive.browse.container.thumbnailSpaceItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-thumb j-place-thumb j-space-thumb j-rc4 js-browse-item face card-front ');
  jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtml(opt_data.type), '" data-object-id="', soy.$$escapeHtml(opt_data.id), '"><header class="js-thumb-header"><h4><a class="j-place-name" href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" title="', soy.$$escapeHtml(opt_data.subject), '"><span class="', soy.$$escapeHtml(opt_data.iconCss), ' jive-icon-big" role="img" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), '"></span><span class="js-header-text">', soy.$$escapeHtml(opt_data.subject), '</span></a></h4></header><section><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" class="j-place-photo j-space-photo">', (opt_data.prop.placeImage && opt_data.prop.placeImage.urlMedium) ? '<img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.prop.placeImage.urlMedium)) + '" alt="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('cmnty.form.image'),[])) + '" width="200"/>' : '', '</a><div class="j-place-info clearfix"><div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followers.plural'),[])), '</span><br/>');
  var param42 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param42);
  jive.eae.acclaim.count({command: 'showFollowers', count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', objectId: opt_data.id, objectType: opt_data.type, accessibilityLinkLabel: param42.toString()}, output);
  output.append('</div>', (opt_data.prop.childInfo && opt_data.prop.childInfo.hasChildren) ? '<div><span class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspaces.plural'),[])) + '</span><br/><a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="' + soy.$$escapeHtml(opt_data.type) + '" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '">' + soy.$$escapeHtml(opt_data.prop.childInfo.numChildren) + '</a></div>' : '', '</div>', (opt_data.prop.descSnippet) ? '<article class="font-color-meta"><span>' + soy.$$escapeHtml(opt_data.prop.descSnippet) + '</span></article>' : '', '</section>');
  jive.browse.container.flipperControl(opt_data.prop, output);
  output.append('</div>');
  jive.browse.container.cardBack(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.thumbnailSocialGroupItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-thumb j-place-thumb j-group-thumb j-rc4 js-browse-item face card-front ');
  jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtml(opt_data.type), '" data-object-id="', soy.$$escapeHtml(opt_data.id), '"><header class="js-thumb-header"><h4><a class="j-place-name" href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" title="', soy.$$escapeHtml(opt_data.subject), '"><span class="', soy.$$escapeHtml(opt_data.iconCss), ' jive-icon-big" role="img" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), '"></span><span class="js-header-text">', soy.$$escapeHtml(opt_data.subject), '</span></a></h4></header><section><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" class="j-place-photo j-space-photo">', (opt_data.prop.placeImage && opt_data.prop.placeImage.urlMedium) ? '<img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.prop.placeImage.urlMedium)) + '" alt="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.image'),[])) + '" width="200"/>' : '', '</a><div class="j-place-info clearfix">');
  if (opt_data.prop.followInfo || opt_data.prop.socialGroupInfo || opt_data.prop.isVisibleToPartner) {
    if (opt_data.prop.followInfo) {
      output.append('<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followers.plural'),[])), '</span><br/>');
      var param120 = new soy.StringBuilder();
      jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param120);
      jive.eae.acclaim.count({command: 'showFollowers', count: (opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', objectId: opt_data.id, objectType: opt_data.type, accessibilityLinkLabel: param120.toString()}, output);
      output.append('</div>');
    }
    if (opt_data.prop.socialGroupInfo) {
      output.append('<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.members.plural'),[])), '</span><br/>');
      var param145 = new soy.StringBuilder();
      jive.shared.soy.getCountTextByType({count: (opt_data.prop.socialGroupInfo) ? soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers) : '0', type: 'showmembercount'}, param145);
      jive.eae.acclaim.count({command: 'showMembers', count: (opt_data.prop.socialGroupInfo) ? soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers) : '0', objectId: opt_data.id, objectType: opt_data.type, accessibilityLinkLabel: param145.toString()}, output);
      output.append('</div>');
    }
    if (opt_data.prop.isVisibleToPartner) {
      output.append('<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.members.externacontributors.singular'),[])), '</span><br/>');
      jive.eae.acclaim.count({command: 'showExternalContributorMembers', count: (opt_data.prop.socialGroupInfo) ? soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numPartners) : '0', objectId: opt_data.id, objectType: opt_data.type}, output);
      output.append('</div>');
    }
  }
  output.append('</div></section><footer><div class="j-thumb-footer clearfix">', (opt_data.prop.latestActivity && opt_data.prop.latestActivity.creationTime) ? '<span class="j-latest-activity font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.latestactivity'),[])) + ': ' + soy.$$escapeHtml((opt_data.prop.latestActivity.creationDate ? _jive_moment((parseFloat(opt_data.prop.latestActivity.creationDate) ? parseFloat(opt_data.prop.latestActivity.creationDate) : opt_data.prop.latestActivity.creationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('l') : '')) + '</span>' : '', '<ul class="j-type">', (opt_data.prop.isVisibleToPartner) ? '<li><span class="jive-icon-med jive-icon-partner" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '"></span></li>' : '', (opt_data.prop.socialGroupInfo && opt_data.prop.socialGroupInfo.typeName) ? '<li><span class="jive-icon-sml jive-icon-group-' + soy.$$escapeHtml(opt_data.prop.socialGroupInfo.typeName) + '-glyph" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.sgroup.' + opt_data.prop.socialGroupInfo.typeName),[])) + '"></span></li>' : '', '</ul></div></footer>');
  jive.browse.container.flipperControl(opt_data.prop, output);
  output.append('</div>');
  jive.browse.container.cardBack(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.thumbnailProjectItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-thumb j-place-thumb j-project-thumb j-rc4 js-browse-item face card-front ');
  jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtml(opt_data.type), '" data-object-id="', soy.$$escapeHtml(opt_data.id), '"><header class="js-thumb-header"><h4><a class="j-place-name" href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" title="', soy.$$escapeHtml(opt_data.subject), '">', (opt_data.prop.projectInfo.statusKey) ? '<span class="jive-icon-project-status-' + soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey) + ' jive-icon-big" role="img" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])) + '"></span>' : '', '<span class="js-header-text">', soy.$$escapeHtml(opt_data.subject), '</span></a></h4></header><section><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" class="j-place-photo j-project-photo">', (opt_data.prop.placeImage && opt_data.prop.placeImage.urlMedium) ? '<img src="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.prop.placeImage.urlMedium)) + '" alt="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('project.form.image'),[])) + '" width="200"/>' : '', '<div class="j-status-bar"><span class="font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.status'),[])), soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.colon'),[])), ' </span><span class="j-proj-status-text"><strong class="j-proj-status font-color-status-', soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('project.status.type.' + opt_data.prop.projectInfo.statusKey),[])), '</strong></span></div></a><div class="j-place-info clearfix ', (opt_data.prop.isVisibleToPartner) ? 'j-external' : '', '">');
  if (opt_data.prop.followInfo) {
    output.append('<div><span class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.followers.plural'),[])), '</span><br/>');
    var param256 = new soy.StringBuilder();
    jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param256);
    jive.eae.acclaim.count({command: 'showFollowers', count: (opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', objectId: opt_data.id, objectType: opt_data.type, accessibilityLinkLabel: param256.toString()}, output);
    output.append('</div>');
  }
  output.append('<div><span class="font-color-meta-light">', (opt_data.prop.projectInfo.overdue) ? '<span class="font-color-normal">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.overdue'),[])) + '</span>' : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.timeleft'),[])), '</span><br/>');
  if (opt_data.prop.projectInfo) {
    output.append('<span><strong>');
    jive.browse.container.projectStatusMessage(opt_data, output);
    output.append('</strong></span>');
  }
  output.append('</div>', (opt_data.prop.isVisibleToPartner) ? '<div class="j-browse-external-access"><span class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access.short'),[])) + '</span><br/><span class=""><span class="jive-icon-med jive-icon-partner" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '"></span></span></div>' : '', '</div>', (opt_data.prop.descSnippet) ? '<article class="font-color-meta"><span>' + soy.$$escapeHtml(opt_data.prop.descSnippet) + '</span></article>' : '', '</section>');
  jive.browse.container.flipperControl(opt_data.prop, output);
  output.append('</div>');
  jive.browse.container.cardBack(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.thumbnailBlogItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card">Currently Blog containers do not have a visual representation and are not rendered in browse UI.</div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.detailContainerItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="j-place-row js-browse-item" data-object-type="', soy.$$escapeHtml(opt_data.type), '" data-object-id="', soy.$$escapeHtml(opt_data.id), '"><td class="j-td-icon"><img src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png')), '" alt="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), '" class="', soy.$$escapeHtml(opt_data.iconCss), ' jive-icon-med" /></td><td class="j-td-title"><a href="', soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)), '" class="jivecontainerTT-hover-container" data-objectId="', soy.$$escapeHtml(opt_data.id), '" data-objectType="', soy.$$escapeHtml(opt_data.type), '"><strong>', soy.$$escapeHtml(opt_data.subject), '</strong></a>', (opt_data.prop.projectInfo && ! opt_data.prop.projectInfo.archived) ? '<span class="font-color-meta-light j-browse-proj-status"> - <strong class="j-proj-status font-color-status-' + soy.$$escapeHtml(opt_data.prop.projectInfo.statusKey) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('project.status.type.' + opt_data.prop.projectInfo.statusKey),[])) + '</strong></span>' : '');
  if (opt_data.prop.projectInfo && opt_data.prop.projectInfo.archived) {
    output.append('<span> - <strong>');
    jive.browse.container.projectStatusMessage(opt_data, output);
    output.append('</strong></span>');
  }
  output.append((opt_data.prop.socialGroupInfo && opt_data.prop.socialGroupInfo.typeName) ? '<span class="font-color-meta-light j-browse-group-type"> - ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('sgroup.' + opt_data.prop.socialGroupInfo.typeName),[])) + '</span>' : '', (opt_data.prop.isVisibleToPartner) ? '<span class="font-color-meta-light j-browse-external-access"> - <em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '</em></span>' : '', (opt_data.prop.childInfo && opt_data.prop.childInfo.hasChildren) ? '<span class="font-color-meta-light j-browse-subspaces"> - <a href="#" class="j-sub-spaces j-view-children font-color-meta-light" data-activity-type="children" data-objecttype="' + soy.$$escapeHtml(opt_data.type) + '" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.prop.childInfo.numChildren == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.singular'),[1])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.subspacecount.plural'),[opt_data.prop.childInfo.numChildren]))) + '</a></span>' : '');
  if (opt_data.prop.socialGroupInfo && opt_data.prop.socialGroupInfo.numMembers) {
    output.append('<p class="j-browse-content-location font-color-meta-light">');
    var param370 = new soy.StringBuilder();
    jive.shared.soy.getCountTextByType({count: (opt_data.prop.socialGroupInfo) ? soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers) : '0', type: 'showmembercount'}, param370);
    jive.eae.acclaim.count({command: 'showMembers', count: (opt_data.prop.socialGroupInfo) ? soy.$$escapeHtml(opt_data.prop.socialGroupInfo.numMembers) : '0', objectId: opt_data.id, objectType: opt_data.type, text: opt_data.prop.socialGroupInfo.numMembers == 1 ? jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.singular'),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong>1</strong>')]) : jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.plural'),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong>' + opt_data.prop.socialGroupInfo.numMembers + '</strong>')]), accessibilityLinkLabel: param370.toString()}, output);
    output.append((opt_data.prop.isVisibleToPartner) ? ' (' + ((opt_data.prop.socialGroupInfo.numPartners == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.externalcontributors.singular'),[1])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.membercount.externalcontributors.plural'),[opt_data.prop.socialGroupInfo.numPartners]))) + ')' : '', '</p>');
  } else {
    output.append((opt_data.prop.parentInfo) ? '<p class="j-browse-content-location font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])) + ' <a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.prop.parentInfo.link)) + '" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtml(opt_data.prop.parentInfo.id) + '" data-objectType="' + soy.$$escapeHtml(opt_data.prop.parentInfo.type) + '">' + soy.$$escapeHtml(opt_data.prop.parentInfo.subject) + '</a></p>' : '');
  }
  output.append('</td><td class="j-td-followers">');
  if (opt_data.prop.followInfo) {
    var param416 = new soy.StringBuilder();
    jive.shared.soy.getCountTextByType({count: (opt_data.prop.followInfo && opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', type: 'showfollowcount'}, param416);
    jive.eae.acclaim.count({command: 'showFollowers', count: (opt_data.prop.followInfo.numFollowers) ? soy.$$escapeHtml(opt_data.prop.followInfo.numFollowers) : '0', objectId: opt_data.id, objectType: opt_data.type, accessibilityLinkLabel: param416.toString()}, output);
  }
  output.append('</td>', (opt_data.columns && opt_data.columns.creationDate) ? '<td class="j-td-date font-color-meta">' + soy.$$escapeHtml((opt_data.creationDate ? _jive_moment((parseFloat(opt_data.creationDate) ? parseFloat(opt_data.creationDate) : opt_data.creationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) + '</td>' : '<td class="j-td-activity font-color-meta j-act">' + ((opt_data.prop.latestActivity) ? ((opt_data.prop.latestActivity.creationTime) ? ' <span class="font-color-meta-light">' + soy.$$escapeHtml(opt_data.prop.latestActivity.creationTime) + '</span> ' : '') + '</span>' : '') + '</td>', '<td class="j-td-actions">');
  var param444 = new soy.StringBuilder('<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])), '"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.btn'),[])), '</span></span></a><div class="j-menu j-js-browse-actions-container" style="display: none"><ul>');
  if (opt_data.prop.followInfo && opt_data.prop.followInfo.showFollowControls) {
    param444.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="', soy.$$escapeHtml(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length), '" aria-live="polite" aria-atomic="true"><span class="start-follow"><a href="#" class="j-follow-button" data-objecttype="', soy.$$escapeHtml(opt_data.type), '" data-objectid="', soy.$$escapeHtml(opt_data.id), '"', (opt_data.prop.followInfo.followed) ? ' style="display:none" ' : '', '>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.follow'),[])), '</a></span><span class="following"><a href="#" class="j-follow-button" data-objecttype="', soy.$$escapeHtml(opt_data.type), '" data-objectid="', soy.$$escapeHtml(opt_data.id), '"', (! opt_data.prop.followInfo.followed) ? ' style="display:none" ' : '', '>');
    jive.people.profile.followingAssociatedStreamCount({count: opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length, renderLocation: 'browse'}, param444);
    param444.append('</a></span></li>');
  }
  if (opt_data.prop.shareInfo && opt_data.prop.shareInfo.shareable) {
    param444.append('<li>');
    jive.soy.share.control({objectId: opt_data.id, objectType: opt_data.type, type: 'text'}, param444);
    param444.append('</li>');
  }
  param444.append((opt_data.prop.socialGroupInfo && ! opt_data.prop.socialGroupInfo.owner) ? '<li><span><a href="#" class="sgroup-join j-follow-button" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '"' + ((opt_data.prop.socialGroupInfo.member || opt_data.prop.socialGroupInfo.pendingApproval) ? ' style="display:none" ' : '') + '>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.joingroup'),[])) + '</a></span><span><a href="#" class="sgroup-leave j-follow-button" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '"' + ((! (opt_data.prop.socialGroupInfo.member || opt_data.prop.socialGroupInfo.pendingApproval)) ? ' style="display:none" ' : '') + '>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.leavegroup'),[])) + '</a></span></li>' : '', '</ul></div>');
  jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop, {body: param444.toString()}), output);
  output.append('</td>');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.hierarchyContainerItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.prop.beforeInfo) ? '<li class="j-hierarchy-more" data-index-end="' + soy.$$escapeHtml(opt_data.prop.beforeInfo) + '" data-parent-objectid="' + soy.$$escapeHtml(opt_data.prop.parentInfo.id) + '" data-direction="0"><a href="#" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.loadmore.previous10'),[])) + '" ><span class="j-more-label j-rc6">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.loadmore'),[])) + '</span></a></li>' : '', '<li class="j-hierarchy-item" data-object-type="', soy.$$escapeHtml(opt_data.type), '" data-object-id="', soy.$$escapeHtml(opt_data.id), '">', (opt_data.prop.perms.allowedToView) ? '<a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.link)) + '" class="j-anchor-icon jivecontainerTT-hover-container" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '" data-objecttype="' + soy.$$escapeHtml(opt_data.type) + '">' : '', (! opt_data.omitIcon) ? '<span class="' + soy.$$escapeHtml(opt_data.iconCss) + ' jive-icon-med"></span>' : '', '<strong>', soy.$$escapeHtml(opt_data.subject), '</strong>', (opt_data.prop.perms.allowedToView) ? '</a>' : '', (opt_data.prop.recursiveContentCount) ? ' <span class="font-color-meta j-content-count">' + ((opt_data.prop.recursiveContentCount.count == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.contentCount.singular'),[opt_data.prop.recursiveContentCount.count])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.contentCount.plural'),[opt_data.prop.recursiveContentCount.count]))) + '</span>' : '', (opt_data.prop.childInfo && opt_data.prop.childInfo.hasTraversableChildren) ? '<div class="j-td-spaceactions"><a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="' + soy.$$escapeHtml(opt_data.type) + '" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '" ><span class="j-show-children-msg"' + ((opt_data.prop.childInfo.children) ? 'style="display:none"' : '') + '>' + ((opt_data.prop.childInfo.numTraversableChildren == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.viewsubspaces.singular'),[opt_data.prop.childInfo.numTraversableChildren])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.viewsubspaces.plural'),[opt_data.prop.childInfo.numTraversableChildren]))) + '</span><span class="j-hide-children-msg"' + ((! opt_data.prop.childInfo.children) ? 'style="display:none"' : '') + '>' + ((opt_data.prop.childInfo.numTraversableChildren == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.hidesubspaces.singular'),[opt_data.prop.childInfo.numTraversableChildren])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.hidesubspaces.plural'),[opt_data.prop.childInfo.numTraversableChildren]))) + '</span></a></div>' : '', '<ul class="j-hierarchy-child-holder"', (opt_data.prop.childInfo.children) ? 'data-children-loaded="true" ' : ' style="display:none"', '><div class="j-hierarchy-child-expanded j-ui-elem"> </div>');
  if (opt_data.prop.childInfo && opt_data.prop.childInfo.children) {
    var childList589 = opt_data.prop.childInfo.children;
    var childListLen589 = childList589.length;
    for (var childIndex589 = 0; childIndex589 < childListLen589; childIndex589++) {
      var childData589 = childList589[childIndex589];
      jive.browse.container.hierarchyContainerItem(soy.$$augmentMap(childData589, {omitIcon: opt_data.omitIcon}), output);
    }
  }
  output.append('</ul></li>', (opt_data.prop.afterInfo) ? '<li class="j-hierarchy-more" data-index-start="' + soy.$$escapeHtml(opt_data.prop.afterInfo) + '" data-parent-objectid="' + soy.$$escapeHtml(opt_data.prop.parentInfo.id) + '" data-direction="1"><a href="#" title="' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.loadmore.next10'),[])) + '" ><span class="j-more-label j-rc6">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.hierarchy.loadmore'),[])) + '</span></a></li>' : '');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.flippable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.followInfo && opt_data.followInfo.showFollowControls || opt_data.shareInfo && opt_data.shareInfo.shareable || opt_data.socialGroupInfo) ? soy.$$filterNoAutoescape(opt_data.body) : '');
  return opt_sb ? '' : output.toString();
};


jive.browse.container.flipperControl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.container.flippable(soy.$$augmentMap(opt_data, {body: '<a href="#" class="j-card-flipper j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])) + '</a>'}), output);
  return opt_sb ? '' : output.toString();
};


jive.browse.container.cardBack = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param617 = new soy.StringBuilder('<div class="j-thumb-back face card-back" aria-hidden="true"><header><h6 class="font-color-white"><img src="', soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png')), '" alt="" class="', soy.$$escapeHtml(opt_data.iconCss), ' jive-icon-med" /> ', soy.$$escapeHtml(opt_data.subject), '</h6>', (opt_data.prop.parentInfo) ? '<p class="j-browse-content-location font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])) + ' <a href="' + soy.$$escapeHtml(jive.soy.func.buildUrl(opt_data.prop.parentInfo.link)) + '" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtml(opt_data.prop.parentInfo.id) + '" data-objectType="' + soy.$$escapeHtml(opt_data.prop.parentInfo.type) + '">' + soy.$$escapeHtml(opt_data.prop.parentInfo.subject) + '</a></p>' : '', '</header>', (opt_data.prop.descSnippet) ? '<article class="font-color-meta-light j-browse-place-description"><span>' + soy.$$escapeHtml(opt_data.prop.descSnippet) + '</span></article>' : '', '<ul class="j-social-actions">');
  if (opt_data.prop.followInfo && opt_data.prop.followInfo.showFollowControls) {
    param617.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="', soy.$$escapeHtml(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length), '" aria-live="polite" aria-atomic="true"><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="', soy.$$escapeHtml(opt_data.type), '" data-objectid="', soy.$$escapeHtml(opt_data.id), '" ', (opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '><span><span class="jive-icon-med jive-icon-follow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.follow'),[])), '</span></a></span><span class="following"><a class="button j-follow-button j-social-action" href="#" data-objecttype="', soy.$$escapeHtml(opt_data.type), '" data-objectid="', soy.$$escapeHtml(opt_data.id), '" ', (! opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '><span><span class="jive-icon-med jive-icon-follow"></span>');
    jive.people.profile.followingAssociatedStreamCount({count: opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length, renderLocation: 'browse'}, param617);
    param617.append('</span></a></span></li>');
  }
  if (opt_data.prop.shareInfo && opt_data.prop.shareInfo.shareable) {
    param617.append('<li>');
    jive.soy.share.control({objectId: opt_data.id, objectType: opt_data.type, type: 'largeButton', icon: true, classes: 'button j-social-action'}, param617);
    param617.append('<li>');
  }
  param617.append((opt_data.prop.socialGroupInfo && ! opt_data.prop.socialGroupInfo.owner) ? '<li><a class="button j-social-action sgroup-join" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '" ' + ((opt_data.prop.socialGroupInfo.member || opt_data.prop.socialGroupInfo.pendingApproval) ? ' style="display: none;" ' : '') + '><span>' + ((opt_data.prop.socialGroupInfo.requestToJoin) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.reqjoingroup'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.joingroup'),[]))) + '</span></a><a class="button j-social-action sgroup-leave" data-objectid="' + soy.$$escapeHtml(opt_data.id) + '" ' + ((! (opt_data.prop.socialGroupInfo.member || opt_data.prop.socialGroupInfo.pendingApproval)) ? ' style="display: none;" ' : '') + '><span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.leavegroup'),[])) + '</span></a></li>' : '', '</ul><a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.back.button'),[])), '</span></a></div>');
  jive.browse.container.flippable(soy.$$augmentMap(opt_data.prop, {body: param617.toString()}), output);
  return opt_sb ? '' : output.toString();
};


jive.browse.container.projectStatusMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.prop.projectInfo) ? '<span class="font-color-meta j-proj-status-text-details">' + ((opt_data.prop.projectInfo.archived) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.project.archived'),[])) : (opt_data.prop.projectInfo.complete) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.project.complete'),[])) : (opt_data.prop.projectInfo.overdue) ? (opt_data.prop.projectInfo.years > 0) ? (opt_data.prop.projectInfo.years == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysoverdue.singular'),[opt_data.prop.projectInfo.years])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysoverdue.plural'),[opt_data.prop.projectInfo.years])) : (opt_data.prop.projectInfo.months > 0) ? (opt_data.prop.projectInfo.months == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.monthsoverdue.singular'),[opt_data.prop.projectInfo.months])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.monthsoverdue.plural'),[opt_data.prop.projectInfo.months])) : (opt_data.prop.projectInfo.days == 1 || opt_data.prop.projectInfo.days == 0) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysoverdue.singular'),[1])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysoverdue.plural'),[opt_data.prop.projectInfo.days])) : (opt_data.prop.projectInfo.years) ? (opt_data.prop.projectInfo.years == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.yearsremaining.singular'),[opt_data.prop.projectInfo.years])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.yearsremaining.plural'),[opt_data.prop.projectInfo.years])) : (opt_data.prop.projectInfo.months) ? (opt_data.prop.projectInfo.months == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.monthsremaining.singular'),[opt_data.prop.projectInfo.months])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.monthsremaining.plural'),[opt_data.prop.projectInfo.months])) : (opt_data.prop.projectInfo.days == 1) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysremaining.singular'),[opt_data.prop.projectInfo.days])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.info.daysremaining.plural'),[opt_data.prop.projectInfo.days]))) + '</span>' : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from detail_container_header.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.container.detailContainerHeader');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.browse.container.detailContainerHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.place'),[])), '</strong></th><th><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.followers'),[])), '</strong></th><th><strong class="font-color-meta-light">', (opt_data.columns && opt_data.columns.creationDate) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.creationdate'),[])) : soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.latestactivity'),[])), '</strong></th><th></th></tr></thead>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from item_content.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.content.activityInfoBlock');
goog.provide('jive.browse.content.defaultDetailContentItem');
goog.provide('jive.browse.content.defaultThumbnailContentItem');
goog.provide('jive.browse.content.detailActionPanel');
goog.provide('jive.browse.content.detailContentItem');
goog.provide('jive.browse.content.detailTileStreamItem');
goog.provide('jive.browse.content.flippable');
goog.provide('jive.browse.content.flippable__Cce8');
goog.provide('jive.browse.content.flipperControl');
goog.provide('jive.browse.content.thumbnailActionPanel');
goog.provide('jive.browse.content.thumbnailBlogPostItem');
goog.provide('jive.browse.content.thumbnailBookmarkItem');
goog.provide('jive.browse.content.thumbnailContentItem');
goog.provide('jive.browse.content.thumbnailDateBlock');
goog.provide('jive.browse.content.thumbnailDiscussionItem');
goog.provide('jive.browse.content.thumbnailDocumentItem');
goog.provide('jive.browse.content.thumbnailPollItem');
goog.provide('jive.browse.content.thumbnailStatusItem');
goog.provide('jive.browse.content.thumbnailTileStreamItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.eae.acclaim.count');
goog.require('jive.people.profile.followingAssociatedStreamCount');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.getCountTextByType');
goog.require('jive.shared.soy.i18nHelper');
goog.require('jive.soy.share.control');


jive.browse.content.defaultDetailContentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<!-- Cannot find template for object type:', soy.$$escapeHtmlRcdata(opt_data.type), ', id:', soy.$$escapeHtmlRcdata(opt_data.id), ' -->');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.detailContentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr class="js-browse-item" data-object-id=', soy.$$escapeHtmlAttributeNospace(opt_data.id), ' data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '"><td class="j-td-icon"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), '" class="', soy.$$escapeHtmlAttribute(opt_data.iconCss), ' jive-icon-med" />', (opt_data.prop.showPremiumIcon && opt_data.prop.premiumIconCSS) ? '<img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))) + '" class="' + soy.$$escapeHtmlAttribute(opt_data.prop.premiumIconCSS) + ' premium-icon-med" />' : '', '</td><td class="j-td-title"><div><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '">', (opt_data.prop.hasUnreadReplies) ? '<strong>' : '', soy.$$filterNoAutoescape(opt_data.subject), (opt_data.prop.hasUnreadReplies) ? '</strong>' : '', (opt_data.prop.privacyInfo && opt_data.prop.privacyInfo['private']) ? '<span src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/transparent.png'))) + '" class="jive-icon-sml jive-icon-content-private' + ((opt_data.prop.privacyInfo.shared) ? '-shared' : '') + '" title="' + ((opt_data.prop.privacyInfo.shared) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.restricted.tooltip'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.private.tooltip'),[]))) + '" ></span>' : '', '</a>', (opt_data.prop.isVisibleToPartner) ? '<span class="font-color-meta-light j-browse-external-access"> - <em>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '</em></span>' : '', (opt_data.columns && opt_data.columns.parentInfo && opt_data.prop.place) ? '<p class="j-browse-content-location font-color-meta-light">' + ((! (opt_data.prop.place.type == 2020 || opt_data.prop.place.type == 37 && opt_data.prop.author)) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])) + ' <a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.place.link))) + '" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.id) + '" data-objectType="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.type) + '">' + soy.$$escapeHtml(opt_data.prop.place.subject) + '</a>' : '') + '</p>' : '', '</div></td><td class="j-td-author">');
  if (opt_data.prop.author) {
    output.append((! opt_data.prop.isOriginalAuthor) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.lastmodifiedby'),[])) + ' ' : '');
    jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, output);
  }
  output.append('</td><td class="j-td-likes center"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.likecount'),[])), '"><span class="jive-icon-sml jive-icon-meta-like"></span>');
  var param92 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.likeCount : 0), type: 'showlikescount'}, param92);
  jive.eae.acclaim.count({command: 'showLikes', count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.likeCount : 0), objectId: opt_data.id, objectType: opt_data.type, classes: 'j-meta-number', accessibilityLinkLabel: param92.toString()}, output);
  output.append('</span></td><td class="j-td-bookmarks center"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.bookmarkcount'),[])), '"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');
  var param107 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.bookmarkCount : 0), type: 'showbookmarkscount'}, param107);
  jive.eae.acclaim.count({command: 'showBookmarks', count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.bookmarkCount : 0), objectId: opt_data.id, objectType: opt_data.type, classes: 'j-meta-number', accessibilityLinkLabel: param107.toString()}, output);
  output.append('</span></td><td class="j-td-replies center font-color-meta"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.replycount'),[])), '"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="" class="jive-icon-sml jive-icon-meta-comment"/>', (opt_data.prop.activityInfo) ? soy.$$escapeHtml(opt_data.prop.activityInfo.replyCount) : '0', '</span></td><td class="j-td-views font-color-meta"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.viewcount'),[])), '">', (opt_data.prop.viewCount && opt_data.prop.viewCount > -1) ? soy.$$escapeHtml(opt_data.prop.viewCount) : '&nbsp;', '</span></td>');
  if (opt_data.columns && opt_data.columns.creationDate) {
    output.append('<td class="j-td-date font-color-meta">', soy.$$escapeHtml((opt_data.creationDate ? _jive_moment((parseFloat(opt_data.creationDate) ? parseFloat(opt_data.creationDate) : opt_data.creationDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')), '</td>');
  } else if (opt_data.prop.lastActivityDate) {
    output.append('<td class="j-td-date font-color-meta">', soy.$$escapeHtml((opt_data.prop.lastActivityDate ? _jive_moment((parseFloat(opt_data.prop.lastActivityDate) ? parseFloat(opt_data.prop.lastActivityDate) : opt_data.prop.lastActivityDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')), ' <span class="font-color-meta-light" style="display: none">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.by'),[])), ' ');
    jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, output);
    output.append('</span></td>');
  } else {
    output.append('<td></td>');
  }
  output.append('<td class="j-td-actions">');
  var param148 = new soy.StringBuilder();
  jive.browse.content.detailActionPanel(opt_data, param148);
  jive.browse.content.flippable(soy.$$augmentMap(opt_data.prop, {body: param148.toString()}), output);
  output.append('</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.defaultThumbnailContentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('\t<!-- Cannot find template for object type:', soy.$$escapeHtmlRcdata(opt_data.type), ', id:', soy.$$escapeHtmlRcdata(opt_data.id), ' -->');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailContentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-content-thumb j-doc-thumb j-thumb js-browse-item face card-front ');
  jive.browse.content.flippable__Cce8(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"><header class="js-thumb-header"><h4><p class="j-508-label" aria-hidden="true" id="label-', soy.$$escapeHtmlAttribute(opt_data.type), '-', soy.$$escapeHtmlAttribute(opt_data.id), '">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), ' ', soy.$$filterNoAutoescape(opt_data.subject), '</p><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '" aria-labelledby="label-', soy.$$escapeHtmlAttribute(opt_data.type), '-', soy.$$escapeHtmlAttribute(opt_data.id), '" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), ' ', soy.$$filterNoAutoescape(opt_data.subject), '"><span class="jive-icon-big ', soy.$$escapeHtmlAttribute(opt_data.iconCss), '" role="img"></span>', (opt_data.prop.showPremiumIcon && opt_data.prop.premiumIconCSS) ? '<span class="premium-icon-big ' + soy.$$escapeHtmlAttribute(opt_data.prop.premiumIconCSS) + '" role="img"></span>' : '', '<span class="js-header-text j-header-text" role="header">', soy.$$filterNoAutoescape(opt_data.subject), '</span></a></h4></header><section><article>', (opt_data.prop.binaryPreview) ? (opt_data.prop.binaryPreview.showViewer) ? '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))) + '" data-preview-url="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.binaryPreview.previewUrl))) + '"><img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.binaryPreview.thumbnailUrl))) + '" class="binary-preview" alt="' + soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) + '" title="' + soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) + '"/></a>' : '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.binaryPreview.previewUrl))) + '"><img src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.binaryPreview.thumbnailUrl))) + '" class="binary-preview" alt="' + soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) + '" title="' + soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) + '"/></a>' : (opt_data.prop.bodysnippet) ? soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) : '', '</article>');
  if (opt_data.prop.author) {
    output.append('<div class="j-author-block"><span class="j-avatar-container">');
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.prop.author, {size: 24}), output);
    output.append('</span><div class="j-author-info font-color-meta">');
    jive.browse.content.thumbnailDateBlock(opt_data, output);
    output.append('</div></div>');
  }
  output.append('</section><footer><div class="j-thumb-footer">');
  jive.browse.content.activityInfoBlock(soy.$$augmentMap(opt_data.prop, {objectId: opt_data.id, objectType: opt_data.type}), output);
  output.append('<span class="j-thumb-title-meta">', (opt_data.prop.privacyInfo && opt_data.prop.privacyInfo['private']) ? '<span src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/transparent.png'))) + '" class="jive-icon-sml jive-icon-content-private' + ((opt_data.prop.privacyInfo.shared) ? '-shared' : '') + '" title="' + ((opt_data.prop.privacyInfo.shared) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.restricted.tooltip'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.private.tooltip'),[]))) + '" ></span>' : '', (opt_data.prop.attachmentInfo && opt_data.prop.attachmentInfo.hasAttachments) ? '<span class="jive-icon-sml jive-icon-content-attachment"></span>' : '', (opt_data.prop.isVisibleToPartner) ? '<span class="jive-icon-med jive-icon-partner" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '"></span>' : '', '</span></div></footer>');
  jive.browse.content.flipperControl(opt_data.prop, output);
  output.append('</div><div class="j-thumb-back face card-back j-thumb-back-small" aria-hidden="true"><header><h6 class="font-color-white"><span class="jive-icon-med ', soy.$$escapeHtmlAttribute(opt_data.iconCss), '"></span>', soy.$$filterNoAutoescape(opt_data.subject), '</h6>', (opt_data.prop.place) ? '<p class="j-browse-content-location font-color-meta-light">' + ((! (opt_data.prop.place.type == 2020 || opt_data.prop.place.type == 37)) ? soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])) + ' <a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.place.link))) + '" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.id) + '" data-objectType="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.type) + '">' + soy.$$escapeHtml(opt_data.prop.place.subject) + '</a>' : '') + '</p>' : '', '</header>');
  jive.browse.content.thumbnailActionPanel(opt_data, output);
  output.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.back.button'),[])), '</span></a></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailBookmarkItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card"><div class="j-content-thumb j-bookmark-thumb j-thumb js-browse-item face card-front ');
  jive.browse.content.flippable__Cce8(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"><header class="js-thumb-header"><h4><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '" title="', soy.$$filterNoAutoescape(opt_data.subject), '"><span class="jive-icon-big jive-icon-external-site" role="img" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.type),[])), '"></span><span class="js-header-text j-header-text">', soy.$$filterNoAutoescape(opt_data.subject), '</span></a><span class="j-thumb-title-meta">', (opt_data.prop.privacyInfo && opt_data.prop.privacyInfo['private']) ? '<span src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/transparent.png'))) + '" class="jive-icon-sml jive-icon-content-private' + ((opt_data.prop.privacyInfo.shared) ? '-shared' : '') + '" title="' + ((opt_data.prop.privacyInfo.shared) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.restricted.tooltip'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.private.tooltip'),[]))) + '" ></span>' : '', '</span></h4></header><section><article>', (opt_data.prop.bodysnippet) ? soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) + '<a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))) + '" class="j-more">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.viewmore'),[])) + '</a>' : '', '</article>');
  jive.browse.content.activityInfoBlock(soy.$$augmentMap(opt_data.prop, {link: opt_data.link, objectId: opt_data.id, objectType: opt_data.type, displaySharedContentCue: opt_data.prop.isVisibleToPartner}), output);
  output.append('<div class="j-author-block"><span class="j-avatar-container">');
  jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.prop.author, {size: 24}), output);
  output.append('</span><div class="j-author-info font-color-meta">');
  jive.browse.content.thumbnailDateBlock(opt_data, output);
  output.append('</div></div></section>');
  jive.browse.content.flipperControl(opt_data.prop, output);
  output.append('</div><div class="j-thumb-back face card-back" aria-hidden="true"><header><h6 class="font-color-white">', soy.$$filterNoAutoescape(opt_data.subject), '</h6></header>');
  jive.browse.content.thumbnailActionPanel(opt_data, output);
  output.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.back.button'),[])), '</span></a></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailDocumentItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailDiscussionItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailBlogPostItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailStatusItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailTileStreamItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.detailTileStreamItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.detailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailPollItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.thumbnailContentItem(opt_data, output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailDateBlock = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.unmodified || opt_data.columns && opt_data.columns.showCreator) {
    var param383 = new soy.StringBuilder('<span class="j-line2">');
    jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, param383);
    param383.append('</span>');
    jive.shared.soy.i18nHelper({i18nKey: 'browse.created_by', arg0: '<span>', arg1: '</span>', arg2: param383.toString(), noAutoEscape: true}, output);
  } else {
    var param395 = new soy.StringBuilder('<span class="j-line2">');
    jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, param395);
    param395.append('</span>');
    jive.shared.soy.i18nHelper({i18nKey: 'browse.updated_by', arg0: '<span>', arg1: '</span>', arg2: param395.toString(), noAutoEscape: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


jive.browse.content.activityInfoBlock = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="j-stats"><li><span class="jive-icon-sml jive-icon-meta-like"></span>');
  var param413 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: (opt_data.activityInfo) ? soy.$$escapeHtml(opt_data.activityInfo.likeCount) : '0', type: 'showlikescount'}, param413);
  jive.eae.acclaim.count({command: 'showLikes', count: (opt_data.activityInfo) ? soy.$$escapeHtml(opt_data.activityInfo.likeCount) : '0', objectId: opt_data.objectId, objectType: opt_data.objectType, classes: 'j-meta-number', accessibilityLinkLabel: param413.toString()}, output);
  output.append('</li><li><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');
  var param434 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: (opt_data.activityInfo) ? soy.$$escapeHtml(opt_data.activityInfo.bookmarkCount) : '0', type: 'showbookmarkscount'}, param434);
  jive.eae.acclaim.count({command: 'showBookmarks', count: (opt_data.activityInfo) ? soy.$$escapeHtml(opt_data.activityInfo.bookmarkCount) : '0', objectId: opt_data.objectId, objectType: opt_data.objectType, classes: 'j-meta-number', accessibilityLinkLabel: param434.toString()}, output);
  output.append('</li><li><span class="jive-icon-sml jive-icon-meta-comment"></span>', (opt_data.activityInfo) ? soy.$$escapeHtml(opt_data.activityInfo.replyCount) : '0', '</li></ul>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.flippable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.followInfo && opt_data.followInfo.showFollowControls || opt_data.shareInfo && opt_data.shareInfo.shareable || opt_data.bookmarkInfo && opt_data.bookmarkInfo.showBookmarkControls) ? soy.$$filterNoAutoescape(opt_data.body) : '');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.flipperControl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  jive.browse.content.flippable(soy.$$augmentMap(opt_data, {body: '<a href="#" class="j-card-flipper j-ui-elem">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])) + '</a>'}), output);
  return opt_sb ? '' : output.toString();
};


jive.browse.content.thumbnailActionPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="j-social-actions" role="toolbar" aria-label="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.label'),[])), '">');
  if (opt_data.prop.followInfo && opt_data.prop.followInfo.showFollowControls) {
    output.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length), '" aria-live="polite" aria-atomic="true"><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectType), '" data-objectid="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectID), '" ', (opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '><span><span class="jive-icon-med jive-icon-follow"></span>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.follow'),[])), '</span></a></span><span class="following"><a class="button j-follow-button j-social-action" href="#" data-objecttype="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectType), '" data-objectid="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.objectID), '" ', (! opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '><span><span class="jive-icon-med jive-icon-follow"></span>');
    jive.people.profile.followingAssociatedStreamCount({count: opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length, renderLocation: 'browse'}, output);
    output.append('</span></a></span></li>');
  }
  if (opt_data.prop.shareInfo && opt_data.prop.shareInfo.shareable) {
    output.append('<li>');
    jive.soy.share.control({objectId: opt_data.id, objectType: opt_data.type, type: 'text', icon: true, classes: 'j-social-action'}, output);
    output.append('</li>');
  }
  output.append((opt_data.prop.bookmarkInfo && opt_data.prop.bookmarkInfo.showBookmarkControls) ? '<li class="js-bookmark"><a class="bookmark-content j-social-action" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" href="#" ' + ((opt_data.prop.bookmarkInfo.bookmarked) ? 'style="display: none;"' : '') + '><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction-grey"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.bookmark'),[])) + '</span></a><a class="bookmarked-content j-social-action" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" href="#" ' + ((! opt_data.prop.bookmarkInfo.bookmarked) ? 'style="display: none;"' : '') + '><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction"></span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.unbookmark'),[])) + '</span></a><div class="js-bookmark-actions j-menu" style="display: none;"><ul><li><a href="#" class="edit-bookmark" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.edit'),[])) + '</a></li><li><a href="#" class="unbookmark-content" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" data-bookmarkid="' + soy.$$escapeHtmlAttribute(opt_data.prop.bookmarkInfo.bookmarkID) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.remove'),[])) + '</a></li></ul></div></li>' : '', '</ul>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.detailActionPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.actions'),[])), '"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.btn'),[])), '</span></span></a><div class="j-menu j-js-browse-actions-container" style="display: none"><ul>');
  if (opt_data.prop.followInfo && opt_data.prop.followInfo.showFollowControls) {
    output.append('<li class="j-js-follow-controls" data-location="browse" data-streamsassoc="', soy.$$escapeHtmlAttribute(opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length), '"><span class="start-follow"><a class="button j-follow-button" href="#" data-objecttype="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-objectid="', soy.$$escapeHtmlAttribute(opt_data.id), '" ', (opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '>', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.follow'),[])), '</a></span><span class="following"><a class="button j-follow-button" href="#" data-objecttype="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-objectid="', soy.$$escapeHtmlAttribute(opt_data.id), '" ', (! opt_data.prop.followInfo.followed) ? 'style="display: none;"' : '', '>');
    jive.people.profile.followingAssociatedStreamCount({count: opt_data.prop.followInfo.streamsAssociatedBean.streamIDs.length, renderLocation: 'browse'}, output);
    output.append('</a></span></li>');
  }
  if (opt_data.prop.shareInfo && opt_data.prop.shareInfo.shareable) {
    output.append('<li>');
    jive.soy.share.control({objectId: opt_data.id, objectType: opt_data.type, type: 'text'}, output);
    output.append('</li>');
  }
  output.append((opt_data.prop.bookmarkInfo && opt_data.prop.bookmarkInfo.showBookmarkControls) ? '<li class="js-bookmark" ' + ((opt_data.prop.bookmarkInfo.bookmarked) ? 'style="display: none;"' : '') + '><a class="bookmark-content" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" href="#"><span>' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.bookmark'),[])) + '</span></a></li><li class="js-bookmark" ' + ((! opt_data.prop.bookmarkInfo.bookmarked) ? 'style="display: none;"' : '') + '><a href="#" class="edit-bookmark bookmarked-content" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.editbookmark'),[])) + '</a></li><li class="js-bookmark" ' + ((! opt_data.prop.bookmarkInfo.bookmarked) ? 'style="display: none;"' : '') + '><a href="#" class="unbookmark-content bookmarked-content" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.type) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.id) + '" data-bookmarkid="' + soy.$$escapeHtmlAttribute(opt_data.prop.bookmarkInfo.bookmarkID) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.action.removebookmark'),[])) + '</a></li>' : '', '</ul></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.content.flippable__Cce8 = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.followInfo && opt_data.followInfo.showFollowControls || opt_data.shareInfo && opt_data.shareInfo.shareable || opt_data.bookmarkInfo && opt_data.bookmarkInfo.showBookmarkControls) ? soy.$$filterNoAutoescape(opt_data.body) : '');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from item_bookmarked_content.soy.
// Please don't edit this file by hand.

goog.provide('jive.browse.bookmark.detailBookmarkedItem');
goog.provide('jive.browse.bookmark.detailBookmarksHeader');
goog.provide('jive.browse.bookmark.popularBookmarkText');
goog.provide('jive.browse.bookmark.thumbnailBookmarkedItem');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');
goog.require('jive.browse.content.activityInfoBlock');
goog.require('jive.browse.content.detailActionPanel');
goog.require('jive.browse.content.flippable');
goog.require('jive.browse.content.flipperControl');
goog.require('jive.browse.content.thumbnailActionPanel');
goog.require('jive.eae.acclaim.count');
goog.require('jive.shared.displayutil.avatar');
goog.require('jive.shared.displayutil.userDisplayNameLink');
goog.require('jive.shared.soy.getCountTextByType');


jive.browse.bookmark.detailBookmarksHeader = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.content'),[])), '</strong></th><th><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.author'),[])), '</strong></th>', (opt_data.yourBookmarks) ? '' : '', '<th class="center"><!-- <strong class="font-color-meta-light">', soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.likecount'),[])), '</strong> --> <img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.likecount'),[])), '" class="jive-icon-sml jive-icon-meta-like"/></th><th class="center"><!-- <strong class="font-color-meta-light">', soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.bookmarkcount'),[])), '</strong> --> <img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.bookmarkcount'),[])), '" class="jive-icon-sml jive-icon-meta-bookmark"/></th><th class="center"><!-- <strong class="font-color-meta-light">', soy.$$escapeHtmlRcdata(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.replycount'),[])), '</strong> --> <img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.replycount'),[])), '" class="jive-icon-sml jive-icon-meta-comment"/></th><th class="center"><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.viewcount'),[])), '</strong></th><th><strong class="font-color-meta-light">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.bookmarkedon'),[])), '</strong></th><th></th></tr></thead>');
  return opt_sb ? '' : output.toString();
};


jive.browse.bookmark.detailBookmarkedItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr data-object-id=', soy.$$escapeHtmlAttributeNospace(opt_data.markedObjectId), ' data-object-type="', soy.$$escapeHtmlAttribute(opt_data.markedObjectType), '"><td class="j-td-icon"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="" class="', soy.$$escapeHtmlAttribute(opt_data.iconCss), ' jive-icon-med" /></td><td class="j-td-title"><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '">', soy.$$filterNoAutoescape(opt_data.subject), (opt_data.prop.privacyInfo && opt_data.prop.privacyInfo['private']) ? '<span src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/transparent.png'))) + '" class="jive-icon-sml jive-icon-content-private' + ((opt_data.prop.privacyInfo.shared) ? '-shared' : '') + '" title="' + ((opt_data.prop.privacyInfo.shared) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.restricted.tooltip'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.private.tooltip'),[]))) + '" ></span>' : '', '</a>', (opt_data.prop.isVisibleToPartner) ? '<span class="font-color-meta-light j-browse-external-access"> - ' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('partner.browse.ext_access'),[])) + '</span>' : '', '<div>', (opt_data.prop.place) ? '<p class="j-browse-content-location font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.in'),[])) + ' <a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.prop.place.link))) + '" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.id) + '" data-objectType="' + soy.$$escapeHtmlAttribute(opt_data.prop.place.type) + '">' + soy.$$escapeHtml(opt_data.prop.place.subject) + '</a></p>' : '', (opt_data.externalURL) ? '<p class="j-browse-content-location font-color-meta-light"><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL)) + '" class="font-color-meta-light" title="' + soy.$$escapeHtmlAttribute(opt_data.externalURL) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('bookmark.view.visit.site.label'),[])) + '</a></p>' : '', '</div></td><td class="j-td-author">');
  jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, output);
  output.append('</td><td class="j-td-likes center"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.likecount'),[])), '"><span class="jive-icon-sml jive-icon-meta-like"></span>');
  var param103 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.likeCount : 0), type: 'showlikescount'}, param103);
  jive.eae.acclaim.count({command: 'showLikes', count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.likeCount : 0), objectId: opt_data.markedObjectId, objectType: opt_data.markedObjectType, classes: 'j-meta-number', accessibilityLinkLabel: param103.toString()}, output);
  output.append('</span></td><td class="j-td-bookmarks center"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.bookmarkcount'),[])), '"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');
  var param118 = new soy.StringBuilder();
  jive.shared.soy.getCountTextByType({count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.bookmarkCount : 0), type: 'showbookmarkscount'}, param118);
  jive.eae.acclaim.count({command: 'showBookmarks', count: soy.$$escapeHtml(opt_data.prop.activityInfo ? opt_data.prop.activityInfo.bookmarkCount : 0), objectId: opt_data.markedObjectId, objectType: opt_data.markedObjectType, classes: 'j-meta-number', accessibilityLinkLabel: param118.toString()}, output);
  output.append('</span></td><td class="j-td-replies center font-color-meta"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.replycount'),[])), '"><img src="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.resourceUrl(window._jive_base_url,'/7.0.3.0/','','/images/transparent.png'))), '" alt="" class="jive-icon-sml jive-glyph-comment"/>', (opt_data.prop.activityInfo) ? soy.$$escapeHtml(opt_data.prop.activityInfo.replyCount) : '0', '</span></td><td class="j-td-views center font-color-meta"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('browse.heading.viewcount'),[])), '">', (opt_data.prop.viewCount > -1) ? soy.$$escapeHtml(opt_data.prop.viewCount) : '&nbsp;', '</span></td>', (opt_data.prop.lastActivityDate) ? '<td class="j-td-date font-color-meta">' + soy.$$escapeHtml((opt_data.prop.lastActivityDate ? _jive_moment((parseFloat(opt_data.prop.lastActivityDate) ? parseFloat(opt_data.prop.lastActivityDate) : opt_data.prop.lastActivityDate)).lang(_jive_locale.toLowerCase().replace('_','-')).format('LLL') : '')) + '</td>' : '<td class="j-td-date font-color-meta">&nbsp;</td>', '<td class="j-td-actions">');
  jive.browse.content.detailActionPanel({id: opt_data.markedObjectId, type: opt_data.markedObjectType, prop: opt_data.prop}, output);
  output.append('</td></tr>');
  return opt_sb ? '' : output.toString();
};


jive.browse.bookmark.thumbnailBookmarkedItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="card j-small-card" role="article" aria-labelledby="bookmark-subject-', soy.$$escapeHtmlAttribute(opt_data.id), '" ', (opt_data.prop.bodysnippet) ? 'aria-describedby="bookmark-notes-' + soy.$$escapeHtmlAttribute(opt_data.id) + '"' : '', '><div class="j-content-thumb j-bookmarked-thumb ', (opt_data.yourBookmarks) ? 'j-your-bookmark-thumb' : '', ' j-thumb js-browse-item face card-front ');
  jive.browse.content.flippable(soy.$$augmentMap(opt_data.prop, {body: 'flippable'}), output);
  output.append('" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.type), '" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.id), '"><header class="js-thumb-header"><h4><a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl(opt_data.link))), '" title="', soy.$$filterNoAutoescape(opt_data.subject), '"><span title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('global.access.content.type.' + opt_data.markedObjectType),[])), '" class="jive-icon-big ', soy.$$escapeHtmlAttribute(opt_data.iconCss), '" role="img"></span><span class="js-header-text j-header-text" id="bookmark-subject-', soy.$$escapeHtmlAttribute(opt_data.id), '">', soy.$$filterNoAutoescape(opt_data.subject), '</span></a></h4></header><section>', (opt_data.externalURL) ? '<p class="j-bookmarked-link"><span class="jive-icon-sml jive-icon-link2"></span><a href="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(opt_data.externalURL)) + '" title="' + soy.$$escapeHtmlAttribute(opt_data.externalURL) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('bookmark.view.visit.site.label'),[])) + '</a></p>' : '', (opt_data.yourBookmarks) ? '<p id="bookmark-notes-' + soy.$$escapeHtmlAttribute(opt_data.id) + '"><span class="jive-icon-sml jive-glyph-notes" role="img" title="' + soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('bookmarks.create.notes.label'),[])) + '"></span>' + ((opt_data.prop.bodysnippet) ? soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) : '<em class="font-color-meta-light">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.bookmarks.nonotes'),[])) + '</em>') + '</p>' : '<article id="bookmark-notes-' + soy.$$escapeHtmlAttribute(opt_data.id) + '">' + ((opt_data.prop.bodysnippet) ? soy.$$filterNoAutoescape(opt_data.prop.bodysnippet) : '') + '</article>');
  if (opt_data.prop.bookmarkTags && opt_data.prop.bookmarkTags.tags && opt_data.prop.bookmarkTags.tags.length > 0) {
    output.append('<p><span class="jive-icon-sml jive-icon-tag"></span>');
    var tagEntryList228 = opt_data.prop.bookmarkTags.tags;
    var tagEntryListLen228 = tagEntryList228.length;
    for (var tagEntryIndex228 = 0; tagEntryIndex228 < tagEntryListLen228; tagEntryIndex228++) {
      var tagEntryData228 = tagEntryList228[tagEntryIndex228];
      output.append('<a href="', soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/tags#/?tags=' + tagEntryData228.tag))), '" title="', soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('tag.link.content.tagged.tooltip'),[tagEntryData228.tag])), '">', (tagEntryData228.abbreviatedTag) ? soy.$$escapeHtml(tagEntryData228.abbreviatedTag) : soy.$$escapeHtml(tagEntryData228.tag), '</a>', (! (tagEntryIndex228 == tagEntryListLen228 - 1)) ? ', ' : '');
    }
    output.append((opt_data.prop.bookmarkTags.tagsRemaining > 0) ? (opt_data.yourBookmarks && opt_data.canEdit) ? ' (<a href="#" class="edit-bookmark" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.markedObjectType) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.markedObjectId) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.bookmarks.more.tags'),[opt_data.prop.bookmarkTags.tagsRemaining])) + '</a>)' : '' : '', '</p>');
  }
  output.append((opt_data.yourBookmarks && opt_data.canEdit) ? '<p><span class="jive-icon-sml jive-glyph-edit"></span><a href="#" role="button" class="edit-bookmark" data-objecttype="' + soy.$$escapeHtmlAttribute(opt_data.markedObjectType) + '" data-objectid="' + soy.$$escapeHtmlAttribute(opt_data.markedObjectId) + '">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.bookmarks.edit'),[])) + '</a></p>' : '', '</section><footer>');
  if (! opt_data.popularBookmarks && ! opt_data.yourBookmarks) {
    output.append('<div class="j-sort-meta font-color-meta j-author-block" ><span class="j-avatar-container">');
    jive.shared.displayutil.avatar(soy.$$augmentMap(opt_data.prop.author, {size: 24}), output);
    output.append('</span><div class="j-author-info font-color-meta">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('browse.bookmarks.time'),[new soydata.VERY_UNSAFE.ordainSanitizedHtml('<strong>' + opt_data.creationTime + '</strong>')])), ' ', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.by'),[])), ' <span class="j-line2">');
    jive.shared.displayutil.userDisplayNameLink(opt_data.prop.author, output);
    output.append('</span></div></div>');
  }
  if (opt_data.popularBookmarks) {
    jive.browse.bookmark.popularBookmarkText(opt_data, output);
  }
  output.append((opt_data.yourBookmarks) ? '' : '', '<div class="j-thumb-footer" data-object-id="', soy.$$escapeHtmlAttribute(opt_data.markedObjectId), '" data-object-type="', soy.$$escapeHtmlAttribute(opt_data.markedObjectType), '">');
  jive.browse.content.activityInfoBlock(soy.$$augmentMap(opt_data.prop, {objectId: opt_data.markedObjectId, objectType: opt_data.markedObjectType, displaySharedContentCue: opt_data.prop.isVisibleToPartner}), output);
  output.append('<span class="j-thumb-title-meta">', (opt_data.prop.privacyInfo && opt_data.prop.privacyInfo['private']) ? '<span src="' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(jive.soy.func.buildUrl('/images/transparent.png'))) + '" class="jive-icon-sml jive-icon-content-private' + ((opt_data.prop.privacyInfo.shared) ? '-shared' : '') + '" title="' + ((opt_data.prop.privacyInfo.shared) ? soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.restricted.tooltip'),[])) : soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg('doc.visibility.private.tooltip'),[]))) + '" ></span>' : '', (opt_data.prop.attachmentInfo && opt_data.prop.attachmentInfo.hasAttachments) ? '<span class="jive-icon-sml jive-icon-content-attachment"></span>' : '', '</span></div></footer>');
  jive.browse.content.flipperControl(opt_data.prop, output);
  output.append('</div><div class="j-thumb-back face card-back j-thumb-back-small" aria-hidden="true"><header><h6 class="font-color-white"><span class="jive-icon-med ', soy.$$escapeHtmlAttribute(opt_data.iconCss), '"></span>', soy.$$filterNoAutoescape(opt_data.subject), '</h6></header>');
  jive.browse.content.thumbnailActionPanel({id: opt_data.markedObjectId, type: opt_data.markedObjectType, prop: opt_data.prop}, output);
  output.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.back.button'),[])), '</span></a></div></div>');
  return opt_sb ? '' : output.toString();
};


jive.browse.bookmark.popularBookmarkText = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="j-sort-meta font-color-meta js-bookmark-popular-text">', soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(opt_data.popularRangeKey),[opt_data.popularCount])), '</div>');
  return opt_sb ? '' : output.toString();
};

;
// This file was automatically generated from create_group.soy.
// Please don't edit this file by hand.

goog.provide('jive.onbStep.create_group.pageTips');

goog.require('soy');
goog.require('soydata');
goog.require('soy.StringBuilder');


jive.onbStep.create_group.pageTips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.renderLocation == 'group-template') ? '<div class="j-tips inline js-onboarding-tip" style="top: -30px;"><div class="d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_group_template_label,[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_group_template_text,[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 30px"></span></div>' : (opt_data.renderLocation == 'group-name') ? '<div class="j-tips inline js-onboarding-tip" style="top: 0;"><div class="d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_groupname_label,[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_groupname_text,[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 30px"></span></div>' : (opt_data.renderLocation == 'group-img') ? '<div class="j-tips inline js-onboarding-tip" style="top: 40px;"><div class="d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip"><h4 class="font-color-meta font-face-deco optional">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_label,[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_text2,[])) + '</p><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_flair_text1,[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span><span class="j-tiparrow-e j-tarrow" style="top: 20px; right: -350px;"></span></div>' : (opt_data.renderLocation == 'group-type') ? '<div class="j-tips inline p-bar js-onboarding-tip" style="top: -30px; visibility: visible; z-index: 100;"><div class="d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_type_label,[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_type_text,[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 50px"></span></div>' : (opt_data.renderLocation == 'submit') ? '<div class="j-tips inline p-bar js-onboarding-tip" style="top: -10px;"><div class="d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip"><h4 class="font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_alldone_label,[])) + '</h4><p class="font-color-meta">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_alldone_text,[])) + '</p></div><span class="j-tiparrow-e j-tarrow" style="top: 20px"></span></div>' : (opt_data.renderLocation == 'view-group') ? '<div class="j-pop js-pop popover js-onboarding-tip" style="position: absolute; top: 50px; left: 50%; margin-left: -175px; visibility: visible; z-index: 100;"><div class="j-tips wide j-banner-tip d-' + soy.$$escapeHtml(opt_data.renderLocation) + '-tip j-pop-main"><h4 class="j-qtip-header font-face-deco">' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_done_label,[])) + '</h4><p>' + soy.$$escapeHtml(jive.i18n.i18nText(opt_data.viewData.i18nData.create_group_done_text,[])) + '</p><p><button class="js-back-to-onb j-btn-callout close">' + soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg('global.ok'),[])) + '</button></p></div></div>' : '');
  return opt_sb ? '' : output.toString();
};

;
jive.namespace("Onboarding");define("apps/onboarding/views/create_group",["jquery","apps/onboarding/models/onboarding_source"],function(c,a){var b={};b.onboardingSource=new a();b.setupPage=function(g,e,f){b.stepID=g;b.viewData=e;if(c("#jive-socialgroup-desc").length){c("body").addClass("j-quest-active");var h;if(!f||f==="private"){if(!f){h=c("#jive-socialgroup-type-OPEN")}else{h=c("#jive-socialgroup-type-PRIVATE")}h.click();if(c.browser.msie&&+c.browser.version<=8){h.change()}setTimeout(function(){var j=c(jive.onbStep.create_group.pageTips({renderLocation:"group-type",viewData:b.viewData})),i=h.offset();c("body").prepend(j);j.css({position:"fixed",top:i.top-(j.outerHeight()/2)+"px",left:i.left-j.width()-60+"px","z-index":1002});j.addClass("j-pop");j.children("div").addClass("j-pop-main");j.children("span").css("top",((j.outerHeight()/2)-(j.children("span:first").outerHeight()/2))+"px");c(".js-about-form .j-aboutClose button").one("click",function(){b.closeTip()})},700)}else{if(f=="shared"){var d=c("#shared_checkbox");d.click();h=c("#jive-socialgroup-type-PRIVATE");h.click();if(c.browser.msie&&+c.browser.version<=8){h.change()}setTimeout(function(){var j=c(jive.onbStep.create_group.pageTips({renderLocation:"group-type",viewData:b.viewData}));var i=d.offset();c("body").prepend(j);j.css({position:"fixed",top:i.top-(j.outerHeight()/2)+"px",left:i.left-j.width()-60+"px","z-index":1002});j.addClass("j-pop");j.children("div").addClass("j-pop-main");j.children("span").css("top",((j.outerHeight()/2)-(j.children("span:first").outerHeight()/2))+"px");c(".js-about-form .j-aboutClose button").one("click",function(){b.closeTip()})},700)}}c("#jive-socialgroup-template").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-template",viewData:b.viewData})));c("#jive-socialgroup-name").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-name",viewData:b.viewData})));c("#jive-socialgroup-img").prepend(c(jive.onbStep.create_group.pageTips({renderLocation:"group-img",viewData:b.viewData})));c("input.j-btn-callout").before(c(jive.onbStep.create_group.pageTips({renderLocation:"submit",viewData:b.viewData})))}else{if(window.location.href.indexOf("/groups/")!=-1){require(["apps/shared/models/core_deferred"],function(i){i.getObject(containerType,containerID).pipe(function(k){if((!f&&(k.groupType==="OPEN"||k.groupType==="MEMBER_ONLY"))||(f==="private"&&(k.groupType==="PRIVATE"||k.groupType==="SECRET"))||(f==="shared"&&k.visibleToExternalContributors===true)){var l=c(jive.onbStep.create_group.pageTips({renderLocation:"view-group",viewData:b.viewData}));c("#jive-body").prepend(l);var j=c("body");j.on("click.postConfirmationTip",function(o){var m=c(o.target);if(!m.closest(".js-onboarding-tip").length||m.hasClass("js-back-to-onb")){j.off("click.postConfirmationTip");b.closeTip();if(m.hasClass("js-back-to-onb")){var n=jive.app.url({path:"/get-started"});window.location=n}}})}})})}}};b.closeTip=function(d){var e="div.js-onboarding-tip";if(d){e+="[data-location="+d+"]"}var f=c(e);if(f.length){f.each(function(){var h=c(this);var g=h.closest("div.js-pop").length;if(g.length){g.trigger("close");g.remove()}else{h.remove()}})}};return b});
;
var __slice=Array.prototype.slice,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp=Object.prototype.hasOwnProperty,__extends=function(d,b){for(var a in b){if(__hasProp.call(b,a)){d[a]=b[a]}}function c(){this.constructor=d}c.prototype=b.prototype;d.prototype=new c;d.__super__=b.prototype;return d};(function(a){var b;b=a.Wistia;if(!((a.Wistia!=null)&&(a.Wistia.wistia!=null))){a.Wistia={wistia:"1.0",extend:function(){var g,e,f,d,c;g=arguments[0],f=2<=arguments.length?__slice.call(arguments,1):[];if(!f.length){f=[g];g=this}for(d=0,c=f.length;d<c;d++){e=f[d];this.obj.eachDeep(e,__bind(function(i,j){var h;h=this.obj.get(g,j);if(this.obj.isArray(i)){if(this.obj.isEmpty(h)){return this.obj.set(g,j,[])}}else{if(this.obj.isObject(i)){if(this.obj.isEmpty(h)){return this.obj.set(g,j,{})}}else{return this.obj.set(g,j,i)}}},this))}return g},mixin:function(c,e){var d,f;for(d in e){f=e[d];if(e.hasOwnProperty(d)){c[d]=f}}},obj:{get:function(f,e,c){var d;if(typeof e==="string"){e=e.split(".")}else{e=e.slice(0,e.length)}while((f!=null)&&e.length){d=e.shift();if((f[d]===void 0||!this.isObject(f[d]))&&c){f[d]={}}f=f[d]}return f},set:function(e,d,c){var f;if(typeof d==="string"){d=d.split(".")}else{d=d.slice(0,d.length)}f=d.pop();e=this.get(e,d,true);if((e!=null)&&(this.isObject(e)||this.isArray(e))&&(f!=null)){if(c!=null){return e[f]=c}else{return delete e[f]}}else{}},unset:function(d,c){return this.set(d,c)},exists:function(d,c){return this.get(d,c)!==void 0},cast:function(c){if(c==null){return c}c=""+c;if(/^\d+?$/.test(c)){return parseInt(c,10)}else{if(/^\d*\.\d+/.test(c)){return parseFloat(c)}else{if(/^true$/i.test(c)){return true}else{if(/^false$/i.test(c)){return false}else{return c}}}}},castDeep:function(c){this.eachLeaf(c,__bind(function(d,e){if(typeof d==="string"){return this.set(c,e,this.cast(d))}},this));return c},isArray:function(c){return(c!=null)&&/^\s*function Array()/.test(c.constructor)},isObject:function(c){return(c!=null)&&/^\s*function Object()/.test(c.constructor)},isRegExp:function(c){return(c!=null)&&/^\s*function RegExp()/.test(c.constructor)},isBasicType:function(c){return(c!=null)&&(this.isRegExp(c)||/^string|number|boolean|function$/i.test(typeof c))},isEmpty:function(e){var c,d,f;if(!(e!=null)){return true}else{if(this.isArray(e)&&!e.length){return true}else{if(this.isObject(e)){c=true;for(d in e){f=e[d];c=false}return c}else{return false}}}},isEmptyDeep:function(d){var c;if(this.isEmpty(d)){return true}c=true;this.eachLeaf(d,__bind(function(){return c=false},this));return c},isSubsetDeep:function(e,d){var c;if(e===d){return true}if(((e!=null)&&!(d!=null))||(!(e!=null)&&(d!=null))){return false}c=true;this.eachLeaf(e,__bind(function(g,h){var f;f=this.get(d,h);if(g!==f){return c=false}},this));return c},equalsDeep:function(d,c){return this.isSubsetDeep(d,c)&&this.isSubsetDeep(c,d)},eachDeep:function(g,d,f){var c,e,h;if(f==null){f=[]}if(this.isBasicType(g)){d(g,f)}else{if(this.isObject(g)||this.isArray(g)){d(g,f);for(c in g){h=g[c];e=f.slice(0,f.length);e.push(c);this.eachDeep(h,d,e)}}else{d(g,f)}}},eachLeaf:function(d,c){return this.eachDeep(d,__bind(function(f,e){if(!this.isArray(f)&&!this.isObject(f)){return c(f,e)}},this))}},data:function(c,d){if(!this.obj.isArray(c)){c=c.split(".")}if(d!=null){this.obj.set(this,["_data"].concat(c),d)}return this.obj.get(this,["_data"].concat(c))},timeout:function(c,d,e){var f;if(e==null){e=1}this.clearTimeouts(c);if(!this.obj.isArray(c)){c=c.split(".")}c=["timeouts"].concat(c);if(d){f=setTimeout(__bind(function(){this.removeData(c);return d()},this),e);return this.data(c,f)}else{return this.data(c)}},clearTimeouts:function(c){var d;if(!this.obj.isArray(c)){c=c.split(".")}c=["timeouts"].concat(c);d=this.data(c);this.obj.eachLeaf(d,function(e){return clearTimeout(e)});return this.removeData(c)},removeData:function(c){return this.obj.unset(this,["_data"].concat(c))},seqId:function(e,f){var d,c,g;if(e==null){e="wistia_"}if(f==null){f=""}g=["sequence","val"];d=this.data(g)||1;c=e+d+f;this.data(g,d+1);return c},noConflict:function(){a.Wistia=b;return this},util:{elemHeight:function(d){var c;c=Wistia.detect.browser.quirks?parseInt(d.offsetHeight,10):a.getComputedStyle?parseInt(getComputedStyle(d,null).height,10):d.currentStyle?d.offsetHeight:-1;return c},elemWidth:function(c){if(Wistia.detect.browser.quirks){return parseInt(c.offsetWidth,10)}else{if(a.getComputedStyle){return parseInt(getComputedStyle(c,null).width,10)}else{if(c.currentStyle){return c.offsetWidth}else{return -1}}}},winHeight:function(){var c;return c=a.innerHeight?a.innerHeight:document.documentElement?document.documentElement.offsetHeight:document.body.offsetHeight},winWidth:function(){var c;return c=a.innerWidth?a.innerWidth:document.documentElement?document.documentElement.offsetWidth:document.body.offsetWidth}},bindable:{bind:function(c,d){if(!this._bindings){this._bindings={}}if(!this._bindings[c]){this._bindings[c]=[]}this._bindings[c].push(d);return this},unbind:function(e,h){var d,c,g,f;d=this._bindings[e];if(d){if(h){g=[];for(c=0,f=d.length;0<=f?c<f:c>f;0<=f?c++:c--){if(h!==d[c]){g.push(d[c])}}this._bindings[e]=g}else{this._bindings[e]=[]}}if(this._bindings[e]&&!this._bindings[e].length){this._bindings[e]=null;delete this._bindings[e]}return this},hasBindings:function(){var d,c,f,e;c=false;e=this._bindings;for(d in e){f=e[d];if(this._bindings.hasOwnProperty(d)){c=true}}return c},trigger:function(){var d,h,g,e,f,c;e=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if((h=this._bindings[e])){for(f=0,c=h.length;f<c;f++){g=h[f];if(g){g.apply(this,d)}}}return this}}}}if((b!=null)&&!(b.wistia!=null)){return Wistia.extend(b)}})(window);(function(a){a.extend({_detect:{na:navigator.userAgent,rwebkit:/(webkit)[ \/]([\w.]+)/i,ropera:/(opera)(?:.*version)?[ \/]([\w.]+)/i,rmsie:/(msie) ([\w.]+)/i,rmozilla:/(mozilla)(?:.*? rv:([\w.]+))?/i,randroid:/(android) ([^;])/i,riphone:/(iphone)/i,ripad:/(ipad)/i,browser:function(){return this.browserMatch()[1].toLowerCase()},browserVersion:function(){return this.browserMatch()[2]},browserMatch:function(){return this.na.match(this.rwebkit)||this.na.match(this.ropera)||this.na.match(this.rmsie)||this.na.match(this.rmozilla)},android:function(){var b;b=this.na.match(this.randroid);if(b==null){return false}return{version:b[2]}},iphone:function(){return this.riphone.test(this.na)},ipad:function(){return this.ripad.test(this.na)},flash:function(){var b;b=this.flashFullVersion();return{version:parseFloat(b[0]+"."+b[1]),major:parseInt(b[0],10),minor:parseInt(b[1],10),rev:parseInt(b[2],10)}},flashFullVersion:function(){var b;try{try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{b.AllowScriptAccess="always"}catch(c){return[6,0,0]}}catch(c){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(c){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}}catch(c){}}return[0,0,0]},html5Video:function(){var d,c,b;d=document.createElement("video");b=false;try{if(!!d.canPlayType){b={};c='video/mp4; codecs="avc1.42E01E';b.h264=!!d.canPlayType(c+'"')||!!d.canPlayType(c+', mp4a.40.2"')}}catch(f){b={h264:false}}return b}}});a.extend({detect:{browser:{version:a._detect.browserVersion(),quirks:a._detect.browser()==="msie"&&document.compatMode==="BackCompat",old:a._detect.browser()==="msie"&&(document.compatMode==="BackCompat"||a._detect.browserVersion()<7)},android:a._detect.android(),iphone:a._detect.iphone(),ipad:a._detect.ipad(),flash:a._detect.flash(),video:a._detect.html5Video()}});a.detect.browser[a._detect.browser()]=true})(Wistia);(function(a){var c,e,d,b;e=function(f){return f.mp4hq||f.flv||f.iphone};d=function(f){return f.mp4hq||f.iphone};c=function(f){return f.iphone};b=function(f){if(f.mp4hq&&f.mp4hq.width<=1280&&f.mp4hq.height<=720){return f.mp4hq}else{return f.iphone}};a.extend({judy:{judge:function(k,g){var h,j,i,f;if(!g){g={}}i=g.plea;j=g.force;f={media:k,plea:j||i,uuid:g.uuid||a.seqId("wistia_"),asset:null,embedType:null};h=k.assets;if(j==="html5"){f.embedType="html5";f.asset=d(h)}else{if(j==="flash"){f.embedType="flash";f.asset=e(h)}else{if(j==="external"){f.embedType="external";f.asset=c(h)}else{if(a.detect.iphone){f.embedType="html5";f.asset=c(h)}else{if(a.detect.ipad){f.embedType="html5";f.asset=b(h)}else{if(a.detect.android){f.embedType="external";f.asset=c(h)}else{if(i==="html5"&&a.detect.video.h264){f.embedType="html5";f.asset=d(h)}else{if(i==="flash"&&a.detect.flash.version>=7){f.embedType="flash";f.asset=e(h)}else{if(i==="external"){f.embedType="external";f.asset=c(h)}else{if(a.detect.flash.version>=7){f.embedType="flash";f.asset=e(h)}else{if(a.detect.video.h264){f.embedType="html5";f.asset=d(h)}else{if((a.detect.browser.msie&&(a.detect.browser.version<9||a.detect.browser.quirks))||a.detect.browser.mozilla){f.embedType="flash";f.asset=e(h)}else{f.embedType="external";f.asset=e(h)}}}}}}}}}}}}return f}}})})(Wistia);(function(a){a.extend({embed:function(f,e){var d,c,b;if(!e){e={}}b=new a._embed.Video({},e);a.data(["video",b.uuid],b);d=a._embed.getContainer(f,e);if(a.detect.browser.old){d.style.width=""+(a.util.elemWidth(d))+"px";d.style.height=""+(a.util.elemHeight(d))+"px"}if(a.gridify&&!b.params.noGrid){b.grid=a.gridify(b,d)}else{if(e.wmode!=="transparent"){d.style.backgroundColor="#000000"}}c=function(k){var i,j,l,g,h;if(k.error){if(typeof console!=="undefined"&&console!==null){console.log(k.error)}return}j=a.judy.judge(k,b.params);h=a._embed.classFor(j.embedType);g=new h(j,b.options);for(i in g){l=g[i];if(i!=="uuid"){b[i]=l}}b.embed()};setTimeout(function(){var g;if(typeof f==="string"){g=f;return a.remote.media(g,function(h){return c(h)})}else{return c(f)}},100);return b},_embed:{getContainer:function(c,b){if(typeof b.container==="string"){return document.getElementById(b.container)}else{if(typeof c==="string"){return document.getElementById("wistia_"+c)}else{if(c&&c.media){return document.getElementById("wistia_"+c.media.hashedId)}else{if(c&&c.hashedId){return document.getElementById("wistia_"+c.hashedId)}else{return null}}}}},classFor:function(b){switch(b){case"html5":return a._embed.Html5Video;case"flash":return a._embed.FlashVideo;case"external":return a._embed.ExternalVideo;default:return a._embed.Video}}}})})(Wistia);(function(a){var d,g,f,b,c,e;a.extend({util:{addInlineCss:function(k,h){var j,i;j=document.createElement("style");j.id=a.seqId("wistia_","_style");j.setAttribute("type","text/css");i=document.getElementsByTagName("style");k.appendChild(j,k.nextSibling);if(j.styleSheet){j.styleSheet.cssText=h}else{j.appendChild(document.createTextNode(h))}},objToHtml:function(n){var o,m,s,q,r,t,j,i,l,k,p,h;if(/string|number|boolean/.test(typeof n)){return n.toString()}if(n instanceof Array){t="";for(l=0,p=n.length;l<p;l++){q=n[l];t+=a.util.objToHtml(q)}return t}if(typeof n!=="object"){return n.toString()}m=[];for(r in n){i=n[r];if(r==="tagName"){j=i}else{if(r==="childNodes"){s=i}else{m.push({key:r,val:i})}}}j||(j="div");t="<"+j;for(k=0,h=m.length;k<h;k++){o=m[k];t+=" "+o.key+'="'+o.val+'"'}if(/^(br|hr|img|link|meta|input)$/i.test(j)){t+=" />"}else{t+=">";if(s){if(typeof s==="string"){t+=s}else{if(typeof s==="object"){t+=a.util.objToHtml(s)}}}t+="</"+j+">"}return t}}});b=function(j){var i,h,k;h=[];for(i in j){k=j[i];h.push(""+i+"="+(encodeURIComponent(k)))}return h.join("&")};c=function(i,h){return"display:inline-block;*display:inline;height:"+h+";margin:0;padding:0;position:relative;vertical-align:top;width:"+i+";zoom:1;"};g=function(o,q){var l,j,k,p,h,n,m,i;l=o.asset;h=o.media;q=a.extend({flashPlayerUrl:null,pageUrl:null,chromeless:false,doNotTrack:false,endVideoCallback:"",controlsVisibleOnLoad:false,autoLoad:false,autoPlay:false,endVideoBehavior:"default",playButton:true,wmode:"opaque",playerColor:"",smallPlayButton:true,volumeControl:false,playbar:true,fullscreenButton:true,stillUrl:h.assets.still?h.assets.still.url:""},q);q.unbufferedSeek=l.type==="flv";q.shouldTrack=!q.doNotTrack;k={videoUrl:l.url,hdUrl:h.assets.hdflv?h.assets.hdflv.url:"",stillUrl:q.stillUrl,unbufferedSeek:l.type==="flv",controlsVisibleOnLoad:q.controlsVisibleOnLoad,autoLoad:q.autoLoad,autoPlay:q.autoPlay&&!q.suppressAutoplay,endVideoBehavior:q.endVideoBehavior,playButtonVisible:q.playButton,mediaDuration:h.duration,customColor:q.playerColor,wemail:q.trackEmail,referrer:q.pageUrl,quality:q.videoQuality,chromeless:q.chromeless?true:null,endVideoCallback:q.endVideoCallback?q.endVideoCallback:null,showVolume:q.volumeControl?true:null,showPlaybar:q.playbar===false?false:null,showPlayButton:q.smallPlayButton===false?false:null,fullscreenDisabled:q.fullscreenButton===false?true:null,trackingTransmitInterval:q.trackingTransmitInterval?q.trackingTransmitInterval:null};if(q.shouldTrack){k.embedServiceURL=h.distilleryUrl;k.accountKey=h.accountKey;k.mediaID=h.mediaKey}for(p in k){i=k[p];if(i==null){delete k[p]}}n={tagName:"object",id:o.uuid,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",style:c("100%","100%")};if(q.wmode!=="transparent"){n.bgcolor="#000000"}m=[{tagName:"param",name:"movie",value:q.flashPlayerUrl||h.flashPlayerUrl},{tagName:"param",name:"allowfullscreen",value:"true"},{tagName:"param",name:"allowscriptaccess",value:"always"},{tagName:"param",name:"wmode",value:q.wmode},{tagName:"param",name:"flashvars",value:b(k)}];j={tagName:"embed",src:q.flashPlayerUrl||h.flashPlayerUrl,name:o.uuid,type:"application/x-shockwave-flash",allowfullscreen:"true",allowscriptaccess:"always",wmode:q.wmode,flashvars:b(k),style:c("100%","100%")};if(q.wmode!=="transparent"){j.bgcolor="#000000"}n.childNodes=m.concat(j);if(a.detect.browser.msie&&(a.detect.browser.version<9||a.detect.browser.quirks)){if(a.detect.flash.version<7){n.childNodes=[{style:"background:#666;color:#fff;height:100%;width:100%;","class":"noflash",childNodes:['Whoops! It looks like Flash isn\'t installed. Please \n<a href="http://get.adobe.com/flashplayer/" style="color:white;text-decoration:underline;" target="_blank">\ndownload and install Adobe\'s Flash Player plugin\n</a>\nto watch this video.']}]}}return a.util.objToHtml(n)};f=function(l,h){var j,m,i,k;j=l.asset;m=l.media;h=a.extend({autoLoad:true,autoPlay:false,doNotTrack:false,stillUrl:m.assets.still?m.assets.still.url:""},h);h.shouldTrack=!h.doNotTrack;k=document.createElement("video");k.style.width="100%";k.style.height="100%";k.style.position="relative";k.style.display="block";k.controls="controls";k.id=l.uuid;k.poster=h.stillUrl;k.preload="none";if(h.autoPlay&&!h.suppressAutoplay){k.autoplay="autoplay"}i=document.createElement("source");i.src=j.url.replace(/\.bin$/,"")+"/file.mp4";i.type="video/mp4";k.appendChild(i);return k};d=function(k,i){var h,j,l,m;j=k.asset;m=k.media;i=a.extend({playButton:true,stillUrl:m.assets.still?m.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1"):""},i);h={tagName:"a",href:j.url,id:k.uuid,target:"_parent",style:c("100%","100%")};l={tagName:"img",src:e(k,i),border:0,alt:"Play video",style:"height:100%;vertical-align:top;width:100%;"};h.childNodes=[l];return a.util.objToHtml(h)};e=function(i,h){var j;j=i.media;if(h.videoWidth&&h.videoHeight){if(h.playButton){return j.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1&image_crop_resized="+h.videoWidth+"x"+h.videoHeight)}else{return j.assets.still.url.replace(/\.bin$/,".jpg?image_crop_resized="+h.videoWidth+"x"+h.videoHeight)}}else{if(h.playButton){return j.assets.still.url.replace(/\.bin$/,".jpg?image_play_button=1")}else{return j.assets.still.url.replace(/\.bin$/,".jpg")}}};return a.extend({generate:{video:function(j,i,h){if(j==="flash"){return g(i,h)}else{if(j==="html5"){return f(i,h)}else{if(j==="external"){return d(i,h)}else{if(j==="stillUrl"){return e(i,h)}}}}}}})})(Wistia);(function(a){a._embed.Video=(function(){function b(e,d){var c;this.data=e;this.options=d;this.params=a.extend(this.params||{},this.options);this.params.container=a._embed.getContainer(this.data,this.options);if(this.options.platformPreference){this.params.plea=this.options.platformPreference}this.params.shouldTrack=!this.options.doNotTrack;if(this.options.playButtonVisible!=null){this.params.playButton=this.options.playButtonVisible}this.params.rawEmbed=top===self;if(this.params.videoWidth){this.params.videoWidth=parseInt(this.params.videoWidth,10)}if(this.params.videoHeight){this.params.videoHeight=parseInt(this.params.videoHeight,10)}this.params.aspectRatio=this.params.videoWidth/this.params.videoHeight;if(!this.params.playerColor){this.params.playerColor="636155"}if(!this.params.trackEmail){if((c=location.href.match(/wemail\=([^\&]+)/))!=null){this.params.trackEmail=c[1]}}if(!this.params.stillUrl){this.params.stillUrl=a.obj.exists(this.data,"media.assets.still.url")?this.data.media.assets.still.url:""}if(!this.params.uuid){this.params.uuid=a.seqId()}this.uuid=this.params.uuid}b.prototype.embed=function(){this.embedAs(this.embedType);return this.ready(__bind(function(){return this.monitorSize()},this))};b.prototype.monitorSize=function(){var d,g,f,e,c;f=__bind(function(){if(this.params.rawEmbed&&a.detect.browser.old){return this.width()}else{if(this.params.rawEmbed){return a.util.elemWidth(this.container)}else{return a.util.winWidth()}}},this);g=__bind(function(){if(this.params.rawEmbed&&a.detect.browser.old){return this.height()}else{if(this.params.rawEmbed){return a.util.elemHeight(this.container)}else{return a.util.winHeight()}}},this);c=f();e=g();d=__bind(function(){var i,h;h=f();i=g();if(c!==h){this.width(h);c=h}if(e!==i){this.height(i);e=i}a.timeout(""+this.uuid+".auto_resize",d,1000)},this);d()};b.prototype.embedAs=function(c){this.container=this.params.container;this.embedCode=a.generate.video(c,this.data,this.params);this.placeEmbed(this.embedCode);return this};b.prototype.placeEmbed=function(c){var d;d=(this.grid&&this.grid.center)||this.container;if(typeof c==="string"){d.innerHTML=c}else{d.innerHTML="";d.appendChild(c)}return this.ieSizeHack()};b.prototype.rebuildAs=function(i){var e,f,g,h,c,d;g=this.uuid;f=a.judy.judge(this.data.media,{force:i});d=a._embed.classFor(f.embedType);c=new d(f,this.options);for(e in c){h=c[e];this[e]=h}this.uuid=g;a.clearTimeouts(this.uuid);this._isReady=false;this.embed(this.params.container);return this};b.prototype.remove=function(){a.clearTimeouts(this.uuid);a._data.video[this.uuid]=null;delete a._data.video[this.uuid];this.container.innerHTML=""};b.prototype.bind=function(c,d){if(!this._bindings){this._bindings={}}if(!this._bindings[c]){this._bindings[c]=[]}this._bindings[c].push(d);return this};b.prototype.unbind=function(e,h){var d,c,g,f;d=this._bindings[e];if(d){if(h){g=[];for(c=0,f=d.length;0<=f?c<f:c>f;0<=f?c++:c--){if(h!==d[c]){g.push(d[c])}}this._bindings[e]=g}else{this._bindings[e]=[]}}if(this._bindings[e]&&!this._bindings[e].length){this._bindings[e]=null;delete this._bindings[e]}return this};b.prototype.hasBindings=function(){var d,c,f,e;c=false;e=this._bindings;for(d in e){f=e[d];if(this._bindings.hasOwnProperty(d)){c=true}}return c};b.prototype.trigger=function(){var d,h,g,e,f,c;e=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if((h=this._bindings[e])){for(f=0,c=h.length;f<c;f++){g=h[f];if(g){g.apply(this,d)}}}return this};b.prototype._eventLoopDuration=300;b.prototype.play=function(){return this.ready("play")};b.prototype.pause=function(){return this.ready("pause")};b.prototype.time=function(c){if(c!=null){this.ready("time",c);return this}else{}};b.prototype.state=function(){return"unknown"};b.prototype.duration=function(){return 0};b.prototype.getEventKey=function(){return null};b.prototype.volume=function(c){if(c!=null){return this.ready("volume",c)}else{return 0}};b.prototype.setPlayerColor=function(c){this.ready("setPlayerColor",c);return this};b.prototype.ready=function(){var d,h,e,g,c,f;h=arguments[0],d=2<=arguments.length?__slice.call(arguments,1):[];if(!this._readyQueue){this._readyQueue=[]}if(this._isReady){if(h){this._readyQueue.push({callback:h,args:d})}f=this._readyQueue;for(g=0,c=f.length;g<c;g++){e=f[g];if(typeof e.callback==="string"){this[e.callback].apply(this,e.args)}else{e.callback.apply(this,e.args)}}this._readyQueue=[]}else{if(h){this._readyQueue.push({callback:h,args:d})}}return this};b.prototype.width=function(d){var c;if(d!=null){d=parseInt(d,10);if(this.grid){this.container.style.width=this.grid.wrapper.style.width=""+d+"px";this.grid.center.style.width="100%";this.elem().style.width="100%";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.width=""+d+"px";this.elem().style.width="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemWidth(this.grid.left)+a.util.elemWidth(this.grid.center)+a.util.elemWidth(this.grid.right)}else{c=a.util.elemWidth(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.height=function(d){var c;if(d!=null){d=parseInt(d,10);if(this.grid){this.container.style.height=this.grid.wrapper.style.height=""+d+"px";this.grid.center.style.height="100%";this.elem().style.height="100%";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.height=""+d+"px";this.elem().style.height="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemHeight(this.grid.center)+Math.max(a.util.elemHeight(this.grid.above),a.util.elemHeight(this.grid.top))+Math.max(a.util.elemHeight(this.grid.below),a.util.elemHeight(this.grid.bottom))}else{c=a.util.elemHeight(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.videoWidth=function(d){var e,c;if(d!=null){d=parseInt(d,10);if(this.grid){this.grid.center.style.width="100%";this.grid.main.style.width=""+d+"px";this.grid.main.style.width=""+d+"px";e=a.util.elemWidth(this.grid.left)+a.util.elemWidth(this.grid.right);this.container.style.width=this.grid.wrapper.style.width=""+(d+e)+"px";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.width=""+d+"px";this.elem().style.width="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemWidth(this.grid.center)}else{c=a.util.elemWidth(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.videoHeight=function(f){var e,d,c,g;if(f!=null){f=parseInt(f,10);if(this.grid){this.grid.main.style.height=""+f+"px";this.grid.center.style.height="100%";this.grid.main.style.height=""+f+"px";g=Math.max(a.util.elemHeight(this.grid.above),a.util.elemHeight(this.grid.top));e=Math.max(a.util.elemHeight(this.grid.below),a.util.elemHeight(this.grid.bottom));d=g+e;this.container.style.height=this.grid.wrapper.style.height=""+(f+d)+"px";a.grid.fitHorizontal(this);a.grid.fitVertical(this)}else{this.container.style.height=""+f+"px";this.elem().style.height="100%"}return this}else{if(a.detect.browser.old){this.elem().style.position="absolute"}if(this.grid){c=a.util.elemHeight(this.grid.center)}else{c=a.util.elemHeight(this.container)}if(a.detect.browser.old){this.elem().style.position="static"}return c}};b.prototype.ieSizeHack=function(){if(a.detect.browser.msie&&this.elem&&this.elem()){if(this.elem().offsetLeft%2===0){this.elem().style.width=""+(this.videoWidth()+1)+"px"}else{this.elem().style.width="100%"}}};b.prototype.setEmail=function(c){return this.params.trackEmail=c};b.prototype.getVisitorKey=function(){if(this.tracker){return this.tracker.visitorKey()}else{return""}};b.prototype.getEventKey=function(){if(this.tracker){return this.tracker.eventKey()}else{return""}};return b})()})(Wistia);(function(a){a._embed.FlashVideo=(function(){__extends(b,a._embed.Video);function b(){b.__super__.constructor.apply(this,arguments)}b.prototype.embedType="flash";b.prototype.elem=function(){return document[this.data.uuid]};b.prototype.embed=function(){var c;b.__super__.embed.apply(this,arguments);this._lastTimePosition=0;a.timeout(""+this.uuid+".quick_repair",__bind(function(){if(this.isBroken()){a.clearTimeouts(this.uuid);this.repair()}},this),50);c=__bind(function(d){if(d>=50){return}if(this.elem()&&this.elem().getCurrentTime){if(!this.isBroken()){a.timeout(""+this.uuid+".ready_delay",__bind(function(){this._isReady=true;this.ready();this.listenForEvents();if(!this.tracker){return this.tracker=a.tracker(this)}},this),200)}}else{a.timeout(""+this.uuid+".ready_check",(__bind(function(){return c.call(this,d+1)},this)),200)}},this);c();return this};b.prototype.remove=function(){a.clearTimeouts(this.uuid);return b.__super__.remove.call(this)};b.prototype.listenForEvents=function(){this._fireIfChanged=__bind(function(){var d,c;if(!this.hasBindings()){return}a.timeout(""+this.uuid+".fire_if_changed",(__bind(function(){return this._fireIfChanged.call(this)},this)),this._eventLoopDuration);d=this.state();c=this.time();if(d!==this._lastState){if(d==="playing"){this.trigger("play")}else{if(d==="paused"){this.trigger("pause")}else{if(d==="ended"){this.trigger("end")}}}}if(c!==this._lastTimePosition){this.trigger("timechange",c);this._lastTimePosition=c}this._lastState=d},this);this._fireIfChanged.call(this)};b.prototype.bind=function(){var c;c=1<=arguments.length?__slice.call(arguments,0):[];b.__super__.bind.apply(this,c);if(a.timeout(""+this.uuid+".fire_if_changed")==null){if(!this._isReady){return this.ready("listenForEvents")}this.listenForEvents()}return this};b.prototype.play=function(){if(!this._isReady){return this.ready("play")}this.elem().videoPlay();return this};b.prototype.pause=function(){if(!this._isReady){return this.ready("pause")}this.elem().videoPause();return this};b.prototype.time=function(d){var g,c,f;if((d!=null)&&!this._isReady){return this.ready("time",d)}if(d!=null){f=this.state();if(f==="unknown"){this.elem().videoPlay();c=this;g=function(){c.unbind("timechange",g);return c.elem().videoSeek(d)};this.bind("timechange",g)}else{this.elem().videoSeek(d);if(f==="paused"||f==="ended"){this.pause()}}return this}else{try{return this.elem().getCurrentTime()}catch(h){return -1}}};b.prototype.state=function(){try{switch(this.elem().getCurrentState()){case 0:return"ended";case 1:return"playing";case 2:return"paused";default:return"unknown"}}catch(c){return"unknown"}};b.prototype.volume=function(d){var c;if(d&&!this._isReady){return this.ready("volume",d)}if(d!=null){this.elem().setVolume(Math.min(Math.round(d*100),100));return this}else{c=this.elem().getVolume();if(c>0){c/=100}return c}};b.prototype.duration=function(){return this.data.media.duration};b.prototype.outsideContainer=function(){var c;c=this.elem();while(c.nodeType===1){c=c.parentNode;if(c===this.container){return false}}return true};b.prototype.ctfBlocked=function(){return document.getElementById("CTFstack")&&this.outsideContainer()};b.prototype.chromeFlashBlocked=function(){var d,c;if(a.detect.browser.webkit&&this.elem()){d=this.elem().parentNode.previousSibling;if(d){c=d.childNodes[0]}return c&&c.getAttribute("style")&&c.getAttribute("style").indexOf("gofhjkjmkpinhpoiabjplobcaignabnl")!==-1}};b.prototype.ffFlashBlocked=function(){var c;c=this.container.childNodes[0];return c&&c.getAttribute("bgactive")&&c.getAttribute("bgactive").indexOf("flashblock")!==-1};b.prototype.isBlocked=function(){return a.detect.flash.version>=7&&(this.ctfBlocked()||this.chromeFlashBlocked())};b.prototype.isBroken=function(){return a.detect.flash.version<7||this.isBlocked()};b.prototype.repair=function(){if(this.isBlocked()&&a.detect.video.h264){a.clearTimeouts(this.uuid);this.rebuildAs("html5")}};b.prototype.getEventKey=function(){try{return this.elem().getEventKey()}catch(c){return""}};b.prototype.setPlayerColor=function(c){this.params.playerColor=c;if(this._isReady){this.elem().changeColor(c)}else{this.ready("setPlayerColor",c)}};b.prototype.setEmail=function(c){b.__super__.setEmail.call(this,c);return this.elem().setEmail(c)};return b})()})(Wistia);(function(a){var b;b=function(d,c,f){var e;e=__bind(function(){d.removeEventListener(c,e);return f()},this);d.addEventListener(c,e)};a._embed.Html5Video=(function(){__extends(c,a._embed.Video);function c(){c.__super__.constructor.apply(this,arguments)}c.prototype.embedType="html5";c.prototype.elem=function(){return document.getElementById(this.data.uuid)};c.prototype.embed=function(){c.__super__.embed.apply(this,arguments);if(this.hasPreRoll){this.embedExternal()}else{this.embedHtml5()}if(this.hasPostRoll){this.preloadStill();this.bind("end",__bind(function(){return this.embedExternal()},this))}return this};c.prototype.preloadStill=function(){var d;d=new Image();if(this.options.playButton){return d.src=a.generate.video("stillUrl",this.data,this.params)}else{return d.src=a.generate.video("stillUrl",this.data,this.params)}};c.prototype.embedExternal=function(){var d;if(this.tracker){this.tracker.stopMonitoring()}d=this.params.playButton;this.params.playButton=this.options.playButton;this.embedAs("external");this.params.playButton=d;a.timeout(""+this.uuid+".vid_ready",__bind(function(){this._isReady=true;return this.ready()},this));return this.elem().addEventListener("click",__bind(function(e){e.preventDefault();this.embedHtml5();return this.play()},this))};c.prototype.embedHtml5=function(){this._isReady=false;this.embedAs("external");this.embedAs("html5");if(!this.tracker){this.tracker=a.tracker(this)}if(this.params.shouldTrack){this.ready(__bind(function(){return this.tracker.monitor()},this))}this.elem().addEventListener("playing",(__bind(function(){return this.trigger("play")},this)));this.elem().addEventListener("pause",(__bind(function(){return this.trigger("pause")},this)));this.elem().addEventListener("ended",(__bind(function(){return this.trigger("end")},this)));a.timeout(""+this.uuid+".vid_ready",__bind(function(){this._isReady=true;return this.ready()},this));return this.listenForEvents()};c.prototype.remove=function(){a.clearTimeouts(this.uuid);return c.__super__.remove.call(this)};c.prototype.listenForEvents=function(){if(!this._bindings){this._bindings={}}this._fireIfChanged=__bind(function(){var d;if(!this.hasBindings()){return}a.timeout(""+this.uuid+".fire_if_changed",(__bind(function(){return this._fireIfChanged.call(this)},this)),this._eventLoopDuration);if((d=this.time())!==this._lastTimePosition){this.trigger("timechange",d);this._lastTimePosition=d}},this);this._fireIfChanged()};c.prototype.bind=function(){var d;d=1<=arguments.length?__slice.call(arguments,0):[];c.__super__.bind.apply(this,d);if(!a.timeout(""+this.uuid+".fire_if_changed")){this.listenForEvents()}return this};c.prototype.play=function(d){if(/video/i.test(this.elem().tagName)){if(!this._isReady){return this.ready("play")}this.elem().play()}else{this.embedHtml5();this.play()}return this};c.prototype.pause=function(){if(!this._isReady){return this.ready("pause")}this.elem().pause();return this};c.prototype.time=function(d){if(d&&!this._isReady){return this.ready("time",d)}if(d!=null){if(this.state()==="unknown"){b("playing",__bind(function(){b(this.elem(),"seeked",__bind(function(){return this.pause()},this));this.elem().currentTime=d},this));this.play()}else{this.elem().currentTime=d}return this}return this.elem().currentTime};c.prototype.state=function(){try{if(this.elem().ended){return"ended"}else{if(this.elem().played.length===0){return"paused"}else{if(this.elem().paused){return"paused"}else{return"playing"}}}}catch(d){return"unknown"}};c.prototype.volume=function(d){if(d&&!this._isReady){return this.ready("volume",d)}if(d!=null){this.elem().volume=d;return this}else{return this.elem().volume}};c.prototype.duration=function(){return this.data.media.duration};c.prototype.setPlayerColor=function(){};return c})()})(Wistia);(function(a){a._embed.ExternalVideo=(function(){__extends(b,a._embed.Video);function b(){b.__super__.constructor.apply(this,arguments)}b.prototype.embedType="external";b.prototype.elem=function(){return document.getElementById(this.data.uuid)};b.prototype.embed=function(c){b.__super__.embed.call(this,c);this.params.stillUrl=this.elem().childNodes[0].src;this.elem().addEventListener("click",__bind(function(){this.trigger("play");a.timeout(""+this.uuid+".fake_video_end",__bind(function(){return this.trigger("end")},this),500);return false},this));this._isReady=true;this.ready();return this};b.prototype.duration=function(){return this.data.media.duration};return b})()})(Wistia);(function(a){a.extend({tracker:function(c,b){return new a.VideoTracker(c,b||{})}});return a.VideoTracker=(function(){var i,f,h,k,d,b,g,c,e;c=g=b=e=function(){};d=false;f="";h="";i=0;k=[];function j(m,l){this.video=m;this.options=l;this.params=a.extend({transmitInterval:10000},this.options);k=[];i=new Date().getTime();this._eventKey=this.newEventKey();this._visitorKey=this.visitorKeyFromCookie()||this.newVisitorKey();this.log("initialized");if(this.video.embedType==="html5"){this.transmit()}this}j.prototype._dataPrefix=function(){var l;l='{\n"account_key":"'+this.video.data.media.accountKey+'",\n"session_id":"'+this._visitorKey+'",\n"media_id":"'+this.video.data.media.mediaKey+'",\n"event_key":"'+this._eventKey+'",\n"media_duration":'+(parseFloat(this.video.data.media.duration))+',\n"referrer":"'+(this.video.params.pageUrl||window.location.href)+'",';if(this.video.params.trackEmail){l+='"email":"'+this.video.params.trackEmail+'",'}l+='"event_details":[';return l};j.prototype._dataSuffix=function(){return"]}"};j.prototype.visitorKeyFromCookie=function(){var l,m,n;l=document.cookie.split("; ");m=0;while(m<l.length){n=l[m].split("=");if(n[0]==="__distillery"){return n[1]}m++}};j.prototype.newVisitorKey=function(){var l,m;m=(new Date().getTime()).toString()+"-"+Math.random();l=new Date();l.setTime(l.getTime()+(365*24*60*60*1000));document.cookie="__distillery="+m+"; expires="+(l.toGMTString())+"; path=/";return m};j.prototype.newEventKey=function(){if(this.video.embedType==="flash"){return this.video.getEventKey()}else{return(new Date().getTime()).toString()+"e"+Math.random()}};j.prototype.monitor=function(){c=__bind(function(){this.log("play")},this);g=__bind(function(){if(Math.abs(this.video.duration()-this.video.time())>0.3){this.log("pause")}},this);b=__bind(function(){this.log("end");this.transmit()},this);e=__bind(function(l){if(Math.abs(this.video._lastTimePosition-l)>=5){this.log("seek")}},this);d=true;this.video.bind("play",c);this.video.bind("pause",g);this.video.bind("end",b);this.video.bind("timechange",e);a.timeout(""+this.uuid+".start_tracking_timeout",__bind(function(){var l;l=__bind(function(){if(this.video.state()==="playing"){this.log("update")}this.transmit();return a.timeout(""+this.uuid+".tracking_loop",l,this.params.transmitInterval)},this);a.timeout(""+this.uuid+".tracking_loop",l,this.params.transmitInterval);this.transmit()},this),Math.random()*this.params.transmitInterval+1000);if(this.video.state()==="playing"){c()}};j.prototype.stopMonitoring=function(){d=false;this.video.unbind("play",c);this.video.unbind("pause",g);this.video.unbind("end",b);this.video.unbind("timechange",e)};j.prototype.postToDistillery=function(l){a.remote.post(""+this.video.data.media.distilleryUrl+"?data="+(encodeURIComponent(l)))};j.prototype.transmit=function(){var l;if(this.video.params.doNotTrack){return}if(k.length!==0){l=this._dataPrefix()+k.join(",")+this._dataSuffix();this.postToDistillery(a.base64.encode(l));k=[]}};j.prototype.log=function(l){var n,m;if(this.video.params.doNotTrack){return}m=this.video.time();if(m==null){if(this.video.state()==="unknown"){m=0}else{m=this.video.duration()}}m=m.toFixed(1);n=(new Date().getTime())-i;k.push('{\n"key":"'+l+'",\n"value":'+m+',\n"timeDelta":'+n+"\n}")};j.prototype.visitorKey=function(){return this._visitorKey};j.prototype.eventKey=function(){return this._eventKey};return j})()})(Wistia);Wistia.extend({base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var k,h,f,j,g,e,d,b,a;b=0;a="";while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a}}});(function(a){return a.extend({constant:{embedHost:"fast.wistia.com"},remote:{post:function(c){var b;b=window.XDomainRequest?new window.XDomainRequest():new window.XMLHttpRequest();b.open("POST",c,true);b.send()},media:function(b,d){var c;if(a.data(["remote-media",b])){a.timeout("remote-media."+b+"."+(a.seqId()),function(){return d(a.data(["remote-media",b]))})}else{c=""+window.location.protocol+"//"+a.constant.embedHost+"/embed/medias/"+b+".json";this.fetch(c,{},function(e){if(e.error){a.data(["remote-media",b],e);d(e)}else{a.data(["remote-media",b],e.media);d(e.media)}},{onerror:function(){if(window.console){console.log("Timed out fetching "+c)}},timeout:10000})}},playlist:function(c,d){var b;if(a.data(["remote-playlist",c])){a.timeout("remote-playlist."+c+"."+(a.seqId()),function(){return d(a.data(["remote-playlist",c]))})}else{b=""+window.location.protocol+"//"+a.constant.embedHost+"/embed/playlists/"+c+".json";this.fetch(b,{},function(e){a.data(["remote-playlist",c],e);d(e)},{onerror:function(){if(window.console){console.log("Timed out fetching "+b)}},timeout:10000})}},fetch:function(c,e,f,b){var d;if(!b.timeout){b.timeout=5000}if(!b.onerror){b.onerror=(function(){})}d=setTimeout(b.onerror,b.timeout);a.jsonp.get(c,e,function(g){clearTimeout(d);if(f){f(g)}})}}})})(Wistia);if(!Wistia.jsonp){Wistia.jsonp=(function(){var a=0,c,f,b,d=this;function e(j){var i=document.createElement("script"),h=false;i.src=j;i.async=true;i.onload=i.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;i.onload=i.onreadystatechange=null;if(i&&i.parentNode){i.parentNode.removeChild(i)}}};if(!c){c=document.getElementsByTagName("head")[0]}c.appendChild(i)}function g(h,j,k){f="?";j=j||{};for(b in j){if(j.hasOwnProperty(b)){f+=encodeURIComponent(b)+"="+encodeURIComponent(j[b])+"&"}}var i="json"+(++a);d[i]=function(l){k(l);try{delete d[i]}catch(m){}d[i]=null};e(h+f+"callback="+i);return i}return{get:g}}())}(function(a){if(!a.Plugin){a.Plugin={}}a.Plugin.Base=(function(){function b(){this.pluginName="plugin";this}b.prototype.instances=function(){return a.data(["plugins",this.pluginName,this.video.uuid])};b.prototype.register=function(c){this.video.plugins[this.uuid]=c;return a.data(["plugins",this.pluginName,this.video.uuid,this.uuid],c)};b.prototype.remove=function(){this.video.plugins[this.uuid]=null;a.removeData(["plugins",this.pluginName,this.video.uuid,this.uuid]);delete this.video.plugins[this.uuid];if(this.video.grid){a.grid.fitHorizontal(this.video);return a.grid.fitVertical(this.video)}};b.prototype.fit=function(){};b.prototype.init=function(c,d){if(c.plugins==null){c.plugins={}}this.video=c;this.options=d||{};this.params=a.extend({},d||{});return this.uuid=this.params.uuid||a.seqId("wistia_","_plugin")};return b})();return a.extend({plugin:{init:function(g,f,e){var c,b,d;d=g.charAt(0).toUpperCase()+g.substr(1);b=a.Plugin[d];c=new b();c.init(f,e);return c},instance:function(c,b,d){return a.data(["plugins",c,b.uuid,d])},remove:function(d,b,e){var c;if((c=this.instance(d,b,e))!=null){c.remove()}},isActive:function(c,b,d){return !!this.instance(c,b,d)}}})})(Wistia);
;
jive.namespace("Onboarding");define("apps/onboarding/onboarding_main",["jquery"],function(a){return jive.oo.Class.extend(function(b){this.init=function(d){var c=this;c.trialVideos=[];c.resourcesInitialized=false;c.trialBean=d.trialBean;c.instanceInfoView=d.instanceInfoView;c.trialAdminData=d.trialAdminData;c.instanceURL=d.instanceURL;c.daysRemaining=d.daysRemaining;c.trialProgress=d.trialProgress;c.communityName=d.communityName;var e=a.deparam.querystring();this.initActiveQuestID();if(e.fromQ){if(e.fromQ=="WorkBetterAsATeamQuest"||e.fromQ=="HaveFewerMeetingsQuest"||e.fromQ=="LessEmailQuest"||e.fromQ=="StayInTouchQuest"||e.fromQ=="CommunityFeedbackQuest"){c.initTrialResources(false,e)}else{require(["apps/onboarding/models/onboarding_source"],function(f){c.onboardingSource=new f();c.onboardingSource.getStepData(e.fromQ).addCallback(function(g){if(g.type){require(["apps/onboarding/views/"+g.type],function(h){if(h&&h.setupPage){h.setupPage(e.fromQ,g)}})}})})}}if(c.trialBean.trialProgress.questCompletionTips.userTips.length){c.showProgressTips(c.trialBean.trialProgress.questCompletionTips)}};this.initTrialResources=function(e,d){var c=this;require(["apps/trial/views/trial_view","apps/trial/views/trial_tip_helper","apps/trial/models/trial_panel_source","apps/onboarding/models/onboarding_source","apps/shared/controllers/switchboard","apps/metric/models/metric_source"],function(k,j,i,g,f,h){c.onboardingSource=new g();c.metricSource=new h();c.trialSource=new i();c.trialView=new k();c.trialView.addListener("saveLastViewedQuest",function(l){c.trialSource.saveLastViewedQuest(l)}).addListener("saveProgress",function(l){c.trialSource.saveProgress(l)}).addListener("clearUserTipQueue",function(){c.trialSource.clearUserTipQueue()}).addListener("metric",function(m,l){c.metricSource.metric({metricName:m,metricValues:l})});c.trialTipHelper=new j({communityName:c.instanceInfoView.rootCommunityName});c.trialTipHelper.addListener("shouldSetupPage",function(l,m,n){c.trialSource.getShouldShowTips(l,m).addCallback(function(o){if(o){c.activeQuestID=l;c.activeQuestStep=m}else{c.initActiveQuestID()}n.emitSuccess(o)})}).addListener("clearActiveQuest",function(){c.initActiveQuestID()}).addListener("getAllQuestProgressData",function(l){c.trialSource.get("panel").addCallback(function(m){l.emitSuccess(m)})});jive.dispatcher.listen("trial.updatePercentComplete",function(){c.onboardingSource.initializeView().addCallback(function(l){f.emit("onboarding.state.update",l)});c.trialSource.get("percentComplete").addCallback(function(l){if(l.questCompletionTips.userTips.length){c.showProgressTips(l.questCompletionTips)}})});if(e){c.trialView.postRender()}c.resourcesInitialized=true})};this.postPageRender=function(e){var d=this,c=e.valueCaseName,g=e.videoID,f=function(m){var k=a(jive.onboarding.onboardingProgress({percentComplete:m.percentComplete}));a("#j-onboarding-progress").replaceWith(k);if(m.percentComplete==100){a("#j-onboarding .j-onb-quest-header .js-hide-onb").show()}for(var o=0,p=m.quests.length;o<p;o++){for(var n=0,l=m.quests[o].steps.length;n<l;n++){if(m.quests[o].steps[n].state==="completed"){var h=a('#j-onboarding .js-quest-step a[data-id="'+m.quests[o].steps[n].name+'"]');if(!h.hasClass("completed")){h.addClass("completed");h.prepend(jive.onbStep.startStep.completedAriaLabel())}}}}};if(c=="trial"){if(!d.resourcesInitialized){d.initTrialResources(true,{},false)}else{d.trialView.postRender()}d.$questBodies=a("div.collaboration");d.$questHeaders=a("a.js-quest-group-header");a(".js-quest-group-header").click(function(h){h.preventDefault();var i=a(this);if(!i.hasClass("j-active")){d.$questHeaders.removeClass("j-active font-color-normal");i.addClass("j-active font-color-normal");d.$questBodies.hide();d.$questBodies.filter("[data-id="+i.data("id")+"]").show();d.onboardingSource.saveLastViewedQuest(""+i.data("id"))}})}else{if(g!="video"){d.video=Wistia.embed(g,{videoWidth:"570",videoHeight:"365",controlsVisibleOnLoad:true})}}a("div.js-trial-tip, div.js-onboarding-tip").remove();jive.switchboard.removeListener("onboarding.state.update",f).addListener("onboarding.state.update",f);a("#j-onboarding").off().on("click",".js-do-step",function(k){k.preventDefault();var i=a(this),h=i.data("type"),j=i.data("id");require(["apps/onboarding/views/"+h],function(l){l.startStep(j,d.instanceInfoView,i)})}).on("click",".js-hide-onb",function(h){h.preventDefault();require(["apps/onboarding/models/onboarding_source"],function(i){d.onboardingSource=new i();d.onboardingSource.setOnboardingVisible(false).addCallback(function(){jive.HomeNav.GlobalController.hideView("onboarding");var j=a(jive.onboarding.postHideViewTip());j.popover({context:a("#j-satNav"),container:a(".js-satellite-nav-container")});$j("body").one("click",function(){j.trigger("close")})})})}).on("click",".js-onb-show-intro-modal",function(h){h.preventDefault();jive.HomeNav.GlobalController.showOnboardingIntroModal(true)}).on("click",".js-onb-show-welcome-modal",function(h){h.preventDefault();jive.HomeNav.GlobalController.showOnboardingIntroModal(false)})};this.showProgressTips=function(g){var c=this,d=null;if(g.userTips.length){$j("div.js-trial-tip").remove();for(var f=0,e=g.questCompletionData.length;f<e;f++){if(!g.questCompletionData[f].completed){d=g.questCompletionData[f].questName;break}}}for(f=0,tipsLength=g.userTips.length;f<tipsLength;f++){if(g.userTips[f]!="jive.trial.quests.fewerMeetings.questReadyToComplete"||tipsLength==1){var h=$j(jive.trial.renderProgressTip({template:g.userTips[f],nextQuestID:d}));h.delegate("#quest-complete-close","click",function(i){i.preventDefault();$j("div.js-trial-tip").remove()});$j("body").prepend(h);require(["apps/trial/models/trial_panel_source"],function(i){c.trialSource=new i();c.trialSource.clearUserTipQueue()})}}$j("html, body").animate({scrollTop:0},"fast")};b.initActiveQuestID=function(){this.activeQuestID="";this.activeQuestStep=null};this.getActiveQuestAndStep=function(){return{activeQuestID:this.activeQuestID,activeQuestStep:this.activeQuestStep}};this.tearDownView=function(){if(this.trialView){this.trialView.tearDown()}if(this.video&&this.video._isReady){this.video.remove()}}})});
;
